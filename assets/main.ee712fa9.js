var e=Object.defineProperty,t=(t,n,r)=>(((t,n,r)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r})(t,"symbol"!=typeof n?n+"":n,r),r);import{_ as n,a as r,b as i,c as a,i as o,d as s,e as l,f as u,t as c,l as d,g as p,h as f,j as h,k as m,m as v,n as g,o as y,p as b,q as w,r as _,s as x,S as k,u as A,v as E,w as I,x as S,y as R,z as C,A as O,T as D,B as j,V as T,E as P,M,J as L,H as $,C as N,I as B,O as U,D as F,F as z,G as q,K as V,L as Q,N as H,P as G,Q as W,R as J,U as K,W as Y,X as Z,Z as X,$ as ee,a0 as te,a1 as ne,a2 as re,a3 as ie,a4 as ae,a5 as oe,a6 as se,a7 as le,a8 as ue,a9 as ce,aa as de,ab as pe,ac as fe,ad as he,ae as me,af as ve,ag as ge,ah as ye,ai as be,aj as we,ak as _e,al as xe,am as ke,an as Ae,ao as Ee,ap as Ie,aq as Se,ar as Re,as as Ce,at as Oe,au as De,av as je,aw as Te,ax as Pe,ay as Me,az as Le,aA as $e,aB as Ne,aC as Be,aD as Ue,aE as Fe,aF as ze,aG as qe,aH as Ve,aI as Qe,aJ as He,aK as Ge,aL as We,aM as Je,aN as Ke,aO as Ye,aP as Ze,aQ as Xe,aR as et,aS as tt}from"./noeldemartin-utils.esm.913e4d55.js";function nt(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}const rt=nt(`itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`);function it(e){return!!e||""===e}function at(e){if(Et(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=Ot(r)?lt(r):at(r);if(i)for(const e in i)t[e]=i[e]}return t}return Ot(e)||jt(e)?e:void 0}const ot=/;(?![^(]*\))/g,st=/:(.+)/;function lt(e){const t={};return e.split(ot).forEach((e=>{if(e){const n=e.split(st);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function ut(e){let t="";if(Ot(e))t=e;else if(Et(e))for(let n=0;n<e.length;n++){const r=ut(e[n]);r&&(t+=r+" ")}else if(jt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function ct(e,t){if(e===t)return!0;let n=Rt(e),r=Rt(t);if(n||r)return!(!n||!r)&&e.getTime()===t.getTime();if(n=Et(e),r=Et(t),n||r)return!(!n||!r)&&function(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=ct(e[r],t[r]);return n}(e,t);if(n=jt(e),r=jt(t),n||r){if(!n||!r)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){const r=e.hasOwnProperty(n),i=t.hasOwnProperty(n);if(r&&!i||!r&&i||!ct(e[n],t[n]))return!1}}return String(e)===String(t)}function dt(e,t){return e.findIndex((e=>ct(e,t)))}const pt=e=>null==e?"":Et(e)||jt(e)&&(e.toString===Pt||!Ct(e.toString))?JSON.stringify(e,ft,2):String(e),ft=(e,t)=>t&&t.__v_isRef?ft(e,t.value):It(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:St(t)?{[`Set(${t.size})`]:[...t.values()]}:!jt(t)||Et(t)||Lt(t)?t:String(t),ht={},mt=[],vt=()=>{},gt=()=>!1,yt=/^on[^a-z]/,bt=e=>yt.test(e),wt=e=>e.startsWith("onUpdate:"),_t=Object.assign,xt=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},kt=Object.prototype.hasOwnProperty,At=(e,t)=>kt.call(e,t),Et=Array.isArray,It=e=>"[object Map]"===Mt(e),St=e=>"[object Set]"===Mt(e),Rt=e=>e instanceof Date,Ct=e=>"function"==typeof e,Ot=e=>"string"==typeof e,Dt=e=>"symbol"==typeof e,jt=e=>null!==e&&"object"==typeof e,Tt=e=>jt(e)&&Ct(e.then)&&Ct(e.catch),Pt=Object.prototype.toString,Mt=e=>Pt.call(e),Lt=e=>"[object Object]"===Mt(e),$t=e=>Ot(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,Nt=nt(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Bt=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Ut=/-(\w)/g,Ft=Bt((e=>e.replace(Ut,((e,t)=>t?t.toUpperCase():"")))),zt=/\B([A-Z])/g,qt=Bt((e=>e.replace(zt,"-$1").toLowerCase())),Vt=Bt((e=>e.charAt(0).toUpperCase()+e.slice(1))),Qt=Bt((e=>e?`on${Vt(e)}`:``)),Ht=(e,t)=>!Object.is(e,t),Gt=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Wt=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Jt=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Kt;let Yt;const Zt=[];class Xt{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&Yt&&(this.parent=Yt,this.index=(Yt.scopes||(Yt.scopes=[])).push(this)-1)}run(e){if(this.active)try{return this.on(),e()}finally{this.off()}}on(){this.active&&(Zt.push(this),Yt=this)}off(){this.active&&(Zt.pop(),Yt=Zt[Zt.length-1])}stop(e){if(this.active){if(this.effects.forEach((e=>e.stop())),this.cleanups.forEach((e=>e())),this.scopes&&this.scopes.forEach((e=>e.stop(!0))),this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}const en=e=>{const t=new Set(e);return t.w=0,t.n=0,t},tn=e=>(e.w&on)>0,nn=e=>(e.n&on)>0,rn=new WeakMap;let an=0,on=1;const sn=30,ln=[];let un;const cn=Symbol(""),dn=Symbol("");class pn{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],function(e,t){(t=t||Yt)&&t.active&&t.effects.push(e)}(this,n)}run(){if(!this.active)return this.fn();if(!ln.length||!ln.includes(this))try{return ln.push(un=this),mn.push(hn),hn=!0,on=1<<++an,an<=sn?(({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=on})(this):fn(this),this.fn()}finally{an<=sn&&(e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];tn(i)&&!nn(i)?i.delete(e):t[n++]=i,i.w&=~on,i.n&=~on}t.length=n}})(this),on=1<<--an,gn(),ln.pop();const e=ln.length;un=e>0?ln[e-1]:void 0}}stop(){this.active&&(fn(this),this.onStop&&this.onStop(),this.active=!1)}}function fn(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let hn=!0;const mn=[];function vn(){mn.push(hn),hn=!1}function gn(){const e=mn.pop();hn=void 0===e||e}function yn(e,t,n){if(!bn())return;let r=rn.get(e);r||rn.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=en()),wn(i)}function bn(){return hn&&void 0!==un}function wn(e,t){let n=!1;an<=sn?nn(e)||(e.n|=on,n=!tn(e)):n=!e.has(un),n&&(e.add(un),un.deps.push(e))}function _n(e,t,n,r,i,a){const o=rn.get(e);if(!o)return;let s=[];if("clear"===t)s=[...o.values()];else if("length"===n&&Et(e))o.forEach(((e,t)=>{("length"===t||t>=r)&&s.push(e)}));else switch(void 0!==n&&s.push(o.get(n)),t){case"add":Et(e)?$t(n)&&s.push(o.get("length")):(s.push(o.get(cn)),It(e)&&s.push(o.get(dn)));break;case"delete":Et(e)||(s.push(o.get(cn)),It(e)&&s.push(o.get(dn)));break;case"set":It(e)&&s.push(o.get(cn))}if(1===s.length)s[0]&&xn(s[0]);else{const e=[];for(const t of s)t&&e.push(...t);xn(en(e))}}function xn(e,t){for(const n of Et(e)?e:[...e])(n!==un||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const kn=nt(`__proto__,__v_isRef,__isVue`),An=new Set(Object.getOwnPropertyNames(Symbol).map((e=>Symbol[e])).filter(Dt)),En=On(),In=On(!1,!0),Sn=On(!0),Rn=Cn();function Cn(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=hr(this);for(let t=0,i=this.length;t<i;t++)yn(n,0,t+"");const r=n[t](...e);return-1===r||!1===r?n[t](...e.map(hr)):r}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){vn();const n=hr(this)[t].apply(this,e);return gn(),n}})),e}function On(e=!1,t=!1){return function(n,r,i){if("__v_isReactive"===r)return!e;if("__v_isReadonly"===r)return e;if("__v_isShallow"===r)return t;if("__v_raw"===r&&i===(e?t?ar:ir:t?rr:nr).get(n))return n;const a=Et(n);if(!e&&a&&At(Rn,r))return Reflect.get(Rn,r,i);const o=Reflect.get(n,r,i);if(Dt(r)?An.has(r):kn(r))return o;if(e||yn(n,0,r),t)return o;if(wr(o)){return!a||!$t(r)?o.value:o}return jt(o)?e?lr(o):sr(o):o}}function Dn(e=!1){return function(t,n,r,i){let a=t[n];if(dr(a)&&wr(a)&&!wr(r))return!1;if(!e&&!dr(r)&&(pr(r)||(r=hr(r),a=hr(a)),!Et(t)&&wr(a)&&!wr(r)))return a.value=r,!0;const o=Et(t)&&$t(n)?Number(n)<t.length:At(t,n),s=Reflect.set(t,n,r,i);return t===hr(i)&&(o?Ht(r,a)&&_n(t,"set",n,r):_n(t,"add",n,r)),s}}const jn={get:En,set:Dn(),deleteProperty:function(e,t){const n=At(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&_n(e,"delete",t,void 0),r},has:function(e,t){const n=Reflect.has(e,t);return Dt(t)&&An.has(t)||yn(e,0,t),n},ownKeys:function(e){return yn(e,0,Et(e)?"length":cn),Reflect.ownKeys(e)}},Tn={get:Sn,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},Pn=_t({},jn,{get:In,set:Dn(!0)}),Mn=e=>e,Ln=e=>Reflect.getPrototypeOf(e);function $n(e,t,n=!1,r=!1){const i=hr(e=e["__v_raw"]),a=hr(t);t!==a&&!n&&yn(i,0,t),!n&&yn(i,0,a);const{has:o}=Ln(i),s=r?Mn:n?gr:vr;return o.call(i,t)?s(e.get(t)):o.call(i,a)?s(e.get(a)):void(e!==i&&e.get(t))}function Nn(e,t=!1){const n=this["__v_raw"],r=hr(n),i=hr(e);return e!==i&&!t&&yn(r,0,e),!t&&yn(r,0,i),e===i?n.has(e):n.has(e)||n.has(i)}function Bn(e,t=!1){return e=e["__v_raw"],!t&&yn(hr(e),0,cn),Reflect.get(e,"size",e)}function Un(e){e=hr(e);const t=hr(this);return Ln(t).has.call(t,e)||(t.add(e),_n(t,"add",e,e)),this}function Fn(e,t){t=hr(t);const n=hr(this),{has:r,get:i}=Ln(n);let a=r.call(n,e);a||(e=hr(e),a=r.call(n,e));const o=i.call(n,e);return n.set(e,t),a?Ht(t,o)&&_n(n,"set",e,t):_n(n,"add",e,t),this}function zn(e){const t=hr(this),{has:n,get:r}=Ln(t);let i=n.call(t,e);i||(e=hr(e),i=n.call(t,e)),r&&r.call(t,e);const a=t.delete(e);return i&&_n(t,"delete",e,void 0),a}function qn(){const e=hr(this),t=0!==e.size,n=e.clear();return t&&_n(e,"clear",void 0,void 0),n}function Vn(e,t){return function(n,r){const i=this,a=i["__v_raw"],o=hr(a),s=t?Mn:e?gr:vr;return!e&&yn(o,0,cn),a.forEach(((e,t)=>n.call(r,s(e),s(t),i)))}}function Qn(e,t,n){return function(...r){const i=this["__v_raw"],a=hr(i),o=It(a),s="entries"===e||e===Symbol.iterator&&o,l="keys"===e&&o,u=i[e](...r),c=n?Mn:t?gr:vr;return!t&&yn(a,0,l?dn:cn),{next(){const{value:e,done:t}=u.next();return t?{value:e,done:t}:{value:s?[c(e[0]),c(e[1])]:c(e),done:t}},[Symbol.iterator](){return this}}}}function Hn(e){return function(...t){return"delete"!==e&&this}}function Gn(){const e={get(e){return $n(this,e)},get size(){return Bn(this)},has:Nn,add:Un,set:Fn,delete:zn,clear:qn,forEach:Vn(!1,!1)},t={get(e){return $n(this,e,!1,!0)},get size(){return Bn(this)},has:Nn,add:Un,set:Fn,delete:zn,clear:qn,forEach:Vn(!1,!0)},n={get(e){return $n(this,e,!0)},get size(){return Bn(this,!0)},has(e){return Nn.call(this,e,!0)},add:Hn("add"),set:Hn("set"),delete:Hn("delete"),clear:Hn("clear"),forEach:Vn(!0,!1)},r={get(e){return $n(this,e,!0,!0)},get size(){return Bn(this,!0)},has(e){return Nn.call(this,e,!0)},add:Hn("add"),set:Hn("set"),delete:Hn("delete"),clear:Hn("clear"),forEach:Vn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((i=>{e[i]=Qn(i,!1,!1),n[i]=Qn(i,!0,!1),t[i]=Qn(i,!1,!0),r[i]=Qn(i,!0,!0)})),[e,n,t,r]}const[Wn,Jn,Kn,Yn]=Gn();function Zn(e,t){const n=t?e?Yn:Kn:e?Jn:Wn;return(t,r,i)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get(At(n,r)&&r in t?n:t,r,i)}const Xn={get:Zn(!1,!1)},er={get:Zn(!1,!0)},tr={get:Zn(!0,!1)},nr=new WeakMap,rr=new WeakMap,ir=new WeakMap,ar=new WeakMap;function or(e){return e["__v_skip"]||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>Mt(e).slice(8,-1))(e))}function sr(e){return dr(e)?e:ur(e,!1,jn,Xn,nr)}function lr(e){return ur(e,!0,Tn,tr,ir)}function ur(e,t,n,r,i){if(!jt(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const a=i.get(e);if(a)return a;const o=or(e);if(0===o)return e;const s=new Proxy(e,2===o?r:n);return i.set(e,s),s}function cr(e){return dr(e)?cr(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function dr(e){return!(!e||!e["__v_isReadonly"])}function pr(e){return!(!e||!e["__v_isShallow"])}function fr(e){return cr(e)||dr(e)}function hr(e){const t=e&&e["__v_raw"];return t?hr(t):e}function mr(e){return Wt(e,"__v_skip",!0),e}const vr=e=>jt(e)?sr(e):e,gr=e=>jt(e)?lr(e):e;function yr(e){bn()&&((e=hr(e)).dep||(e.dep=en()),wn(e.dep))}function br(e,t){(e=hr(e)).dep&&xn(e.dep)}function wr(e){return Boolean(e&&!0===e.__v_isRef)}function _r(e){return xr(e,!1)}function xr(e,t){return wr(e)?e:new kr(e,t)}class kr{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:hr(e),this._value=t?e:vr(e)}get value(){return yr(this),this._value}set value(e){e=this.__v_isShallow?e:hr(e),Ht(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:vr(e),br(this))}}function Ar(e){return wr(e)?e.value:e}const Er={get:(e,t,n)=>Ar(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return wr(i)&&!wr(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Ir(e){return cr(e)?e:new Proxy(e,Er)}class Sr{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:t,set:n}=e((()=>yr(this)),(()=>br(this)));this._get=t,this._set=n}get value(){return this._get()}set value(e){this._set(e)}}class Rr{constructor(e,t,n,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new pn(e,(()=>{this._dirty||(this._dirty=!0,br(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!r,this["__v_isReadonly"]=n}get value(){const e=hr(this);return yr(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Cr(e,t,n,r){let i;try{i=r?e(...r):e()}catch(a){handleError(a,t,n)}return i}function Or(e,t,n,r){if(Ct(e)){const i=Cr(e,t,n,r);return i&&Tt(i)&&i.catch((e=>{handleError(e,t,n)})),i}const i=[];for(let a=0;a<e.length;a++)i.push(Or(e[a],t,n,r));return i}function handleError(e,t,n,r=!0){t&&t.vnode;if(t){let r=t.parent;const i=t.proxy,a=n;for(;r;){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,i,a))return;r=r.parent}const o=t.appContext.config.errorHandler;if(o)return void Cr(o,null,10,[e,i,a])}!function logError(e,t,n,r=!0){console.error(e)}(e,0,0,r)}Promise.resolve();let Dr=!1,jr=!1;const Tr=[];let Pr=0;const Mr=[];let Lr=null,$r=0;const Nr=[];let Br=null,Ur=0;const Fr=Promise.resolve();let zr=null,qr=null;function Vr(e){const t=zr||Fr;return e?t.then(this?e.bind(this):e):t}function Qr(e){Tr.length&&Tr.includes(e,Dr&&e.allowRecurse?Pr+1:Pr)||e===qr||(null==e.id?Tr.push(e):Tr.splice(function(e){let t=Pr+1,n=Tr.length;for(;t<n;){const r=t+n>>>1;Kr(Tr[r])<e?t=r+1:n=r}return t}(e.id),0,e),Hr())}function Hr(){Dr||jr||(jr=!0,zr=Fr.then(Yr))}function Gr(e,t,n,r){Et(e)?n.push(...e):t&&t.includes(e,e.allowRecurse?r+1:r)||n.push(e),Hr()}function Wr(e,t=null){if(Mr.length){for(qr=t,Lr=[...new Set(Mr)],Mr.length=0,$r=0;$r<Lr.length;$r++)Lr[$r]();Lr=null,$r=0,qr=null,Wr(e,t)}}function Jr(e){if(Nr.length){const e=[...new Set(Nr)];if(Nr.length=0,Br)return void Br.push(...e);for(Br=e,Br.sort(((e,t)=>Kr(e)-Kr(t))),Ur=0;Ur<Br.length;Ur++)Br[Ur]();Br=null,Ur=0}}const Kr=e=>null==e.id?1/0:e.id;function Yr(e){jr=!1,Dr=!0,Wr(e),Tr.sort(((e,t)=>Kr(e)-Kr(t)));try{for(Pr=0;Pr<Tr.length;Pr++){const e=Tr[Pr];e&&!1!==e.active&&Cr(e,null,14)}}finally{Pr=0,Tr.length=0,Jr(),Dr=!1,zr=null,(Tr.length||Mr.length||Nr.length)&&Yr(e)}}function Zr(e,t,...n){const r=e.vnode.props||ht;let i=n;const a=t.startsWith("update:"),o=a&&t.slice(7);if(o&&o in r){const e=`${"modelValue"===o?"model":o}Modifiers`,{number:t,trim:a}=r[e]||ht;a?i=n.map((e=>e.trim())):t&&(i=n.map(Jt))}let s,l=r[s=Qt(t)]||r[s=Qt(Ft(t))];!l&&a&&(l=r[s=Qt(qt(t))]),l&&Or(l,e,6,i);const u=r[s+`Once`];if(u){if(e.emitted){if(e.emitted[s])return}else e.emitted={};e.emitted[s]=!0,Or(u,e,6,i)}}function Xr(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(void 0!==i)return i;const a=e.emits;let o={},s=!1;if(!Ct(e)){const r=e=>{const n=Xr(e,t,!0);n&&(s=!0,_t(o,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return a||s?(Et(a)?a.forEach((e=>o[e]=null)):_t(o,a),r.set(e,o),o):(r.set(e,null),null)}function ei(e,t){return!(!e||!bt(t))&&(t=t.slice(2).replace(/Once$/,""),At(e,t[0].toLowerCase()+t.slice(1))||At(e,qt(t))||At(e,t))}let ti=null,ni=null;function ri(e){const t=ti;return ti=e,ni=e&&e.type.__scopeId||null,t}function ii(e,t=ti,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&Wa(-1);const i=ri(t),a=e(...n);return ri(i),r._d&&Wa(1),a};return r._n=!0,r._c=!0,r._d=!0,r}function ai(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:a,propsOptions:[o],slots:s,attrs:l,emit:u,render:c,renderCache:d,data:p,setupState:f,ctx:h,inheritAttrs:m}=e;let v,g;const y=ri(e);try{if(4&n.shapeFlag){const e=i||r;v=uo(c.call(e,e,d,a,f,p,h)),g=l}else{const e=t;v=uo(e.length>1?e(a,0?{get attrs(){return l},slots:s,emit:u}:{attrs:l,slots:s,emit:u}):e(a,null)),g=t.props?l:oi(l)}}catch(w){Va.length=0,handleError(w,e,1),v=io(za)}let b=v;if(g&&!1!==m){const e=Object.keys(g),{shapeFlag:t}=b;e.length&&t&(1|6)&&(o&&e.some(wt)&&(g=si(g,o)),b=ao(b,g))}return n.dirs&&(b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),v=b,ri(y),v}const oi=e=>{let t;for(const n in e)("class"===n||"style"===n||bt(n))&&((t||(t={}))[n]=e[n]);return t},si=(e,t)=>{const n={};for(const r in e)wt(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function li(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const a=r[i];if(t[a]!==e[a]&&!ei(n,a))return!0}return!1}function ui(e,t){if(Eo){let n=Eo.provides;const r=Eo.parent&&Eo.parent.provides;r===n&&(n=Eo.provides=Object.create(r)),n[e]=t}else;}function ci(e,t,n=!1){const r=Eo||ti;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Ct(t)?t.call(r.proxy):t}}function di(e,t){return hi(e,null,t)}const pi={};function fi(e,t,n){return hi(e,t,n)}function hi(e,t,{immediate:n,deep:r,flush:i,onTrack:a,onTrigger:o}=ht){const s=Eo;let l,u,c=!1,d=!1;if(wr(e)?(l=()=>e.value,c=pr(e)):cr(e)?(l=()=>e,r=!0):Et(e)?(d=!0,c=e.some(cr),l=()=>e.map((e=>wr(e)?e.value:cr(e)?gi(e):Ct(e)?Cr(e,s,2):void 0))):l=Ct(e)?t?()=>Cr(e,s,2):()=>{if(!s||!s.isUnmounted)return u&&u(),Or(e,s,3,[p])}:vt,t&&r){const e=l;l=()=>gi(e())}let p=e=>{u=v.onStop=()=>{Cr(e,s,4)}};if(Do)return p=vt,t?n&&Or(t,s,3,[l(),d?[]:void 0,p]):l(),vt;let f=d?[]:pi;const h=()=>{if(v.active)if(t){const e=v.run();(r||c||(d?e.some(((e,t)=>Ht(e,f[t]))):Ht(e,f))||0)&&(u&&u(),Or(t,s,3,[e,f===pi?void 0:f,p]),f=e)}else v.run()};let m;h.allowRecurse=!!t,m="sync"===i?h:"post"===i?()=>xa(h,s&&s.suspense):()=>{!s||s.isMounted?function(e){Gr(e,Lr,Mr,$r)}(h):h()};const v=new pn(l,m);return t?n?h():f=v.run():"post"===i?xa(v.run.bind(v),s&&s.suspense):v.run(),()=>{v.stop(),s&&s.scope&&xt(s.scope.effects,v)}}function mi(e,t,n){const r=this.proxy,i=Ot(e)?e.includes(".")?vi(r,e):()=>r[e]:e.bind(r,r);let a;Ct(t)?a=t:(a=t.handler,n=t);const o=Eo;So(this);const s=hi(i,a.bind(r),n);return o?So(o):Ro(),s}function vi(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function gi(e,t){if(!jt(e)||e["__v_skip"])return e;if((t=t||new Set).has(e))return e;if(t.add(e),wr(e))gi(e.value,t);else if(Et(e))for(let n=0;n<e.length;n++)gi(e[n],t);else if(St(e)||It(e))e.forEach((e=>{gi(e,t)}));else if(Lt(e))for(const n in e)gi(e[n],t);return e}function yi(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return $i((()=>{e.isMounted=!0})),Ui((()=>{e.isUnmounting=!0})),e}const bi=[Function,Array],wi={name:`BaseTransition`,props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:bi,onEnter:bi,onAfterEnter:bi,onEnterCancelled:bi,onBeforeLeave:bi,onLeave:bi,onAfterLeave:bi,onLeaveCancelled:bi,onBeforeAppear:bi,onAppear:bi,onAfterAppear:bi,onAppearCancelled:bi},setup(e,{slots:t}){const n=Io(),r=yi();let i;return()=>{const a=t.default&&Ii(t.default(),!0);if(!a||!a.length)return;const o=hr(e),{mode:s}=o,l=a[0];if(r.isLeaving)return ki(l);const u=Ai(l);if(!u)return ki(l);const c=xi(u,o,r,n);Ei(u,c);const d=n.subTree,p=d&&Ai(d);let f=!1;const{getTransitionKey:h}=u.type;if(h){const e=h();void 0===i?i=e:e!==i&&(i=e,f=!0)}if(p&&p.type!==za&&(!Xa(u,p)||f)){const e=xi(p,o,r,n);if(Ei(p,e),"out-in"===s)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,n.update()},ki(l);"in-out"===s&&u.type!==za&&(e.delayLeave=(e,t,n)=>{_i(r,p)[String(p.key)]=p,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=n})}return l}}};function _i(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function xi(e,t,n,r){const{appear:i,mode:a,persisted:o=!1,onBeforeEnter:s,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:d,onLeave:p,onAfterLeave:f,onLeaveCancelled:h,onBeforeAppear:m,onAppear:v,onAfterAppear:g,onAppearCancelled:y}=t,b=String(e.key),w=_i(n,e),_=(e,t)=>{e&&Or(e,r,9,t)},x={mode:a,persisted:o,beforeEnter(t){let r=s;if(!n.isMounted){if(!i)return;r=m||s}t._leaveCb&&t._leaveCb(!0);const a=w[b];a&&Xa(e,a)&&a.el._leaveCb&&a.el._leaveCb(),_(r,[t])},enter(e){let t=l,r=u,a=c;if(!n.isMounted){if(!i)return;t=v||l,r=g||u,a=y||c}let o=!1;const s=e._enterCb=t=>{o||(o=!0,_(t?a:r,[e]),x.delayedLeave&&x.delayedLeave(),e._enterCb=void 0)};t?(t(e,s),t.length<=1&&s()):s()},leave(t,r){const i=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return r();_(d,[t]);let a=!1;const o=t._leaveCb=n=>{a||(a=!0,r(),_(n?h:f,[t]),t._leaveCb=void 0,w[i]===e&&delete w[i])};w[i]=e,p?(p(t,o),p.length<=1&&o()):o()},clone:e=>xi(e,t,n,r)};return x}function ki(e){if(Ci(e))return(e=ao(e)).children=null,e}function Ai(e){return Ci(e)?e.children?e.children[0]:void 0:e}function Ei(e,t){6&e.shapeFlag&&e.component?Ei(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ii(e,t=!1){let n=[],r=0;for(let i=0;i<e.length;i++){const a=e[i];a.type===Ua?(128&a.patchFlag&&r++,n=n.concat(Ii(a.children,t))):(t||a.type!==za)&&n.push(a)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}function Si(e){return Ct(e)?{setup:e,name:e.name}:e}const Ri=e=>!!e.type.__asyncLoader,Ci=e=>e.type.__isKeepAlive;function Oi(e,t){ji(e,"a",t)}function Di(e,t){ji(e,"da",t)}function ji(e,t,n=Eo){const r=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(Pi(t,r,n),n){let e=n.parent;for(;e&&e.parent;)Ci(e.parent.vnode)&&Ti(r,t,n,e),e=e.parent}}function Ti(e,t,n,r){const i=Pi(t,e,r,!0);Fi((()=>{xt(r[t],i)}),n)}function Pi(e,t,n=Eo,r=!1){if(n){const i=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...r)=>{if(n.isUnmounted)return;vn(),So(n);const i=Or(t,n,e,r);return Ro(),gn(),i});return r?i.unshift(a):i.push(a),a}}const Mi=e=>(t,n=Eo)=>(!Do||"sp"===e)&&Pi(e,t,n),Li=Mi("bm"),$i=Mi("m"),Ni=Mi("bu"),Bi=Mi("u"),Ui=Mi("bum"),Fi=Mi("um"),zi=Mi("sp"),qi=Mi("rtg"),Vi=Mi("rtc");function Qi(e,t=Eo){Pi("ec",e,t)}let Hi=!0;function Gi(e){const t=Ki(e),n=e.proxy,r=e.ctx;Hi=!1,t.beforeCreate&&Wi(t.beforeCreate,e,"bc");const{data:i,computed:a,methods:o,watch:s,provide:l,inject:u,created:c,beforeMount:d,mounted:p,beforeUpdate:f,updated:h,activated:m,deactivated:v,beforeDestroy:g,beforeUnmount:y,destroyed:b,unmounted:w,render:_,renderTracked:x,renderTriggered:k,errorCaptured:A,serverPrefetch:E,expose:I,inheritAttrs:S,components:R,directives:C,filters:O}=t;if(u&&function(e,t,n=vt,r=!1){Et(e)&&(e=ea(e));for(const i in e){const n=e[i];let a;a=jt(n)?"default"in n?ci(n.from||i,n.default,!0):ci(n.from||i):ci(n),wr(a)&&r?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e}):t[i]=a}}(u,r,null,e.appContext.config.unwrapInjectedRef),o)for(const j in o){const e=o[j];Ct(e)&&(r[j]=e.bind(n))}if(i){const t=i.call(n,n);jt(t)&&(e.data=sr(t))}if(Hi=!0,a)for(const j in a){const e=a[j],t=Ct(e)?e.bind(n,n):Ct(e.get)?e.get.bind(n,n):vt,i=!Ct(e)&&Ct(e.set)?e.set.bind(n):vt,o=Lo({get:t,set:i});Object.defineProperty(r,j,{enumerable:!0,configurable:!0,get:()=>o.value,set:e=>o.value=e})}if(s)for(const j in s)Ji(s[j],r,n,j);if(l){const e=Ct(l)?l.call(n):l;Reflect.ownKeys(e).forEach((t=>{ui(t,e[t])}))}function D(e,t){Et(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(c&&Wi(c,e,"c"),D(Li,d),D($i,p),D(Ni,f),D(Bi,h),D(Oi,m),D(Di,v),D(Qi,A),D(Vi,x),D(qi,k),D(Ui,y),D(Fi,w),D(zi,E),Et(I))if(I.length){const t=e.exposed||(e.exposed={});I.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});_&&e.render===vt&&(e.render=_),null!=S&&(e.inheritAttrs=S),R&&(e.components=R),C&&(e.directives=C)}function Wi(e,t,n){Or(Et(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function Ji(e,t,n,r){const i=r.includes(".")?vi(n,r):()=>n[r];if(Ot(e)){const n=t[e];Ct(n)&&fi(i,n)}else if(Ct(e))fi(i,e.bind(n));else if(jt(e))if(Et(e))e.forEach((e=>Ji(e,t,n,r)));else{const r=Ct(e.handler)?e.handler.bind(n):t[e.handler];Ct(r)&&fi(i,r,e)}}function Ki(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:o}}=e.appContext,s=a.get(t);let l;return s?l=s:i.length||n||r?(l={},i.length&&i.forEach((e=>Yi(l,e,o,!0))),Yi(l,t,o)):l=t,a.set(t,l),l}function Yi(e,t,n,r=!1){const{mixins:i,extends:a}=t;a&&Yi(e,a,n,!0),i&&i.forEach((t=>Yi(e,t,n,!0)));for(const o in t)if(r&&"expose"===o);else{const r=Zi[o]||n&&n[o];e[o]=r?r(e[o],t[o]):t[o]}return e}const Zi={data:Xi,props:na,emits:na,methods:na,computed:na,beforeCreate:ta,created:ta,beforeMount:ta,mounted:ta,beforeUpdate:ta,updated:ta,beforeDestroy:ta,beforeUnmount:ta,destroyed:ta,unmounted:ta,activated:ta,deactivated:ta,errorCaptured:ta,serverPrefetch:ta,components:na,directives:na,watch:function(e,t){if(!e)return t;if(!t)return e;const n=_t(Object.create(null),e);for(const r in t)n[r]=ta(e[r],t[r]);return n},provide:Xi,inject:function(e,t){return na(ea(e),ea(t))}};function Xi(e,t){return t?e?function(){return _t(Ct(e)?e.call(this,this):e,Ct(t)?t.call(this,this):t)}:t:e}function ea(e){if(Et(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ta(e,t){return e?[...new Set([].concat(e,t))]:t}function na(e,t){return e?_t(_t(Object.create(null),e),t):t}function ra(e,t,n,r=!1){const i={},a={};Wt(a,eo,1),e.propsDefaults=Object.create(null),ia(e,t,i,a);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=r?i:ur(i,!1,Pn,er,rr):e.type.props?e.props=i:e.props=a,e.attrs=a}function ia(e,t,n,r){const[i,a]=e.propsOptions;let o,s=!1;if(t)for(let l in t){if(Nt(l))continue;const u=t[l];let c;i&&At(i,c=Ft(l))?a&&a.includes(c)?(o||(o={}))[c]=u:n[c]=u:ei(e.emitsOptions,l)||l in r&&u===r[l]||(r[l]=u,s=!0)}if(a){const t=hr(n),r=o||ht;for(let o=0;o<a.length;o++){const s=a[o];n[s]=aa(i,t,s,r[s],e,!At(r,s))}}return s}function aa(e,t,n,r,i,a){const o=e[n];if(null!=o){const e=At(o,"default");if(e&&void 0===r){const e=o.default;if(o.type!==Function&&Ct(e)){const{propsDefaults:a}=i;n in a?r=a[n]:(So(i),r=a[n]=e.call(null,t),Ro())}else r=e}o[0]&&(a&&!e?r=!1:!o[1]||""!==r&&r!==qt(n)||(r=!0))}return r}function oa(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const a=e.props,o={},s=[];let l=!1;if(!Ct(e)){const r=e=>{l=!0;const[n,r]=oa(e,t,!0);_t(o,n),r&&s.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!a&&!l)return r.set(e,mt),mt;if(Et(a))for(let c=0;c<a.length;c++){const e=Ft(a[c]);sa(e)&&(o[e]=ht)}else if(a)for(const c in a){const e=Ft(c);if(sa(e)){const t=a[c],n=o[e]=Et(t)||Ct(t)?{type:t}:t;if(n){const t=ca(Boolean,n.type),r=ca(String,n.type);n[0]=t>-1,n[1]=r<0||t<r,(t>-1||At(n,"default"))&&s.push(e)}}}const u=[o,s];return r.set(e,u),u}function sa(e){return"$"!==e[0]}function la(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function ua(e,t){return la(e)===la(t)}function ca(e,t){return Et(t)?t.findIndex((t=>ua(t,e))):Ct(t)&&ua(t,e)?0:-1}const da=e=>"_"===e[0]||"$stable"===e,pa=e=>Et(e)?e.map(uo):[uo(e)],fa=(e,t,n)=>{const r=ii(((...e)=>pa(t(...e))),n);return r._c=!1,r},ha=(e,t,n)=>{const r=e._ctx;for(const i in e){if(da(i))continue;const n=e[i];if(Ct(n))t[i]=fa(0,n,r);else if(null!=n){const e=pa(n);t[i]=()=>e}}},ma=(e,t)=>{const n=pa(t);e.slots.default=()=>n};function va(e,t){if(null===ti)return e;const n=ti.proxy,r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[e,a,o,s=ht]=t[i];Ct(e)&&(e={mounted:e,updated:e}),e.deep&&gi(a),r.push({dir:e,instance:n,value:a,oldValue:void 0,arg:o,modifiers:s})}return e}function ga(e,t,n,r){const i=e.dirs,a=t&&t.dirs;for(let o=0;o<i.length;o++){const s=i[o];a&&(s.oldValue=a[o].value);let l=s.dir[r];l&&(vn(),Or(l,n,8,[e.el,s,e,t]),gn())}}function ya(){return{app:null,config:{isNativeTag:gt,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ba=0;function wa(e,t){return function(n,r=null){null==r||jt(r)||(r=null);const i=ya(),a=new Set;let o=!1;const s=i.app={_uid:ba++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Uo,get config(){return i.config},set config(e){},use:(e,...t)=>(a.has(e)||(e&&Ct(e.install)?(a.add(e),e.install(s,...t)):Ct(e)&&(a.add(e),e(s,...t))),s),mixin:e=>(i.mixins.includes(e)||i.mixins.push(e),s),component:(e,t)=>t?(i.components[e]=t,s):i.components[e],directive:(e,t)=>t?(i.directives[e]=t,s):i.directives[e],mount(a,l,u){if(!o){const c=io(n,r);return c.appContext=i,l&&t?t(c,a):e(c,a,u),o=!0,s._container=a,a.__vue_app__=s,Mo(c.component)||c.component.proxy}},unmount(){o&&(e(null,s._container),delete s._container.__vue_app__)},provide:(e,t)=>(i.provides[e]=t,s)};return s}}function _a(e,t,n,r,i=!1){if(Et(e))return void e.forEach(((e,a)=>_a(e,t&&(Et(t)?t[a]:t),n,r,i)));if(Ri(r)&&!i)return;const a=4&r.shapeFlag?Mo(r.component)||r.component.proxy:r.el,o=i?null:a,{i:s,r:l}=e,u=t&&t.r,c=s.refs===ht?s.refs={}:s.refs,d=s.setupState;if(null!=u&&u!==l&&(Ot(u)?(c[u]=null,At(d,u)&&(d[u]=null)):wr(u)&&(u.value=null)),Ct(l))Cr(l,s,12,[o,c]);else{const t=Ot(l),r=wr(l);if(t||r){const r=()=>{if(e.f){const n=t?c[l]:l.value;i?Et(n)&&xt(n,a):Et(n)?n.includes(a)||n.push(a):t?c[l]=[a]:(l.value=[a],e.k&&(c[e.k]=l.value))}else t?(c[l]=o,At(d,l)&&(d[l]=o)):wr(l)&&(l.value=o,e.k&&(c[e.k]=o))};o?(r.id=-1,xa(r,n)):r()}}}const xa=function(e,t){t&&t.pendingBranch?Et(e)?t.effects.push(...e):t.effects.push(e):Gr(e,Br,Nr,Ur)};function ka(e){return function(e,t){(Kt||(Kt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})).__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:a,createText:o,createComment:s,setText:l,setElementText:u,parentNode:c,nextSibling:d,setScopeId:p=vt,cloneNode:f,insertStaticContent:h}=e,m=(e,t,n,r=null,i=null,a=null,o=!1,s=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!Xa(e,t)&&(r=q(e),N(e,i,a,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:u,ref:c,shapeFlag:d}=t;switch(u){case Fa:v(e,t,n,r);break;case za:g(e,t,n,r);break;case qa:null==e&&y(t,n,r,o);break;case Ua:R(e,t,n,r,i,a,o,s,l);break;default:1&d?_(e,t,n,r,i,a,o,s,l):6&d?C(e,t,n,r,i,a,o,s,l):(64&d||128&d)&&u.process(e,t,n,r,i,a,o,s,l,Q)}null!=c&&i&&_a(c,e&&e.ref,a,t||e,!t)},v=(e,t,r,i)=>{if(null==e)n(t.el=o(t.children),r,i);else{const n=t.el=e.el;t.children!==e.children&&l(n,t.children)}},g=(e,t,r,i)=>{null==e?n(t.el=s(t.children||""),r,i):t.el=e.el},y=(e,t,n,r)=>{[e.el,e.anchor]=h(e.children,t,n,r,e.el,e.anchor)},b=({el:e,anchor:t},r,i)=>{let a;for(;e&&e!==t;)a=d(e),n(e,r,i),e=a;n(t,r,i)},w=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=d(e),r(e),e=n;r(t)},_=(e,t,n,r,i,a,o,s,l)=>{o=o||"svg"===t.type,null==e?x(t,n,r,i,a,o,s,l):E(e,t,i,a,o,s,l)},x=(e,t,r,o,s,l,c,d)=>{let p,h;const{type:m,props:v,shapeFlag:g,transition:y,patchFlag:b,dirs:w}=e;if(e.el&&void 0!==f&&-1===b)p=e.el=f(e.el);else{if(p=e.el=a(e.type,l,v&&v.is,v),8&g?u(p,e.children):16&g&&A(e.children,p,null,o,s,l&&"foreignObject"!==m,c,d),w&&ga(e,null,o,"created"),v){for(const t in v)"value"===t||Nt(t)||i(p,t,null,v[t],l,e.children,o,s,z);"value"in v&&i(p,"value",null,v.value),(h=v.onVnodeBeforeMount)&&ho(h,o,e)}k(p,e,e.scopeId,c,o)}w&&ga(e,null,o,"beforeMount");const _=(!s||s&&!s.pendingBranch)&&y&&!y.persisted;_&&y.beforeEnter(p),n(p,t,r),((h=v&&v.onVnodeMounted)||_||w)&&xa((()=>{h&&ho(h,o,e),_&&y.enter(p),w&&ga(e,null,o,"mounted")}),s)},k=(e,t,n,r,i)=>{if(n&&p(e,n),r)for(let a=0;a<r.length;a++)p(e,r[a]);if(i){if(t===i.subTree){const t=i.vnode;k(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},A=(e,t,n,r,i,a,o,s,l=0)=>{for(let u=l;u<e.length;u++){const l=e[u]=s?co(e[u]):uo(e[u]);m(null,l,t,n,r,i,a,o,s)}},E=(e,t,n,r,a,o,s)=>{const l=t.el=e.el;let{patchFlag:c,dynamicChildren:d,dirs:p}=t;c|=16&e.patchFlag;const f=e.props||ht,h=t.props||ht;let m;n&&Aa(n,!1),(m=h.onVnodeBeforeUpdate)&&ho(m,n,t,e),p&&ga(t,e,n,"beforeUpdate"),n&&Aa(n,!0);const v=a&&"foreignObject"!==t.type;if(d?I(e.dynamicChildren,d,l,n,r,v,o):s||P(e,t,l,null,n,r,v,o,!1),c>0){if(16&c)S(l,t,f,h,n,r,a);else if(2&c&&f.class!==h.class&&i(l,"class",null,h.class,a),4&c&&i(l,"style",f.style,h.style,a),8&c){const o=t.dynamicProps;for(let t=0;t<o.length;t++){const s=o[t],u=f[s],c=h[s];c===u&&"value"!==s||i(l,s,u,c,a,e.children,n,r,z)}}1&c&&e.children!==t.children&&u(l,t.children)}else s||null!=d||S(l,t,f,h,n,r,a);((m=h.onVnodeUpdated)||p)&&xa((()=>{m&&ho(m,n,t,e),p&&ga(t,e,n,"updated")}),r)},I=(e,t,n,r,i,a,o)=>{for(let s=0;s<t.length;s++){const l=e[s],u=t[s],d=l.el&&(l.type===Ua||!Xa(l,u)||l.shapeFlag&(6|64))?c(l.el):n;m(l,u,d,null,r,i,a,o,!0)}},S=(e,t,n,r,a,o,s)=>{if(n!==r){for(const l in r){if(Nt(l))continue;const u=r[l],c=n[l];u!==c&&"value"!==l&&i(e,l,c,u,s,t.children,a,o,z)}if(n!==ht)for(const l in n)Nt(l)||l in r||i(e,l,n[l],null,s,t.children,a,o,z);"value"in r&&i(e,"value",n.value,r.value)}},R=(e,t,r,i,a,s,l,u,c)=>{const d=t.el=e?e.el:o(""),p=t.anchor=e?e.anchor:o("");let{patchFlag:f,dynamicChildren:h,slotScopeIds:m}=t;m&&(u=u?u.concat(m):m),null==e?(n(d,r,i),n(p,r,i),A(t.children,r,p,a,s,l,u,c)):f>0&&64&f&&h&&e.dynamicChildren?(I(e.dynamicChildren,h,r,a,s,l,u),(null!=t.key||a&&t===a.subTree)&&Ea(e,t,!0)):P(e,t,r,p,a,s,l,u,c)},C=(e,t,n,r,i,a,o,s,l)=>{t.slotScopeIds=s,null==e?512&t.shapeFlag?i.ctx.activate(t,n,r,o,l):O(t,n,r,i,a,o,l):D(e,t,l)},O=(e,t,n,r,i,a,o)=>{const s=e.component=function(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||ko,a={uid:Ao++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Xt(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:oa(r,i),emitsOptions:Xr(r,i),emit:null,emitted:null,propsDefaults:ht,inheritAttrs:r.inheritAttrs,ctx:ht,data:ht,props:ht,attrs:ht,slots:ht,refs:ht,setupState:ht,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};a.ctx={_:a},a.root=t?t.root:a,a.emit=Zr.bind(null,a),e.ce&&e.ce(a);return a}(e,r,i);if(Ci(e)&&(s.ctx.renderer=Q),function(e,t=!1){Do=t;const{props:n,children:r}=e.vnode,i=Co(e);ra(e,n,i,t),((e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=hr(t),Wt(t,"_",n)):ha(t,e.slots={})}else e.slots={},t&&ma(e,t);Wt(e.slots,eo,1)})(e,r);const a=i?function(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=mr(new Proxy(e.ctx,xo));const{setup:r}=n;if(r){const n=e.setupContext=r.length>1?Po(e):null;So(e),vn();const i=Cr(r,e,0,[e.props,n]);if(gn(),Ro(),Tt(i)){if(i.then(Ro,Ro),t)return i.then((n=>{jo(e,n,t)})).catch((t=>{handleError(t,e,0)}));e.asyncDep=i}else jo(e,i,t)}else To(e,t)}(e,t):void 0;Do=!1}(s),s.asyncDep){if(i&&i.registerDep(s,j),!e.el){const e=s.subTree=io(za);g(null,e,t,n)}}else j(s,e,t,n,i,a,o)},D=(e,t,n)=>{const r=t.component=e.component;if(function(e,t,n){const{props:r,children:i,component:a}=e,{props:o,children:s,patchFlag:l}=t,u=a.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!i&&!s||s&&s.$stable)||r!==o&&(r?!o||li(r,o,u):!!o);if(1024&l)return!0;if(16&l)return r?li(r,o,u):!!o;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(o[n]!==r[n]&&!ei(u,n))return!0}}return!1}(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void T(r,t,n);r.next=t,function(e){const t=Tr.indexOf(e);t>Pr&&Tr.splice(t,1)}(r.update),r.update()}else t.component=e.component,t.el=e.el,r.vnode=t},j=(e,t,n,r,i,a,o)=>{const s=()=>{if(e.isMounted){let t,{next:n,bu:r,u:s,parent:l,vnode:u}=e,d=n;Aa(e,!1),n?(n.el=u.el,T(e,n,o)):n=u,r&&Gt(r),(t=n.props&&n.props.onVnodeBeforeUpdate)&&ho(t,l,n,u),Aa(e,!0);const p=ai(e),f=e.subTree;e.subTree=p,m(f,p,c(f.el),q(f),e,i,a),n.el=p.el,null===d&&function({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}(e,p.el),s&&xa(s,i),(t=n.props&&n.props.onVnodeUpdated)&&xa((()=>ho(t,l,n,u)),i)}else{let o;const{el:s,props:l}=t,{bm:u,m:c,parent:d}=e,p=Ri(t);if(Aa(e,!1),u&&Gt(u),!p&&(o=l&&l.onVnodeBeforeMount)&&ho(o,d,t),Aa(e,!0),s&&G){const n=()=>{e.subTree=ai(e),G(s,e.subTree,e,i,null)};p?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{const o=e.subTree=ai(e);m(null,o,n,r,e,i,a),t.el=o.el}if(c&&xa(c,i),!p&&(o=l&&l.onVnodeMounted)){const e=t;xa((()=>ho(o,d,e)),i)}256&t.shapeFlag&&e.a&&xa(e.a,i),e.isMounted=!0,t=n=r=null}},l=e.effect=new pn(s,(()=>Qr(e.update)),e.scope),u=e.update=l.run.bind(l);u.id=e.uid,Aa(e,!0),u()},T=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,r){const{props:i,attrs:a,vnode:{patchFlag:o}}=e,s=hr(i),[l]=e.propsOptions;let u=!1;if(!(r||o>0)||16&o){let r;ia(e,t,i,a)&&(u=!0);for(const a in s)t&&(At(t,a)||(r=qt(a))!==a&&At(t,r))||(l?!n||void 0===n[a]&&void 0===n[r]||(i[a]=aa(l,s,a,void 0,e,!0)):delete i[a]);if(a!==s)for(const e in a)(!t||!At(t,e)&&1)&&(delete a[e],u=!0)}else if(8&o){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];const c=t[o];if(l)if(At(a,o))c!==a[o]&&(a[o]=c,u=!0);else{const t=Ft(o);i[t]=aa(l,s,t,c,e,!1)}else c!==a[o]&&(a[o]=c,u=!0)}}u&&_n(e,"set","$attrs")}(e,t.props,r,n),((e,t,n)=>{const{vnode:r,slots:i}=e;let a=!0,o=ht;if(32&r.shapeFlag){const e=t._;e?n&&1===e?a=!1:(_t(i,t),n||1!==e||delete i._):(a=!t.$stable,ha(t,i)),o=t}else t&&(ma(e,t),o={default:1});if(a)for(const s in i)da(s)||s in o||delete i[s]})(e,t.children,n),vn(),Wr(void 0,e.update),gn()},P=(e,t,n,r,i,a,o,s,l=!1)=>{const c=e&&e.children,d=e?e.shapeFlag:0,p=t.children,{patchFlag:f,shapeFlag:h}=t;if(f>0){if(128&f)return void L(c,p,n,r,i,a,o,s,l);if(256&f)return void M(c,p,n,r,i,a,o,s,l)}8&h?(16&d&&z(c,i,a),p!==c&&u(n,p)):16&d?16&h?L(c,p,n,r,i,a,o,s,l):z(c,i,a,!0):(8&d&&u(n,""),16&h&&A(p,n,r,i,a,o,s,l))},M=(e,t,n,r,i,a,o,s,l)=>{t=t||mt;const u=(e=e||mt).length,c=t.length,d=Math.min(u,c);let p;for(p=0;p<d;p++){const r=t[p]=l?co(t[p]):uo(t[p]);m(e[p],r,n,null,i,a,o,s,l)}u>c?z(e,i,a,!0,!1,d):A(t,n,r,i,a,o,s,l,d)},L=(e,t,n,r,i,a,o,s,l)=>{let u=0;const c=t.length;let d=e.length-1,p=c-1;for(;u<=d&&u<=p;){const r=e[u],c=t[u]=l?co(t[u]):uo(t[u]);if(!Xa(r,c))break;m(r,c,n,null,i,a,o,s,l),u++}for(;u<=d&&u<=p;){const r=e[d],u=t[p]=l?co(t[p]):uo(t[p]);if(!Xa(r,u))break;m(r,u,n,null,i,a,o,s,l),d--,p--}if(u>d){if(u<=p){const e=p+1,d=e<c?t[e].el:r;for(;u<=p;)m(null,t[u]=l?co(t[u]):uo(t[u]),n,d,i,a,o,s,l),u++}}else if(u>p)for(;u<=d;)N(e[u],i,a,!0),u++;else{const f=u,h=u,v=new Map;for(u=h;u<=p;u++){const e=t[u]=l?co(t[u]):uo(t[u]);null!=e.key&&v.set(e.key,u)}let g,y=0;const b=p-h+1;let w=!1,_=0;const x=new Array(b);for(u=0;u<b;u++)x[u]=0;for(u=f;u<=d;u++){const r=e[u];if(y>=b){N(r,i,a,!0);continue}let c;if(null!=r.key)c=v.get(r.key);else for(g=h;g<=p;g++)if(0===x[g-h]&&Xa(r,t[g])){c=g;break}void 0===c?N(r,i,a,!0):(x[c-h]=u+1,c>=_?_=c:w=!0,m(r,t[c],n,null,i,a,o,s,l),y++)}const k=w?function(e){const t=e.slice(),n=[0];let r,i,a,o,s;const l=e.length;for(r=0;r<l;r++){const l=e[r];if(0!==l){if(i=n[n.length-1],e[i]<l){t[r]=i,n.push(r);continue}for(a=0,o=n.length-1;a<o;)s=a+o>>1,e[n[s]]<l?a=s+1:o=s;l<e[n[a]]&&(a>0&&(t[r]=n[a-1]),n[a]=r)}}a=n.length,o=n[a-1];for(;a-- >0;)n[a]=o,o=t[o];return n}(x):mt;for(g=k.length-1,u=b-1;u>=0;u--){const e=h+u,d=t[e],p=e+1<c?t[e+1].el:r;0===x[u]?m(null,d,n,p,i,a,o,s,l):w&&(g<0||u!==k[g]?$(d,n,p,2):g--)}}},$=(e,t,r,i,a=null)=>{const{el:o,type:s,transition:l,children:u,shapeFlag:c}=e;if(6&c)return void $(e.component.subTree,t,r,i);if(128&c)return void e.suspense.move(t,r,i);if(64&c)return void s.move(e,t,r,Q);if(s===Ua){n(o,t,r);for(let e=0;e<u.length;e++)$(u[e],t,r,i);return void n(e.anchor,t,r)}if(s===qa)return void b(e,t,r);if(2!==i&&1&c&&l)if(0===i)l.beforeEnter(o),n(o,t,r),xa((()=>l.enter(o)),a);else{const{leave:e,delayLeave:i,afterLeave:a}=l,s=()=>n(o,t,r),u=()=>{e(o,(()=>{s(),a&&a()}))};i?i(o,s,u):u()}else n(o,t,r)},N=(e,t,n,r=!1,i=!1)=>{const{type:a,props:o,ref:s,children:l,dynamicChildren:u,shapeFlag:c,patchFlag:d,dirs:p}=e;if(null!=s&&_a(s,null,n,e,!0),256&c)return void t.ctx.deactivate(e);const f=1&c&&p,h=!Ri(e);let m;if(h&&(m=o&&o.onVnodeBeforeUnmount)&&ho(m,t,e),6&c)F(e.component,n,r);else{if(128&c)return void e.suspense.unmount(n,r);f&&ga(e,null,t,"beforeUnmount"),64&c?e.type.remove(e,t,n,i,Q,r):u&&(a!==Ua||d>0&&64&d)?z(u,t,n,!1,!0):(a===Ua&&d&(128|256)||!i&&16&c)&&z(l,t,n),r&&B(e)}(h&&(m=o&&o.onVnodeUnmounted)||f)&&xa((()=>{m&&ho(m,t,e),f&&ga(e,null,t,"unmounted")}),n)},B=e=>{const{type:t,el:n,anchor:i,transition:a}=e;if(t===Ua)return void U(n,i);if(t===qa)return void w(e);const o=()=>{r(n),a&&!a.persisted&&a.afterLeave&&a.afterLeave()};if(1&e.shapeFlag&&a&&!a.persisted){const{leave:t,delayLeave:r}=a,i=()=>t(n,o);r?r(e.el,o,i):i()}else o()},U=(e,t)=>{let n;for(;e!==t;)n=d(e),r(e),e=n;r(t)},F=(e,t,n)=>{const{bum:r,scope:i,update:a,subTree:o,um:s}=e;r&&Gt(r),i.stop(),a&&(a.active=!1,N(o,e,t,n)),s&&xa(s,t),xa((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},z=(e,t,n,r=!1,i=!1,a=0)=>{for(let o=a;o<e.length;o++)N(e[o],t,n,r,i)},q=e=>6&e.shapeFlag?q(e.component.subTree):128&e.shapeFlag?e.suspense.next():d(e.anchor||e.el),V=(e,t,n)=>{null==e?t._vnode&&N(t._vnode,null,null,!0):m(t._vnode||null,e,t,null,null,null,n),Jr(),t._vnode=e},Q={p:m,um:N,m:$,r:B,mt:O,mc:A,pc:P,pbc:I,n:q,o:e};let H,G;t&&([H,G]=t(Q));return{render:V,hydrate:H,createApp:wa(V,H)}}(e)}function Aa({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Ea(e,t,n=!1){const r=e.children,i=t.children;if(Et(r)&&Et(i))for(let a=0;a<r.length;a++){const e=r[a];let t=i[a];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=i[a]=co(i[a]),t.el=e.el),n||Ea(e,t))}}const Ia=e=>e&&(e.disabled||""===e.disabled),Sa=e=>"undefined"!=typeof SVGElement&&e instanceof SVGElement,Ra=(e,t)=>{const n=e&&e.to;if(Ot(n)){if(t){return t(n)}return null}return n},Ca={__isTeleport:!0,process(e,t,n,r,i,a,o,s,l,u){const{mc:c,pc:d,pbc:p,o:{insert:f,querySelector:h,createText:m,createComment:v}}=u,g=Ia(t.props);let{shapeFlag:y,children:b,dynamicChildren:w}=t;if(null==e){const e=t.el=m(""),u=t.anchor=m("");f(e,n,r),f(u,n,r);const d=t.target=Ra(t.props,h),p=t.targetAnchor=m("");d&&(f(p,d),o=o||Sa(d));const v=(e,t)=>{16&y&&c(b,e,t,i,a,o,s,l)};g?v(n,u):d&&v(d,p)}else{t.el=e.el;const r=t.anchor=e.anchor,c=t.target=e.target,f=t.targetAnchor=e.targetAnchor,m=Ia(e.props),v=m?n:c,y=m?r:f;if(o=o||Sa(c),w?(p(e.dynamicChildren,w,v,i,a,o,s),Ea(e,t,!0)):l||d(e,t,v,y,i,a,o,s,!1),g)m||Oa(t,n,r,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=Ra(t.props,h);e&&Oa(t,e,null,u,0)}else m&&Oa(t,c,f,u,1)}},remove(e,t,n,r,{um:i,o:{remove:a}},o){const{shapeFlag:s,children:l,anchor:u,targetAnchor:c,target:d,props:p}=e;if(d&&a(c),(o||!Ia(p))&&(a(u),16&s))for(let f=0;f<l.length;f++){const e=l[f];i(e,t,n,!0,!!e.dynamicChildren)}},move:Oa,hydrate:function(e,t,n,r,i,a,{o:{nextSibling:o,parentNode:s,querySelector:l}},u){const c=t.target=Ra(t.props,l);if(c){const l=c._lpa||c.firstChild;16&t.shapeFlag&&(Ia(t.props)?(t.anchor=u(o(e),t,s(e),n,r,i,a),t.targetAnchor=l):(t.anchor=o(e),t.targetAnchor=u(l,t,c,n,r,i,a)),c._lpa=t.targetAnchor&&o(t.targetAnchor))}return t.anchor&&o(t.anchor)}};function Oa(e,t,n,{o:{insert:r},m:i},a=2){0===a&&r(e.targetAnchor,t,n);const{el:o,anchor:s,shapeFlag:l,children:u,props:c}=e,d=2===a;if(d&&r(o,t,n),(!d||Ia(c))&&16&l)for(let p=0;p<u.length;p++)i(u[p],t,n,2);d&&r(s,t,n)}const Da=Ca,ja="components",Ta="directives";function Pa(e,t){return Na(ja,e,!0,t)||e}const Ma=Symbol();function La(e){return Ot(e)?Na(ja,e,!1)||e:e||Ma}function $a(e){return Na(Ta,e)}function Na(e,t,n=!0,r=!1){const i=ti||Eo;if(i){const n=i.type;if(e===ja){const e=function(e){return Ct(e)&&e.displayName||e.name}(n);if(e&&(e===t||e===Ft(t)||e===Vt(Ft(t))))return n}const a=Ba(i[e]||n[e],t)||Ba(i.appContext[e],t);return!a&&r?n:a}}function Ba(e,t){return e&&(e[t]||e[Ft(t)]||e[Vt(Ft(t))])}const Ua=Symbol(void 0),Fa=Symbol(void 0),za=Symbol(void 0),qa=Symbol(void 0),Va=[];let Qa=null;function Ha(e=!1){Va.push(Qa=e?null:[])}let Ga=1;function Wa(e){Ga+=e}function Ja(e){return e.dynamicChildren=Ga>0?Qa||mt:null,Va.pop(),Qa=Va[Va.length-1]||null,Ga>0&&Qa&&Qa.push(e),e}function Ka(e,t,n,r,i,a){return Ja(ro(e,t,n,r,i,a,!0))}function Ya(e,t,n,r,i){return Ja(io(e,t,n,r,i,!0))}function Za(e){return!!e&&!0===e.__v_isVNode}function Xa(e,t){return e.type===t.type&&e.key===t.key}const eo=`__vInternal`,to=({key:e})=>null!=e?e:null,no=({ref:e,ref_key:t,ref_for:n})=>null!=e?Ot(e)||wr(e)||Ct(e)?{i:ti,r:e,k:t,f:!!n}:e:null;function ro(e,t=null,n=null,r=0,i=null,a=(e===Ua?0:1),o=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&to(t),ref:t&&no(t),scopeId:ni,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return s?(po(l,n),128&a&&e.normalize(l)):n&&(l.shapeFlag|=Ot(n)?8:16),Ga>0&&!o&&Qa&&(l.patchFlag>0||6&a)&&32!==l.patchFlag&&Qa.push(l),l}const io=function(e,t=null,n=null,r=0,i=null,a=!1){e&&e!==Ma||(e=za);if(Za(e)){const r=ao(e,t,!0);return n&&po(r,n),r}o=e,Ct(o)&&"__vccOpts"in o&&(e=e.__vccOpts);var o;if(t){t=function(e){return e?fr(e)||eo in e?_t({},e):e:null}(t);let{class:e,style:n}=t;e&&!Ot(e)&&(t.class=ut(e)),jt(n)&&(fr(n)&&!Et(n)&&(n=_t({},n)),t.style=at(n))}const s=Ot(e)?1:(e=>e.__isSuspense)(e)?128:(e=>e.__isTeleport)(e)?64:jt(e)?4:Ct(e)?2:0;return ro(e,t,n,r,i,s,a,!0)};function ao(e,t,n=!1){const{props:r,ref:i,patchFlag:a,children:o}=e,s=t?fo(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&to(s),ref:t&&t.ref?n&&i?Et(i)?i.concat(no(t)):[i,no(t)]:no(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ua?-1===a?16:16|a:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ao(e.ssContent),ssFallback:e.ssFallback&&ao(e.ssFallback),el:e.el,anchor:e.anchor}}function oo(e=" ",t=0){return io(Fa,null,e,t)}function so(e,t){const n=io(qa,null,e);return n.staticCount=t,n}function lo(e="",t=!1){return t?(Ha(),Ya(za,null,e)):io(za,null,e)}function uo(e){return null==e||"boolean"==typeof e?io(za):Et(e)?io(Ua,null,e.slice()):"object"==typeof e?co(e):io(Fa,null,String(e))}function co(e){return null===e.el||e.memo?e:ao(e)}function po(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if(Et(t))n=16;else if("object"==typeof t){if(r&(1|64)){const n=t.default;return void(n&&(n._c&&(n._d=!1),po(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||eo in t?3===r&&ti&&(1===ti.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=ti}}else Ct(t)?(t={default:t,_ctx:ti},n=32):(t=String(t),64&r?(n=16,t=[oo(t)]):n=8);e.children=t,e.shapeFlag|=n}function fo(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=ut([t.class,r.class]));else if("style"===e)t.style=at([t.style,r.style]);else if(bt(e)){const n=t[e],i=r[e];!i||n===i||Et(n)&&n.includes(i)||(t[e]=n?[].concat(n,i):i)}else""!==e&&(t[e]=r[e])}return t}function ho(e,t,n,r=null){Or(e,t,7,[n,r])}function mo(e,t,n,r){let i;const a=n&&n[r];if(Et(e)||Ot(e)){i=new Array(e.length);for(let n=0,r=e.length;n<r;n++)i[n]=t(e[n],n,void 0,a&&a[n])}else if("number"==typeof e){i=new Array(e);for(let n=0;n<e;n++)i[n]=t(n+1,n,void 0,a&&a[n])}else if(jt(e))if(e[Symbol.iterator])i=Array.from(e,((e,n)=>t(e,n,void 0,a&&a[n])));else{const n=Object.keys(e);i=new Array(n.length);for(let r=0,o=n.length;r<o;r++){const o=n[r];i[r]=t(e[o],o,r,a&&a[r])}}else i=[];return n&&(n[r]=i),i}function vo(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(Et(r))for(let t=0;t<r.length;t++)e[r[t].name]=r[t].fn;else r&&(e[r.name]=r.fn)}return e}function go(e,t,n={},r,i){if(ti.isCE)return io("slot","default"===t?null:{name:t},r&&r());let a=e[t];a&&a._c&&(a._d=!1),Ha();const o=a&&yo(a(n)),s=Ya(Ua,{key:n.key||`_${t}`},o||(r?r():[]),o&&1===e._?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),a&&a._c&&(a._d=!0),s}function yo(e){return e.some((e=>!Za(e)||e.type!==za&&!(e.type===Ua&&!yo(e.children))))?e:null}function bo(e){const t={};for(const n in e)t[Qt(n)]=e[n];return t}const wo=e=>e?Co(e)?Mo(e)||e.proxy:wo(e.parent):null,_o=_t(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>wo(e.parent),$root:e=>wo(e.root),$emit:e=>e.emit,$options:e=>Ki(e),$forceUpdate:e=>()=>Qr(e.update),$nextTick:e=>Vr.bind(e.proxy),$watch:e=>mi.bind(e)}),xo={get({_:e},t){const{ctx:n,setupState:r,data:i,props:a,accessCache:o,type:s,appContext:l}=e;let u;if("$"!==t[0]){const s=o[t];if(void 0!==s)switch(s){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return a[t]}else{if(r!==ht&&At(r,t))return o[t]=1,r[t];if(i!==ht&&At(i,t))return o[t]=2,i[t];if((u=e.propsOptions[0])&&At(u,t))return o[t]=3,a[t];if(n!==ht&&At(n,t))return o[t]=4,n[t];Hi&&(o[t]=0)}}const c=_o[t];let d,p;return c?("$attrs"===t&&yn(e,0,t),c(e)):(d=s.__cssModules)&&(d=d[t])?d:n!==ht&&At(n,t)?(o[t]=4,n[t]):(p=l.config.globalProperties,At(p,t)?p[t]:void 0)},set({_:e},t,n){const{data:r,setupState:i,ctx:a}=e;if(i!==ht&&At(i,t))i[t]=n;else if(r!==ht&&At(r,t))r[t]=n;else if(At(e.props,t))return!1;return("$"!==t[0]||!(t.slice(1)in e))&&(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:a}},o){let s;return!!n[o]||e!==ht&&At(e,o)||t!==ht&&At(t,o)||(s=a[0])&&At(s,o)||At(r,o)||At(_o,o)||At(i.config.globalProperties,o)}},ko=ya();let Ao=0;let Eo=null;const Io=()=>Eo||ti,So=e=>{Eo=e,e.scope.on()},Ro=()=>{Eo&&Eo.scope.off(),Eo=null};function Co(e){return 4&e.vnode.shapeFlag}let Oo,Do=!1;function jo(e,t,n){Ct(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:jt(t)&&(e.setupState=Ir(t)),To(e,n)}function To(e,t,n){const r=e.type;if(!e.render){if(!t&&Oo&&!r.render){const t=r.template;if(t){const{isCustomElement:n,compilerOptions:i}=e.appContext.config,{delimiters:a,compilerOptions:o}=r,s=_t(_t({isCustomElement:n,delimiters:a},i),o);r.render=Oo(t,s)}}e.render=r.render||vt}So(e),vn(),Gi(e),gn(),Ro()}function Po(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=function(e){return new Proxy(e.attrs,{get:(t,n)=>(yn(e,0,"$attrs"),t[n])})}(e))},slots:e.slots,emit:e.emit,expose:t}}function Mo(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Ir(mr(e.exposed)),{get:(t,n)=>n in t?t[n]:n in _o?_o[n](e):void 0}))}const Lo=(e,t)=>function(e,t,n=!1){let r,i;const a=Ct(e);return a?(r=e,i=vt):(r=e.get,i=e.set),new Rr(r,i,a||!i,n)}(e,0,Do);function $o(){return No().attrs}function No(){const e=Io();return e.setupContext||(e.setupContext=Po(e))}function Bo(e,t,n){const r=arguments.length;return 2===r?jt(t)&&!Et(t)?Za(t)?io(e,null,[t]):io(e,t):io(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&Za(n)&&(n=[n]),io(e,t,n))}const Uo="3.2.29",Fo="http://www.w3.org/2000/svg",zo="undefined"!=typeof document?document:null,qo=zo&&zo.createElement("template"),Vo={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?zo.createElementNS(Fo,e):zo.createElement(e,n?{is:n}:void 0);return"select"===e&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:e=>zo.createTextNode(e),createComment:e=>zo.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>zo.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return`_value`in e&&(t._value=e._value),t},insertStaticContent(e,t,n,r,i,a){const o=n?n.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;1&&(t.insertBefore(i.cloneNode(!0),n),i!==a&&(i=i.nextSibling)););else{qo.innerHTML=r?`<svg>${e}</svg>`:e;const i=qo.content;if(r){const e=i.firstChild;for(;e.firstChild;)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};const Qo=/\s*!important$/;function Ho(e,t,n){if(Et(n))n.forEach((n=>Ho(e,t,n)));else if(t.startsWith("--"))e.setProperty(t,n);else{const r=function(e,t){const n=Wo[t];if(n)return n;let r=Ft(t);if("filter"!==r&&r in e)return Wo[t]=r;r=Vt(r);for(let i=0;i<Go.length;i++){const n=Go[i]+r;if(n in e)return Wo[t]=n}return t}(e,t);Qo.test(n)?e.setProperty(qt(r),n.replace(Qo,""),"important"):e[r]=n}}const Go=["Webkit","Moz","ms"],Wo={};const Jo="http://www.w3.org/1999/xlink";let Ko=Date.now,Yo=!1;if("undefined"!=typeof window){Ko()>document.createEvent("Event").timeStamp&&(Ko=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);Yo=!!(e&&Number(e[1])<=53)}let Zo=0;const Xo=Promise.resolve(),es=()=>{Zo=0};function ts(e,t,n,r){e.addEventListener(t,n,r)}function ns(e,t,n,r,i=null){const a=e._vei||(e._vei={}),o=a[t];if(r&&o)o.value=r;else{const[n,s]=function(e){let t;if(rs.test(e)){let n;for(t={};n=e.match(rs);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[qt(e.slice(2)),t]}(t);if(r){const o=a[t]=function(e,t){const n=e=>{const r=e.timeStamp||Ko();(Yo||r>=n.attached-1)&&Or(function(e,t){if(Et(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=(()=>Zo||(Xo.then(es),Zo=Ko()))(),n}(r,i);ts(e,n,o,s)}else o&&(!function(e,t,n,r){e.removeEventListener(t,n,r)}(e,n,o,s),a[t]=void 0)}}const rs=/(?:Once|Passive|Capture)$/;const is=/^on[a-z]/;const as="transition",os="animation",ss=(e,{slots:t})=>Bo(wi,ps(e),t);ss.displayName="Transition";const ls={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},us=ss.props=_t({},wi.props,ls),cs=(e,t=[])=>{Et(e)?e.forEach((e=>e(...t))):e&&e(...t)},ds=e=>!!e&&(Et(e)?e.some((e=>e.length>1)):e.length>1);function ps(e){const t={};for(const R in e)R in ls||(t[R]=e[R]);if(!1===e.css)return t;const{name:n="v",type:r,duration:i,enterFromClass:a=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:l=a,appearActiveClass:u=o,appearToClass:c=s,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=e,h=function(e){if(null==e)return null;if(jt(e))return[fs(e.enter),fs(e.leave)];{const t=fs(e);return[t,t]}}(i),m=h&&h[0],v=h&&h[1],{onBeforeEnter:g,onEnter:y,onEnterCancelled:b,onLeave:w,onLeaveCancelled:_,onBeforeAppear:x=g,onAppear:k=y,onAppearCancelled:A=b}=t,E=(e,t,n)=>{ms(e,t?c:s),ms(e,t?u:o),n&&n()},I=(e,t)=>{ms(e,f),ms(e,p),t&&t()},S=e=>(t,n)=>{const i=e?k:y,o=()=>E(t,e,n);cs(i,[t,o]),vs((()=>{ms(t,e?l:a),hs(t,e?c:s),ds(i)||ys(t,r,m,o)}))};return _t(t,{onBeforeEnter(e){cs(g,[e]),hs(e,a),hs(e,o)},onBeforeAppear(e){cs(x,[e]),hs(e,l),hs(e,u)},onEnter:S(!1),onAppear:S(!0),onLeave(e,t){const n=()=>I(e,t);hs(e,d),xs(),hs(e,p),vs((()=>{ms(e,d),hs(e,f),ds(w)||ys(e,r,v,n)})),cs(w,[e,n])},onEnterCancelled(e){E(e,!1),cs(b,[e])},onAppearCancelled(e){E(e,!0),cs(A,[e])},onLeaveCancelled(e){I(e),cs(_,[e])}})}function fs(e){return Jt(e)}function hs(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function ms(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function vs(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let gs=0;function ys(e,t,n,r){const i=e._endId=++gs,a=()=>{i===e._endId&&r()};if(n)return setTimeout(a,n);const{type:o,timeout:s,propCount:l}=bs(e,t);if(!o)return r();const u=o+"end";let c=0;const d=()=>{e.removeEventListener(u,p),a()},p=t=>{t.target===e&&++c>=l&&d()};setTimeout((()=>{c<l&&d()}),s+1),e.addEventListener(u,p)}function bs(e,t){const n=window.getComputedStyle(e),r=e=>(n[e]||"").split(", "),i=r(as+"Delay"),a=r(as+"Duration"),o=ws(i,a),s=r(os+"Delay"),l=r(os+"Duration"),u=ws(s,l);let c=null,d=0,p=0;t===as?o>0&&(c=as,d=o,p=a.length):t===os?u>0&&(c=os,d=u,p=l.length):(d=Math.max(o,u),c=d>0?o>u?as:os:null,p=c?c===as?a.length:l.length:0);return{type:c,timeout:d,propCount:p,hasTransform:c===as&&/\b(transform|all)(,|$)/.test(n[as+"Property"])}}function ws(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map(((t,n)=>_s(t)+_s(e[n]))))}function _s(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function xs(){return document.body.offsetHeight}const ks=new WeakMap,As=new WeakMap,Es={name:"TransitionGroup",props:_t({},us,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Io(),r=yi();let i,a;return Bi((()=>{if(!i.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!function(e,t,n){const r=e.cloneNode();e._vtc&&e._vtc.forEach((e=>{e.split(/\s+/).forEach((e=>e&&r.classList.remove(e)))}));n.split(/\s+/).forEach((e=>e&&r.classList.add(e))),r.style.display="none";const i=1===t.nodeType?t:t.parentNode;i.appendChild(r);const{hasTransform:a}=bs(r);return i.removeChild(r),a}(i[0].el,n.vnode.el,t))return;i.forEach(Ss),i.forEach(Rs);const r=i.filter(Cs);xs(),r.forEach((e=>{const n=e.el,r=n.style;hs(n,t),r.transform=r.webkitTransform=r.transitionDuration="";const i=n._moveCb=e=>{e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener("transitionend",i),n._moveCb=null,ms(n,t))};n.addEventListener("transitionend",i)}))})),()=>{const o=hr(e),s=ps(o);let l=o.tag||Ua;i=a,a=t.default?Ii(t.default()):[];for(let e=0;e<a.length;e++){const t=a[e];null!=t.key&&Ei(t,xi(t,s,r,n))}if(i)for(let e=0;e<i.length;e++){const t=i[e];Ei(t,xi(t,s,r,n)),ks.set(t,t.el.getBoundingClientRect())}return io(l,null,a)}}},Is=Es;function Ss(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function Rs(e){As.set(e,e.el.getBoundingClientRect())}function Cs(e){const t=ks.get(e),n=As.get(e),r=t.left-n.left,i=t.top-n.top;if(r||i){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${r}px,${i}px)`,t.transitionDuration="0s",e}}const Os=e=>{const t=e.props["onUpdate:modelValue"];return Et(t)?e=>Gt(t,e):t},Ds={deep:!0,created(e,t,n){e._assign=Os(n),ts(e,"change",(()=>{const t=e._modelValue,n=function(e){return"_value"in e?e._value:e.value}(e),r=e.checked,i=e._assign;if(Et(t)){const e=dt(t,n),a=-1!==e;if(r&&!a)i(t.concat(n));else if(!r&&a){const n=[...t];n.splice(e,1),i(n)}}else if(St(t)){const e=new Set(t);r?e.add(n):e.delete(n),i(e)}else i(Ts(e,r))}))},mounted:js,beforeUpdate(e,t,n){e._assign=Os(n),js(e,t,n)}};function js(e,{value:t,oldValue:n},r){e._modelValue=t,Et(t)?e.checked=dt(t,r.props.value)>-1:St(t)?e.checked=t.has(r.props.value):t!==n&&(e.checked=ct(t,Ts(e,!0)))}function Ts(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Ps=["ctrl","shift","alt","meta"],Ms={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>Ps.some((n=>e[`${n}Key`]&&!t.includes(n)))},Ls=(e,t)=>(n,...r)=>{for(let e=0;e<t.length;e++){const r=Ms[t[e]];if(r&&r(n,t))return}return e(n,...r)},$s={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ns=(e,t)=>n=>{if(!("key"in n))return;const r=qt(n.key);return t.some((e=>e===r||$s[e]===r))?e(n):void 0},Bs={beforeMount(e,{value:t},{transition:n}){e._vod="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):Us(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Us(e,!0),r.enter(e)):r.leave(e,(()=>{Us(e,!1)})):Us(e,t))},beforeUnmount(e,{value:t}){Us(e,t)}};function Us(e,t){e.style.display=t?e._vod:"none"}const Fs=_t({patchProp:(e,t,n,r,i=!1,a,o,s,l)=>{"class"===t?function(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,r,i):"style"===t?function(e,t,n){const r=e.style,i=Ot(n);if(n&&!i){for(const e in n)Ho(r,e,n[e]);if(t&&!Ot(t))for(const e in t)null==n[e]&&Ho(r,e,"")}else{const a=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=a)}}(e,n,r):bt(t)?wt(t)||ns(e,t,0,r,o):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,r){if(r)return"innerHTML"===t||"textContent"===t||!!(t in e&&is.test(t)&&Ct(n));if("spellcheck"===t||"draggable"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if(is.test(t)&&Ot(n))return!1;return t in e}(e,t,r,i))?function(e,t,n,r,i,a,o){if("innerHTML"===t||"textContent"===t)return r&&o(r,i,a),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=n;const r=null==n?"":n;return e.value===r&&"OPTION"!==e.tagName||(e.value=r),void(null==n&&e.removeAttribute(t))}if(""===n||null==n){const r=typeof e[t];if("boolean"===r)return void(e[t]=it(n));if(null==n&&"string"===r)return e[t]="",void e.removeAttribute(t);if("number"===r){try{e[t]=0}catch(s){}return void e.removeAttribute(t)}}try{e[t]=n}catch(Mh){}}(e,t,r,a,o,s,l):("true-value"===t?e._trueValue=r:"false-value"===t&&(e._falseValue=r),function(e,t,n,r,i){if(r&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(Jo,t.slice(6,t.length)):e.setAttributeNS(Jo,t,n);else{const r=rt(t);null==n||r&&!it(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}(e,t,r,i))}},Vo);let zs;const qs=(...e)=>{const t=(zs||(zs=ka(Fs))).createApp(...e),{mount:n}=t;return t.mount=e=>{const r=function(e){if(Ot(e)){return document.querySelector(e)}return e}(e);if(!r)return;const i=t._component;Ct(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const a=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},t};var Vs=n,Qs=i.find,Hs=r,Gs="find",Ws=!0;Gs in[]&&Array(1)[Gs]((function(){Ws=!1})),Vs({target:"Array",proto:!0,forced:Ws},{find:function(e){return Qs(this,e,arguments.length>1?arguments[1]:void 0)}}),Hs(Gs);var Js=n,Ks=a.find;Js({target:"AsyncIterator",proto:!0,real:!0},{find:function(e){return Ks(this,e)}});var Ys=o,Zs=s,Xs=l;n({target:"Iterator",proto:!0,real:!0},{find:function(e){return Xs(this),Zs(e),Ys(this,(function(t,n){if(e(t))return n(t)}),{IS_ITERATOR:!0,INTERRUPTED:!0}).result}});var el=u,tl=c,nl=d,rl=f,il=p;n({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=tl(this),n=nl(t),r=il(t,0);return r.length=el(r,t,t,n,0,void 0===e?1:rl(e)),r}}),r("flat");var al,ol,sl={exports:{}},ll={exports:{}};al="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ol={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&ol.rotl(e,8)|4278255360&ol.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=ol.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var r=e[n]<<16|e[n+1]<<8|e[n+2],i=0;i<4;i++)8*n+6*i<=8*e.length?t.push(al.charAt(r>>>6*(3-i)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,r=0;n<e.length;r=++n%4)0!=r&&t.push((al.indexOf(e.charAt(n-1))&Math.pow(2,-2*r+8)-1)<<2*r|al.indexOf(e.charAt(n))>>>6-2*r);return t}},ll.exports=ol;var ul={utf8:{stringToBytes:function(e){return ul.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(ul.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}},cl=ul,dl=function(e){return null!=e&&(pl(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&pl(e.slice(0,0))}(e)||!!e._isBuffer)};function pl(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}!function(){var e=ll.exports,t=cl.utf8,n=dl,r=cl.bin,i=function(a,o){a.constructor==String?a=o&&"binary"===o.encoding?r.stringToBytes(a):t.stringToBytes(a):n(a)?a=Array.prototype.slice.call(a,0):Array.isArray(a)||a.constructor===Uint8Array||(a=a.toString());for(var s=e.bytesToWords(a),l=8*a.length,u=1732584193,c=-271733879,d=-1732584194,p=271733878,f=0;f<s.length;f++)s[f]=16711935&(s[f]<<8|s[f]>>>24)|4278255360&(s[f]<<24|s[f]>>>8);s[l>>>5]|=128<<l%32,s[(l+64>>>9<<4)+14]=l;var h=i._ff,m=i._gg,v=i._hh,g=i._ii;for(f=0;f<s.length;f+=16){var y=u,b=c,w=d,_=p;u=h(u,c,d,p,s[f+0],7,-680876936),p=h(p,u,c,d,s[f+1],12,-389564586),d=h(d,p,u,c,s[f+2],17,606105819),c=h(c,d,p,u,s[f+3],22,-1044525330),u=h(u,c,d,p,s[f+4],7,-176418897),p=h(p,u,c,d,s[f+5],12,1200080426),d=h(d,p,u,c,s[f+6],17,-1473231341),c=h(c,d,p,u,s[f+7],22,-45705983),u=h(u,c,d,p,s[f+8],7,1770035416),p=h(p,u,c,d,s[f+9],12,-1958414417),d=h(d,p,u,c,s[f+10],17,-42063),c=h(c,d,p,u,s[f+11],22,-1990404162),u=h(u,c,d,p,s[f+12],7,1804603682),p=h(p,u,c,d,s[f+13],12,-40341101),d=h(d,p,u,c,s[f+14],17,-1502002290),u=m(u,c=h(c,d,p,u,s[f+15],22,1236535329),d,p,s[f+1],5,-165796510),p=m(p,u,c,d,s[f+6],9,-1069501632),d=m(d,p,u,c,s[f+11],14,643717713),c=m(c,d,p,u,s[f+0],20,-373897302),u=m(u,c,d,p,s[f+5],5,-701558691),p=m(p,u,c,d,s[f+10],9,38016083),d=m(d,p,u,c,s[f+15],14,-660478335),c=m(c,d,p,u,s[f+4],20,-405537848),u=m(u,c,d,p,s[f+9],5,568446438),p=m(p,u,c,d,s[f+14],9,-1019803690),d=m(d,p,u,c,s[f+3],14,-187363961),c=m(c,d,p,u,s[f+8],20,1163531501),u=m(u,c,d,p,s[f+13],5,-1444681467),p=m(p,u,c,d,s[f+2],9,-51403784),d=m(d,p,u,c,s[f+7],14,1735328473),u=v(u,c=m(c,d,p,u,s[f+12],20,-1926607734),d,p,s[f+5],4,-378558),p=v(p,u,c,d,s[f+8],11,-2022574463),d=v(d,p,u,c,s[f+11],16,1839030562),c=v(c,d,p,u,s[f+14],23,-35309556),u=v(u,c,d,p,s[f+1],4,-1530992060),p=v(p,u,c,d,s[f+4],11,1272893353),d=v(d,p,u,c,s[f+7],16,-155497632),c=v(c,d,p,u,s[f+10],23,-1094730640),u=v(u,c,d,p,s[f+13],4,681279174),p=v(p,u,c,d,s[f+0],11,-358537222),d=v(d,p,u,c,s[f+3],16,-722521979),c=v(c,d,p,u,s[f+6],23,76029189),u=v(u,c,d,p,s[f+9],4,-640364487),p=v(p,u,c,d,s[f+12],11,-421815835),d=v(d,p,u,c,s[f+15],16,530742520),u=g(u,c=v(c,d,p,u,s[f+2],23,-995338651),d,p,s[f+0],6,-198630844),p=g(p,u,c,d,s[f+7],10,1126891415),d=g(d,p,u,c,s[f+14],15,-1416354905),c=g(c,d,p,u,s[f+5],21,-57434055),u=g(u,c,d,p,s[f+12],6,1700485571),p=g(p,u,c,d,s[f+3],10,-1894986606),d=g(d,p,u,c,s[f+10],15,-1051523),c=g(c,d,p,u,s[f+1],21,-2054922799),u=g(u,c,d,p,s[f+8],6,1873313359),p=g(p,u,c,d,s[f+15],10,-30611744),d=g(d,p,u,c,s[f+6],15,-1560198380),c=g(c,d,p,u,s[f+13],21,1309151649),u=g(u,c,d,p,s[f+4],6,-145523070),p=g(p,u,c,d,s[f+11],10,-1120210379),d=g(d,p,u,c,s[f+2],15,718787259),c=g(c,d,p,u,s[f+9],21,-343485551),u=u+y>>>0,c=c+b>>>0,d=d+w>>>0,p=p+_>>>0}return e.endian([u,c,d,p])};i._ff=function(e,t,n,r,i,a,o){var s=e+(t&n|~t&r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},i._gg=function(e,t,n,r,i,a,o){var s=e+(t&r|n&~r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},i._hh=function(e,t,n,r,i,a,o){var s=e+(t^n^r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},i._ii=function(e,t,n,r,i,a,o){var s=e+(n^(t|~r))+(i>>>0)+o;return(s<<a|s>>>32-a)+t},i._blocksize=16,i._digestsize=16,sl.exports=function(t,n){if(null==t)throw new Error("Illegal argument "+t);var a=e.wordsToBytes(i(t,n));return n&&n.asBytes?a:n&&n.asString?r.bytesToString(a):e.bytesToHex(a)}}();const fl="http://www.w3.org/1999/02/22-rdf-syntax-ns#",hl="http://www.w3.org/2001/XMLSchema#",ml="http://www.w3.org/2000/10/swap/",vl={xsd:{decimal:`${hl}decimal`,boolean:`${hl}boolean`,double:`${hl}double`,integer:`${hl}integer`,string:`${hl}string`},rdf:{type:`${fl}type`,nil:`${fl}nil`,first:`${fl}first`,rest:`${fl}rest`,langString:`${fl}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${ml}reify#forSome`,forAll:`${ml}reify#forAll`},log:{implies:`${ml}log#implies`}};
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
let gl;const yl="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:h):e=>(gl||(gl=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0))),{xsd:bl}=vl,wl=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,_l={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},xl=/[\x00-\x20<>\\"\{\}\|\^\`]/,kl={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},Al=/$0^/;class El{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const e in this)!(e in kl)&&this[e]instanceof RegExp&&(this[e]=Al)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let n=this._input;const r=this._comments;for(;1;){let i,a;for(;i=this._newline.exec(n);)r&&(a=this._comment.exec(i[0]))&&e(null,{line:this._line,type:"comment",value:a[1],prefix:""}),n=n.substr(i[0].length,n.length),this._line++;if(!i&&(i=this._whitespace.exec(n))&&(n=n.substr(i[0].length,n.length)),this._endOfFile.test(n))return t&&(r&&(a=this._comment.exec(n))&&e(null,{line:this._line,type:"comment",value:a[1],prefix:""}),e(n=null,{line:this._line,type:"eof",value:"",prefix:""})),this._input=n;const o=this._line,s=n[0];let l="",u="",c="",d=null,p=0,f=!1;switch(s){case"^":if(n.length<3)break;if("^"!==n[1]){this._n3Mode&&(p=1,l="^");break}if(this._previousMarker="^^",n=n.substr(2),"<"!==n[0]){f=!0;break}case"<":if(d=this._unescapedIri.exec(n))l="IRI",u=d[1];else if(d=this._iri.exec(n)){if(u=this._unescape(d[1]),null===u||xl.test(u))return reportSyntaxError(this);l="IRI"}else n.length>1&&"<"===n[1]?(l="<<",p=2):this._n3Mode&&n.length>1&&"="===n[1]&&(l="inverse",p=2,u=">");break;case">":n.length>1&&">"===n[1]&&(l=">>",p=2);break;case"_":((d=this._blank.exec(n))||t&&(d=this._blank.exec(`${n} `)))&&(l="blank",c="_",u=d[1]);break;case'"':if(d=this._simpleQuotedString.exec(n))u=d[1];else if(({value:u,matchLength:p}=this._parseLiteral(n)),null===u)return reportSyntaxError(this);null===d&&0===p||(l="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(d=this._simpleApostropheString.exec(n))u=d[1];else if(({value:u,matchLength:p}=this._parseLiteral(n)),null===u)return reportSyntaxError(this);null===d&&0===p||(l="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(d=this._variable.exec(n))&&(l="var",u=d[0]);break;case"@":"literal"===this._previousMarker&&(d=this._langcode.exec(n))?(l="langcode",u=d[1]):(d=this._keyword.exec(n))&&(l=d[0]);break;case".":if(1===n.length?t:n[1]<"0"||n[1]>"9"){l=".",p=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(d=this._number.exec(n)||t&&(d=this._number.exec(`${n} `)))&&(l="literal",u=d[0],c="string"==typeof d[1]?bl.double:"string"==typeof d[2]?bl.decimal:bl.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(d=this._sparqlKeyword.exec(n))?l=d[0].toUpperCase():f=!0;break;case"f":case"t":(d=this._boolean.exec(n))?(l="literal",u=d[0],c=bl.boolean):f=!0;break;case"a":(d=this._shortPredicates.exec(n))?(l="abbreviation",u="a"):f=!0;break;case"=":this._n3Mode&&n.length>1&&(l="abbreviation",">"!==n[1]?(p=1,u="="):(p=2,u=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(p=1,l=s);break;default:f=!0}if(f&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(d=this._prefix.exec(n))?((d=this._prefixed.exec(n))||t&&(d=this._prefixed.exec(`${n} `)))&&(l="prefixed",c=d[1]||"",u=this._unescape(d[2])):(l="prefix",u=d[1]||"")),"^^"===this._previousMarker)switch(l){case"prefixed":l="type";break;case"IRI":l="typeIRI";break;default:l=""}if(!l)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?reportSyntaxError(this):this._input=n;const h={line:o,type:l,value:u,prefix:c};e(null,h),this.previousToken=h,this._previousMarker=l,n=n.substr(p||d[0].length,n.length)}function reportSyntaxError(t){e(t._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let t=!1;const n=e.replace(wl,((e,n,r,i)=>{if("string"==typeof n)return String.fromCharCode(Number.parseInt(n,16));if("string"==typeof r){let e=Number.parseInt(r,16);return e<=65535?String.fromCharCode(Number.parseInt(r,16)):String.fromCharCode(55296+((e-=65536)>>10),56320+(1023&e))}return i in _l?_l[i]:(t=!0,"")}));return t?null:n}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],n=t.length;let r=Math.max(this._literalClosingPos,n);for(;(r=e.indexOf(t,r))>0;){let t=0;for(;"\\"===e[r-t-1];)t++;if(t%2==0){const t=e.substring(n,r),i=t.split(/\r\n|\r|\n/).length-1,a=r+n;if(1===n&&0!==i||3===n&&this._lineMode)break;return this._line+=i,{value:this._unescape(t),matchLength:a}}r++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,t){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof t){const e=[];let t;if(this._tokenizeToEnd(((n,r)=>n?t=n:e.push(r)),!0),t)throw t;return e}yl((()=>this._tokenizeToEnd(t,!0)))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",(e=>{null!==this._input&&0!==e.length&&(this._pendingBuffer&&(e=Buffer.concat([this._pendingBuffer,e]),this._pendingBuffer=null),128&e[e.length-1]?this._pendingBuffer=e:(void 0===this._input?this._input=this._readStartingBom("string"==typeof e?e:e.toString()):this._input+=e,this._tokenizeToEnd(t,!1)))})),e.on("end",(()=>{"string"==typeof this._input&&this._tokenizeToEnd(t,!0)})),e.on("error",t)}}function Il(e){return!!e&&"DefaultGraph"===e.termType}function Sl(e,t){const n=Object.create(null);for(const i in e)r(i,e[i]);function r(e,r){if("string"==typeof r){const i=Object.create(null);n[e]=e=>i[e]||(i[e]=t.namedNode(r+e))}else if(!(e in n))throw new Error(`Unknown prefix: ${e}`);return n[e]}return t=t||Ll,r}const Rl=Object.freeze(Object.defineProperty({__proto__:null,isNamedNode:function(e){return!!e&&"NamedNode"===e.termType},isBlankNode:function(e){return!!e&&"BlankNode"===e.termType},isLiteral:function(e){return!!e&&"Literal"===e.termType},isVariable:function(e){return!!e&&"Variable"===e.termType},isDefaultGraph:Il,inDefaultGraph:function(e){return Il(e.graph)},prefix:function(e,t){return Sl({"":e},t)("")},prefixes:Sl},Symbol.toStringTag,{value:"Module"})),{rdf:Cl,xsd:Ol}=vl;let Dl,jl=0;const Tl=/^"(.*".*)(?="[^"]*$)/,Pl=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,Ml={namedNode:function(e){return new Nl(e)},blankNode:function(e){return new Ul(e||`n3-${jl++}`)},variable:function(e){return new Fl(e)},literal:function(e,t){if("string"==typeof t)return new Bl(`"${e}"@${t.toLowerCase()}`);let n=t?t.value:"";""===n&&("boolean"==typeof e?n=Ol.boolean:"number"==typeof e&&(Number.isFinite(e)?n=Number.isInteger(e)?Ol.integer:Ol.double:(n=Ol.double,Number.isNaN(e)||(e=e>0?"INF":"-INF"))));return""===n||n===Ol.string?new Bl(`"${e}"`):new Bl(`"${e}"^^${n}`)},defaultGraph:function(){return Dl},quad:Wl,triple:Wl},Ll=Ml;class $l{constructor(e){this.id=e}get value(){return this.id}get hashCode(){return 0}equals(e){return e instanceof $l?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}toJSON(){return{termType:this.termType,value:this.value}}}class Nl extends $l{get termType(){return"NamedNode"}}class Bl extends $l{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&"@"===e[t++]?e.substr(t).toLowerCase():""}get datatype(){return new Nl(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,n=t<e.length?e[t]:"";return"^"===n?e.substr(t+2):"@"!==n?Ol.string:Cl.langString}equals(e){return e instanceof Bl?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class Ul extends $l{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class Fl extends $l{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class zl extends $l{constructor(){return super(""),Dl||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}function ql(e,t){if(t=t||Ml,!e)return t.defaultGraph();switch(e[0]){case"?":return t.variable(e.substr(1));case"_":return t.blankNode(e.substr(2));case'"':if(t===Ml)return new Bl(e);if('"'===e[e.length-1])return t.literal(e.substr(1,e.length-2));const n=e.lastIndexOf('"',e.length-1);return t.literal(e.substr(1,n-1),"@"===e[n+1]?e.substr(n+2):t.namedNode(e.substr(n+3)));case"<":const r=Pl.exec(e);return t.quad(ql(Gl(r[1]),t),ql(Gl(r[2]),t),ql(Gl(r[3]),t),r[4]&&ql(Gl(r[4]),t));default:return t.namedNode(e)}}function Vl(e){if("string"==typeof e)return e;if(e instanceof $l&&"Quad"!==e.termType)return e.id;if(!e)return Dl.id;switch(e.termType){case"NamedNode":return e.value;case"BlankNode":return`_:${e.value}`;case"Variable":return`?${e.value}`;case"DefaultGraph":return"";case"Literal":return`"${e.value}"${e.language?`@${e.language}`:e.datatype&&e.datatype.value!==Ol.string?`^^${e.datatype.value}`:""}`;case"Quad":return`<<${Hl(Vl(e.subject))} ${Hl(Vl(e.predicate))} ${Hl(Vl(e.object))}${Il(e.graph)?"":` ${Vl(e.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${e.termType}`)}}Dl=new zl;class Ql extends $l{constructor(e,t,n,r){super(""),this._subject=e,this._predicate=t,this._object=n,this._graph=r||Dl}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function Hl(e){return e.replace(Tl,((e,t)=>`"${t.replace(/"/g,'""')}`))}function Gl(e){return e.replace(Tl,((e,t)=>`"${t.replace(/""/g,'"')}`))}function Wl(e,t,n,r){return new Ql(e,t,n,r)}let Jl=0;class Kl{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&Zl(this,e.factory);const t="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(t),r=/trig/.test(t),i=/triple/.test(t),a=/quad/.test(t),o=this._n3Mode=/n3/.test(t),s=i||a;(this._supportsNamedGraphs=!(n||o))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||r||i||o),this._supportsRDFStar=""===t||/star|\*$/.test(t),s&&(this._resolveRelativeIRI=e=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new El({lineMode:s,n3:o}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){Jl=0}_setBase(e){if(e){const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,t,n,r,i){const a=this._n3Mode;this._contextStack.push({subject:n,predicate:r,object:i,graph:t,type:e,inverse:!!a&&this._inversePredicate,blankPrefix:a?this._prefixes._:"",quantified:a?this._quantified:null}),a&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.id.substr(2)}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(){const e=this._contextStack.pop(),t=this._n3Mode;this._subject=e.subject,this._predicate=e.predicate,this._object=e.object,this._graph=e.graph,t&&(this._inversePredicate=e.inverse,this._prefixes._=e.blankPrefix,this._quantified=e.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let n;switch(e.type){case"IRI":case"typeIRI":const t=this._resolveIRI(e.value);if(null===t)return this._error("Invalid IRI",e);n=this._namedNode(t);break;case"type":case"prefixed":const r=this._prefixes[e.prefix];if(void 0===r)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._namedNode(r+e.value);break;case"blank":n=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${t}`,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=null===this._predicate;return this._restoreContext(),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,n=null,r=this._readListItem;const i=this._subject,a=this._contextStack,o=a[a.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._blankNode(),this.RDF_FIRST,this._subject=t=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext(),0!==a.length&&"list"===a[a.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;n=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(t=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(t=this._readEntity(e)))return}if(null===n&&(this._subject=n=this._blankNode()),null===i?null===o.predicate?o.subject=n:o.object=n:this._emit(i,this.RDF_REST,n,this._graph),null!==t){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,n,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,t,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const n=this._readEntity(e);if(void 0===n)return;t=this._literal(this._literalValue,n),e=null;break;case"langcode":t=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const n=this._completeLiteral(e);if(n)return this._object=n.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===n.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,n=this._graph;const r=this._subject,i=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(n=this._readEntity(e))){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const e=this._predicate,t=this._object;i?this._emit(t,e,r,n):this._emit(r,e,t,n)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t="IRI"===e.type&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if(void 0!==(t=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,n=t.length&&t[t.length-1];if(n&&"item"===n.type){const e=this._subject;this._restoreContext(),this._emit(this._subject,this.RDF_FIRST,e,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,n;const r=this._blankNode();if(void 0!==(n=this._readEntity(e)))return null===this._predicate?(t=this._subject,this._subject=r):(t=this._object,this._object=r),this._emit(t,n,r,this._graph),this._readPath}_readBackwardPath(e){const t=this._blankNode();let n,r;if(void 0!==(n=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=t):(r=this._object,this._object=t),this._emit(t,n,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const t=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext(),null===this._subject?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,n,r){this._callback(null,this._quad(e,t,n,r||this.DEFAULTGRAPH))}_error(e,t){const n=new Error(`${e} on line ${t.line}.`);n.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=Yl}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let n="",r=-1,i=-1,a=0,o="/";for(;r<t;){switch(o){case":":if(i<0&&"/"===e[++r]&&"/"===e[++r])for(;(i=r+1)<t&&"/"!==e[i];)r=i;break;case"?":case"#":r=t;break;case"/":if("."===e[r+1])switch(o=e[++r+1],o){case"/":n+=e.substring(a,r-1),a=r+1;break;case void 0:case"?":case"#":return n+e.substring(a,r)+e.substr(r+1);case".":if(o=e[++r+1],void 0===o||"/"===o||"?"===o||"#"===o){if(n+=e.substring(a,r-2),(a=n.lastIndexOf("/"))>=i&&(n=n.substr(0,a)),"/"!==o)return`${n}/${e.substr(r+1)}`;a=r+1}}}o=e[++r]}return n+e.substring(a)}parse(e,t,n){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Jl++}_`,this._prefixCallback=n||Yl,this._inversePredicate=!1,this._quantified=Object.create(null),!t){const t=[];let n;if(this._callback=(e,r)=>{e?n=e:r&&t.push(r)},this._lexer.tokenize(e).every((e=>this._readCallback=this._readCallback(e))),n)throw n;return t}this._callback=t,this._lexer.tokenize(e,((e,t)=>{null!==e?(this._callback(e),this._callback=Yl):this._readCallback&&(this._readCallback=this._readCallback(t))}))}}function Yl(){}function Zl(e,t){const n=t.namedNode;e._namedNode=n,e._blankNode=t.blankNode,e._literal=t.literal,e._variable=t.variable,e._quad=t.quad,e.DEFAULTGRAPH=t.defaultGraph(),e.RDF_FIRST=n(vl.rdf.first),e.RDF_REST=n(vl.rdf.rest),e.RDF_NIL=n(vl.rdf.nil),e.N3_FORALL=n(vl.r.forAll),e.N3_FORSOME=n(vl.r.forSome),e.ABBREVIATIONS={a:n(vl.rdf.type),"=":n(vl.owl.sameAs),">":n(vl.log.implies)},e.QUANTIFIERS_GRAPH=n("urn:n3:quantifiers")}Zl(Kl.prototype,Ll);const Xl=Ll.defaultGraph(),{rdf:eu,xsd:tu}=vl,nu=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,ru=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,iu={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class au extends $l{equals(){return!1}}class ou{constructor(e,t){if(this._prefixRegex=/$0^/,e&&"function"!=typeof e.write&&(t=e,e=null),t=t||{},this._lists=t.lists,e)this._outputStream=e,this._endStream=void 0===t.end||!!t.end;else{let e="";this._outputStream={write(t,n,r){e+=t,r&&r()},end:t=>{t&&t(null,e)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=Xl,this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes),t.baseIRI&&(this._baseMatcher=new RegExp(`^${lu(t.baseIRI)}${t.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=t.baseIRI.length))}get _inDefaultGraph(){return Xl.equals(this._graph)}_write(e,t){this._outputStream.write(e,"utf8",t)}_writeQuad(e,t,n,r,i){try{r.equals(this._graph)||(this._write((null===this._subject?"":this._inDefaultGraph?".\n":"\n}\n")+(Xl.equals(r)?"":`${this._encodeIriOrBlank(r)} {\n`)),this._graph=r,this._subject=null),e.equals(this._subject)?t.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,i):this._write(`;\n    ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(n)}`,i):this._write(`${(null===this._subject?"":".\n")+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(n)}`,i)}catch(a){i&&i(a)}}_writeQuadLine(e,t,n,r,i){delete this._prefixMatch,this._write(this.quadToString(e,t,n,r),i)}quadToString(e,t,n,r){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(t)} ${this._encodeObject(n)}${r&&r.value?` ${this._encodeIriOrBlank(r)} .\n`:" .\n"}`}quadsToString(e){return e.map((e=>this.quadToString(e.subject,e.predicate,e.object,e.graph))).join("")}_encodeSubject(e){return"Quad"===e.termType?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if("NamedNode"!==e.termType)return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let t=e.value;this._baseMatcher&&this._baseMatcher.test(t)&&(t=t.substr(this._baseLength)),nu.test(t)&&(t=t.replace(ru,su));const n=this._prefixRegex.exec(t);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:t:`<${t}>`}_encodeLiteral(e){let t=e.value;if(nu.test(t)&&(t=t.replace(ru,su)),e.language)return`"${t}"@${e.language}`;if(this._lineMode){if(e.datatype.value===tu.string)return`"${t}"`}else switch(e.datatype.value){case tu.string:return`"${t}"`;case tu.boolean:if("true"===t||"false"===t)return t;break;case tu.integer:if(/^[+-]?\d+$/.test(t))return t;break;case tu.decimal:if(/^[+-]?\d*\.\d+$/.test(t))return t;break;case tu.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(t))return t}return`"${t}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===eu.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:t,object:n,graph:r}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(t)} ${this._encodeObject(n)}${Il(r)?"":` ${this._encodeIriOrBlank(r)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,t,n,r,i){void 0===n?this._writeQuad(e.subject,e.predicate,e.object,e.graph,t):"function"==typeof r?this._writeQuad(e,t,n,Xl,r):this._writeQuad(e,t,n,r||Xl,i)}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}addPrefix(e,t,n){const r={};r[e]=t,this.addPrefixes(r,n)}addPrefixes(e,t){if(!this._prefixIRIs)return t&&t();let n=!1;for(let r in e){let t=e[r];"string"!=typeof t&&(t=t.value),n=!0,null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null,this._graph=""),this._prefixIRIs[t]=r+=":",this._write(`@prefix ${r} <${t}>.\n`)}if(n){let e="",t="";for(const n in this._prefixIRIs)e+=e?`|${n}`:n,t+=(t?"|":"")+this._prefixIRIs[n];e=lu(e),this._prefixRegex=new RegExp(`^(?:${t})[^/]*$|^(${e})([a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(n?"\n":"",t)}blank(e,t){let n,r,i=e;switch(void 0===e?i=[]:e.termType?i=[{predicate:e,object:t}]:"length"in e||(i=[e]),r=i.length){case 0:return new au("[]");case 1:if(n=i[0],!(n.object instanceof au))return new au(`[ ${this._encodePredicate(n.predicate)} ${this._encodeObject(n.object)} ]`);default:let t="[";for(let a=0;a<r;a++)n=i[a],n.predicate.equals(e)?t+=`, ${this._encodeObject(n.object)}`:(t+=`${(a?";\n  ":"\n  ")+this._encodePredicate(n.predicate)} ${this._encodeObject(n.object)}`,e=n.predicate);return new au(`${t}\n]`)}}list(e){const t=e&&e.length||0,n=new Array(t);for(let r=0;r<t;r++)n[r]=this._encodeObject(e[r]);return new au(`(${n.join(" ")})`)}end(e){null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null),this._write=this._blockedWrite;let t=e&&((n,r)=>{t=null,e(n,r)});if(this._endStream)try{return this._outputStream.end(t)}catch(n){}t&&t()}}function su(e){let t=iu[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}function lu(e){return e.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const uu=m(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var cu={exports:{}},du=class e{constructor(e,t=new Map,n=0){this.prefix=e,this._existing=t,this.counter=n}clone(){const{prefix:t,_existing:n,counter:r}=this;return new e(t,new Map(n),r)}getId(e){const t=e&&this._existing.get(e);if(t)return t;const n=this.prefix+this.counter;return this.counter++,e&&this._existing.set(e,n),n}hasId(e){return this._existing.has(e)}getOldIds(){return[...this._existing.keys()]}};!function(e,t){if(!e.setImmediate){var n,r,i,a,o,s=1,l={},u=!1,c=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?n=function(e){process.nextTick((function(){f(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){f(e.data)},n=function(e){i.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,n=function(e){var t=c.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):n=function(e){setTimeout(f,0,e)}:(a="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&f(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),n=function(t){e.postMessage(a+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return l[s]=i,n(s),s++},d.clearImmediate=p}function p(e){delete l[e]}function f(e){if(u)setTimeout(f,0,e);else{var n=l[e];if(n){u=!0;try{!function(e){var n=e.callback,r=e.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(t,r)}}(n)}finally{p(e),u=!1}}}}}("undefined"==typeof self?h:self);const pu=self.crypto||self.msCrypto;var fu=class{constructor(e){if(!pu||!pu.subtle)throw new Error("crypto.subtle not found.");if("sha256"===e)this.algorithm={name:"SHA-256"};else{if("sha1"!==e)throw new Error(`Unsupported algorithm "${e}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(e){this._content+=e}async digest(){const e=(new TextEncoder).encode(this._content),t=new Uint8Array(await pu.subtle.digest(this.algorithm,e));let n="";for(let r=0;r<t.length;++r)n+=t[r].toString(16).padStart(2,"0");return n}},hu=class{constructor(e){this.current=e.sort(),this.done=!1,this.dir=new Map;for(let t=0;t<e.length;++t)this.dir.set(e[t],!0)}hasNext(){return!this.done}next(){const{current:e,dir:t}=this,n=e.slice();let r=null,i=0;const a=e.length;for(let o=0;o<a;++o){const n=e[o],s=t.get(n);(null===r||n>r)&&(s&&o>0&&n>e[o-1]||!s&&o<a-1&&n>e[o+1])&&(r=n,i=o)}if(null===r)this.done=!0;else{const n=t.get(r)?i-1:i+1;e[i]=e[n],e[n]=r;for(const i of e)i>r&&t.set(i,!t.get(i))}return n}};const mu="http://www.w3.org/1999/02/22-rdf-syntax-ns#"+"langString",vu="http://www.w3.org/2001/XMLSchema#string",gu="NamedNode",yu="BlankNode",bu="Literal",wu="DefaultGraph",_u={};(()=>{const e="(?:<([^:]+:[^>]*)>)",t="A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�"+"_",n=t+"0-9-·̀-ͯ‿-⁀",r="(_:(?:["+t+"0-9])(?:(?:["+n+".])*(?:["+n+"]))?)",i="[ \\t]+",a="[ \\t]*",o="(?:"+e+"|"+r+")"+i,s=e+i,l="(?:"+e+"|"+r+"|"+("(?:"+'"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"'+"(?:"+("(?:\\^\\^"+e+")")+"|"+"(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))"+")?)")+")"+a,u="(?:\\.|(?:(?:"+e+"|"+r+")"+a+"\\.))";_u.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,_u.empty=new RegExp("^"+a+"$"),_u.quad=new RegExp("^"+a+o+s+l+u+a+"$")})();var xu=class e{static parse(e){const t=[],n={},r=e.split(_u.eoln);let i=0;for(const a of r){if(i++,_u.empty.test(a))continue;const e=a.match(_u.quad);if(null===e)throw new Error("N-Quads parse error on line "+i+".");const r={subject:null,predicate:null,object:null,graph:null};if(void 0!==e[1]?r.subject={termType:gu,value:e[1]}:r.subject={termType:yu,value:e[2]},r.predicate={termType:gu,value:e[3]},void 0!==e[4]?r.object={termType:gu,value:e[4]}:void 0!==e[5]?r.object={termType:yu,value:e[5]}:(r.object={termType:bu,value:void 0,datatype:{termType:gu}},void 0!==e[7]?r.object.datatype.value=e[7]:void 0!==e[8]?(r.object.datatype.value=mu,r.object.language=e[8]):r.object.datatype.value=vu,r.object.value=e[6].replace(Eu,(function(e,t,n,r){if(t)switch(t){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(n)return String.fromCharCode(parseInt(n,16));if(r)throw new Error("Unsupported U escape")}))),void 0!==e[9]?r.graph={termType:gu,value:e[9]}:void 0!==e[10]?r.graph={termType:yu,value:e[10]}:r.graph={termType:wu,value:""},r.graph.value in n){let e=!0;const i=n[r.graph.value];for(const t of i)if(ku(t,r)){e=!1;break}e&&(i.push(r),t.push(r))}else n[r.graph.value]=[r],t.push(r)}return t}static serialize(t){Array.isArray(t)||(t=e.legacyDatasetToQuads(t));const n=[];for(const r of t)n.push(e.serializeQuad(r));return n.sort().join("")}static serializeQuadComponents(e,t,n,r){let i="";return e.termType===gu?i+=`<${e.value}>`:i+=`${e.value}`,i+=` <${t.value}> `,n.termType===gu?i+=`<${n.value}>`:n.termType===yu?i+=n.value:(i+=`"${function(e){return e.replace(Au,(function(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}}))}(n.value)}"`,n.datatype.value===mu?n.language&&(i+=`@${n.language}`):n.datatype.value!==vu&&(i+=`^^<${n.datatype.value}>`)),r.termType===gu?i+=` <${r.value}>`:r.termType===yu&&(i+=` ${r.value}`),i+=" .\n",i}static serializeQuad(t){return e.serializeQuadComponents(t.subject,t.predicate,t.object,t.graph)}static legacyDatasetToQuads(e){const t=[],n={"blank node":yu,IRI:gu,literal:bu};for(const r in e){e[r].forEach((e=>{const i={};for(const t in e){const r=e[t],a={termType:n[r.type],value:r.value};a.termType===bu&&(a.datatype={termType:gu},"datatype"in r&&(a.datatype.value=r.datatype),"language"in r?("datatype"in r||(a.datatype.value=mu),a.language=r.language):"datatype"in r||(a.datatype.value=vu)),i[t]=a}i.graph="@default"===r?{termType:wu,value:""}:{termType:r.startsWith("_:")?yu:gu,value:r},t.push(i)}))}return t}};function ku(e,t){return e.subject.termType===t.subject.termType&&e.object.termType===t.object.termType&&(e.subject.value===t.subject.value&&e.predicate.value===t.predicate.value&&e.object.value===t.object.value&&(e.object.termType!==bu||e.object.datatype.termType===t.object.datatype.termType&&e.object.language===t.object.language&&e.object.datatype.value===t.object.datatype.value))}const Au=/["\\\n\r]/g;const Eu=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;const Iu=du,Su=fu,Ru=hu,Cu=xu;var Ou=class{constructor({maxDeepIterations:e=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new Iu("_:c14n"),this.hashAlgorithm="sha256",this.maxDeepIterations=e,this.quads=null,this.deepIterations=null}async main(e){this.deepIterations=new Map,this.quads=e;for(const s of e)this._addBlankNodeQuadInfo({quad:s,component:s.subject}),this._addBlankNodeQuadInfo({quad:s,component:s.object}),this._addBlankNodeQuadInfo({quad:s,component:s.graph});const t=new Map,n=[...this.blankNodeInfo.keys()];let r=0;for(const s of n)++r%100==0&&await this._yield(),await this._hashAndTrackBlankNode({id:s,hashToBlankNodes:t});const i=[...t.keys()].sort(),a=[];for(const s of i){const e=t.get(s);if(e.length>1){a.push(e);continue}const n=e[0];this.canonicalIssuer.getId(n)}for(const s of a){const e=[];for(const t of s){if(this.canonicalIssuer.hasId(t))continue;const n=new Iu("_:b");n.getId(t);const r=await this.hashNDegreeQuads(t,n);e.push(r)}e.sort(Du);for(const t of e){const e=t.issuer.getOldIds();for(const t of e)this.canonicalIssuer.getId(t)}}const o=[];for(const s of this.quads){const e=Cu.serializeQuadComponents(this._componentWithCanonicalId(s.subject),s.predicate,this._componentWithCanonicalId(s.object),this._componentWithCanonicalId(s.graph));o.push(e)}return o.sort(),o.join("")}async hashFirstDegreeQuads(e){const t=[],n=this.blankNodeInfo.get(e),r=n.quads;for(const a of r){const n={subject:null,predicate:a.predicate,object:null,graph:null};n.subject=this.modifyFirstDegreeComponent(e,a.subject,"subject"),n.object=this.modifyFirstDegreeComponent(e,a.object,"object"),n.graph=this.modifyFirstDegreeComponent(e,a.graph,"graph"),t.push(Cu.serializeQuad(n))}t.sort();const i=new Su(this.hashAlgorithm);for(const a of t)i.update(a);return n.hash=await i.digest(),n.hash}async hashRelatedBlankNode(e,t,n,r){let i;i=this.canonicalIssuer.hasId(e)?this.canonicalIssuer.getId(e):n.hasId(e)?n.getId(e):this.blankNodeInfo.get(e).hash;const a=new Su(this.hashAlgorithm);return a.update(r),"g"!==r&&a.update(this.getRelatedPredicate(t)),a.update(i),a.digest()}async hashNDegreeQuads(e,t){const n=this.deepIterations.get(e)||0;if(n>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(e,n+1);const r=new Su(this.hashAlgorithm),i=await this.createHashToRelated(e,t),a=[...i.keys()].sort();for(const o of a){r.update(o);let e,n="";const a=new Ru(i.get(o));let s=0;for(;a.hasNext();){const r=a.next();++s%3==0&&await this._yield();let i=t.clone(),o="";const l=[];let u=!1;for(const e of r)if(this.canonicalIssuer.hasId(e)?o+=this.canonicalIssuer.getId(e):(i.hasId(e)||l.push(e),o+=i.getId(e)),0!==n.length&&o>n){u=!0;break}if(!u){for(const e of l){const t=await this.hashNDegreeQuads(e,i);if(o+=i.getId(e),o+=`<${t.hash}>`,i=t.issuer,0!==n.length&&o>n){u=!0;break}}u||(0===n.length||o<n)&&(n=o,e=i)}}r.update(n),t=e}return{hash:await r.digest(),issuer:t}}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}async createHashToRelated(e,t){const n=new Map,r=this.blankNodeInfo.get(e).quads;let i=0;for(const a of r)++i%100==0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:a,component:a.subject,position:"s",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:a,component:a.object,position:"o",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:a,component:a.graph,position:"g",id:e,issuer:t,hashToRelated:n})]);return n}async _hashAndTrackBlankNode({id:e,hashToBlankNodes:t}){const n=await this.hashFirstDegreeQuads(e),r=t.get(n);r?r.push(e):t.set(n,[e])}_addBlankNodeQuadInfo({quad:e,component:t}){if("BlankNode"!==t.termType)return;const n=t.value,r=this.blankNodeInfo.get(n);r?r.quads.add(e):this.blankNodeInfo.set(n,{quads:new Set([e]),hash:null})}async _addRelatedBlankNodeHash({quad:e,component:t,position:n,id:r,issuer:i,hashToRelated:a}){if("BlankNode"!==t.termType||t.value===r)return;const o=t.value,s=await this.hashRelatedBlankNode(o,e,i,n),l=a.get(s);l?l.push(o):a.set(s,[o])}_componentWithCanonicalId(e){return"BlankNode"!==e.termType||e.value.startsWith(this.canonicalIssuer.prefix)?e:{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}}async _yield(){return new Promise((e=>setImmediate(e)))}};function Du(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}const ju=Ou;const Tu=du,Pu=fu,Mu=hu,Lu=xu;var $u=class{constructor({maxDeepIterations:e=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new Tu("_:c14n"),this.hashAlgorithm="sha256",this.maxDeepIterations=e,this.quads=null,this.deepIterations=null}main(e){this.deepIterations=new Map,this.quads=e;for(const o of e)this._addBlankNodeQuadInfo({quad:o,component:o.subject}),this._addBlankNodeQuadInfo({quad:o,component:o.object}),this._addBlankNodeQuadInfo({quad:o,component:o.graph});const t=new Map,n=[...this.blankNodeInfo.keys()];for(const o of n)this._hashAndTrackBlankNode({id:o,hashToBlankNodes:t});const r=[...t.keys()].sort(),i=[];for(const o of r){const e=t.get(o);if(e.length>1){i.push(e);continue}const n=e[0];this.canonicalIssuer.getId(n)}for(const o of i){const e=[];for(const t of o){if(this.canonicalIssuer.hasId(t))continue;const n=new Tu("_:b");n.getId(t);const r=this.hashNDegreeQuads(t,n);e.push(r)}e.sort(Nu);for(const t of e){const e=t.issuer.getOldIds();for(const t of e)this.canonicalIssuer.getId(t)}}const a=[];for(const o of this.quads){const e=Lu.serializeQuadComponents(this._componentWithCanonicalId({component:o.subject}),o.predicate,this._componentWithCanonicalId({component:o.object}),this._componentWithCanonicalId({component:o.graph}));a.push(e)}return a.sort(),a.join("")}hashFirstDegreeQuads(e){const t=[],n=this.blankNodeInfo.get(e),r=n.quads;for(const a of r){const n={subject:null,predicate:a.predicate,object:null,graph:null};n.subject=this.modifyFirstDegreeComponent(e,a.subject,"subject"),n.object=this.modifyFirstDegreeComponent(e,a.object,"object"),n.graph=this.modifyFirstDegreeComponent(e,a.graph,"graph"),t.push(Lu.serializeQuad(n))}t.sort();const i=new Pu(this.hashAlgorithm);for(const a of t)i.update(a);return n.hash=i.digest(),n.hash}hashRelatedBlankNode(e,t,n,r){let i;i=this.canonicalIssuer.hasId(e)?this.canonicalIssuer.getId(e):n.hasId(e)?n.getId(e):this.blankNodeInfo.get(e).hash;const a=new Pu(this.hashAlgorithm);return a.update(r),"g"!==r&&a.update(this.getRelatedPredicate(t)),a.update(i),a.digest()}hashNDegreeQuads(e,t){const n=this.deepIterations.get(e)||0;if(n>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(e,n+1);const r=new Pu(this.hashAlgorithm),i=this.createHashToRelated(e,t),a=[...i.keys()].sort();for(const o of a){r.update(o);let e,n="";const a=new Mu(i.get(o));for(;a.hasNext();){const r=a.next();let i=t.clone(),o="";const s=[];let l=!1;for(const e of r)if(this.canonicalIssuer.hasId(e)?o+=this.canonicalIssuer.getId(e):(i.hasId(e)||s.push(e),o+=i.getId(e)),0!==n.length&&o>n){l=!0;break}if(!l){for(const e of s){const t=this.hashNDegreeQuads(e,i);if(o+=i.getId(e),o+=`<${t.hash}>`,i=t.issuer,0!==n.length&&o>n){l=!0;break}}l||(0===n.length||o<n)&&(n=o,e=i)}}r.update(n),t=e}return{hash:r.digest(),issuer:t}}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}createHashToRelated(e,t){const n=new Map,r=this.blankNodeInfo.get(e).quads;for(const i of r)this._addRelatedBlankNodeHash({quad:i,component:i.subject,position:"s",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:i,component:i.object,position:"o",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:i,component:i.graph,position:"g",id:e,issuer:t,hashToRelated:n});return n}_hashAndTrackBlankNode({id:e,hashToBlankNodes:t}){const n=this.hashFirstDegreeQuads(e),r=t.get(n);r?r.push(e):t.set(n,[e])}_addBlankNodeQuadInfo({quad:e,component:t}){if("BlankNode"!==t.termType)return;const n=t.value,r=this.blankNodeInfo.get(n);r?r.quads.add(e):this.blankNodeInfo.set(n,{quads:new Set([e]),hash:null})}_addRelatedBlankNodeHash({quad:e,component:t,position:n,id:r,issuer:i,hashToRelated:a}){if("BlankNode"!==t.termType||t.value===r)return;const o=t.value,s=this.hashRelatedBlankNode(o,e,i,n),l=a.get(s);l?l.push(o):a.set(s,[o])}_componentWithCanonicalId({component:e}){return"BlankNode"!==e.termType||e.value.startsWith(this.canonicalIssuer.prefix)?e:{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}}};function Nu(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}const Bu=$u;const Uu=Ou,Fu=class extends ju{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,n){return"BlankNode"!==t.termType?t:"graph"===n?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}async createHashToRelated(e,t){const n=new Map,r=this.blankNodeInfo.get(e).quads;let i=0;for(const a of r){let r,o;if("BlankNode"===a.subject.termType&&a.subject.value!==e)o=a.subject.value,r="p";else{if("BlankNode"!==a.object.termType||a.object.value===e)continue;o=a.object.value,r="r"}++i%100==0&&await this._yield();const s=await this.hashRelatedBlankNode(o,a,t,r),l=n.get(s);l?l.push(o):n.set(s,[o])}return n}},zu=$u,qu=class extends Bu{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,n){return"BlankNode"!==t.termType?t:"graph"===n?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t){const n=new Map,r=this.blankNodeInfo.get(e).quads;for(const i of r){let r,a;if("BlankNode"===i.subject.termType&&i.subject.value!==e)a=i.subject.value,r="p";else{if("BlankNode"!==i.object.termType||i.object.value===e)continue;a=i.object.value,r="r"}const o=this.hashRelatedBlankNode(a,i,t,r),s=n.get(o);s?s.push(a):n.set(o,[a])}return n}};let Vu;try{Vu=uu}catch(Mh){}const Qu={};var Hu=Qu;Qu.NQuads=xu,Qu.IdentifierIssuer=du,Qu._rdfCanonizeNative=function(e){return e&&(Vu=e),Vu},Qu.canonize=async function(e,t){if(Array.isArray(e)||(e=Qu.NQuads.legacyDatasetToQuads(e)),t.useNative){if(!Vu)throw new Error("rdf-canonize-native not available");return new Promise(((n,r)=>Vu.canonize(e,t,((e,t)=>e?r(e):n(t)))))}if("URDNA2015"===t.algorithm)return new Uu(t).main(e);if("URGNA2012"===t.algorithm)return new Fu(t).main(e);if(!("algorithm"in t))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm)},Qu._canonizeSync=function(e,t){if(Array.isArray(e)||(e=Qu.NQuads.legacyDatasetToQuads(e)),t.useNative){if(Vu)return Vu.canonizeSync(e,t);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===t.algorithm)return new zu(t).main(e);if("URGNA2012"===t.algorithm)return new qu(t).main(e);if(!("algorithm"in t))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm)},cu.exports=Hu;const Gu={};var Wu=Gu;Gu.isArray=Array.isArray,Gu.isBoolean=e=>"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e),Gu.isDouble=e=>Gu.isNumber(e)&&(-1!==String(e).indexOf(".")||Math.abs(e)>=1e21),Gu.isEmptyObject=e=>Gu.isObject(e)&&0===Object.keys(e).length,Gu.isNumber=e=>"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e),Gu.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),Gu.isObject=e=>"[object Object]"===Object.prototype.toString.call(e),Gu.isString=e=>"string"==typeof e||"[object String]"===Object.prototype.toString.call(e),Gu.isUndefined=e=>void 0===e;const Ju=Wu,Ku={};var Yu=Ku;Ku.isSubject=e=>{if(Ju.isObject(e)&&!("@value"in e||"@set"in e||"@list"in e)){return Object.keys(e).length>1||!("@id"in e)}return!1},Ku.isSubjectReference=e=>Ju.isObject(e)&&1===Object.keys(e).length&&"@id"in e,Ku.isValue=e=>Ju.isObject(e)&&"@value"in e,Ku.isList=e=>Ju.isObject(e)&&"@list"in e,Ku.isGraph=e=>Ju.isObject(e)&&"@graph"in e&&1===Object.keys(e).filter((e=>"@id"!==e&&"@index"!==e)).length,Ku.isSimpleGraph=e=>Ku.isGraph(e)&&!("@id"in e),Ku.isBlankNode=e=>!!Ju.isObject(e)&&("@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e));var Zu=class JsonLdError extends Error{constructor(e="An unspecified JSON-LD error occurred.",t="jsonld.Error",n={}){super(e),this.name=t,this.message=e,this.details=n}};const Xu=Yu,ec=Wu,tc=cu.exports.IdentifierIssuer,nc=Zu,rc=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,ic=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,ac=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,oc={accept:"application/ld+json, application/json"},sc={};var lc=sc;function uc(e,t){if(ec.isArray(t))for(let n=0;n<t.length;++n)t[n]=uc(e,t[n]);else if(Xu.isList(t))t["@list"]=uc(e,t["@list"]);else if(ec.isObject(t)){Xu.isBlankNode(t)&&(t["@id"]=e.getId(t["@id"]));const n=Object.keys(t).sort();for(let r=0;r<n.length;++r){const i=n[r];"@id"!==i&&(t[i]=uc(e,t[i]))}}return t}sc.IdentifierIssuer=tc,sc.clone=function(e){if(e&&"object"==typeof e){let t;if(ec.isArray(e)){t=[];for(let n=0;n<e.length;++n)t[n]=sc.clone(e[n])}else if(e instanceof Map){t=new Map;for(const[n,r]of e)t.set(n,sc.clone(r))}else if(e instanceof Set){t=new Set;for(const n of e)t.add(sc.clone(n))}else if(ec.isObject(e)){t={};for(const n in e)t[n]=sc.clone(e[n])}else t=e.toString();return t}return e},sc.asArray=function(e){return Array.isArray(e)?e:[e]},sc.buildHeaders=(e={})=>{if(Object.keys(e).some((e=>"accept"===e.toLowerCase())))throw new RangeError('Accept header may not be specified; only "'+oc.accept+'" is supported.');return Object.assign({Accept:oc.accept},e)},sc.parseLinkHeader=e=>{const t={},n=e.match(rc);for(let r=0;r<n.length;++r){let e=n[r].match(ic);if(!e)continue;const i={target:e[1]},a=e[2];for(;e=ac.exec(a);)i[e[1]]=void 0===e[2]?e[3]:e[2];const o=i["rel"]||"";Array.isArray(t[o])?t[o].push(i):t.hasOwnProperty(o)?t[o]=[t[o],i]:t[o]=i}return t},sc.validateTypeValue=(e,t)=>{if(!(ec.isString(e)||ec.isArray(e)&&e.every((e=>ec.isString(e))))){if(t&&ec.isObject(e))switch(Object.keys(e).length){case 0:return;case 1:if("@default"in e&&sc.asArray(e["@default"]).every((e=>ec.isString(e))))return}throw new nc('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}},sc.hasProperty=(e,t)=>{if(e.hasOwnProperty(t)){const n=e[t];return!ec.isArray(n)||n.length>0}return!1},sc.hasValue=(e,t,n)=>{if(sc.hasProperty(e,t)){let r=e[t];const i=Xu.isList(r);if(ec.isArray(r)||i){i&&(r=r["@list"]);for(let e=0;e<r.length;++e)if(sc.compareValues(n,r[e]))return!0}else if(!ec.isArray(n))return sc.compareValues(n,r)}return!1},sc.addValue=(e,t,n,r)=>{if("propertyIsArray"in(r=r||{})||(r.propertyIsArray=!1),"valueIsArray"in r||(r.valueIsArray=!1),"allowDuplicate"in r||(r.allowDuplicate=!0),"prependValue"in r||(r.prependValue=!1),r.valueIsArray)e[t]=n;else if(ec.isArray(n)){0===n.length&&r.propertyIsArray&&!e.hasOwnProperty(t)&&(e[t]=[]),r.prependValue&&(n=n.concat(e[t]),e[t]=[]);for(let i=0;i<n.length;++i)sc.addValue(e,t,n[i],r)}else if(e.hasOwnProperty(t)){const i=!r.allowDuplicate&&sc.hasValue(e,t,n);ec.isArray(e[t])||i&&!r.propertyIsArray||(e[t]=[e[t]]),i||(r.prependValue?e[t].unshift(n):e[t].push(n))}else e[t]=r.propertyIsArray?[n]:n},sc.getValues=(e,t)=>[].concat(e[t]||[]),sc.removeProperty=(e,t)=>{delete e[t]},sc.removeValue=(e,t,n,r)=>{"propertyIsArray"in(r=r||{})||(r.propertyIsArray=!1);const i=sc.getValues(e,t).filter((e=>!sc.compareValues(e,n)));0===i.length?sc.removeProperty(e,t):1!==i.length||r.propertyIsArray?e[t]=i:e[t]=i[0]},sc.relabelBlankNodes=(e,t)=>uc((t=t||{}).issuer||new tc("_:b"),e),sc.compareValues=(e,t)=>e===t||(!(!Xu.isValue(e)||!Xu.isValue(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!(ec.isObject(e)&&"@id"in e&&ec.isObject(t)&&"@id"in t)&&e["@id"]===t["@id"]),sc.compareShortestLeast=(e,t)=>e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1;const cc="http://www.w3.org/1999/02/22-rdf-syntax-ns#",dc="http://www.w3.org/2001/XMLSchema#";var pc,fc,hc={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:cc,RDF_LIST:cc+"List",RDF_FIRST:cc+"first",RDF_REST:cc+"rest",RDF_NIL:cc+"nil",RDF_TYPE:cc+"type",RDF_PLAIN_LITERAL:cc+"PlainLiteral",RDF_XML_LITERAL:cc+"XMLLiteral",RDF_JSON_LITERAL:cc+"JSON",RDF_OBJECT:cc+"object",RDF_LANGSTRING:cc+"langString",XSD:dc,XSD_BOOLEAN:dc+"boolean",XSD_DOUBLE:dc+"double",XSD_INTEGER:dc+"integer",XSD_STRING:dc+"string"};function mc(){return fc||(fc=1,pc=class{constructor(){this._requests={}}wrapLoader(e){const t=this;return t._loader=e,function(){return t.add.apply(t,arguments)}}async add(e){let t=this._requests[e];if(t)return Promise.resolve(t);t=this._requests[e]=this._loader(e);try{return await t}finally{delete this._requests[e]}}}),pc}const vc=Wu,gc={};var yc=gc;gc.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},gc.parse=(e,t)=>{const n={},r=gc.parsers[t||"full"],i=r.regex.exec(e);let a=r.keys.length;for(;a--;)n[r.keys[a]]=void 0===i[a]?null:i[a];return("https"===n.scheme&&"443"===n.port||"http"===n.scheme&&"80"===n.port)&&(n.href=n.href.replace(":"+n.port,""),n.authority=n.authority.replace(":"+n.port,""),n.port=null),n.normalizedPath=gc.removeDotSegments(n.path),n},gc.prependBase=(e,t)=>{if(null===e)return t;if(gc.isAbsolute(t))return t;e&&!vc.isString(e)||(e=gc.parse(e||""));const n=gc.parse(t),r={protocol:e.protocol||""};if(null!==n.authority)r.authority=n.authority,r.path=n.path,r.query=n.query;else if(r.authority=e.authority,""===n.path)r.path=e.path,null!==n.query?r.query=n.query:r.query=e.query;else{if(0===n.path.indexOf("/"))r.path=n.path;else{let t=e.path;t=t.substr(0,t.lastIndexOf("/")+1),(t.length>0||e.authority)&&"/"!==t.substr(-1)&&(t+="/"),t+=n.path,r.path=t}r.query=n.query}""!==n.path&&(r.path=gc.removeDotSegments(r.path));let i=r.protocol;return null!==r.authority&&(i+="//"+r.authority),i+=r.path,null!==r.query&&(i+="?"+r.query),null!==n.fragment&&(i+="#"+n.fragment),""===i&&(i="./"),i},gc.removeBase=(e,t)=>{if(null===e)return t;e&&!vc.isString(e)||(e=gc.parse(e||""));let n="";if(""!==e.href?n+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(n+="//"),0!==t.indexOf(n))return t;const r=gc.parse(t.substr(n.length)),i=e.normalizedPath.split("/"),a=r.normalizedPath.split("/"),o=r.fragment||r.query?0:1;for(;i.length>0&&a.length>o&&i[0]===a[0];)i.shift(),a.shift();let s="";if(i.length>0){i.pop();for(let e=0;e<i.length;++e)s+="../"}return s+=a.join("/"),null!==r.query&&(s+="?"+r.query),null!==r.fragment&&(s+="#"+r.fragment),""===s&&(s="./"),s},gc.removeDotSegments=e=>{if(0===e.length)return"";const t=e.split("/"),n=[];for(;t.length>0;){const e=t.shift(),r=0===t.length;"."!==e?".."!==e?n.push(e):(n.pop(),r&&n.push("")):r&&n.push("")}return"/"===e[0]&&n.length>0&&""!==n[0]&&n.unshift(""),1===n.length&&""===n[0]?"/":n.join("/")};const bc=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;gc.isAbsolute=e=>vc.isString(e)&&bc.test(e),gc.isRelative=e=>vc.isString(e);const{parseLinkHeader:wc,buildHeaders:_c}=lc,{LINK_HEADER_CONTEXT:xc}=hc,kc=Zu,Ac=mc(),{prependBase:Ec}=yc,Ic=/(^|(\r\n))link:/i;const Sc=({secure:e,headers:t={},xhr:n}={headers:{}})=>{t=_c(t);return(new Ac).wrapLoader((async function r(i){if(0!==i.indexOf("http:")&&0!==i.indexOf("https:"))throw new kc('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:i});if(e&&0!==i.indexOf("https"))throw new kc(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:i});let a;try{a=await function(e,t,n){const r=new(e=e||XMLHttpRequest);return new Promise(((e,i)=>{r.onload=()=>e(r),r.onerror=e=>i(e),r.open("GET",t,!0);for(const t in n)r.setRequestHeader(t,n[t]);r.send()}))}(n,i,t)}catch(Mh){throw new kc("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:i,cause:Mh})}if(a.status>=400)throw new kc("URL could not be dereferenced: "+a.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:i,httpStatusCode:a.status});let o={contextUrl:null,documentUrl:i,document:a.response},s=null;const l=a.getResponseHeader("Content-Type");let u;Ic.test(a.getAllResponseHeaders())&&(u=a.getResponseHeader("Link"));if(u&&"application/ld+json"!==l){const e=wc(u),t=e[xc];if(Array.isArray(t))throw new kc("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:i});t&&(o.contextUrl=t.target),s=e["alternate"],s&&"application/ld+json"==s.type&&!(l||"").match(/^application\/(\w*\+)?json$/)&&(o=await r(Ec(i,s.target)))}return o}))},Rc={};var Cc,Oc,Dc=Rc;Rc.setupDocumentLoaders=function(e){"undefined"!=typeof XMLHttpRequest&&(e.documentLoaders.xhr=Sc,e.useDocumentLoader("xhr"))},Rc.setupGlobals=function(e){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor})};var jc=Tc;function Tc(e){var t=this;if(t instanceof Tc||(t=new Tc),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}function Pc(e,t,n){var r=t===e.head?new $c(n,null,t,e):new $c(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function Mc(e,t){e.tail=new $c(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Lc(e,t){e.head=new $c(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function $c(e,t,n,r){if(!(this instanceof $c))return new $c(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}Tc.Node=$c,Tc.create=Tc,Tc.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},Tc.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},Tc.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},Tc.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Mc(this,arguments[e]);return this.length},Tc.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Lc(this,arguments[e]);return this.length},Tc.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},Tc.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},Tc.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},Tc.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},Tc.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},Tc.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},Tc.prototype.map=function(e,t){t=t||this;for(var n=new Tc,r=this.head;null!==r;)n.push(e.call(t,r.value,this)),r=r.next;return n},Tc.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Tc,r=this.tail;null!==r;)n.push(e.call(t,r.value,this)),r=r.prev;return n},Tc.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},Tc.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},Tc.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},Tc.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},Tc.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new Tc;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;for(;null!==i&&r<t;r++,i=i.next)n.push(i.value);return n},Tc.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new Tc;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;null!==i&&r>t;r--)i=i.prev;for(;null!==i&&r>e;r--,i=i.prev)n.push(i.value);return n},Tc.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;var a=[];for(r=0;i&&r<t;r++)a.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(r=0;r<n.length;r++)i=Pc(this,i,n[r]);return a},Tc.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{(Oc?Cc:(Oc=1,Cc=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}))(Tc)}catch(PQ){}const Nc=jc,Bc=Symbol("max"),Uc=Symbol("length"),Fc=Symbol("lengthCalculator"),zc=Symbol("allowStale"),qc=Symbol("maxAge"),Vc=Symbol("dispose"),Qc=Symbol("noDisposeOnSet"),Hc=Symbol("lruList"),Gc=Symbol("cache"),Wc=Symbol("updateAgeOnGet"),Jc=()=>1;const Kc=(e,t,n)=>{const r=e[Gc].get(t);if(r){const t=r.value;if(Yc(e,t)){if(Xc(e,r),!e[zc])return}else n&&(e[Wc]&&(r.value.now=Date.now()),e[Hc].unshiftNode(r));return t.value}},Yc=(e,t)=>{if(!t||!t.maxAge&&!e[qc])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[qc]&&n>e[qc]},Zc=e=>{if(e[Uc]>e[Bc])for(let t=e[Hc].tail;e[Uc]>e[Bc]&&null!==t;){const n=t.prev;Xc(e,t),t=n}},Xc=(e,t)=>{if(t){const n=t.value;e[Vc]&&e[Vc](n.key,n.value),e[Uc]-=n.length,e[Gc].delete(n.key),e[Hc].removeNode(t)}};class ed{constructor(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}}const td=(e,t,n,r)=>{let i=n.value;Yc(e,i)&&(Xc(e,n),e[zc]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var nd=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[Bc]=e.max||1/0;const t=e.length||Jc;if(this[Fc]="function"!=typeof t?Jc:t,this[zc]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[qc]=e.maxAge||0,this[Vc]=e.dispose,this[Qc]=e.noDisposeOnSet||!1,this[Wc]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[Bc]=e||1/0,Zc(this)}get max(){return this[Bc]}set allowStale(e){this[zc]=!!e}get allowStale(){return this[zc]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[qc]=e,Zc(this)}get maxAge(){return this[qc]}set lengthCalculator(e){"function"!=typeof e&&(e=Jc),e!==this[Fc]&&(this[Fc]=e,this[Uc]=0,this[Hc].forEach((e=>{e.length=this[Fc](e.value,e.key),this[Uc]+=e.length}))),Zc(this)}get lengthCalculator(){return this[Fc]}get length(){return this[Uc]}get itemCount(){return this[Hc].length}rforEach(e,t){t=t||this;for(let n=this[Hc].tail;null!==n;){const r=n.prev;td(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[Hc].head;null!==n;){const r=n.next;td(this,e,n,t),n=r}}keys(){return this[Hc].toArray().map((e=>e.key))}values(){return this[Hc].toArray().map((e=>e.value))}reset(){this[Vc]&&this[Hc]&&this[Hc].length&&this[Hc].forEach((e=>this[Vc](e.key,e.value))),this[Gc]=new Map,this[Hc]=new Nc,this[Uc]=0}dump(){return this[Hc].map((e=>!Yc(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[Hc]}set(e,t,n){if((n=n||this[qc])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,i=this[Fc](t,e);if(this[Gc].has(e)){if(i>this[Bc])return Xc(this,this[Gc].get(e)),!1;const a=this[Gc].get(e).value;return this[Vc]&&(this[Qc]||this[Vc](e,a.value)),a.now=r,a.maxAge=n,a.value=t,this[Uc]+=i-a.length,a.length=i,this.get(e),Zc(this),!0}const a=new ed(e,t,i,r,n);return a.length>this[Bc]?(this[Vc]&&this[Vc](e,t),!1):(this[Uc]+=a.length,this[Hc].unshift(a),this[Gc].set(e,this[Hc].head),Zc(this),!0)}has(e){if(!this[Gc].has(e))return!1;const t=this[Gc].get(e).value;return!Yc(this,t)}get(e){return Kc(this,e,!0)}peek(e){return Kc(this,e,!1)}pop(){const e=this[Hc].tail;return e?(Xc(this,e),e.value):null}del(e){Xc(this,this[Gc].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const e=i-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[Gc].forEach(((e,t)=>Kc(this,t,!1)))}};const rd=nd,id=10;const{isArray:ad,isObject:od,isString:sd}=Wu,{asArray:ld}=lc,{prependBase:ud}=yc,cd=Zu,dd=class{constructor({document:e}){this.document=e,this.cache=new rd({max:id})}getProcessed(e){return this.cache.get(e)}setProcessed(e,t){this.cache.set(e,t)}},pd=10;function fd(e){throw new cd("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:e})}function hd({context:e,base:t}){if(!e)return;const n=e["@context"];if(sd(n))e["@context"]=ud(t,n);else if(ad(n))for(let r=0;r<n.length;++r){const e=n[r];sd(e)?n[r]=ud(t,e):od(e)&&hd({context:{"@context":e},base:t})}else if(od(n))for(const r in n)hd({context:n[r],base:t})}var md=cu.exports.NQuads;const vd=lc,gd=Zu,{isArray:yd,isObject:bd,isString:wd,isUndefined:_d}=Wu,{isAbsolute:xd,isRelative:kd,prependBase:Ad}=yc,{asArray:Ed,compareShortestLeast:Id}=lc,Sd=new Map,Rd=1e4,Cd=/^@[a-zA-Z]+$/,Od={};var Dd=Od;function jd(e,t,n,r,i,a){if(null===t||!wd(t)||Od.isKeyword(t))return t;if(t.match(Cd))return null;if(r&&r.hasOwnProperty(t)&&!0!==i.get(t)&&Od.createTermDefinition({activeCtx:e,localCtx:r,term:t,defined:i,options:a}),(n=n||{}).vocab){const n=e.mappings.get(t);if(null===n)return null;if(bd(n)&&"@id"in n)return n["@id"]}const o=t.indexOf(":");if(o>0){const n=t.substr(0,o),s=t.substr(o+1);if("_"===n||0===s.indexOf("//"))return t;r&&r.hasOwnProperty(n)&&Od.createTermDefinition({activeCtx:e,localCtx:r,term:n,defined:i,options:a});const l=e.mappings.get(n);if(l&&l._prefix)return l["@id"]+s;if(xd(t))return t}if(n.vocab&&"@vocab"in e)return e["@vocab"]+t;if(n.base&&"@base"in e){if(e["@base"])return Ad(Ad(a.base,e["@base"]),t)}else if(n.base)return Ad(a.base,t);return t}function Td(e,t){if(!e||"object"!=typeof e||!t||"object"!=typeof t)return e===t;const n=Array.isArray(e);if(n!==Array.isArray(t))return!1;if(n){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Td(e[n],t[n]))return!1;return!0}const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(const a in e){let n=e[a],r=t[a];if("@container"===a&&Array.isArray(n)&&Array.isArray(r)&&(n=n.slice().sort(),r=r.slice().sort()),!Td(n,r))return!1}return!0}Od.process=async({activeCtx:e,localCtx:t,options:n,propagate:r=!0,overrideProtected:i=!1,cycles:a=new Set})=>{bd(t)&&"@context"in t&&yd(t["@context"])&&(t=t["@context"]);if(0===Ed(t).length)return e;const o=await n.contextResolver.resolve({activeCtx:e,context:t,documentLoader:n.documentLoader,base:n.base});bd(o[0].document)&&"boolean"==typeof o[0].document["@propagate"]&&(r=o[0].document["@propagate"]);let s=e;r||s.previousContext||(s=s.clone(),s.previousContext=e);for(const l of o){let{document:r}=l;if(e=s,null===r){if(!i&&0!==Object.keys(e.protected).length){const r=n&&n.protectedMode||"error";if("error"===r)throw new gd("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});if("warn"===r){console.warn("WARNING: invalid context nullification");const t=l.getProcessed(e);if(t){s=e=t;continue}const r=e;s=e=Od.getInitialContext(n).clone();for(const[n,i]of Object.entries(r.protected))i&&(e.mappings[n]=vd.clone(r.mappings[n]));e.protected=vd.clone(r.protected),l.setProcessed(r,s);continue}throw new gd("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:t,protectedMode:r})}s=e=Od.getInitialContext(n).clone();continue}const o=l.getProcessed(e);if(o){s=e=o;continue}if(bd(r)&&"@context"in r&&(r=r["@context"]),!bd(r))throw new gd("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:r});s=s.clone();const u=new Map;if("@version"in r){if(1.1!==r["@version"])throw new gd("Unsupported JSON-LD version: "+r["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:r});if(e.processingMode&&"json-ld-1.0"===e.processingMode)throw new gd("@version: "+r["@version"]+" not compatible with "+e.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:r});s.processingMode="json-ld-1.1",s["@version"]=r["@version"],u.set("@version",!0)}if(s.processingMode=s.processingMode||e.processingMode,"@base"in r){let e=r["@base"];if(null===e||xd(e));else{if(!kd(e))throw new gd('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:r});e=Ad(s["@base"],e)}s["@base"]=e,u.set("@base",!0)}if("@vocab"in r){const e=r["@vocab"];if(null===e)delete s["@vocab"];else{if(!wd(e))throw new gd('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:r});if(!xd(e)&&Od.processingMode(s,1))throw new gd('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:r});s["@vocab"]=jd(s,e,{vocab:!0,base:!0},void 0,void 0,n)}u.set("@vocab",!0)}if("@language"in r){const e=r["@language"];if(null===e)delete s["@language"];else{if(!wd(e))throw new gd('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:r});s["@language"]=e.toLowerCase()}u.set("@language",!0)}if("@direction"in r){const t=r["@direction"];if("json-ld-1.0"===e.processingMode)throw new gd("Invalid JSON-LD syntax; @direction not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:r});if(null===t)delete s["@direction"];else{if("ltr"!==t&&"rtl"!==t)throw new gd('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:r});s["@direction"]=t}u.set("@direction",!0)}if("@propagate"in r){const n=r["@propagate"];if("json-ld-1.0"===e.processingMode)throw new gd("Invalid JSON-LD syntax; @propagate not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:r});if("boolean"!=typeof n)throw new gd("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:t});u.set("@propagate",!0)}if("@import"in r){const i=r["@import"];if("json-ld-1.0"===e.processingMode)throw new gd("Invalid JSON-LD syntax; @import not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:r});if(!wd(i))throw new gd("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:t});const a=await n.contextResolver.resolve({activeCtx:e,context:i,documentLoader:n.documentLoader,base:n.base});if(1!==a.length)throw new gd("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:t});const o=a[0].getProcessed(e);if(o)r=o;else{const n=a[0].document;if("@import"in n)throw new gd("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:t});for(const e in n)r.hasOwnProperty(e)||(r[e]=n[e]);a[0].setProcessed(e,r)}u.set("@import",!0)}u.set("@protected",r["@protected"]||!1);for(const e in r)if(Od.createTermDefinition({activeCtx:s,localCtx:r,term:e,defined:u,options:n,overrideProtected:i}),bd(r[e])&&"@context"in r[e]){const t=r[e]["@context"];let i=!0;if(wd(t)){const e=Ad(n.base,t);a.has(e)?i=!1:a.add(e)}if(i)try{await Od.process({activeCtx:s.clone(),localCtx:r[e]["@context"],overrideProtected:!0,options:n,cycles:a})}catch(Mh){throw new gd("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:r[e]["@context"],term:e})}}l.setProcessed(e,s)}return s},Od.createTermDefinition=({activeCtx:e,localCtx:t,term:n,defined:r,options:i,overrideProtected:a=!1})=>{if(r.has(n)){if(r.get(n))return;throw new gd("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:n})}let o;if(r.set(n,!1),t.hasOwnProperty(n)&&(o=t[n]),"@type"===n&&bd(o)&&"@set"===(o["@container"]||"@set")&&Od.processingMode(e,1.1)){const e=["@container","@id","@protected"],r=Object.keys(o);if(0===r.length||r.some((t=>!e.includes(t))))throw new gd("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n})}else{if(Od.isKeyword(n))throw new gd("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n});if(n.match(Cd))return void console.warn('WARNING: terms beginning with "@" are reserved for future use and ignored',{term:n});if(""===n)throw new gd("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t})}const s=e.mappings.get(n);e.mappings.has(n)&&e.mappings.delete(n);let l=!1;if((wd(o)||null===o)&&(l=!0,o={"@id":o}),!bd(o))throw new gd("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});const u={};e.mappings.set(n,u),u.reverse=!1;const c=["@container","@id","@language","@reverse","@type"];Od.processingMode(e,1.1)&&c.push("@context","@direction","@index","@nest","@prefix","@protected");for(const f in o)if(!c.includes(f))throw new gd("Invalid JSON-LD syntax; a term definition must not contain "+f,"jsonld.SyntaxError",{code:"invalid term definition",context:t});const d=n.indexOf(":");if(u._termHasColon=d>0,"@reverse"in o){if("@id"in o)throw new gd("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});if("@nest"in o)throw new gd("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});const a=o["@reverse"];if(!wd(a))throw new gd("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(!Od.isKeyword(a)&&a.match(Cd))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{reverse:a}),void(s?e.mappings.set(n,s):e.mappings.delete(n));const l=jd(e,a,{vocab:!0,base:!1},t,r,i);if(!xd(l))throw new gd("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});u["@id"]=l,u.reverse=!0}else if("@id"in o){let a=o["@id"];if(a&&!wd(a))throw new gd("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(null===a)u["@id"]=null;else{if(!Od.isKeyword(a)&&a.match(Cd))return console.warn('WARNING: values beginning with "@" are reserved for future use and ignored',{id:a}),void(s?e.mappings.set(n,s):e.mappings.delete(n));if(a!==n){if(a=jd(e,a,{vocab:!0,base:!1},t,r,i),!xd(a)&&!Od.isKeyword(a))throw new gd("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(n.match(/(?::[^:])|\//)){if(jd(e,n,{vocab:!0,base:!1},t,new Map(r).set(n,!0),i)!==a)throw new gd("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t})}u["@id"]=a,u._prefix=l&&!u._termHasColon&&a.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in u))if(u._termHasColon){const a=n.substr(0,d);if(t.hasOwnProperty(a)&&Od.createTermDefinition({activeCtx:e,localCtx:t,term:a,defined:r,options:i}),e.mappings.has(a)){const t=n.substr(d+1);u["@id"]=e.mappings.get(a)["@id"]+t}else u["@id"]=n}else if("@type"===n)u["@id"]=n;else{if(!("@vocab"in e))throw new gd("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:n});u["@id"]=e["@vocab"]+n}if((!0===o["@protected"]||!0===r.get("@protected")&&!1!==o["@protected"])&&(e.protected[n]=!0,u.protected=!0),r.set(n,!0),"@type"in o){let n=o["@type"];if(!wd(n))throw new gd("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@json"===n||"@none"===n){if(Od.processingMode(e,1))throw new gd(`Invalid JSON-LD syntax; an @context @type value must not be "${n}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else if("@id"!==n&&"@vocab"!==n){if(n=jd(e,n,{vocab:!0,base:!1},t,r,i),!xd(n))throw new gd("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===n.indexOf("_:"))throw new gd("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}u["@type"]=n}if("@container"in o){const n=wd(o["@container"])?[o["@container"]]:o["@container"]||[],r=["@list","@set","@index","@language"];let i=!0;const a=n.includes("@set");if(Od.processingMode(e,1.1)){if(r.push("@graph","@id","@type"),n.includes("@list")){if(1!==n.length)throw new gd("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else if(n.includes("@graph")){if(n.some((e=>"@graph"!==e&&"@id"!==e&&"@index"!==e&&"@set"!==e)))throw new gd("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else i&=n.length<=(a?2:1);if(n.includes("@type")&&(u["@type"]=u["@type"]||"@id",!["@id","@vocab"].includes(u["@type"])))throw new gd("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else i&=!yd(o["@container"]),i&=n.length<=1;if(i&=n.every((e=>r.includes(e))),i&=!(a&&n.includes("@list")),!i)throw new gd("Invalid JSON-LD syntax; @context @container value must be one of the following: "+r.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(u.reverse&&!n.every((e=>["@index","@set"].includes(e))))throw new gd("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});u["@container"]=n}if("@index"in o){if(!("@container"in o)||!u["@container"].includes("@index"))throw new gd(`Invalid JSON-LD syntax; @index without @index in @container: "${o["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});if(!wd(o["@index"])||0===o["@index"].indexOf("@"))throw new gd(`Invalid JSON-LD syntax; @index must expand to an IRI: "${o["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});u["@index"]=o["@index"]}if("@context"in o&&(u["@context"]=o["@context"]),"@language"in o&&!("@type"in o)){let e=o["@language"];if(null!==e&&!wd(e))throw new gd("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==e&&(e=e.toLowerCase()),u["@language"]=e}if("@prefix"in o){if(n.match(/:|\//))throw new gd("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:t});if(Od.isKeyword(u["@id"]))throw new gd("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:t});if("boolean"!=typeof o["@prefix"])throw new gd("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:t});u._prefix=!0===o["@prefix"]}if("@direction"in o){const e=o["@direction"];if(null!==e&&"ltr"!==e&&"rtl"!==e)throw new gd('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:t});u["@direction"]=e}if("@nest"in o){const e=o["@nest"];if(!wd(e)||"@nest"!==e&&0===e.indexOf("@"))throw new gd("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:t});u["@nest"]=e}
// disallow aliasing @context and @preserve
const p=u["@id"];if("@context"===p||"@preserve"===p)throw new gd("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t});if(s&&s.protected&&!a&&(e.protected[n]=!0,u.protected=!0,!Td(s,u))){const e=i&&i.protectedMode||"error";if("error"===e)throw new gd(`Invalid JSON-LD syntax; tried to redefine "${n}" which is a protected term.`,"jsonld.SyntaxError",{code:"protected term redefinition",context:t,term:n});if("warn"===e)return void console.warn("WARNING: protected term redefinition",{term:n});throw new gd("Invalid protectedMode.","jsonld.SyntaxError",{code:"invalid protected mode",context:t,term:n,protectedMode:e})}},Od.expandIri=(e,t,n,r)=>jd(e,t,n,void 0,void 0,r),Od.getInitialContext=e=>{const t=JSON.stringify({processingMode:e.processingMode}),n=Sd.get(t);if(n)return n;const r={processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:function(){const e=this;if(e.inverse)return e.inverse;const t=e.inverse={},n=e.fastCurieMap={},r={},o=(e["@language"]||"@none").toLowerCase(),s=e["@direction"],l=e.mappings,u=[...l.keys()].sort(Id);for(const i of u){const e=l.get(i);if(null===e)continue;let u=e["@container"]||"@none";if(u=[].concat(u).sort().join(""),null===e["@id"])continue;const c=Ed(e["@id"]);for(const l of c){let c=t[l];const d=Od.isKeyword(l);if(c)d||e._termHasColon||r[l].push(i);else if(t[l]=c={},!d&&!e._termHasColon){r[l]=[i];const e={iri:l,terms:r[l]};l[0]in n?n[l[0]].push(e):n[l[0]]=[e]}if(c[u]||(c[u]={"@language":{},"@type":{},"@any":{}}),c=c[u],a(i,c["@any"],"@none"),e.reverse)a(i,c["@type"],"@reverse");else if("@none"===e["@type"])a(i,c["@any"],"@none"),a(i,c["@language"],"@none"),a(i,c["@type"],"@none");else if("@type"in e)a(i,c["@type"],e["@type"]);else if("@language"in e&&"@direction"in e){const t=e["@language"],n=e["@direction"];a(i,c["@language"],t&&n?`${t}_${n}`.toLowerCase():t?t.toLowerCase():n?`_${n}`:"@null")}else"@language"in e?a(i,c["@language"],(e["@language"]||"@null").toLowerCase()):"@direction"in e?e["@direction"]?a(i,c["@language"],`_${e["@direction"]}`):a(i,c["@language"],"@none"):s?(a(i,c["@language"],`_${s}`),a(i,c["@language"],"@none"),a(i,c["@type"],"@none")):(a(i,c["@language"],o),a(i,c["@language"],"@none"),a(i,c["@type"],"@none"))}}for(const a in n)i(n,a,1);return t},clone:function(){const e={};e.mappings=vd.clone(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,e.protected=vd.clone(this.protected),this.previousContext&&(e.previousContext=this.previousContext.clone());e.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(e["@base"]=this["@base"]);"@language"in this&&(e["@language"]=this["@language"]);"@vocab"in this&&(e["@vocab"]=this["@vocab"]);return e},revertToPreviousContext:function(){if(!this.previousContext)return this;return this.previousContext.clone()},protected:{}};return Sd.size===Rd&&Sd.clear(),Sd.set(t,r),r;function i(e,t,n){const r=e[t],a=e[t]={};let o,s;for(const i of r)o=i.iri,s=n>=o.length?"":o[n],s in a?a[s].push(i):a[s]=[i];for(const l in a)""!==l&&i(a,l,n+1)}function a(e,t,n){t.hasOwnProperty(n)||(t[n]=e)}},Od.getContextValue=(e,t,n)=>{if(null===t){if("@context"===n)return;return null}if(e.mappings.has(t)){const r=e.mappings.get(t);if(_d(n))return r;if(r.hasOwnProperty(n))return r[n]}return"@language"===n&&n in e||"@direction"===n&&n in e?e[n]:"@context"!==n?null:void 0},Od.processingMode=(e,t)=>t.toString()>="1.1"?!e.processingMode||e.processingMode>="json-ld-"+t.toString():"json-ld-1.0"===e.processingMode,Od.isKeyword=e=>{if(!wd(e)||"@"!==e[0])return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};const Pd=Zu,{isArray:Md,isObject:Ld,isEmptyObject:$d,isString:Nd,isUndefined:Bd}=Wu,{isList:Ud,isValue:Fd,isGraph:zd,isSubject:qd}=Yu,{expandIri:Vd,getContextValue:Qd,isKeyword:Hd,process:Gd,processingMode:Wd}=Dd,{isAbsolute:Jd}=yc,{addValue:Kd,asArray:Yd,getValues:Zd,validateTypeValue:Xd}=lc,ep={};var tp=ep;const np=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;async function rp({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:r,expandedParent:i,options:a={},insideList:o,typeKey:s,typeScopedContext:l,expansionMap:u}){const c=Object.keys(r).sort(),d=[];let p;const f=r[s]&&"@json"===Vd(e,Md(r[s])?r[s][0]:r[s],{vocab:!0},a);for(const h of c){let s,c=r[h];if("@context"===h)continue;let m=Vd(e,h,{vocab:!0},a);if((null===m||!Jd(m)&&!Hd(m))&&(m=u({unmappedProperty:h,activeCtx:e,activeProperty:t,parent:r,options:a,insideList:o,value:c,expandedParent:i}),void 0===m))continue;if(Hd(m)){if("@reverse"===n)throw new Pd("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:c});if(m in i&&"@included"!==m&&"@type"!==m)throw new Pd("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:m})}if("@id"===m){if(!Nd(c)){if(!a.isFrame)throw new Pd('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:c});if(Ld(c)){if(!$d(c))throw new Pd('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:c})}else{if(!Md(c))throw new Pd('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:c});if(!c.every((e=>Nd(e))))throw new Pd('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:c})}}Kd(i,"@id",Yd(c).map((t=>Nd(t)?Vd(e,t,{base:!0},a):t)),{propertyIsArray:a.isFrame});continue}if("@type"===m){Ld(c)&&(c=Object.fromEntries(Object.entries(c).map((([e,t])=>[Vd(l,e,{vocab:!0}),Yd(t).map((e=>Vd(l,e,{base:!0,vocab:!0})))])))),Xd(c,a.isFrame),Kd(i,"@type",Yd(c).map((e=>Nd(e)?Vd(l,e,{base:!0,vocab:!0},a):e)),{propertyIsArray:a.isFrame});continue}if("@included"===m&&Wd(e,1.1)){const n=Yd(await ep.expand({activeCtx:e,activeProperty:t,element:c,options:a,expansionMap:u}));if(!n.every((e=>qd(e))))throw new Pd("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:c});Kd(i,"@included",n,{propertyIsArray:!0});continue}if("@graph"===m&&!Ld(c)&&!Md(c))throw new Pd('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:c});if("@value"===m){p=c,f&&Wd(e,1.1)?i["@value"]=c:Kd(i,"@value",c,{propertyIsArray:a.isFrame});continue}if("@language"===m){if(null===c)continue;if(!Nd(c)&&!a.isFrame)throw new Pd('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:c});c=Yd(c).map((e=>Nd(e)?e.toLowerCase():e));for(const e of c)Nd(e)&&!e.match(np)&&console.warn(`@language must be valid BCP47: ${e}`);Kd(i,"@language",c,{propertyIsArray:a.isFrame});continue}if("@direction"===m){if(!Nd(c)&&!a.isFrame)throw new Pd('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:c});c=Yd(c);for(const e of c)if(Nd(e)&&"ltr"!==e&&"rtl"!==e)throw new Pd('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:c});Kd(i,"@direction",c,{propertyIsArray:a.isFrame});continue}if("@index"===m){if(!Nd(c))throw new Pd('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:c});Kd(i,"@index",c);continue}if("@reverse"===m){if(!Ld(c))throw new Pd('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:c});if(s=await ep.expand({activeCtx:e,activeProperty:"@reverse",element:c,options:a,expansionMap:u}),"@reverse"in s)for(const e in s["@reverse"])Kd(i,e,s["@reverse"][e],{propertyIsArray:!0});let t=i["@reverse"]||null;for(const e in s){if("@reverse"===e)continue;null===t&&(t=i["@reverse"]={}),Kd(t,e,[],{propertyIsArray:!0});const n=s[e];for(let r=0;r<n.length;++r){const i=n[r];if(Fd(i)||Ud(i))throw new Pd('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:s});Kd(t,e,i,{propertyIsArray:!0})}}continue}if("@nest"===m){d.push(h);continue}let v=e;const g=Qd(e,h,"@context");Bd(g)||(v=await Gd({activeCtx:e,localCtx:g,propagate:!0,overrideProtected:!0,options:a}));const y=Qd(v,h,"@container")||[];if(y.includes("@language")&&Ld(c)){s=ap(v,c,Qd(v,h,"@direction"),a)}else if(y.includes("@index")&&Ld(c)){const t=y.includes("@graph"),n=Qd(v,h,"@index")||"@index",r="@index"!==n&&Vd(e,n,{vocab:!0},a);s=await op({activeCtx:v,options:a,activeProperty:h,value:c,expansionMap:u,asGraph:t,indexKey:n,propertyIndex:r})}else if(y.includes("@id")&&Ld(c)){const e=y.includes("@graph");s=await op({activeCtx:v,options:a,activeProperty:h,value:c,expansionMap:u,asGraph:e,indexKey:"@id"})}else if(y.includes("@type")&&Ld(c))s=await op({activeCtx:v.revertToPreviousContext(),options:a,activeProperty:h,value:c,expansionMap:u,asGraph:!1,indexKey:"@type"});else{const r="@list"===m;if(r||"@set"===m){let e=t;r&&"@graph"===n&&(e=null),s=await ep.expand({activeCtx:v,activeProperty:e,element:c,options:a,insideList:r,expansionMap:u})}else s="@json"===Qd(e,h,"@type")?{"@type":"@json","@value":c}:await ep.expand({activeCtx:v,activeProperty:h,element:c,options:a,insideList:!1,expansionMap:u})}if(null!==s||"@value"===m||(s=u({unmappedValue:c,expandedProperty:m,activeCtx:v,activeProperty:t,parent:r,options:a,insideList:o,key:h,expandedParent:i}),void 0!==s))if("@list"!==m&&!Ud(s)&&y.includes("@list")&&(s={"@list":Yd(s)}),y.includes("@graph")&&!y.some((e=>"@id"===e||"@index"===e))&&(s=Yd(s).map((e=>({"@graph":Yd(e)})))),v.mappings.has(h)&&v.mappings.get(h).reverse){const e=i["@reverse"]=i["@reverse"]||{};s=Yd(s);for(let t=0;t<s.length;++t){const n=s[t];if(Fd(n)||Ud(n))throw new Pd('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:s});Kd(e,m,n,{propertyIsArray:!0})}}else Kd(i,m,s,{propertyIsArray:!0})}if("@value"in i)if("@json"===i["@type"]&&Wd(e,1.1));else if((Ld(p)||Md(p))&&!a.isFrame)throw new Pd('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:p});for(const h of d){const c=Md(r[h])?r[h]:[r[h]];for(const r of c){if(!Ld(r)||Object.keys(r).some((t=>"@value"===Vd(e,t,{vocab:!0},a))))throw new Pd("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:r});await rp({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:r,expandedParent:i,options:a,insideList:o,typeScopedContext:l,typeKey:s,expansionMap:u})}}}function ip({activeCtx:e,activeProperty:t,value:n,options:r}){if(null==n)return null;const i=Vd(e,t,{vocab:!0},r);if("@id"===i)return Vd(e,n,{base:!0},r);if("@type"===i)return Vd(e,n,{vocab:!0,base:!0},r);const a=Qd(e,t,"@type");if(("@id"===a||"@graph"===i)&&Nd(n))return{"@id":Vd(e,n,{base:!0},r)};if("@vocab"===a&&Nd(n))return{"@id":Vd(e,n,{vocab:!0,base:!0},r)};if(Hd(i))return n;const o={};if(a&&!["@id","@vocab","@none"].includes(a))o["@type"]=a;else if(Nd(n)){const n=Qd(e,t,"@language");null!==n&&(o["@language"]=n);const r=Qd(e,t,"@direction");null!==r&&(o["@direction"]=r)}return["boolean","number","string"].includes(typeof n)||(n=n.toString()),o["@value"]=n,o}function ap(e,t,n,r){const i=[],a=Object.keys(t).sort();for(const o of a){const a=Vd(e,o,{vocab:!0},r);let s=t[o];Md(s)||(s=[s]);for(const e of s){if(null===e)continue;if(!Nd(e))throw new Pd("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});const r={"@value":e};"@none"!==a&&(r["@language"]=o.toLowerCase()),n&&(r["@direction"]=n),i.push(r)}}return i}async function op({activeCtx:e,options:t,activeProperty:n,value:r,expansionMap:i,asGraph:a,indexKey:o,propertyIndex:s}){const l=[],u=Object.keys(r).sort(),c="@type"===o;for(let d of u){if(c){const n=Qd(e,d,"@context");Bd(n)||(e=await Gd({activeCtx:e,localCtx:n,propagate:!1,options:t}))}let u,p=r[d];Md(p)||(p=[p]),p=await ep.expand({activeCtx:e,activeProperty:n,element:p,options:t,insideList:!1,insideIndex:!0,expansionMap:i}),u=s?"@none"===d?"@none":ip({activeCtx:e,activeProperty:o,value:d,options:t}):Vd(e,d,{vocab:!0},t),"@id"===o?d=Vd(e,d,{base:!0},t):c&&(d=u);for(let e of p){if(a&&!zd(e)&&(e={"@graph":[e]}),"@type"===o)"@none"===u||(e["@type"]?e["@type"]=[d].concat(e["@type"]):e["@type"]=[d]);else{if(Fd(e)&&!["@language","@type","@index"].includes(o))throw new Pd(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${o}".`,"jsonld.SyntaxError",{code:"invalid value object",value:e});s?"@none"!==u&&Kd(e,s,u,{propertyIsArray:!0,prependValue:!0}):"@none"===u||o in e||(e[o]=d)}l.push(e)}}return l}ep.expand=async({activeCtx:e,activeProperty:t=null,element:n,options:r={},insideList:i=!1,insideIndex:a=!1,typeScopedContext:o=null,expansionMap:s=(()=>{})})=>{if(null==n)return null;if("@default"===t&&(r=Object.assign({},r,{isFrame:!1})),!Md(n)&&!Ld(n)){if(!i&&(null===t||"@graph"===Vd(e,t,{vocab:!0},r))){const a=await s({unmappedValue:n,activeCtx:e,activeProperty:t,options:r,insideList:i});return void 0===a?null:a}return ip({activeCtx:e,activeProperty:t,value:n,options:r})}if(Md(n)){let l=[];const u=Qd(e,t,"@container")||[];i=i||u.includes("@list");for(let c=0;c<n.length;++c){let u=await ep.expand({activeCtx:e,activeProperty:t,element:n[c],options:r,expansionMap:s,insideIndex:a,typeScopedContext:o});i&&Md(u)&&(u={"@list":u}),null===u&&(u=await s({unmappedValue:n[c],activeCtx:e,activeProperty:t,parent:n,index:c,options:r,expandedParent:l,insideList:i}),void 0===u)||(Md(u)?l=l.concat(u):l.push(u))}return l}const l=Vd(e,t,{vocab:!0},r),u=Qd(e,t,"@context");o=o||(e.previousContext?e:null);let c=Object.keys(n).sort(),d=!a;if(d&&o&&c.length<=2&&!c.includes("@context"))for(const m of c){const t=Vd(o,m,{vocab:!0},r);if("@value"===t){d=!1,e=o;break}if("@id"===t&&1===c.length){d=!1;break}}d&&(e=e.revertToPreviousContext()),Bd(u)||(e=await Gd({activeCtx:e,localCtx:u,propagate:!0,overrideProtected:!0,options:r})),"@context"in n&&(e=await Gd({activeCtx:e,localCtx:n["@context"],options:r})),o=e;let p=null;for(const m of c){if("@type"===Vd(e,m,{vocab:!0},r)){p=p||m;const t=n[m],i=Array.isArray(t)?t.length>1?t.slice().sort():t:[t];for(const n of i){const t=Qd(o,n,"@context");Bd(t)||(e=await Gd({activeCtx:e,localCtx:t,options:r,propagate:!1}))}}}let f={};await rp({activeCtx:e,activeProperty:t,expandedActiveProperty:l,element:n,expandedParent:f,options:r,insideList:i,typeKey:p,typeScopedContext:o,expansionMap:s}),c=Object.keys(f);let h=c.length;if("@value"in f){if("@type"in f&&("@language"in f||"@direction"in f))throw new Pd('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:f});let a=h-1;if("@type"in f&&(a-=1),"@index"in f&&(a-=1),"@language"in f&&(a-=1),"@direction"in f&&(a-=1),0!==a)throw new Pd('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:f});const o=null===f["@value"]?[]:Yd(f["@value"]),l=Zd(f,"@type");if(Wd(e,1.1)&&l.includes("@json")&&1===l.length);else if(0===o.length){const a=await s({unmappedValue:f,activeCtx:e,activeProperty:t,element:n,options:r,insideList:i});f=void 0!==a?a:null}else{if(!o.every((e=>Nd(e)||$d(e)))&&"@language"in f)throw new Pd("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:f});if(!l.every((e=>Jd(e)&&!(Nd(e)&&0===e.indexOf("_:"))||$d(e))))throw new Pd('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:f})}}else if("@type"in f&&!Md(f["@type"]))f["@type"]=[f["@type"]];else if("@set"in f||"@list"in f){if(h>1&&(2!==h||!("@index"in f)))throw new Pd('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:f});"@set"in f&&(f=f["@set"],c=Object.keys(f),h=c.length)}else if(1===h&&"@language"in f){const a=await s(f,{unmappedValue:f,activeCtx:e,activeProperty:t,element:n,options:r,insideList:i});f=void 0!==a?a:null}if(Ld(f)&&!r.keepFreeFloatingNodes&&!i&&(null===t||"@graph"===l)&&(0===h||"@value"in f||"@list"in f||1===h&&"@id"in f)){const a=await s({unmappedValue:f,activeCtx:e,activeProperty:t,element:n,options:r,insideList:i});f=void 0!==a?a:null}return f};const{isKeyword:sp}=Dd,lp=Yu,up=Wu,cp=lc,dp=Zu,pp={};var fp=pp;pp.createMergedNodeMap=(e,t)=>{const n=(t=t||{}).issuer||new cp.IdentifierIssuer("_:b"),r={"@default":{}};return pp.createNodeMap(e,r,"@default",n),pp.mergeNodeMaps(r)},pp.createNodeMap=(e,t,n,r,i,a)=>{if(up.isArray(e)){for(const i of e)pp.createNodeMap(i,t,n,r,void 0,a);return}if(!up.isObject(e))return void(a&&a.push(e));if(lp.isValue(e)){if("@type"in e){let t=e["@type"];0===t.indexOf("_:")&&(e["@type"]=t=r.getId(t))}return void(a&&a.push(e))}if(a&&lp.isList(e)){const o=[];return pp.createNodeMap(e["@list"],t,n,r,i,o),void a.push({"@list":o})}if("@type"in e){const t=e["@type"];for(const e of t)0===e.indexOf("_:")&&r.getId(e)}up.isUndefined(i)&&(i=lp.isBlankNode(e)?r.getId(e["@id"]):e["@id"]),a&&a.push({"@id":i});const o=t[n],s=o[i]=o[i]||{};s["@id"]=i;const l=Object.keys(e).sort();for(let u of l){if("@id"===u)continue;if("@reverse"===u){const a={"@id":i},s=e["@reverse"];for(const e in s){const i=s[e];for(const s of i){let i=s["@id"];lp.isBlankNode(s)&&(i=r.getId(i)),pp.createNodeMap(s,t,n,r,i),cp.addValue(o[i],e,a,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===u){i in t||(t[i]={}),pp.createNodeMap(e[u],t,i,r);continue}if("@included"===u){pp.createNodeMap(e[u],t,n,r);continue}if("@type"!==u&&sp(u)){if("@index"===u&&u in s&&(e[u]!==s[u]||e[u]["@id"]!==s[u]["@id"]))throw new dp("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:s});s[u]=e[u];continue}const a=e[u];if(0===u.indexOf("_:")&&(u=r.getId(u)),0!==a.length)for(let e of a)if("@type"===u&&(e=0===e.indexOf("_:")?r.getId(e):e),lp.isSubject(e)||lp.isSubjectReference(e)){if("@id"in e&&!e["@id"])continue;const i=lp.isBlankNode(e)?r.getId(e["@id"]):e["@id"];cp.addValue(s,u,{"@id":i},{propertyIsArray:!0,allowDuplicate:!1}),pp.createNodeMap(e,t,n,r,i)}else if(lp.isValue(e))cp.addValue(s,u,e,{propertyIsArray:!0,allowDuplicate:!1});else if(lp.isList(e)){const a=[];pp.createNodeMap(e["@list"],t,n,r,i,a),e={"@list":a},cp.addValue(s,u,e,{propertyIsArray:!0,allowDuplicate:!1})}else pp.createNodeMap(e,t,n,r,i),cp.addValue(s,u,e,{propertyIsArray:!0,allowDuplicate:!1});else cp.addValue(s,u,[],{propertyIsArray:!0})}},pp.mergeNodeMapGraphs=e=>{const t={};for(const n of Object.keys(e).sort())for(const r of Object.keys(e[n]).sort()){const i=e[n][r];r in t||(t[r]={"@id":r});const a=t[r];for(const e of Object.keys(i).sort())if(sp(e)&&"@type"!==e)a[e]=cp.clone(i[e]);else for(const t of i[e])cp.addValue(a,e,cp.clone(t),{propertyIsArray:!0,allowDuplicate:!1})}return t},pp.mergeNodeMaps=e=>{const t=e["@default"],n=Object.keys(e).sort();for(const r of n){if("@default"===r)continue;const n=e[r];let i=t[r];i?"@graph"in i||(i["@graph"]=[]):t[r]=i={"@id":r,"@graph":[]};const a=i["@graph"];for(const e of Object.keys(n).sort()){const t=n[e];lp.isSubjectReference(t)||a.push(t)}}return t};const{isSubjectReference:hp}=Yu,{createMergedNodeMap:mp}=fp,vp={};var gp=vp;vp.flatten=e=>{const t=mp(e),n=[],r=Object.keys(t).sort();for(let i=0;i<r.length;++i){const e=t[r[i]];hp(e)||n.push(e)}return n};const yp=Zu,bp=Yu,wp=Wu,_p=lc,{RDF_LIST:xp,RDF_FIRST:kp,RDF_REST:Ap,RDF_NIL:Ep,RDF_TYPE:Ip,RDF_JSON_LITERAL:Sp,XSD_BOOLEAN:Rp,XSD_DOUBLE:Cp,XSD_INTEGER:Op,XSD_STRING:Dp}=hc,jp=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,Tp={};var Pp=Tp;function Mp(e,t,n){if(e.termType.endsWith("Node"))return{"@id":e.value};const r={"@value":e.value};if(e.language)r["@language"]=e.language;else{let i=e.datatype.value;if(i||(i=Dp),i===Sp){i="@json";try{r["@value"]=JSON.parse(r["@value"])}catch(Mh){throw new yp("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:r["@value"],cause:Mh})}}if(t){if(i===Rp)"true"===r["@value"]?r["@value"]=!0:"false"===r["@value"]&&(r["@value"]=!1);else if(wp.isNumeric(r["@value"]))if(i===Op){const e=parseInt(r["@value"],10);e.toFixed(0)===r["@value"]&&(r["@value"]=e)}else i===Cp&&(r["@value"]=parseFloat(r["@value"]));[Rp,Op,Cp,Dp].includes(i)||(r["@type"]=i)}else if("i18n-datatype"===n&&i.startsWith("https://www.w3.org/ns/i18n#")){const[,e,t]=i.split(/[#_]/);e.length>0&&(r["@language"]=e,e.match(jp)||console.warn(`@language must be valid BCP47: ${e}`)),r["@direction"]=t}else i!==Dp&&(r["@type"]=i)}return r}Tp.fromRDF=async(e,{useRdfType:t=!1,useNativeTypes:n=!1,rdfDirection:r=null})=>{const i={},a={"@default":i},o={};for(const u of e){const e="DefaultGraph"===u.graph.termType?"@default":u.graph.value;e in a||(a[e]={}),"@default"===e||e in i||(i[e]={"@id":e});const s=a[e],l=u.subject.value,c=u.predicate.value,d=u.object;l in s||(s[l]={"@id":l});const p=s[l],f=d.termType.endsWith("Node");if(f&&!(d.value in s)&&(s[d.value]={"@id":d.value}),c===Ip&&!t&&f){_p.addValue(p,"@type",d.value,{propertyIsArray:!0});continue}const h=Mp(d,n,r);if(_p.addValue(p,c,h,{propertyIsArray:!0}),f)if(d.value===Ep){const e=s[d.value];"usages"in e||(e.usages=[]),e.usages.push({node:p,property:c,value:h})}else d.value in o?o[d.value]=!1:o[d.value]={node:p,property:c,value:h}}for(const u in a){const e=a[u];if(!(Ep in e))continue;const t=e[Ep];if(t.usages){for(let n of t.usages){let t=n.node,r=n.property,i=n.value;const a=[],s=[];let l=Object.keys(t).length;for(;r===Ap&&wp.isObject(o[t["@id"]])&&wp.isArray(t[kp])&&1===t[kp].length&&wp.isArray(t[Ap])&&1===t[Ap].length&&(3===l||4===l&&wp.isArray(t["@type"])&&1===t["@type"].length&&t["@type"][0]===xp)&&(a.push(t[kp][0]),s.push(t["@id"]),n=o[t["@id"]],t=n.node,r=n.property,i=n.value,l=Object.keys(t).length,bp.isBlankNode(t)););delete i["@id"],i["@list"]=a.reverse();for(const n of s)delete e[n]}delete t.usages}}const s=[],l=Object.keys(i).sort();for(const u of l){const e=i[u];if(u in a){const t=e["@graph"]=[],n=a[u],r=Object.keys(n).sort();for(const e of r){const r=n[e];bp.isSubjectReference(r)||t.push(r)}}bp.isSubjectReference(e)||s.push(e)}return s};var Lp=function e(t){return null===t||"object"!=typeof t||null!=t.toJSON?JSON.stringify(t):Array.isArray(t)?"["+t.reduce(((t,n,r)=>t+(0===r?"":",")+e(void 0===n||"symbol"==typeof n?null:n)),"")+"]":"{"+Object.keys(t).sort().reduce(((n,r,i)=>{if(void 0===t[r]||"symbol"==typeof t[r])return n;return n+(0===n.length?"":",")+e(r)+":"+e(t[r])}),"")+"}"};const{createNodeMap:$p}=fp,{isKeyword:Np}=Dd,Bp=Yu,Up=Lp,Fp=Wu,zp=lc,{RDF_FIRST:qp,RDF_REST:Vp,RDF_NIL:Qp,RDF_TYPE:Hp,RDF_JSON_LITERAL:Gp,RDF_LANGSTRING:Wp,XSD_BOOLEAN:Jp,XSD_DOUBLE:Kp,XSD_INTEGER:Yp,XSD_STRING:Zp}=hc,{isAbsolute:Xp}=yc,ef={};var tf=ef;function nf(e,t,n,r,i){const a=Object.keys(t).sort();for(const o of a){const a=t[o],s=Object.keys(a).sort();for(let t of s){const s=a[t];if("@type"===t)t=Hp;else if(Np(t))continue;for(const a of s){const s={termType:o.startsWith("_:")?"BlankNode":"NamedNode",value:o};if(!Xp(o))continue;const l={termType:t.startsWith("_:")?"BlankNode":"NamedNode",value:t};if(!Xp(t))continue;if("BlankNode"===l.termType&&!i.produceGeneralizedRdf)continue;const u=rf(a,r,e,n,i.rdfDirection);u&&e.push({subject:s,predicate:l,object:u,graph:n})}}}}function rf(e,t,n,r,i){const a={};if(Bp.isValue(e)){a.termType="Literal",a.value=void 0,a.datatype={termType:"NamedNode"};let t=e["@value"];const n=e["@type"]||null;if("@json"===n)a.value=Up(t),a.datatype.value=Gp;else if(Fp.isBoolean(t))a.value=t.toString(),a.datatype.value=n||Jp;else if(Fp.isDouble(t)||n===Kp)Fp.isDouble(t)||(t=parseFloat(t)),a.value=t.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),a.datatype.value=n||Kp;else if(Fp.isNumber(t))a.value=t.toFixed(0),a.datatype.value=n||Yp;else if("i18n-datatype"===i&&"@direction"in e){const n="https://www.w3.org/ns/i18n#"+(e["@language"]||"")+`_${e["@direction"]}`;a.datatype.value=n,a.value=t}else"@language"in e?(a.value=t,a.datatype.value=n||Wp,a.language=e["@language"]):(a.value=t,a.datatype.value=n||Zp)}else if(Bp.isList(e)){const o=function(e,t,n,r,i){const a={termType:"NamedNode",value:qp},o={termType:"NamedNode",value:Vp},s={termType:"NamedNode",value:Qp},l=e.pop(),u=l?{termType:"BlankNode",value:t.getId()}:s;let c=u;for(const d of e){const e=rf(d,t,n,r,i),s={termType:"BlankNode",value:t.getId()};n.push({subject:c,predicate:a,object:e,graph:r}),n.push({subject:c,predicate:o,object:s,graph:r}),c=s}if(l){const e=rf(l,t,n,r,i);n.push({subject:c,predicate:a,object:e,graph:r}),n.push({subject:c,predicate:o,object:s,graph:r})}return u}(e["@list"],t,n,r,i);a.termType=o.termType,a.value=o.value}else{const t=Fp.isObject(e)?e["@id"]:e;a.termType=t.startsWith("_:")?"BlankNode":"NamedNode",a.value=t}return"NamedNode"!==a.termType||Xp(a.value)?a:null}ef.toRDF=(e,t)=>{const n=new zp.IdentifierIssuer("_:b"),r={"@default":{}};$p(e,r,"@default",n);const i=[],a=Object.keys(r).sort();for(const o of a){let e;if("@default"===o)e={termType:"DefaultGraph",value:""};else{if(!Xp(o))continue;e=o.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},e.value=o}nf(i,r[o],e,n,t)}return i};const{isKeyword:af}=Dd,of=Yu,sf=Wu,lf=lc,uf=yc,cf=Zu,{createNodeMap:df,mergeNodeMapGraphs:pf}=fp,ff={};var hf=ff;function mf(e){const t={};for(const n in e)void 0!==e[n]&&(t["@"+n]=[e[n]]);return[t]}function vf(e,t,n){for(let r=n.length-1;r>=0;--r){const i=n[r];if(i.graph===t&&i.subject["@id"]===e["@id"])return!0}return!1}function gf(e,t,n){const r="@"+n;let i=r in e?e[r][0]:t[n];if("embed"===n)if(!0===i)i="@once";else if(!1===i)i="@never";else if("@always"!==i&&"@never"!==i&&"@link"!==i&&"@first"!==i&&"@last"!==i&&"@once"!==i)throw new cf("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:e});return i}function yf(e){if(!sf.isArray(e)||1!==e.length||!sf.isObject(e[0]))throw new cf("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e});if("@id"in e[0])for(const t of lf.asArray(e[0]["@id"]))if(!sf.isObject(t)&&!uf.isAbsolute(t)||sf.isString(t)&&0===t.indexOf("_:"))throw new cf("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e});if("@type"in e[0])for(const t of lf.asArray(e[0]["@type"]))if(!sf.isObject(t)&&!uf.isAbsolute(t)||sf.isString(t)&&0===t.indexOf("_:"))throw new cf("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}function bf(e,t,n,r){let i=!0,a=!1;for(const o in n){let s=!1;const l=lf.getValues(t,o),u=0===lf.getValues(n,o).length;if("@id"===o){if(sf.isEmptyObject(n["@id"][0]||{})?s=!0:n["@id"].length>=0&&(s=n["@id"].includes(l[0])),!r.requireAll)return s}else if("@type"===o){if(i=!1,u){if(l.length>0)return!1;s=!0}else if(1===n["@type"].length&&sf.isEmptyObject(n["@type"][0]))s=l.length>0;else for(const e of n["@type"])s=!(!sf.isObject(e)||!("@default"in e))||(s||l.some((t=>t===e)));if(!r.requireAll)return s}else{if(af(o))continue;{const t=lf.getValues(n,o)[0];let a=!1;if(t&&(yf([t]),a="@default"in t),i=!1,0===l.length&&a)continue;if(l.length>0&&u)return!1;if(void 0===t){if(l.length>0)return!1;s=!0}else if(of.isList(t)){const n=t["@list"][0];if(of.isList(l[0])){const t=l[0]["@list"];of.isValue(n)?s=t.some((e=>Af(n,e))):(of.isSubject(n)||of.isSubjectReference(n))&&(s=t.some((t=>kf(e,n,t,r))))}}else s=of.isValue(t)?l.some((e=>Af(t,e))):of.isSubjectReference(t)?l.some((n=>kf(e,t,n,r))):!!sf.isObject(t)&&l.length>0}}if(!s&&r.requireAll)return!1;a=a||s}return i||a}function wf(e,t){const n=e.uniqueEmbeds[e.graph],r=n[t],i=r.parent,a=r.property,o={"@id":t};if(sf.isArray(i)){for(let l=0;l<i.length;++l)if(lf.compareValues(i[l],o)){i[l]=o;break}}else{const e=sf.isArray(i[a]);lf.removeValue(i,a,o,{propertyIsArray:e}),lf.addValue(i,a,o,{propertyIsArray:e})}const s=e=>{const t=Object.keys(n);for(const r of t)r in n&&sf.isObject(n[r].parent)&&n[r].parent["@id"]===e&&(delete n[r],s(r))};s(t)}
/**
 * Removes the @preserve keywords from expanded result of framing.
 *
 * @param input the framed, framed output.
 * @param options the framing options used.
 *
 * @return the resulting output.
 */function _f(e,t){if(sf.isArray(e))return e.map((e=>_f(e,t)));if(sf.isObject(e)){
// remove @preserve
if("@preserve"in e)return e["@preserve"][0];if(of.isValue(e))return e;if(of.isList(e))return e["@list"]=_f(e["@list"],t),e;if("@id"in e){const n=e["@id"];if(t.link.hasOwnProperty(n)){const r=t.link[n].indexOf(e);if(-1!==r)return t.link[n][r];t.link[n].push(e)}else t.link[n]=[e]}for(const n in e)"@id"===n&&t.bnodesToClear.includes(e[n])?delete e["@id"]:e[n]=_f(e[n],t)}return e}function xf(e,t,n){sf.isObject(e)?lf.addValue(e,t,n,{propertyIsArray:!0}):e.push(n)}function kf(e,t,n,r){if(!("@id"in n))return!1;const i=e.subjects[n["@id"]];return i&&bf(e,i,t,r)}function Af(e,t){const n=t["@value"],r=t["@type"],i=t["@language"],a=e["@value"]?sf.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],o=e["@type"]?sf.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],s=e["@language"]?sf.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return 0===a.length&&0===o.length&&0===s.length||!(!a.includes(n)&&!sf.isEmptyObject(a[0]))&&(!!(!r&&0===o.length||o.includes(r)||r&&sf.isEmptyObject(o[0]))&&!!(!i&&0===s.length||s.includes(i)||i&&sf.isEmptyObject(s[0])))}ff.frameMergedOrDefault=(e,t,n)=>{const r={options:n,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},i=new lf.IdentifierIssuer("_:b");df(e,r.graphMap,"@default",i),n.merged&&(r.graphMap["@merged"]=pf(r.graphMap),r.graph="@merged"),r.subjects=r.graphMap[r.graph];const a=[];return ff.frame(r,Object.keys(r.subjects).sort(),t,a),n.pruneBlankNodeIdentifiers&&(n.bnodesToClear=Object.keys(r.bnodeMap).filter((e=>1===r.bnodeMap[e].length))),
// remove @preserve from results
n.link={},_f(a,n)},ff.frame=(e,t,n,r,i=null)=>{yf(n),n=n[0];const a=e.options,o={embed:gf(n,a,"embed"),explicit:gf(n,a,"explicit"),requireAll:gf(n,a,"requireAll")};e.link.hasOwnProperty(e.graph)||(e.link[e.graph]={});const s=e.link[e.graph],l=function(e,t,n,r){const i={};for(const a of t){const t=e.graphMap[e.graph][a];bf(e,t,n,r)&&(i[a]=t)}return i}(e,t,n,o),u=Object.keys(l).sort();for(const c of u){const u=l[c];if(null===i?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{},"@link"===o.embed&&c in s){xf(r,i,s[c]);continue}const d={"@id":c};if(0===c.indexOf("_:")&&lf.addValue(e.bnodeMap,c,d,{propertyIsArray:!0}),s[c]=d,("@first"===o.embed||"@last"===o.embed)&&e.is11)throw new cf("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:n});if(e.embedded||!e.uniqueEmbeds[e.graph].hasOwnProperty(c))if(!e.embedded||"@never"!==o.embed&&!vf(u,e.graph,e.subjectStack))if(!e.embedded||"@first"!=o.embed&&"@once"!=o.embed||!e.uniqueEmbeds[e.graph].hasOwnProperty(c)){if("@last"===o.embed&&c in e.uniqueEmbeds[e.graph]&&wf(e,c),e.uniqueEmbeds[e.graph][c]={parent:r,property:i},e.subjectStack.push({subject:u,graph:e.graph}),c in e.graphMap){let t=!1,r=null;"@graph"in n?(r=n["@graph"][0],t=!("@merged"===c||"@default"===c),sf.isObject(r)||(r={})):(t="@merged"!==e.graph,r={}),t&&ff.frame({...e,graph:c,embedded:!1},Object.keys(e.graphMap[c]).sort(),[r],d,"@graph")}"@included"in n&&ff.frame({...e,embedded:!1},t,n["@included"],d,"@included");for(const t of Object.keys(u).sort())if(af(t)){if(d[t]=lf.clone(u[t]),"@type"===t)for(const n of u["@type"])0===n.indexOf("_:")&&lf.addValue(e.bnodeMap,n,d,{propertyIsArray:!0})}else if(!o.explicit||t in n)for(const r of u[t]){const i=t in n?n[t]:mf(o);if(of.isList(r)){const i=n[t]&&n[t][0]&&n[t][0]["@list"]?n[t][0]["@list"]:mf(o),a={"@list":[]};xf(d,t,a);const s=r["@list"];for(const t of s)of.isSubjectReference(t)?ff.frame({...e,embedded:!0},[t["@id"]],i,a,"@list"):xf(a,"@list",lf.clone(t))}else of.isSubjectReference(r)?ff.frame({...e,embedded:!0},[r["@id"]],i,d,t):Af(i[0],r)&&xf(d,t,lf.clone(r))}for(const e of Object.keys(n).sort()){if("@type"===e){if(!sf.isObject(n[e][0])||!("@default"in n[e][0]))continue}else if(af(e))continue;const t=n[e][0]||{};if(!gf(t,a,"omitDefault")&&!(e in d)){let n="@null";"@default"in t&&(n=lf.clone(t["@default"])),sf.isArray(n)||(n=[n]),d[e]=[{"@preserve":n}]}}for(const t of Object.keys(n["@reverse"]||{}).sort()){const r=n["@reverse"][t];for(const n of Object.keys(e.subjects)){lf.getValues(e.subjects[n],t).some((e=>e["@id"]===c))&&(d["@reverse"]=d["@reverse"]||{},lf.addValue(d["@reverse"],t,[],{propertyIsArray:!0}),ff.frame({...e,embedded:!0},[n],r,d["@reverse"][t],i))}}xf(r,i,d),e.subjectStack.pop()}else xf(r,i,d);else xf(r,i,d)}},ff.cleanupNull=(e,t)=>{if(sf.isArray(e)){return e.map((e=>ff.cleanupNull(e,t))).filter((e=>e))}if("@null"===e)return null;if(sf.isObject(e)){if("@id"in e){const n=e["@id"];if(t.link.hasOwnProperty(n)){const r=t.link[n].indexOf(e);if(-1!==r)return t.link[n][r];t.link[n].push(e)}else t.link[n]=[e]}for(const n in e)e[n]=ff.cleanupNull(e[n],t)}return e};const Ef=Zu,{isArray:If,isObject:Sf,isString:Rf,isUndefined:Cf}=Wu,{isList:Of,isValue:Df,isGraph:jf,isSimpleGraph:Tf,isSubjectReference:Pf}=Yu,{expandIri:Mf,getContextValue:Lf,isKeyword:$f,process:Nf,processingMode:Bf}=Dd,{removeBase:Uf,prependBase:Ff}=yc,{addValue:zf,asArray:qf,compareShortestLeast:Vf}=lc,Qf={};var Hf,Gf,Wf=Qf;function Jf(e,t,n){if("@nest"!==Mf(e,t,{vocab:!0},n))throw new Ef("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}Qf.compact=async({activeCtx:e,activeProperty:t=null,element:n,options:r={},compactionMap:i=(()=>{})})=>{if(If(n)){let a=[];for(let o=0;o<n.length;++o){let s=await Qf.compact({activeCtx:e,activeProperty:t,element:n[o],options:r,compactionMap:i});null===s&&(s=await i({unmappedValue:n[o],activeCtx:e,activeProperty:t,parent:n,index:o,options:r}),void 0===s)||a.push(s)}if(r.compactArrays&&1===a.length){0===(Lf(e,t,"@container")||[]).length&&(a=a[0])}return a}const a=Lf(e,t,"@context");if(Cf(a)||(e=await Nf({activeCtx:e,localCtx:a,propagate:!0,overrideProtected:!0,options:r})),Sf(n)){if(r.link&&"@id"in n&&r.link.hasOwnProperty(n["@id"])){const e=r.link[n["@id"]];for(let t=0;t<e.length;++t)if(e[t].expanded===n)return e[t].compacted}if(Df(n)||Pf(n)){const i=Qf.compactValue({activeCtx:e,activeProperty:t,value:n,options:r});return r.link&&Pf(n)&&(r.link.hasOwnProperty(n["@id"])||(r.link[n["@id"]]=[]),r.link[n["@id"]].push({expanded:n,compacted:i})),i}if(Of(n)){if((Lf(e,t,"@container")||[]).includes("@list"))return Qf.compact({activeCtx:e,activeProperty:t,element:n["@list"],options:r,compactionMap:i})}const a="@reverse"===t,o={},s=e;Df(n)||Pf(n)||(e=e.revertToPreviousContext());const l=Lf(s,t,"@context");Cf(l)||(e=await Nf({activeCtx:e,localCtx:l,propagate:!0,overrideProtected:!0,options:r})),r.link&&"@id"in n&&(r.link.hasOwnProperty(n["@id"])||(r.link[n["@id"]]=[]),r.link[n["@id"]].push({expanded:n,compacted:o}));let u=n["@type"]||[];u.length>1&&(u=Array.from(u).sort());const c=e;for(const t of u){const n=Qf.compactIri({activeCtx:c,iri:t,relativeTo:{vocab:!0}}),i=Lf(s,n,"@context");Cf(i)||(e=await Nf({activeCtx:e,localCtx:i,options:r,propagate:!1}))}const d=Object.keys(n).sort();for(const p of d){const l=n[p];if("@id"!==p)if("@type"!==p)if("@reverse"!==p)if("@preserve"!==p)if("@index"!==p)if("@graph"!==p&&"@list"!==p&&"@included"!==p&&$f(p)){const t=Qf.compactIri({activeCtx:e,iri:p,relativeTo:{vocab:!0}});zf(o,t,l)}else{if(!If(l))throw new Ef("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===l.length){const t=Qf.compactIri({activeCtx:e,iri:p,value:l,relativeTo:{vocab:!0},reverse:a}),n=e.mappings.has(t)?e.mappings.get(t)["@nest"]:null;let i=o;n&&(Jf(e,n,r),Sf(o[n])||(o[n]={}),i=o[n]),zf(i,t,l,{propertyIsArray:!0})}for(const t of l){const n=Qf.compactIri({activeCtx:e,iri:p,value:t,relativeTo:{vocab:!0},reverse:a}),s=e.mappings.has(n)?e.mappings.get(n)["@nest"]:null;let l=o;s&&(Jf(e,s,r),Sf(o[s])||(o[s]={}),l=o[s]);const u=Lf(e,n,"@container")||[],c=jf(t),d=Of(t);let f;d?f=t["@list"]:c&&(f=t["@graph"]);let h=await Qf.compact({activeCtx:e,activeProperty:n,element:d||c?f:t,options:r,compactionMap:i});if(d){if(If(h)||(h=[h]),u.includes("@list")){zf(l,n,h,{valueIsArray:!0,allowDuplicate:!0});continue}h={[Qf.compactIri({activeCtx:e,iri:"@list",relativeTo:{vocab:!0}})]:h},"@index"in t&&(h[Qf.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"])}if(c)if(u.includes("@graph")&&(u.includes("@id")||u.includes("@index")&&Tf(t))){let i;l.hasOwnProperty(n)?i=l[n]:l[n]=i={};const a=(u.includes("@id")?t["@id"]:t["@index"])||Qf.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}});zf(i,a,h,{propertyIsArray:!r.compactArrays||u.includes("@set")})}else u.includes("@graph")&&Tf(t)?(If(h)&&h.length>1&&(h={"@included":h}),zf(l,n,h,{propertyIsArray:!r.compactArrays||u.includes("@set")})):(If(h)&&1===h.length&&r.compactArrays&&(h=h[0]),h={[Qf.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}})]:h},"@id"in t&&(h[Qf.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=t["@id"]),"@index"in t&&(h[Qf.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"]),zf(l,n,h,{propertyIsArray:!r.compactArrays||u.includes("@set")}));else if(u.includes("@language")||u.includes("@index")||u.includes("@id")||u.includes("@type")){let a,o;if(l.hasOwnProperty(n)?a=l[n]:l[n]=a={},u.includes("@language"))Df(h)&&(h=h["@value"]),o=t["@language"];else if(u.includes("@index")){const r=Lf(e,n,"@index")||"@index",i=Qf.compactIri({activeCtx:e,iri:r,relativeTo:{vocab:!0}});if("@index"===r)o=t["@index"],delete h[i];else{let e;if([o,...e]=qf(h[r]||[]),Rf(o))switch(e.length){case 0:delete h[r];break;case 1:h[r]=e[0];break;default:h[r]=e}else o=null}}else if(u.includes("@id")){const t=Qf.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});o=h[t],delete h[t]}else if(u.includes("@type")){const a=Qf.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}});let s;switch([o,...s]=qf(h[a]||[]),s.length){case 0:delete h[a];break;case 1:h[a]=s[0];break;default:h[a]=s}1===Object.keys(h).length&&"@id"in t&&(h=await Qf.compact({activeCtx:e,activeProperty:n,element:{"@id":t["@id"]},options:r,compactionMap:i}))}o||(o=Qf.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}})),zf(a,o,h,{propertyIsArray:u.includes("@set")})}else{const e=!r.compactArrays||u.includes("@set")||u.includes("@list")||If(h)&&0===h.length||"@list"===p||"@graph"===p;zf(l,n,h,{propertyIsArray:e})}}}else{if((Lf(e,t,"@container")||[]).includes("@index"))continue;const n=Qf.compactIri({activeCtx:e,iri:p,relativeTo:{vocab:!0}});zf(o,n,l)}else{const n=await Qf.compact({activeCtx:e,activeProperty:t,element:l,options:r,compactionMap:i});If(n)&&0===n.length||zf(o,p,n)}else{const t=await Qf.compact({activeCtx:e,activeProperty:"@reverse",element:l,options:r,compactionMap:i});for(const n in t)if(e.mappings.has(n)&&e.mappings.get(n).reverse){const i=t[n],a=(Lf(e,n,"@container")||[]).includes("@set")||!r.compactArrays;zf(o,n,i,{propertyIsArray:a}),delete t[n]}if(Object.keys(t).length>0){const n=Qf.compactIri({activeCtx:e,iri:p,relativeTo:{vocab:!0}});zf(o,n,t)}}else{let t=qf(l).map((e=>Qf.compactIri({activeCtx:s,iri:e,relativeTo:{vocab:!0}})));1===t.length&&(t=t[0]);const n=Qf.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}}),r=(Lf(e,n,"@container")||[]).includes("@set")&&Bf(e,1.1)||If(t)&&0===l.length;zf(o,n,t,{propertyIsArray:r})}else{let t=qf(l).map((t=>Qf.compactIri({activeCtx:e,iri:t,relativeTo:{vocab:!1},base:r.base})));1===t.length&&(t=t[0]);o[Qf.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=t}}return o}return n},Qf.compactIri=({activeCtx:e,iri:t,value:n=null,relativeTo:r={vocab:!1},reverse:i=!1,base:a=null})=>{if(null===t)return t;e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext);const o=e.getInverse();if($f(t)&&t in o&&"@none"in o[t]&&"@type"in o[t]["@none"]&&"@none"in o[t]["@none"]["@type"])return o[t]["@none"]["@type"]["@none"];if(r.vocab&&t in o){const r=e["@language"]||"@none",a=[];Sf(n)&&"@index"in n&&!("@graph"in n)&&a.push("@index","@index@set"),Sf(n)&&"@preserve"in n&&(n=n["@preserve"][0]),jf(n)?("@index"in n&&a.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n&&a.push("@graph@id","@graph@id@set"),a.push("@graph","@graph@set","@set"),"@index"in n||a.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n||a.push("@graph@id","@graph@id@set")):Sf(n)&&!Df(n)&&a.push("@id","@id@set","@type","@set@type");let o="@language",s="@null";if(i)o="@type",s="@reverse",a.push("@set");else if(Of(n)){"@index"in n||a.push("@list");const e=n["@list"];if(0===e.length)o="@any",s="@none";else{let t=0===e.length?r:null,n=null;for(let r=0;r<e.length;++r){const i=e[r];let a="@none",o="@none";if(Df(i))if("@direction"in i){a=`${(i["@language"]||"").toLowerCase()}_${i["@direction"]}`}else"@language"in i?a=i["@language"].toLowerCase():"@type"in i?o=i["@type"]:a="@null";else o="@id";if(null===t?t=a:a!==t&&Df(i)&&(t="@none"),null===n?n=o:o!==n&&(n="@none"),"@none"===t&&"@none"===n)break}t=t||"@none",n=n||"@none","@none"!==n?(o="@type",s=n):s=t}}else{if(Df(n))if("@language"in n&&!("@index"in n)){a.push("@language","@language@set"),s=n["@language"];const e=n["@direction"];e&&(s=`${s}_${e}`)}else"@direction"in n&&!("@index"in n)?s=`_${n["@direction"]}`:"@type"in n&&(o="@type",s=n["@type"]);else o="@type",s="@id";a.push("@set")}a.push("@none"),Sf(n)&&!("@index"in n)&&a.push("@index","@index@set"),Df(n)&&1===Object.keys(n).length&&a.push("@language","@language@set");const l=function(e,t,n,r,i,a){null===a&&(a="@null");const o=[];if(("@id"===a||"@reverse"===a)&&Sf(n)&&"@id"in n){"@reverse"===a&&o.push("@reverse");const t=Qf.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:!0}});e.mappings.has(t)&&e.mappings.get(t)&&e.mappings.get(t)["@id"]===n["@id"]?o.push.apply(o,["@vocab","@id"]):o.push.apply(o,["@id","@vocab"])}else{o.push(a);const e=o.find((e=>e.includes("_")));e&&o.push(e.replace(/^[^_]+_/,"_"))}o.push("@none");const s=e.inverse[t];for(const l of r){if(!(l in s))continue;const e=s[l][i];for(const t of o)if(t in e)return e[t]}return null}(e,t,n,a,o,s);if(null!==l)return l}if(r.vocab&&"@vocab"in e){const n=e["@vocab"];if(0===t.indexOf(n)&&t!==n){const r=t.substr(n.length);if(!e.mappings.has(r))return r}}let s=null;const l=[];let u=e.fastCurieMap;const c=t.length-1;for(let d=0;d<c&&t[d]in u;++d)u=u[t[d]],""in u&&l.push(u[""][0]);for(let d=l.length-1;d>=0;--d){const r=l[d],i=r.terms;for(const a of i){const i=a+":"+t.substr(r.iri.length);e.mappings.get(a)._prefix&&(!e.mappings.has(i)||null===n&&e.mappings.get(i)["@id"]===t)&&(null===s||Vf(i,s)<0)&&(s=i)}}if(null!==s)return s;for(const[d,p]of e.mappings)if(p&&p._prefix&&t.startsWith(d+":"))throw new Ef(`Absolute IRI "${t}" confused with prefix "${d}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:e});return r.vocab?t:"@base"in e?e["@base"]?Uf(Ff(a,e["@base"]),t):t:Uf(a,t)},Qf.compactValue=({activeCtx:e,activeProperty:t,value:n,options:r})=>{if(Df(n)){const r=Lf(e,t,"@type"),i=Lf(e,t,"@language"),a=Lf(e,t,"@direction"),o=Lf(e,t,"@container")||[],s="@index"in n&&!o.includes("@index");if(!s&&"@none"!==r){if(n["@type"]===r)return n["@value"];if("@language"in n&&n["@language"]===i&&"@direction"in n&&n["@direction"]===a)return n["@value"];if("@language"in n&&n["@language"]===i)return n["@value"];if("@direction"in n&&n["@direction"]===a)return n["@value"]}const l=Object.keys(n).length,u=1===l||2===l&&"@index"in n&&!s,c="@language"in e,d=Rf(n["@value"]),p=e.mappings.has(t)&&null===e.mappings.get(t)["@language"];if(u&&"@none"!==r&&(!c||!d||p))return n["@value"];const f={};return s&&(f[Qf.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=n["@index"]),"@type"in n?f[Qf.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}})]=Qf.compactIri({activeCtx:e,iri:n["@type"],relativeTo:{vocab:!0}}):"@language"in n&&(f[Qf.compactIri({activeCtx:e,iri:"@language",relativeTo:{vocab:!0}})]=n["@language"]),"@direction"in n&&(f[Qf.compactIri({activeCtx:e,iri:"@direction",relativeTo:{vocab:!0}})]=n["@direction"]),f[Qf.compactIri({activeCtx:e,iri:"@value",relativeTo:{vocab:!0}})]=n["@value"],f}const i=Mf(e,t,{vocab:!0},r),a=Lf(e,t,"@type"),o=Qf.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:"@vocab"===a},base:r.base});return"@id"===a||"@vocab"===a||"@graph"===i?o:{[Qf.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]:o}};
/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2019 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
const Kf=cu.exports,Yf=Dc,Zf=lc,Xf=class{constructor({sharedCache:e}){this.perOpCache=new Map,this.sharedCache=e}async resolve({activeCtx:e,context:t,documentLoader:n,base:r,cycles:i=new Set}){t&&od(t)&&t["@context"]&&(t=t["@context"]),t=ld(t);const a=[];for(const o of t){if(sd(o)){let t=this._get(o);t||(t=await this._resolveRemoteContext({activeCtx:e,url:o,documentLoader:n,base:r,cycles:i})),ad(t)?a.push(...t):a.push(t);continue}if(null===o){a.push(new dd({document:null}));continue}od(o)||fd(t);const s=JSON.stringify(o);let l=this._get(s);l||(l=new dd({document:o}),this._cacheResolvedContext({key:s,resolved:l,tag:"static"})),a.push(l)}return a}_get(e){let t=this.perOpCache.get(e);if(!t){const n=this.sharedCache.get(e);n&&(t=n.get("static"),t&&this.perOpCache.set(e,t))}return t}_cacheResolvedContext({key:e,resolved:t,tag:n}){if(this.perOpCache.set(e,t),void 0!==n){let r=this.sharedCache.get(e);r||(r=new Map,this.sharedCache.set(e,r)),r.set(n,t)}return t}async _resolveRemoteContext({activeCtx:e,url:t,documentLoader:n,base:r,cycles:i}){t=ud(r,t);const{context:a,remoteDoc:o}=await this._fetchContext({activeCtx:e,url:t,documentLoader:n,cycles:i});hd({context:a,base:r=o.documentUrl||t});const s=await this.resolve({activeCtx:e,context:a,documentLoader:n,base:r,cycles:i});return this._cacheResolvedContext({key:t,resolved:s,tag:o.tag}),s}async _fetchContext({activeCtx:e,url:t,documentLoader:n,cycles:r}){if(r.size>pd)throw new cd("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"loading remote context failed":"context overflow",max:pd});if(r.has(t))throw new cd("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"recursive context inclusion":"context overflow",url:t});let i,a;r.add(t);try{a=await n(t),i=a.document||null,sd(i)&&(i=JSON.parse(i))}catch(Mh){throw new cd("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:t,cause:Mh})}if(!od(i))throw new cd("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:t});return i="@context"in i?{"@context":i["@context"]}:{"@context":{}},a.contextUrl&&(ad(i["@context"])||(i["@context"]=[i["@context"]]),i["@context"].push(a.contextUrl)),{context:i,remoteDoc:a}}},eh=Zf.IdentifierIssuer,th=Zu,nh=nd,rh=md,{expand:ih}=tp,{flatten:ah}=gp,{fromRDF:oh}=Pp,{toRDF:sh}=tf,{frameMergedOrDefault:lh,cleanupNull:uh}=hf,{isArray:ch,isObject:dh,isString:ph}=Wu,{isSubjectReference:fh}=Yu,{expandIri:hh,getInitialContext:mh,process:vh,processingMode:gh}=Dd,{compact:yh,compactIri:bh}=Wf,{createNodeMap:wh,createMergedNodeMap:_h,mergeNodeMaps:xh}=fp,kh=function(e){const t={},n=new nh({max:100});function r(t,{documentLoader:n=e.documentLoader,...r}){return Object.assign({},{documentLoader:n},r,t)}return e.compact=async function(t,i,a){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===i)throw new th("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===t)return null;let o;(a=r(a,{base:ph(t)?t:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new eh("_:b"),contextResolver:new Xf({sharedCache:n})})).link&&(a.skipExpansion=!0),a.compactToRelative||delete a.base,o=a.skipExpansion?t:await e.expand(t,a);const s=await e.processContext(mh(a),i,a);let l=await yh({activeCtx:s,element:o,options:a,compactionMap:a.compactionMap});a.compactArrays&&!a.graph&&ch(l)?1===l.length?l=l[0]:0===l.length&&(l={}):a.graph&&dh(l)&&(l=[l]),dh(i)&&"@context"in i&&(i=i["@context"]),i=Zf.clone(i),ch(i)||(i=[i]);const u=i;i=[];for(let e=0;e<u.length;++e)(!dh(u[e])||Object.keys(u[e]).length>0)&&i.push(u[e]);const c=i.length>0;if(1===i.length&&(i=i[0]),ch(l)){const e=bh({activeCtx:s,iri:"@graph",relativeTo:{vocab:!0}}),t=l;l={},c&&(l["@context"]=i),l[e]=t}else if(dh(l)&&c){const e=l;l={"@context":i};for(const t in e)l[t]=e[t]}return l},e.expand=async function(t,i){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(i=r(i,{keepFreeFloatingNodes:!1,contextResolver:new Xf({sharedCache:n})})).expansionMap&&(i.expansionMap=void 0);const a={},o=[];if("expandContext"in i){const e=Zf.clone(i.expandContext);dh(e)&&"@context"in e?a.expandContext=e:a.expandContext={"@context":e},o.push(a.expandContext)}let s;if(ph(t)){const n=await e.get(t,i);s=n.documentUrl,a.input=n.document,n.contextUrl&&(a.remoteContext={"@context":n.contextUrl},o.push(a.remoteContext))}else a.input=Zf.clone(t);"base"in i||(i.base=s||"");let l=mh(i);for(const e of o)l=await vh({activeCtx:l,localCtx:e,options:i});let u=await ih({activeCtx:l,element:a.input,options:i,expansionMap:i.expansionMap});return dh(u)&&"@graph"in u&&1===Object.keys(u).length?u=u["@graph"]:null===u&&(u=[]),ch(u)||(u=[u]),u},e.flatten=async function(t,i,a){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");i="function"==typeof i?null:i||null,a=r(a,{base:ph(t)?t:"",contextResolver:new Xf({sharedCache:n})});const o=await e.expand(t,a),s=ah(o);if(null===i)return s;a.graph=!0,a.skipExpansion=!0;const l=await e.compact(s,i,a);return l},e.frame=async function(t,i,a){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(a=r(a,{base:ph(t)?t:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new Xf({sharedCache:n})}),ph(i)){const t=await e.get(i,a);if(i=t.document,t.contextUrl){let e=i["@context"];e?ch(e)?e.push(t.contextUrl):e=[e,t.contextUrl]:e=t.contextUrl,i["@context"]=e}}const o=i&&i["@context"]||{},s=await e.processContext(mh(a),o,a);a.hasOwnProperty("omitGraph")||(a.omitGraph=gh(s,1.1)),a.hasOwnProperty("pruneBlankNodeIdentifiers")||(a.pruneBlankNodeIdentifiers=gh(s,1.1));const l=await e.expand(t,a),u={...a};u.isFrame=!0,u.keepFreeFloatingNodes=!0;const c=await e.expand(i,u),d=Object.keys(i).map((e=>hh(s,e,{vocab:!0})));u.merged=!d.includes("@graph"),u.is11=gh(s,1.1);const p=lh(l,c,u);u.graph=!a.omitGraph,u.skipExpansion=!0,u.link={},u.framing=!0;let f=await e.compact(p,o,u);return u.link={},f=uh(f,u),f},e.link=async function(t,n,r){const i={};return n&&(i["@context"]=n),i["@embed"]="@link",e.frame(t,i,r)},e.normalize=e.canonize=async function(t,i){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(i=r(i,{base:ph(t)?t:"",algorithm:"URDNA2015",skipExpansion:!1,contextResolver:new Xf({sharedCache:n})}))){if("application/n-quads"!==i.inputFormat&&"application/nquads"!==i.inputFormat)throw new th("Unknown canonicalization input format.","jsonld.CanonizeError");const e=rh.parse(t);return Kf.canonize(e,i)}const a={...i};delete a.format,a.produceGeneralizedRdf=!1;const o=await e.toRDF(t,a);return Kf.canonize(o,i)},e.fromRDF=async function(e,n){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");n=r(n,{format:ph(e)?"application/n-quads":void 0});const{format:i}=n;let{rdfParser:a}=n;if(i){if(a=a||t[i],!a)throw new th("Unknown input format.","jsonld.UnknownFormat",{format:i})}else a=()=>e;const o=await a(e);return oh(o,n)},e.toRDF=async function(t,i){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let a;a=(i=r(i,{base:ph(t)?t:"",skipExpansion:!1,contextResolver:new Xf({sharedCache:n})})).skipExpansion?t:await e.expand(t,i);const o=sh(a,i);if(i.format){if("application/n-quads"===i.format||"application/nquads"===i.format)return rh.serialize(o);throw new th("Unknown output format.","jsonld.UnknownFormat",{format:i.format})}return o},e.createNodeMap=async function(t,i){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");i=r(i,{base:ph(t)?t:"",contextResolver:new Xf({sharedCache:n})});const a=await e.expand(t,i);return _h(a,i)},e.merge=async function(t,i,a){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!ch(t))throw new TypeError('Could not merge, "docs" must be an array.');i="function"==typeof i?null:i||null,a=r(a,{contextResolver:new Xf({sharedCache:n})});const o=await Promise.all(t.map((t=>{const n={...a};return e.expand(t,n)})));let s=!0;"mergeNodes"in a&&(s=a.mergeNodes);const l=a.issuer||new eh("_:b"),u={"@default":{}};for(let e=0;e<o.length;++e){const t=Zf.relabelBlankNodes(o[e],{issuer:new eh("_:b"+e+"-")}),n=s||0===e?u:{"@default":{}};if(wh(t,n,"@default",l),n!==u)for(const e in n){const t=n[e];if(!(e in u)){u[e]=t;continue}const r=u[e];for(const e in t)e in r||(r[e]=t[e])}}const c=xh(u),d=[],p=Object.keys(c).sort();for(let e=0;e<p.length;++e){const t=c[p[e]];fh(t)||d.push(t)}if(null===i)return d;a.graph=!0,a.skipExpansion=!0;const f=await e.compact(d,i,a);return f},Object.defineProperty(e,"documentLoader",{get:()=>e._documentLoader,set:t=>e._documentLoader=t}),e.documentLoader=async e=>{throw new th("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:e})},e.get=async function(t,n){let r;r="function"==typeof n.documentLoader?n.documentLoader:e.documentLoader;const i=await r(t);try{if(!i.document)throw new th("No remote document found at the given URL.","jsonld.NullRemoteDocument");ph(i.document)&&(i.document=JSON.parse(i.document))}catch(Mh){throw new th("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:Mh,remoteDoc:i})}return i},e.processContext=async function(e,t,i){return i=r(i,{base:"",contextResolver:new Xf({sharedCache:n})}),null===t?mh(i):(t=Zf.clone(t),dh(t)&&"@context"in t||(t={"@context":t}),vh({activeCtx:e,localCtx:t,options:i}))},e.getContextValue=Dd.getContextValue,e.documentLoaders={},e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new th('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(e,n){t[e]=n},e.unregisterRDFParser=function(e){delete t[e]},e.registerRDFParser("application/n-quads",rh.parse),e.registerRDFParser("application/nquads",rh.parse),e.url=yc,e.util=Zf,Object.assign(e,Zf),e.promises=e,e.RequestQueue=mc(),e.JsonLdProcessor=(Gf||(Gf=1,Hf=e=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(t,n){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(t,n)},t.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(t)},t.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(t)},t}),Hf)(e),Yf.setupGlobals(e),Yf.setupDocumentLoaders(e),e},Ah=function(){return kh((function(){return Ah()}))};kh(Ah);var Eh,Ih=Ah;(Eh||(Eh={})).Turtle="Turtle";var Sh=function(e){v(MalformedSolidDocumentError,g);var t,n,r=(t=MalformedSolidDocumentError,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=I(t);if(n){var i=I(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return S(this,e)});function MalformedSolidDocumentError(e,t,n){var i;return y(this,MalformedSolidDocumentError),i=r.call(this,function(e,t,n){return e?"Malformed ".concat(t," document found at ").concat(e," - ").concat(n):"Malformed ".concat(t," document - ").concat(n)}(e,t,n)),b(w(i),"documentUrl",void 0),b(w(i),"documentFormat",void 0),b(w(i),"malformationDetails",void 0),i.documentUrl=e,i.documentFormat=t,i.malformationDetails=n,i}return MalformedSolidDocumentError}();var Rh=function(e){v(NetworkRequestError,g);var t,n,r=(t=NetworkRequestError,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=I(t);if(n){var i=I(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return S(this,e)});function NetworkRequestError(e,t){var n;return y(this,NetworkRequestError),n=r.call(this,"Request failed trying to fetch ".concat(e),t),b(w(n),"url",void 0),n.url=e,n}return NetworkRequestError}();var Ch=function(e){v(NotFoundError,g);var t,n,r=(t=NotFoundError,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=I(t);if(n){var i=I(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return S(this,e)});function NotFoundError(e){var t;return y(this,NotFoundError),t=r.call(this,"Document with '".concat(e,"' url not found")),b(w(t),"url",void 0),t.url=e,t}return NotFoundError}();var Oh=function(e){v(UnauthorizedError,g);var t,n,r=(t=UnauthorizedError,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=I(t);if(n){var i=I(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return S(this,e)});function UnauthorizedError(e,t){var n;return y(this,UnauthorizedError),n=r.call(this,function(e,t){return"Unauthorized".concat(403===t?" (Forbidden)":"",": ").concat(e)}(e,t)),b(w(n),"url",void 0),b(w(n),"responseStatus",void 0),n.url=e,n.responseStatus=t,n}return _(UnauthorizedError,[{key:"forbidden",get:function(){return void 0!==this.responseStatus?403===this.responseStatus:void 0}}]),UnauthorizedError}();var Dh=function(e){v(UnsuccessfulRequestError,g);var t,n,r=(t=UnsuccessfulRequestError,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=I(t);if(n){var i=I(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return S(this,e)});function UnsuccessfulRequestError(e,t){var n;return y(this,UnsuccessfulRequestError),n=r.call(this,function(e,t){var n;return t=null!==(n=t)&&void 0!==n?n:e,"string"==typeof e?"".concat(e," (returned ").concat(t.status," status code)"):"Request to ".concat(t.url," returned ").concat(t.status," status code")}(e,t)),b(w(n),"response",void 0),n.response=null!=t?t:e,n}return UnsuccessfulRequestError}(),jh={acl:"http://www.w3.org/ns/auth/acl#",foaf:"http://xmlns.com/foaf/0.1/",pim:"http://www.w3.org/ns/pim/space#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",vcard:"http://www.w3.org/2006/vcard/ns#"};function Th(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.startsWith("http"))return e;var n=e.split(":"),r=R(n,2),i=r[0],a=r[1];if(i&&a){var o,s,l,u=null!==(o=null!==(s=jh[i])&&void 0!==s?s:null===(l=t.extraContext)||void 0===l?void 0:l[i])&&void 0!==o?o:null;if(!u)throw new Error("Can't expand IRI with unknown prefix: '".concat(e,"'"));return u+a}if(!t.defaultPrefix)throw new Error("Can't expand IRI without a default prefix: '".concat(e,"'"));return t.defaultPrefix+i}var Ph,Mh,Lh=function(){function e(t,n){y(this,e),b(this,"url",void 0),b(this,"quads",void 0),this.url=t,this.quads=n}return _(e,[{key:"value",value:function(e){var t;return null===(t=this.quads.find((function(t){return t.predicate.value===Th(e)})))||void 0===t?void 0:t.object.value}},{key:"values",value:function(e){return this.quads.filter((function(t){return t.predicate.value===Th(e)})).map((function(e){return e.object.value}))}}]),e}(),$h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];y(this,e),b(this,"quads",void 0),this.quads=t}return _(e,[{key:"isEmpty",value:function(){return 0===this.statements.length}},{key:"getQuads",value:function(){return this.quads.slice(0)}},{key:"addQuads",value:function(e){var t;(t=this.quads).push.apply(t,x(e))}},{key:"statements",value:function(e,t,n){var r=this;return this.quads.filter((function(i){return!(n&&i.object.value!==r.expandIRI(n)||e&&i.subject.value!==r.expandIRI(e)||t&&i.predicate.value!==r.expandIRI(t))}))}},{key:"statement",value:function(e,t,n){var r=this,i=this.quads.find((function(i){return!(n&&i.object.value!==r.expandIRI(n)||e&&i.subject.value!==r.expandIRI(e)||t&&i.predicate.value!==r.expandIRI(t))}));return null!=i?i:null}},{key:"contains",value:function(e,t,n){return null!==this.statement(e,t,n)}},{key:"getThing",value:function(e){var t=this.statements(e);return new Lh(e,t)}},{key:"expandIRI",value:function(e){return Th(e)}}]),e}();(Mh=Ph||(Ph={})).Read="read",Mh.Write="write",Mh.Append="append",Mh.Control="control";var Nh=function(e){v(n,$h);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(e,r,i){var a;return y(this,n),a=t.call(this,r),b(w(a),"url",void 0),b(w(a),"headers",void 0),a.url=e,a.headers=i,a}return _(n,[{key:"isPersonalProfile",value:function(){return!!this.statement(this.url,Th("rdf:type"),Th("foaf:PersonalProfileDocument"))}},{key:"isStorage",value:function(){var e;return!(null===(e=this.headers.get("Link"))||void 0===e||!e.match(/<http:\/\/www\.w3\.org\/ns\/pim\/space#Storage>;[^,]+rel="type"/))}},{key:"isUserWritable",value:function(){return this.getUserPermissions().includes(Ph.Write)}},{key:"getUserPermissions",value:function(){return this.getPermissionsFromWAC("user")}},{key:"getPublicPermissions",value:function(){return this.getPermissionsFromWAC("public")}},{key:"getLastModified",value:function(){var e,t,n,r;return null!==(e=null!==(t=null!==(n=k(this.headers.get("last-modified")))&&void 0!==n?n:k(null===(r=this.statement(this.url,"purl:modified"))||void 0===r?void 0:r.object.value))&&void 0!==t?t:this.getLatestDocumentDate())&&void 0!==e?e:null}},{key:"expandIRI",value:function(e){return Th(e,{defaultPrefix:this.url})}},{key:"getLatestDocumentDate",value:function(){var e=[].concat(x(this.statements(void 0,"purl:modified")),x(this.statements(void 0,"purl:created"))).map((function(e){return k(e.object.value)})).filter((function(e){return null!==e}));return e.length>0?e.reduce((function(e,t){return e>t?e:t})):null}},{key:"getPermissionsFromWAC",value:function(e){var t,n,r,i=null!==(t=this.headers.get("WAC-Allow"))&&void 0!==t?t:"",a=null!==(n=null===(r=A(i,new RegExp("".concat(e,'="([^"]+)"'))))||void 0===r?void 0:r[1])&&void 0!==n?n:"";return E([a.includes("read")&&Ph.Read,a.includes("write")&&Ph.Write,a.includes("append")&&Ph.Append,a.includes("control")&&Ph.Control])}}]),n}();function Bh(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Uh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uh(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Uh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fh(e,t){return zh.apply(this,arguments)}function zh(){return(zh=C(O.mark((function e(t,n){var r,i,a;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Accept:"text/turtle"}},e.prev=1,e.next=4,n(t,r);case 4:if(404!==(i=e.sent).status){e.next=7;break}throw new Ch(t);case 7:if(![401,403].includes(i.status)){e.next=9;break}throw new Oh(t,i.status);case 9:return e.next=11,i.text();case 11:return a=e.sent,e.abrupt("return",{body:a,headers:i.headers});case 15:if(e.prev=15,e.t0=e.catch(1),!(e.t0 instanceof Oh)){e.next=19;break}throw e.t0;case 19:if(!(e.t0 instanceof Ch)){e.next=21;break}throw e.t0;case 21:throw new Rh(t,{cause:e.t0});case 22:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function qh(e){var t,n=e.slice(0),r={},i=Bh($(e).flatMap((function(e,t){return T(E(["BlankNode"===e.object.termType?e.object.value:null,"BlankNode"===e.subject.termType?e.subject.value:null]),(function(e){return e.forEach((function(e){var n;return(null!==(n=r[e])&&void 0!==n?n:r[e]=new Set).add(t)}))}))})).filter().unique());try{var a=function(){var i,a=t.value,o=r[a],s=sl.exports($(o).map((function(t){return e[t]})).filter((function(e){var t=e.subject,n=t.termType,r=t.value;return"BlankNode"===n&&r===a})).map((function(e){var t=e.predicate,n=e.object;return"BlankNode"===n.termType?t.value:t.value+n.value})).sorted().join()),l=Bh(o);try{for(l.s();!(i=l.n()).done;){for(var u=i.value,c=n[u],d={subject:c.subject,object:c.object},p=0,f=Object.entries(d);p<f.length;p++){var h=R(f[p],2),m=h[0],v=h[1];"BlankNode"===v.termType&&v.value===a&&(d[m]=new Ul(s))}Q(n,c,new Ql(d.subject,c.predicate,d.object))}}catch(g){l.e(g)}finally{l.f()}};for(i.s();!(t=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return n}function Vh(e,t,n){return Qh.apply(this,arguments)}function Qh(){return(Qh=C(O.mark((function e(t,n,r){var i,a;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null!==(i=r)&&void 0!==i?i:window.fetch.bind(window),e.next=3,em(n);case 3:return a=e.sent,e.next=6,r(t,{method:"PUT",headers:{"Content-Type":"text/turtle"},body:n});case 6:return e.abrupt("return",new Nh(t,a,new Headers({})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hh(e,t){return Gh.apply(this,arguments)}function Gh(){return(Gh=C(O.mark((function e(t,n){var r,i,a,o;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fh(t,null!=n?n:window.fetch);case 2:return r=e.sent,i=r.body,a=r.headers,e.next=7,em(i,{documentUrl:t});case 7:return o=e.sent,e.abrupt("return",new Nh(t,o,a));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wh(e,t){return Jh.apply(this,arguments)}function Jh(){return(Jh=C(O.mark((function e(t,n){var r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Hh(t,n);case 3:return r=e.sent,e.abrupt("return",r);case 7:if(e.prev=7,e.t0=e.catch(0),e.t0 instanceof Ch){e.next=11;break}throw e.t0;case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Kh(e){return Yh.apply(this,arguments)}function Yh(){return(Yh=C(O.mark((function e(t){var n;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ih.fromRDF(t);case 2:return n=e.sent,e.abrupt("return",{"@graph":n});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zh(e,t){return Xh.apply(this,arguments)}function Xh(){return(Xh=C(O.mark((function e(t,n){var r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Hh(t,n);case 3:return r=e.sent,e.abrupt("return",!r.isEmpty());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function em(e){return tm.apply(this,arguments)}function tm(){return tm=C(O.mark((function e(t){var n,r,i,a,o=arguments;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r=L({baseIRI:n.documentUrl}),i=new Kl(r),a=[],e.abrupt("return",new Promise((function(e,r){i.parse(t,(function(t,i){var o;t?r(new Sh(null!==(o=n.documentUrl)&&void 0!==o?o:null,Eh.Turtle,t.message)):i?a.push(i):n.normalizeBlankNodes?e(qh(a)):e(a)}))})));case 5:case"end":return e.stop()}}),e)}))),tm.apply(this,arguments)}function nm(e,t,n){return rm.apply(this,arguments)}function rm(){return(rm=C(O.mark((function e(t,n,r){var i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null!==(i=r)&&void 0!==i?i:window.fetch.bind(window),e.next=3,r(t,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:n});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function im(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function am(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?im(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):im(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function om(e,t){return sm.apply(this,arguments)}function sm(){return sm=C(O.mark((function e(t,n){var r,i,a,o,s,l;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new $h(t.getQuads()),o=b({},t.url,t),s=function(e){return e.statements(void 0,"foaf:isPrimaryTopicOf").map((function(e){return e.object.value})).forEach((function(e){var t;return o[e]=null!==(t=o[e])&&void 0!==t?t:null}))},l=function(){var e=C(O.mark((function e(){var t,r,i,l,u;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,r=Object.entries(o);case 1:if(!(t<r.length)){e.next=23;break}if(i=R(r[t],2),l=i[0],null===i[1]){e.next=5;break}return e.abrupt("continue",20);case 5:return e.prev=5,e.next=8,Hh(l,n);case 8:u=e.sent,o[l]=u,a.addQuads(u.getQuads()),s(u),e.next=20;break;case 14:if(e.prev=14,e.t0=e.catch(5),!(e.t0 instanceof Oh)){e.next=19;break}return o[l]=!1,e.abrupt("continue",20);case 19:throw e.t0;case 20:t++,e.next=1;break;case 23:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(){return e.apply(this,arguments)}}(),s(t);case 5:return e.next=7,l();case 7:if(Object.values(o).some((function(e){return null===e}))){e.next=5;break}case 8:return e.abrupt("return",{store:a,cloaked:Object.values(o).some((function(e){return!1===e})),writableProfileUrl:t.isUserWritable()?t.url:null!==(r=null===(i=Object.values(o).find((function(e){return!!e&&e.isUserWritable()})))||void 0===i?void 0:i.url)&&void 0!==r?r:null});case 9:case"end":return e.stop()}}),e)}))),sm.apply(this,arguments)}function lm(e,t){return um.apply(this,arguments)}function um(){return(um=C(O.mark((function e(t,n){var r,i,a,o,s,l,u,c,d,p,f,h,m,v,g,y,b,w;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=V(t),e.next=3,Hh(c,n);case 3:if((d=e.sent).isPersonalProfile()||d.contains(t,"solid:oidcIssuer")){e.next=6;break}throw new Error("".concat(t," is not a valid webId."));case 6:return e.next=8,om(d,n);case 8:p=e.sent,f=p.store,h=p.writableProfileUrl,m=p.cloaked,v=f.statements(t,"pim:storage").map((function(e){return e.object.value})),g=f.statement(t,"solid:publicTypeIndex"),y=f.statement(t,"solid:privateTypeIndex"),b=q(c);case 16:if(!b||0!==v.length){e.next=26;break}return e.next=19,j(Hh(b,n));case 19:if(null==(w=e.sent)||!w.isStorage()){e.next=23;break}return v.push(b),e.abrupt("break",26);case 23:b=q(b),e.next=16;break;case 26:return e.abrupt("return",am({webId:t,storageUrls:v,cloaked:m,writableProfileUrl:h},L({name:null!==(r=null===(i=f.statement(t,"vcard:fn"))||void 0===i?void 0:i.object.value)&&void 0!==r?r:null===(a=f.statement(t,"foaf:name"))||void 0===a?void 0:a.object.value,avatarUrl:null!==(o=null===(s=f.statement(t,"vcard:hasPhoto"))||void 0===s?void 0:s.object.value)&&void 0!==o?o:null===(l=f.statement(t,"foaf:img"))||void 0===l?void 0:l.object.value,oidcIssuerUrl:null===(u=f.statement(t,"solid:oidcIssuer"))||void 0===u?void 0:u.object.value,publicTypeIndexUrl:null==g?void 0:g.object.value,privateTypeIndexUrl:null==y?void 0:y.object.value})));case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cm(){return(cm=C(O.mark((function e(t,n){var r,i,a;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=j((function(e){return lm(e,n)})),e.next=3,a(t);case 3:if(e.t2=i=e.sent,e.t1=null!==e.t2,!e.t1){e.next=7;break}e.t1=void 0!==i;case 7:if(!e.t1){e.next=11;break}e.t3=i,e.next=14;break;case 11:return e.next=13,a(t.replace(/\/$/,"").concat("/profile/card#me"));case 13:e.t3=e.sent;case 14:if(e.t4=r=e.t3,e.t0=null!==e.t4,!e.t0){e.next=18;break}e.t0=void 0!==r;case 18:if(!e.t0){e.next=22;break}e.t5=r,e.next=25;break;case 22:return e.next=24,a(D(t).concat("/profile/card#me"));case 24:e.t5=e.sent;case 25:return e.abrupt("return",e.t5);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dm(e){var t,n=(t=e).path&&t.path.startsWith("/")?t.path.match(/^\/[^/]*$/)?"/":"/".concat($(t.path.split("/")).filter().slice(0,-1).join("/"),"/").replace("//","/"):null;return e.protocol&&e.domain?"".concat(e.protocol,"://").concat(e.domain).concat(null!=n?n:"/"):n}function pm(e){var t;if("@type"in e&&!("@value"in e)){e["@id"]=null!==(t=e["@id"])&&void 0!==t?t:N();for(var n=0,r=Object.values(e);n<r.length;n++){var i=r[n];B(i)&&pm(i),U(i)&&i.forEach((function(e){return B(e)&&pm(e)}))}}}function fm(e){return T(P(e),(function(e){return pm(e)}))}function hm(e){var t=M(e);return t?L({containerUrl:dm(t),documentName:t.path?t.path.split("/").pop():null,resourceHash:t.fragment}):{}}function mm(e,t,n){return vm.apply(this,arguments)}function vm(){return(vm=C(O.mark((function e(t,n,r){var i,a,o;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null!==(i=r)&&void 0!==i?i:window.fetch.bind(r),a=t.storageUrls[0],o="".concat(a,"settings/").concat(n,"TypeIndex"),e.next=5,Zh(o,r);case 5:if(!e.sent){e.next=9;break}e.t0="".concat(a,"settings/").concat(n,"TypeIndex-").concat(N()),e.next=10;break;case 9:e.t0=o;case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gm(e,t,n){return ym.apply(this,arguments)}function ym(){return(ym=C(O.mark((function e(t,n,r){var i,a,o,s;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.writableProfileUrl){e.next=2;break}throw new Error("Can't create type index without a writable profile document");case 2:return r=null!==(i=r)&&void 0!==i?i:window.fetch.bind(r),e.next=5,mm(t,n,r);case 5:return a=e.sent,o="public"===n?"<> a <http://www.w3.org/ns/solid/terms#TypeIndex> .":"\n            <> a\n                <http://www.w3.org/ns/solid/terms#TypeIndex>,\n                <http://www.w3.org/ns/solid/terms#UnlistedDocument> .\n        ",s="\n        INSERT DATA {\n            <".concat(t.webId,"> <http://www.w3.org/ns/solid/terms#").concat(n,"TypeIndex> <").concat(a,"> .\n        }\n    "),e.next=10,Promise.all([Vh(a,o,r),nm(t.writableProfileUrl,s,r)]);case 10:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bm(e,t,n,r){return wm.apply(this,arguments)}function wm(){return(wm=C(O.mark((function e(t,n,r,i){var a,o;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hh(t,i);case 2:return a=e.sent,o=Array.isArray(n)?n:[n],e.abrupt("return",o.map((function(e){return a.statements(void 0,"rdf:type","solid:TypeRegistration").filter((function(t){return a.contains(t.subject.value,"solid:forClass",e)})).map((function(e){return a.statements(e.subject.value,r)})).flat().map((function(e){return e.object.value})).filter((function(e){return!!e}))})).flat());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _m(){return(_m=C(O.mark((function e(t,n){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gm(t,"public",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xm(){return(xm=C(O.mark((function e(t,n){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gm(t,"private",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function km(e,t,n){return Am.apply(this,arguments)}function Am(){return(Am=C(O.mark((function e(t,n,r){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bm(t,n,"solid:instanceContainer",r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Em(){return(Em=C(O.mark((function e(t,n,r){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bm(t,n,"solid:instance",r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Im(e,t){return Sm.apply(this,arguments)}function Sm(){return(Sm=C(O.mark((function e(t,n){var r,i,a,o,s,l,u;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null!==(r=n)&&void 0!==r?r:window.fetch.bind(window),e.next=3,n(t,{method:"HEAD"});case 3:if(s=e.sent,l=null!==(i=s.headers.get("Link"))&&void 0!==i?i:"",u=null!==(a=null===(o=l.match(/<([^>]+)>;\s*rel="acl"/))||void 0===o?void 0:o[1])&&void 0!==a?a:null){e.next=8;break}throw new Error("Could not find ACL Resource for '".concat(t,"'"));case 8:return e.abrupt("return",F(z(t),u));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rm(e,t,n){return Cm.apply(this,arguments)}function Cm(){return(Cm=C(O.mark((function e(t,n,r){var i,a,o;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(i=r)||void 0===i){e.next=4;break}e.t0=i,e.next=7;break;case 4:return e.next=6,Im(t,n);case 6:e.t0=e.sent;case 7:return r=e.t0,e.next=10,Wh(null!==(o=r)&&void 0!==o?o:"",n);case 10:if(e.t2=a=e.sent,e.t1=null!==e.t2,!e.t1){e.next=14;break}e.t1=void 0!==a;case 14:if(!e.t1){e.next=18;break}e.t3=a,e.next=21;break;case 18:return e.next=20,Rm(z(t),n);case 20:e.t3=e.sent;case 21:return e.abrupt("return",e.t3);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Om(e,t){return Dm.apply(this,arguments)}function Dm(){return(Dm=C(O.mark((function e(t,n){var r,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Im(t,n);case 2:return r=e.sent,e.next=5,Rm(t,n,r);case 5:return i=e.sent,e.abrupt("return",L({url:r,effectiveUrl:i.url,document:i}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){v(ExpectedQuadAssertionError,g);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(ExpectedQuadAssertionError);function ExpectedQuadAssertionError(e){var n;return y(this,ExpectedQuadAssertionError),n=t.call(this,"Couldn't find the following triple: ".concat(function(e){return(new ou).quadsToString([e]).slice(0,-1)}(e))),b(w(n),"expectedQuad",void 0),n.expectedQuad=e,n}}();var jm=("undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:window).Error;!function(e){v(JSError,jm);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(JSError);function JSError(e,n){var r;return y(this,JSError),(r=t.call.apply(t,[this].concat([e,n]))).name="JSError"===(this instanceof JSError?this.constructor:void 0).name?"Error":(this instanceof JSError?this.constructor:void 0).name,Object.setPrototypeOf(w(r),(this instanceof JSError?this.constructor:void 0).prototype),r}}();var Tm,Pm=function(){function e(){if(y(this,e),!this.static().buildingPureInstance())return this.initializeProxy(),this._proxy}return _(e,[{key:"static",value:function(){return this.constructor}},{key:"__get",value:function(e){return Reflect.get(this._proxyTarget,e)}},{key:"__set",value:function(e,t){Reflect.set(this._proxyTarget,e,t)}},{key:"__delete",value:function(e){Reflect.deleteProperty(this._proxyTarget,e)}},{key:"initializeProxy",value:function(){var e=this.static();this._proxyTarget=this,this._proxy=new Proxy(this._proxyTarget,{get:function(t,n,r){return"string"!=typeof n||n in t||e.isReservedProperty(n)?Reflect.get(t,n,r):t.__get(n)},set:function(t,n,r,i){return"string"!=typeof n||n in t||e.isReservedProperty(n)?Reflect.set(t,n,r,i):(t.__set(n,r),!0)},deleteProperty:function(t,n){return"string"!=typeof n||n in t||e.isReservedProperty(n)?Reflect.deleteProperty(t,n):(t.__delete(n),!0)}})}}],[{key:"buildingPureInstance",value:function(){return!!this.__buildingPureInstance||(this.__reservedProperties.has(this)||(this.__buildingPureInstance=!0,this.__reservedProperties.set(this,new Set(Object.getOwnPropertyNames(new this))),this.__buildingPureInstance=!1),!1)}},{key:"isReservedProperty",value:function(e){var t;return!(null===(t=this.__reservedProperties.get(this))||void 0===t||!t.has(e))}}]),e}();function Mm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lm(e,t){return e===t||!(!Nm(e)||!Nm(t))&&(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():Object.keys(e).length===Object.keys(t).length&&!Object.keys(e).some((function(n){return!Lm(e[n],t[n])})))}function $m(e){return null==e||(Array.isArray(e)||"string"==typeof e?0===e.length:"object"===H(e)&&0===Object.keys(e).length)}function Nm(e){return"object"===H(e)&&null!==e}function Bm(e){return null==e}function Um(e){for(var t in e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mm(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))zm(e,t)&&(e[t]=Um(e[t]));return e}function Fm(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function zm(e,t){var n;return Fm(e,t)&&Nm(n=e[t])&&n.constructor===Object}function qm(e){return String(e)}function Vm(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Qm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qm(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Qm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}b(Pm,"__buildingPureInstance",void 0),b(Pm,"__reservedProperties",new WeakMap),Array.isArray.bind(Array),Object.entries.bind(Object),Tm=Symbol.iterator,function(e){function t(e){y(this,t),b(this,"keysToItems",void 0),b(this,"itemsToKeys",void 0),b(this,"getKey",void 0),this.keysToItems=new Map,this.itemsToKeys=new WeakMap,this.getKey=null!=e?e:function(e){return qm(e)}}_(t,[{key:Tm,value:O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.keysToItems,"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"size",get:function(){return this.keysToItems.size}},{key:"items",value:function(){return this.keysToItems.values()}},{key:"keys",value:function(){return this.keysToItems.keys()}},{key:"entries",value:function(){return this.keysToItems.entries()}},{key:"add",value:function(e){var t=this.getKey(e);this.keysToItems.set(t,e),this.itemsToKeys.set(e,t)}},{key:"require",value:function(e){return this.keysToItems.get(e)||fail("Couldn't find item with '".concat(e,"' key"))}},{key:"get",value:function(e){return this.keysToItems.get(e)}},{key:"getKeys",value:function(){return x(this.keysToItems.keys())}},{key:"getItems",value:function(){return x(this.keysToItems.values())}},{key:"hasKey",value:function(e){return this.keysToItems.has(e)}},{key:"hasItem",value:function(e){return this.itemsToKeys.has(e)}},{key:"delete",value:function(e){var t=this.itemsToKeys.get(e);t&&(this.itemsToKeys.delete(e),this.keysToItems.delete(t))}},{key:"filter",value:function(e){var t,n=this.constructor.createFromArray([],this.getKey),r=Vm(this.entries());try{for(r.s();!(t=r.n()).done;){var i=R(t.value,2),a=i[0],o=i[1];e(o,a)&&n.add(o)}}catch(s){r.e(s)}finally{r.f()}return n}},{key:"clear",value:function(){this.itemsToKeys=new WeakMap,this.keysToItems.clear()}}],[{key:"createFromArray",value:function(e,n){var r,i=new t("string"==typeof n?function(e){return e[n]}:n),a=Vm(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;i.add(o)}}catch(s){a.e(s)}finally{a.f()}return i}}])}(),function(){function e(){y(this,e),this.initPromise()}_(e,[{key:"value",get:function(){return this._value||null}},{key:"isResolved",value:function(){return"_value"in this}},{key:"then",value:function(e,t){return this.promise.then(e,t)}},{key:"catch",value:function(e){return this.promise.catch(e)}},{key:"finally",value:function(e){return this.promise.finally(e)}},{key:"resolve",value:function(e){this.isResolved()&&this.initPromise(),this._value=e,this._resolve(e)}},{key:"reject",value:function(e){this._reject(e)}},{key:"initPromise",value:function(){var e=this;this.promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}}],[{key:"from",value:function(t){var n=new e;return t.then(n.resolve.bind(n)).catch(n.reject.bind(n)),n}}])}(),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;y(this,e),b(this,"count",void 0),b(this,"listeners",void 0),this.count=t,this.listeners=new Set}var t,n,r;_(e,[{key:"acquire",value:(r=C(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitAvailable();case 2:this.count=Math.max(this.count-1,0);case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"release",value:function(){this.count++,this.notifyAvailable()}},{key:"run",value:(n=C(O.mark((function e(t){var n;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.acquire();case 2:return e.next=4,t();case 4:return n=e.sent,this.release(),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"waitAvailable",value:(t=C(O.mark((function e(){var t=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.count){e.next=5;break}return e.next=3,new Promise((function(e){t.listeners.add((function n(){t.listeners.delete(n),e(null)}))}));case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"notifyAvailable",value:function(){this.listeners.forEach((function(e){return e()}))}}])}();var Hm={},Gm=function(){function e(){y(this,e)}return _(e,[{key:"set",value:function(e,t){void 0===t&&(t="__undefined__"),localStorage.setItem(e,JSON.stringify(t))}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=localStorage.getItem(e);return null===n?t:"__undefined__"!==n?JSON.parse(n):void 0}},{key:"require",value:function(e){var t=this.get(e,Hm);if(t===Hm)throw new Error("Failed getting required key from local storage: '".concat(e,"'"));return t}},{key:"has",value:function(e){return null!==localStorage.getItem(e)}},{key:"remove",value:function(e){localStorage.removeItem(e)}},{key:"pull",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.has(e))return t;var n=this.get(e);return this.remove(e),n}}],[{key:"instance",get:function(){var t;return this._instance=null!==(t=this._instance)&&void 0!==t?t:new e}}]),e}();function Wm(e,t){return e>t?1:t>e?-1:0}function Jm(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Km(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Km(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Km(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ym(e,t){return t?e.filter(t):e.filter((function(e){return!!e}))}function Zm(e,t){var n=e.indexOf(t);return-1!==n&&(e.splice(n,1),!0)}function Xm(e,t){return t?Object.values(e.reduce((function(e,n){var r,i=t(n);return e[i]=null!==(r=e[i])&&void 0!==r?r:n,e}),{})):x(new Set(e))}function ev(e,t){return e.map((function(e,t){return[e,t]})).filter((function(e){var n=R(e,2);n[0];var r=n[1];return!t.includes(r)})).map((function(e){return R(e,1)[0]}))}function tv(e){return Array.isArray(e)||function(e){return"function"==typeof(null==e?void 0:e[Symbol.iterator])}(e)&&!function(e){return"string"==typeof e||e instanceof String}(e)?Array.from(e):[e]}function nv(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something went wrong",t="string"==typeof e?Error:e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];throw G(t,x("string"==typeof e?[e]:r))}function rv(e){return e?(e^16*Math.random()>>e/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,rv)}function iv(e){return e.split(/_|-|\s|(?=[A-Z])/)}function av(e){var t=iv(e),n=W(t),r=n[0],i=n.slice(1);return(null!=r?r:"").toLowerCase()+i.map((function(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()})).join("")}function ov(e,t){for(var n=e.prototype,r=function(){var e=R(a[i],2),t=e[0],r=e[1];n[t]=function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var a=r.apply(void 0,[this.value].concat(n));return null===(e=this.chain)||void 0===e?void 0:e.call(this,a)}},i=0,a=Object.entries(t);i<a.length;i++)r()}function sv(e,t){for(var n=e.prototype,r=Object.getOwnPropertyDescriptors(t.prototype),i=function(){var e=R(o[a],2),t=e[0],r=e[1];return t in n?"continue":"function"!=typeof r.value?(Object.defineProperty(n,t,{get:function(){return this.chain(this.value[t])}}),"continue"):void(n[t]=function(){for(var e,t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var o=(e=r.value).call.apply(e,[this.value].concat(i));return null===(t=this.chain)||void 0===t?void 0:t.call(this,o)})},a=0,o=Object.entries(r);a<o.length;a++)i()}b(Gm,"_instance",void 0),Gm.instance;var lv=function(){function e(t){y(this,e),b(this,"value",void 0),this.value=t}return _(e,[{key:"create",value:function(e){return new this.constructor(e)}},{key:"chain",value:function(e){return this.isPrimitive(e)?this.create(e):e}}],[{key:"isPrimitive",value:function(e){return this.prototype.isPrimitive(e)}}]),e}();var uv={clear:function(e){e.splice(0,e.length)},diff:function(e,t,n){var r,i=e.slice(0),a=[],o=n?function(e,t){return t.findIndex((function(t){return n(e,t)}))}:function(e,t){return t.indexOf(e)},s=Jm(t);try{for(s.s();!(r=s.n()).done;){var l=r.value,u=o(l,i);-1!==u?i.splice(u,1):a.push(l)}}catch(c){s.e(c)}finally{s.f()}return{added:a,removed:i}},filter:Ym,first:function(e,t){var n,r=Jm(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t(i))return i}}catch(a){r.e(a)}finally{r.f()}return null},flatMap:function(e,t){return x(e.entries()).flatMap((function(e){var n=R(e,2),r=n[0],i=n[1];return t(i,r)}))},isEmpty:function(e){return 0===e.length},project:function(e,t){return e.map((function(e){return e[t]}))},randomItem:function(e){return 0===e.length?null:e[Math.floor(Math.random()*e.length)]},randomItems:function(e,t){for(var n=e.slice(0),r=[];n.length>0&&r.length<t;){var i=Math.floor(Math.random()*n.length);r.push(n[i]),n.splice(i,1)}return r},remove:Zm,removeIndex:function(e,t){return e.splice(Number(t),1).length>0},replace:function(e,t,n){var r=e.indexOf(t);return-1!==r&&(e[r]=n,!0)},sorted:function(e,t,n){return n="asc"===t||"desc"===t?t:n,e.slice(0).sort(function(){var e="desc"===n?function(e){return function(t,n){return Wm(n[e],t[e])}}:function(e){return function(t,n){return Wm(t[e],n[e])}};switch(H(t)){case"function":return t;case"string":if("asc"===t)return;return"desc"===t?function(e,t){return Wm(t,e)}:e(t);case"object":var r=t.map((function(t){return e(t)}));return function(e,t){var n,i=Jm(r);try{for(i.s();!(n=i.n()).done;){var a=(0,n.value)(e,t);if(0!==a)return a}}catch(o){i.e(o)}finally{i.f()}return 0}}}())},unique:Xm,where:function(e,t,n){return e.filter((function(e){var r=e[t],i="function"==typeof r?r.call(e):r;return n?i===n:!!i}))},without:function(e,t){return Array.isArray(t)?Ym(e,(function(e){return-1===t.indexOf(e)})):function(e,t){return ev(e,[t])}(e,e.indexOf(t))},withoutIndexes:ev},cv=function(e,t){v(r,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(r);function r(){return y(this,r),n.apply(this,arguments)}return _(r,[{key:t,value:O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.value,"t0",1);case 1:case"end":return e.stop()}}),e,this)}))},{key:"get",value:function(e){return this.value[e]}},{key:"toArray",value:function(){return this.value.slice(0)}},{key:"isPrimitive",value:function(e){return Array.isArray(e)}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.prototype;return t.create(e)}}]),r}(lv,Symbol.iterator);ov(cv,uv),sv(cv,Array);var dv={reverse:function(e){return e.split("").reverse().join("")},toCamelCase:av,toSlug:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e=e.trim().normalize("NFD").replace(/_|-/g," ").replace(/[\u0300-\u036f]/g,"").replace(/[^\d\w\s]/g,"").toLowerCase().replace(/\s+/g,t),t.length>0&&(e=e.replace(new RegExp("".concat(t,"+"),"g"),t)),e},toStudlyCase:function(e){return iv(e).map((function(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()})).join("")}},pv=function(e){v(n,lv);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(){return y(this,n),t.apply(this,arguments)}return _(n,[{key:"toString",value:function(){return this.value}},{key:"isPrimitive",value:function(e){return"string"==typeof e}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.prototype;return t.create(e)}}]),n}();function fv(e,t){if(!t)return n=new Proxy(e,{get:function(e,t,r){var i=Reflect.get(e,t,r);return"function"!=typeof i?i:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return i.call.apply(i,[e].concat(r)),n}}}),n;var n,r=t(e);return r instanceof Promise?r.then((function(){return e})):e}function hv(e){var t="function"==typeof Map?new Map:void 0;return hv=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return G(e,arguments,I(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),J(r,e)},hv(e)}ov(pv,dv),sv(pv,String);let mv,vv;const gv=new WeakMap,yv=new WeakMap,bv=new WeakMap,wv=new WeakMap,_v=new WeakMap;let xv={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return yv.get(e);if("objectStoreNames"===t)return e.objectStoreNames||bv.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ev(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function kv(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(vv||(vv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Iv(this),t),Ev(gv.get(this))}:function(...t){return Ev(e.apply(Iv(this),t))}:function(t,...n){const r=e.call(Iv(this),t,...n);return bv.set(r,t.sort?t.sort():[t]),Ev(r)}}function Av(e){return"function"==typeof e?kv(e):(e instanceof IDBTransaction&&function(e){if(yv.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));yv.set(e,t)}(e),t=e,(mv||(mv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,xv):e);var t}function Ev(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(Ev(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&gv.set(t,e)})).catch((()=>{})),_v.set(t,e),t}(e);if(wv.has(e))return wv.get(e);const t=Av(e);return t!==e&&(wv.set(e,t),_v.set(t,e)),t}const Iv=e=>_v.get(e);function Sv(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(e,t),s=Ev(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Ev(o.result),e.oldVersion,e.newVersion,Ev(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),s.then((e=>{a&&e.addEventListener("close",(()=>a())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),s}function Rv(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(()=>t())),Ev(n).then((()=>{}))}const Cv=["get","getKey","getAll","getAllKeys","count"],Ov=["put","add","delete","clear"],Dv=new Map;function jv(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Dv.get(t))return Dv.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ov.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Cv.includes(n))return;const a=async function(e,...t){const a=this.transaction(e,i?"readwrite":"readonly");let o=a.store;r&&(o=o.index(t.shift()));const s=await o[n](...t);return i&&await a.done,s};return Dv.set(t,a),a}function Tv(e){return"closeConnections"in e}xv=(e=>({...e,get:(t,n,r)=>jv(t,n)||e.get(t,n,r),has:(t,n)=>!!jv(t,n)||e.has(t,n)}))(xv);var Pv=function(e){v(SoukaiError,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(SoukaiError);function SoukaiError(e){var n;return y(this,SoukaiError),(n=t.call(this,e)).name=(this instanceof SoukaiError?this.constructor:void 0).name,Object.setPrototypeOf(w(n),(this instanceof SoukaiError?this.constructor:void 0).prototype),n}return _(SoukaiError)}(hv(Error));var Mv=function(e){v(n,Pv);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(e){var r;return y(this,n),r=t.call(this,"Could not create document with id ".concat(e," because it is already in use.")),b(w(r),"id",void 0),r.id=e,r}return _(n)}();var Lv=function(e){v(n,Pv);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(e,r){var i;return y(this,n),i=t.call(this,r?"Couldn't find document with id '".concat(e,"' in '").concat(r,"' Collection."):"Couldn't find document with id '".concat(e,"'")),b(w(i),"id",void 0),b(w(i),"collection",void 0),i.id=e,i.collection=r,i}return _(n)}();var $v=function(e){v(n,Pv);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(e,r){var i;return y(this,n),i=t.call(this,"Model ".concat(e,": ").concat(r,". ")+"Learn more at https://soukai.js.org/guide/defining-models.html"),b(w(i),"modelName",void 0),i.modelName=e,i}return _(n)}();function Nv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nv(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uv(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Fv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fv(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Fv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zv=function(){function e(){var t=this;y(this,e),b(this,"rootFilters",void 0),b(this,"rootUpdates",void 0),b(this,"attributeFilters",void 0),b(this,"attributeUpdates",void 0),b(this,"documentsIn",(function(e,t,n){return n.includes(e)})),b(this,"documentOverwrite",(function(e,t){var n,r=Uv(Object.getOwnPropertyNames(e));try{for(r.s();!(n=r.n()).done;)delete e[n.value]}catch(i){r.e(i)}finally{r.f()}Object.assign(e,t)})),b(this,"attributeEq",(function(e,t,n){return Lm(e[t],n)})),b(this,"attributeContains",(function(e,n,r){Array.isArray(r)||(r=[r]);var i=e&&e[n];return!!Array.isArray(i)&&!r.find((function(e){return!i.find((function(n){return t.filterValue(n,e)}))}))})),b(this,"attributeOr",(function(e,n,r){return!!r.find((function(r){return!!t.filterValue(e,b({},n,r))}))})),b(this,"attributeIn",(function(e,t,n){return n.includes(e[t])})),b(this,"attributeUpdate",(function(e,n,r){!Array.isArray(r)&&Nm(r)?t.isOperation(r,t.attributeUpdates)?t.runOperation(r,t.attributeUpdates,e,n):Nm(e[n])?t.updateAttributes(e[n],r):e[n]=r:e[n]=r})),b(this,"attributeUpdateItems",(function(e,n,r){Array.isArray(r)||(r=[r]);var i,a=Uv(r);try{var o=function(){var r=i.value,a=r.$where,o=r.$update,s=r.$unset;a&&a.$in&&(a.$in=a.$in.map((function(e){return e.toString()})));var l=t.requireArrayProperty("$updateItems",e,n),u=t.filterDocuments(l.reduce((function(e,t,n){return Bv(Bv({},e),{},b({},n,Nm(t)?t:{}))}),{}),a||{});o&&Object.keys(u).forEach((function(e){t.updateAttributes(u,b({},e,o)),l[parseInt(e)]=u[e]})),s&&(e[n]=ev(l,Object.keys(u).map(parseInt)))};for(a.s();!(i=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})),b(this,"attributePush",(function(e,n,r){t.requireArrayProperty("$push",e,n).push(r)})),b(this,"attributeUnset",(function(e,t,n){if(!0!==n){var r=e[t];if(Nm(r)){var i,a=Uv(n=Array.isArray(n)?n:[n]);try{for(a.s();!(i=a.n()).done;)delete r[i.value]}catch(o){a.e(o)}finally{a.f()}}}else delete e[t]})),b(this,"attributeApply",(function(e,n,r){var i,a=Uv(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;t.runOperation(o,t.attributeUpdates,e,n)}}catch(s){a.e(s)}finally{a.f()}})),b(this,"attributeOverwrite",(function(e,t,n){e[t]=n})),this.rootFilters={$in:this.documentsIn},this.rootUpdates={$overwrite:this.documentOverwrite},this.attributeFilters={$eq:this.attributeEq,$contains:this.attributeContains,$or:this.attributeOr,$in:this.attributeIn},this.attributeUpdates={$update:this.attributeUpdate,$updateItems:this.attributeUpdateItems,$push:this.attributePush,$unset:this.attributeUnset,$apply:this.attributeApply,$overwrite:this.attributeOverwrite}}return _(e,[{key:"filterDocuments",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e).reduce((function(e,r){var i=R(r,2),a=i[0],o=i[1];return t.filterDocument(a,o,n)&&(e[a]=o),e}),{})}},{key:"updateAttributes",value:function(e,t){if(this.isOperation(t,{$unset:this.attributeUnset})){var n,r=t.$unset,i=Uv(Array.isArray(r)?r:[r]);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.attributeUnset(e,a,!0)}}catch(v){i.e(v)}finally{i.f()}}else if(this.isOperation(t,this.rootUpdates)){var o=Object.entries(t),s=R(o,1),l=R(s[0],2),u=l[0],c=l[1];this.rootUpdates[u](e,c)}else for(var d=0,p=Object.entries(t);d<p.length;d++){var f=R(p[d],2),h=f[0],m=f[1];this.attributeUpdate(e,h,m)}}},{key:"obtainDocumentId",value:function(e){return null!=e?e:rv()}},{key:"filterDocument",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=Bv({},n);for(var r=0,i=Object.entries(this.rootFilters);r<i.length;r++){var a=R(i[r],2),o=a[0],s=a[1];if(o in n){if(!s(e,t,n[o]))return!1;delete n[o]}}return this.filterValue(t,n)}},{key:"filterValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Nm(n)?this.isOperation(n,this.attributeFilters)?this.runOperation(n,this.attributeFilters,{value:e},"value"):!!Nm(e)&&!Object.entries(n).find((function(n){var r=R(n,2),i=r[0],a=r[1];return!(t.isOperation(a,t.attributeFilters)?t.runOperation(a,t.attributeFilters,e,i):t.attributeEq(e,i,a))})):this.attributeEq({value:e},"value",n)}},{key:"isOperation",value:function(e,t){if(!Nm(e))return!1;var n=Object.keys(e),r=W(n),i=r[0],a=r.slice(1);return!(!i||0!==a.length||!(i in t))}},{key:"runOperation",value:function(e,t){for(var n=R(Object.entries(e)[0],2),r=n[0],i=n[1],a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];return t[r].apply(t,o.concat([i]))}},{key:"requireArrayProperty",value:function(e,t,n){if(!t||!Nm(t)||!Array.isArray(t[n]))throw new Error("".concat(e," operator can only be applied to array attributes"));return t[n]}}]),e}();function qv(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Vv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vv(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Vv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;y(this,e),b(this,"database",void 0),b(this,"helper",void 0),b(this,"_metadataConnection",void 0),b(this,"_documentsConnection",void 0),this.database=t?"soukai-"+t:"soukai",this.helper=new zv}var t,n,r,i,a,o,s,l,u,c,d,p,f,h,m,v,g;return _(e,[{key:"getCollections",value:(g=C(O.mark((function e(){var t;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.withMetadataTransaction("readonly",(function(e){return e.store.getAllKeys()}));case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return e.toString()})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"purgeDatabase",value:(v=C(O.mark((function e(){var t=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.closeConnections(),e.next=3,Promise.all([Rv("".concat(this.database,"-meta"),{blocked:function(){return t.throwDatabaseBlockedError()}}),Rv(this.database,{blocked:function(){return t.throwDatabaseBlockedError()}})]);case 3:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"closeConnections",value:(m=C(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._metadataConnection&&this._metadataConnection.close(),this._documentsConnection&&this._documentsConnection.close(),delete this._metadataConnection,delete this._documentsConnection;case 4:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"create",value:(h=C(O.mark((function e(t,n,r){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.helper.obtainDocumentId(r),e.next=3,this.documentExists(t,r);case 3:if(!e.sent){e.next=5;break}throw new Mv(r);case 5:return e.next=7,this.createDocument(t,r,n);case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return h.apply(this,arguments)})},{key:"readOne",value:(f=C(O.mark((function e(t,n){var r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collectionExists(t);case 2:if(e.sent){e.next=4;break}throw new Lv(n,t);case 4:return e.next=6,this.getDocument(t,n);case 6:if(r=e.sent){e.next=9;break}throw new Lv(n,t);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"readMany",value:(p=C(O.mark((function e(t,n){var r,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.next=3,this.getCollections();case 3:if(-1!==(i=e.sent).indexOf(t)){e.next=6;break}return e.abrupt("return",r);case 6:return e.next=8,this.withDocumentsTransaction(i,t,"readonly",(function(e){var t,n=(t=C(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r[t.key]=t.value,e.abrupt("return",t.continue().then(n));case 4:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)});return e.store.openCursor().then(n)}));case 8:return e.abrupt("return",this.helper.filterDocuments(r,n));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"update",value:(d=C(O.mark((function e(t,n,r){var i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDocument(t,n);case 2:if(i=e.sent){e.next=5;break}throw new Lv(n,t);case 5:return this.helper.updateAttributes(i,r),e.next=8,this.updateDocument(t,n,i);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return d.apply(this,arguments)})},{key:"delete",value:(c=C(O.mark((function e(t,n){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.documentExists(t,n);case 2:if(e.sent){e.next=4;break}throw new Lv(n,t);case 4:return e.next=6,this.deleteDocument(t,n);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"collectionExists",value:(u=C(O.mark((function e(t){var n;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCollections();case 2:return n=e.sent,e.abrupt("return",-1!==n.indexOf(t));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"documentExists",value:(l=C(O.mark((function e(t,n){var r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDocument(t,n);case 2:return r=e.sent,e.abrupt("return",!!r);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"getDocument",value:(s=C(O.mark((function e(t,n){var r,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getCollections();case 3:if(-1!==(r=e.sent).indexOf(t)){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,this.withDocumentsTransaction(r,t,"readonly",(function(e){return e.store.get(n)}));case 8:return i=e.sent,e.abrupt("return",i||null);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(e,t){return s.apply(this,arguments)})},{key:"createDocument",value:(o=C(O.mark((function e(t,n,r){var i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCollections();case 2:if(-1!==(i=e.sent).indexOf(t)){e.next=7;break}return e.next=6,this.createCollection(t);case 6:i.push(t);case 7:return e.abrupt("return",this.withDocumentsTransaction(i,t,"readwrite",(function(e){return e.store.add(r,n),e.done})));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return o.apply(this,arguments)})},{key:"updateDocument",value:(a=C(O.mark((function e(t,n,r){var i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCollections();case 2:return i=e.sent,e.abrupt("return",this.withDocumentsTransaction(i,t,"readwrite",(function(e){return e.store.put(r,n),e.done})));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"deleteDocument",value:(i=C(O.mark((function e(t,n){var r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCollections();case 2:return r=e.sent,e.abrupt("return",this.withDocumentsTransaction(r,t,"readwrite",(function(e){return e.store.delete(n),e.done})));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"withMetadataTransaction",value:(r=C(O.mark((function e(t,n){var r,i=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._metadataConnection,e.t0){e.next=5;break}return e.next=4,Sv("".concat(this.database,"-meta"),1,{upgrade:function(e){e.objectStoreNames.contains("collections")||e.createObjectStore("collections",{keyPath:"name"})},blocked:function(){return i.throwDatabaseBlockedError()}});case 4:e.t0=e.sent;case 5:return r=this._metadataConnection=e.t0,e.abrupt("return",this.retryingOnTransactionInactive((function(){var e=r.transaction("collections",t);return n(e)})));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"withDocumentsTransaction",value:(n=C(O.mark((function e(t,n,r,i){var a,o=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._documentsConnection,e.t0){e.next=5;break}return e.next=4,Sv(this.database,t.length,{upgrade:function(e){var n,r=qv(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.objectStoreNames.contains(i)||e.createObjectStore(i)}}catch(a){r.e(a)}finally{r.f()}},blocked:function(){return o.throwDatabaseBlockedError()}});case 4:e.t0=e.sent;case 5:return a=this._documentsConnection=e.t0,e.abrupt("return",this.retryingOnTransactionInactive((function(){var e=a.transaction(n,r);return i(e)})));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t,r,i){return n.apply(this,arguments)})},{key:"retryingOnTransactionInactive",value:function(e){try{return e()}catch(Mh){if(!(Mh instanceof Error)||!Mh.name.toLowerCase().includes("inactive")&&!Mh.message.toLowerCase().includes("inactive"))throw Mh;return e()}}},{key:"createCollection",value:(t=C(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.withMetadataTransaction("readwrite",(function(e){return e.store.add({name:t}),e.done}));case 2:this._documentsConnection&&(this._documentsConnection.close(),delete this._documentsConnection);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"throwDatabaseBlockedError",value:function throwDatabaseBlockedError(){throw new Pv("An attempt to open an IndexedDB connection has been blocked, remember to call IndexedDBEngine.closeConnections when necessary. Learn more at https://developer.mozilla.org/en-US/docs/Web/API/IDBOpenDBRequest/blocked_event")}}]),e}();!function(){function e(){y(this,e),b(this,"db",{}),b(this,"helper",void 0),this.helper=new zv}var t,n,r;_(e,[{key:"database",get:function(){return this.db}},{key:"create",value:function(e,t,n){var r=this.collection(e);if((n=this.helper.obtainDocumentId(n))in r)throw new Mv(n);return r[n]=t,Promise.resolve(n)}},{key:"readOne",value:(r=C(O.mark((function e(t,n){var r,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.collection(t),e.abrupt("return",null!==(r=i[n])&&void 0!==r?r:nv(Lv,n,i));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"readMany",value:(n=C(O.mark((function e(t,n){var r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasCollection(t)){e.next=2;break}return e.abrupt("return",{});case 2:return r=this.collection(t),e.abrupt("return",this.helper.filterDocuments(r,n));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"update",value:(t=C(O.mark((function e(t,n,r){var i,a,o;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.collection(t),o=null!==(i=a[n])&&void 0!==i?i:nv(Lv,n,3,t),this.helper.updateAttributes(o,r);case 3:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"delete",value:function(e,t){var n=this.collection(e);return t in n?(delete n[t],Promise.resolve()):Promise.reject(new Lv(t,e))}},{key:"hasCollection",value:function(e){return e in this.db}},{key:"collection",value:function(e){var t,n;return null!==(n=(t=this.db)[e])&&void 0!==n?n:t[e]={}}}])}(),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";y(this,e),b(this,"prefix",void 0),b(this,"helper",void 0),this.prefix=t,this.helper=new zv}var t,n,r,i,a;_(e,[{key:"clear",value:function(){for(var e=0,t=Object.keys(localStorage);e<t.length;e++){var n=t[e];n.startsWith(this.prefix)&&localStorage.removeItem(n)}}},{key:"create",value:(a=C(O.mark((function e(t,n,r){var i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.readItem(t,{}),!((r=this.helper.obtainDocumentId(r))in i)){e.next=4;break}throw new Mv(r);case 4:return i[r]=this.serializeAttributes(n),this.writeItem(t,i),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"readOne",value:(i=C(O.mark((function e(t,n){var r,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.readItem(t,{}),i=r[n]){e.next=4;break}throw new Lv(n,t);case 4:return e.abrupt("return",this.deserializeAttributes(i));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"readMany",value:(r=C(O.mark((function e(t,n){var r,i,a,o,s,l;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=this.readItem(t,{}),i=0,a=Object.entries(r);i<a.length;i++)o=R(a[i],2),s=o[0],l=o[1],r[s]=this.deserializeAttributes(l);return e.abrupt("return",this.helper.filterDocuments(r,n));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"update",value:(n=C(O.mark((function e(t,n,r){var i,a,o;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.readItem(t,{}),a=i[n]){e.next=4;break}throw new Lv(n,t);case 4:o=this.deserializeAttributes(a),this.helper.updateAttributes(o,r),i[n]=this.serializeAttributes(o),this.writeItem(t,i);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"delete",value:(t=C(O.mark((function e(t,n){var r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.readItem(t,{}),n in r){e.next=3;break}throw new Lv(n,t);case 3:delete r[n],this.writeItem(t,r);case 5:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"readItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=localStorage.getItem(this.prefix+e);return null!==n?JSON.parse(n):t}},{key:"writeItem",value:function(e,t){localStorage.setItem(this.prefix+e,JSON.stringify(t))}},{key:"serializeAttributes",value:function(e){for(var t in e){var n=e[t];e[t]=this.serializeAttributeValue(n)}return e}},{key:"serializeAttributeValue",value:function(e){var t=this;return Array.isArray(e)?e.map((function(e){return t.serializeAttributeValue(e)})):e instanceof Date?{__dateTime:e.getTime()}:"object"===H(e)?this.serializeAttributes(e):e}},{key:"deserializeAttributes",value:function(e){for(var t in e){var n=e[t];e[t]=this.deserializeAttributeValue(n)}return e}},{key:"deserializeAttributeValue",value:function(e){var t=this;return Array.isArray(e)?e.map((function(e){return t.deserializeAttributeValue(e)})):Nm(e)&&"__dateTime"in e?new Date(e.__dateTime):e}}])}(),function(){function e(t){y(this,e),b(this,"engine",void 0),this.engine=t}_(e,[{key:"create",value:function(e,t,n){return console.log("CREATE",e,t,n),this.engine.create(e,t,n).then((function(e){return console.log("CREATED",e),e})).catch((function(e){throw console.error(e),e}))}},{key:"readOne",value:function(e,t){return console.log("READ ONE",e,t),this.engine.readOne(e,t).then((function(e){return console.log("FOUND",e),e})).catch((function(e){throw console.error(e),e}))}},{key:"readMany",value:function(e,t){return console.log("READ ALL",e,t),this.engine.readMany(e,t).then((function(e){return console.log("FOUND",e),e})).catch((function(e){throw console.error(e),e}))}},{key:"update",value:function(e,t,n){return console.log("UPDATE",e,t,n),this.engine.update(e,t,n).then((function(){return console.log("UPDATED")})).catch((function(e){throw console.error(e),e}))}},{key:"delete",value:function(e,t){return console.log("DELETE",e,t),this.engine.delete(e,t).then((function(){return console.log("DELETED")})).catch((function(e){throw console.error(e),e}))}}])}();var Hv=void 0;function Gv(){return Hv}function Wv(){return Hv||nv(Pv,"Engine must be initialized before performing any operations. Learn more at https://soukai.js.org/guide/engines.html")}function Jv(e){Hv=e||void 0}function Kv(){return Yv.apply(this,arguments)}function Yv(){return(Yv=C(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Hv&&Tv(Hv)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Hv.closeConnections();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zv=function(){function e(t){y(this,e),b(this,"value",void 0),this.value=String(t)}return _(e,[{key:"equals",value:function(e){return this.value===e.value}},{key:"toString",value:function(){return this.value}}]),e}(),Xv={Number:"number",String:"string",Boolean:"boolean",Array:"array",Object:"object",Date:"date",Key:"key",Any:"any"},eg={CreatedAt:"createdAt",UpdatedAt:"updatedAt"},tg=Object.values(eg),ng=Object.values(Xv);function rg(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if("string"==typeof n&&-1!==ng.indexOf(n))i.type=n;else{if("object"!==H(n))throw new $v(e,"Invalid field definition ".concat(t));i=n}if(void 0===i.type)i={type:Xv.Object,fields:i};else if(-1===ng.indexOf(i.type))throw new $v(e,"Invalid field definition ".concat(t));switch(r||(i.required=!!i.required),i.type){case Xv.Object:if(void 0===i.fields)throw new $v(e,"Field definition of type object requires fields attribute ".concat(t));for(var a in i.fields)Fm(i.fields,a)&&(i.fields[a]=rg(e,a,i.fields[a]));break;case Xv.Array:if(void 0===i.items)throw new $v(e,"Field definition of type array requires items attribute. Field: '".concat(t,"'"));i.items=rg(e,"items",i.items,!0)}return i}function ig(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var i=R(r[n],2),a=i[0],o=i[1];if(!(a in e))switch(o.type){case Xv.Object:e[a]={};break;case Xv.Array:e[a]=[];break;default:e[a]=void 0}if(o.type===Xv.Object){var s=e[a];if(!Nm(s))throw new Pv("Invalid value for field ".concat(a));e[a]=ig(s,o.fields)}}return e}function ag(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var i=R(r[n],2),a=i[0],o=i[1];if(o.required&&(!(a in e)||Bm(e[a])))throw new Pv("The ".concat(a," attribute is required."));if(a in e&&!Bm(e[a])&&o.type===Xv.Object){var s=e[a];if(!Nm(s))throw new Pv("Invalid value for field ".concat(a));ag(s,o.fields)}}}function og(e,t){for(var n in e=Um(e)){var r=t[n];if(void 0===e[n])delete e[n];else if(n in t&&r.type===Xv.Object){var i=og(e[n],r.fields);$m(i)?delete e[n]:e[n]=i}}return e}function sg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lg=function(){function e(t,n,r,i){y(this,e),b(this,"name",void 0),b(this,"related",void 0),b(this,"parent",void 0),b(this,"relatedClass",void 0),b(this,"foreignKeyName",void 0),b(this,"localKeyName",void 0),b(this,"enabled",!0),b(this,"deleteStrategy",null),this.parent=t,this.relatedClass=n,this.foreignKeyName=r,this.localKeyName=i||n.primaryKey}var t;return _(e,[{key:"loaded",get:function(){return void 0!==this.related}},{key:"static",value:function(){return this.constructor}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"isEmpty",value:function(){return null}},{key:"getModels",value:(t=C(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loaded){e.next=3;break}return e.next=3,this.resolve();case 3:return e.abrupt("return",this.getLoadedModels());case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getLoadedModels",value:function(){return this.related?tv(this.related):[]}},{key:"unload",value:function(){delete this.related}},{key:"onDelete",value:function(e){return this.deleteStrategy=e,this}},{key:"clone",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=null!==(e=r.clones)&&void 0!==e?e:new WeakMap,a=null!==(t=r.constructors)&&void 0!==t?t:new WeakMap,o=Object.create(Object.getPrototypeOf(this));return o.name=this.name,o.parent=this.parent,o.foreignKeyName=this.foreignKeyName,o.localKeyName=this.localKeyName,o.deleteStrategy=this.deleteStrategy,o.enabled=this.enabled,o.relatedClass=null!==(n=a.get(this.relatedClass))&&void 0!==n?n:this.relatedClass,null===this.related?o.related=null:Array.isArray(this.related)?o.related=this.related.map((function(e){return e.clone({clones:i,constructors:a})})):this.related&&(o.related=this.related.clone({clones:i,constructors:a})),o}},{key:"initializeInverseRelations",value:function(e){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return sg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sg(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(this.relatedClass.relations);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=e.requireRelation(r);i.enabled&&i.isInverseOf(this)&&(i.setForeignAttributes(this.parent),i.addRelated(this.parent))}}catch(a){n.e(a)}finally{n.f()}}},{key:"isInverseOf",value:function(e){return this.static().inverseRelationClasses.some((function(t){return e instanceof t}))&&e.relatedClass===this.parent.constructor&&e.foreignKeyName===this.foreignKeyName&&e.localKeyName===this.localKeyName}}]),e}();b(lg,"inverseRelationClasses",[]);var ug=function(e){v(n,lg);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(e,r,i,a){return y(this,n),t.call(this,e,r,i||av(r.name+"_"+r.primaryKey+"s"),a)}return _(n,[{key:"addRelated",value:function(e){var t;this.related=Xm([].concat(x(null!==(t=this.related)&&void 0!==t?t:[]),[e]))}}]),n}();var cg=function(e){v(r,ug);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(r);function r(){return y(this,r),n.apply(this,arguments)}return _(r,[{key:"isEmpty",value:function(){return 0===this.parent.getAttribute(this.foreignKeyName).length}},{key:"resolve",value:(t=C(O.mark((function e(){var t;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.parent.getAttribute(this.foreignKeyName),!this.isEmpty()){e.next=5;break}e.t0=[],e.next=15;break;case 5:if(this.localKeyName!==this.relatedClass.primaryKey){e.next=11;break}return e.next=8,this.relatedClass.all({$in:t});case 8:e.t1=e.sent,e.next=14;break;case 11:return e.next=13,this.relatedClass.all(b({},this.localKeyName,{$or:[].concat(x(t.map((function(e){return{$eq:e}}))),x(t.map((function(e){return{$contains:e}}))))}));case 13:e.t1=e.sent;case 14:e.t0=e.t1;case 15:return this.related=e.t0,e.abrupt("return",this.related);case 17:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setForeignAttributes",value:function(e){var t=e.getAttribute(this.localKeyName);if(t){var n=this.parent.getAttribute(this.foreignKeyName);n.includes(t)||this.parent.setAttribute(this.foreignKeyName,[].concat(x(n),[t]))}}}]),r}();var dg=function(e){v(n,lg);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(e,r,i,a){return y(this,n),t.call(this,e,r,i||av(r.name+"_"+r.primaryKey),a)}return _(n,[{key:"addRelated",value:function(e){this.related=e}}]),n}();var pg=function(e){v(r,dg);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(r);function r(){return y(this,r),n.apply(this,arguments)}return _(r,[{key:"isEmpty",value:function(){return!this.parent.getAttribute(this.foreignKeyName)}},{key:"resolve",value:(t=C(O.mark((function e(){var t;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.parent.getAttribute(this.foreignKeyName),!this.isEmpty()){e.next=5;break}e.t0=null,e.next=15;break;case 5:if(this.localKeyName!==this.relatedClass.primaryKey){e.next=11;break}return e.next=8,this.relatedClass.find(t);case 8:e.t1=e.sent,e.next=14;break;case 11:return e.next=13,this.relatedClass.first(b({},this.localKeyName,t));case 13:e.t1=e.sent;case 14:e.t0=e.t1;case 15:return this.related=e.t0,e.abrupt("return",this.related);case 17:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setForeignAttributes",value:function(e){var t=e.getAttribute(this.localKeyName);t&&this.parent.setAttribute(this.foreignKeyName,t)}}]),r}();var fg=function(e){v(r,ug);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(r);function r(){return y(this,r),n.apply(this,arguments)}return _(r,[{key:"resolve",value:(t=C(O.mark((function e(){var t;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.parent.getAttribute(this.localKeyName),e.next=3,this.relatedClass.all(b({},this.foreignKeyName,{$or:[{$eq:t},{$contains:t}]}));case 3:return this.related=e.sent,e.abrupt("return",this.related);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setForeignAttributes",value:function(e){var t=this.parent.getAttribute(this.localKeyName);if(t){var n=e.getAttribute(this.foreignKeyName);Array.isArray(n)?n.includes(t)||e.setAttribute(this.foreignKeyName,[].concat(x(n),[t])):e.setAttribute(this.foreignKeyName,t)}}}]),r}();var hg=function(e){v(r,dg);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(r);function r(){return y(this,r),n.apply(this,arguments)}return _(r,[{key:"resolve",value:(t=C(O.mark((function e(){var t;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.parent.getAttribute(this.localKeyName),e.next=3,this.relatedClass.first(b({},this.foreignKeyName,{$or:[{$eq:t},{$contains:t}]}));case 3:return this.related=e.sent,e.abrupt("return",this.related);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setForeignAttributes",value:function(e){var t=this.parent.getAttribute(this.localKeyName);if(t){var n=e.getAttribute(this.foreignKeyName);Array.isArray(n)?n.includes(t)||e.setAttribute(this.foreignKeyName,[].concat(x(n),[t])):e.setAttribute(this.foreignKeyName,t)}}}]),r}();function mg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mg(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gg(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return yg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yg(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function yg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bg="created",wg="updated",_g="deleted",xg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(y(this,e),!("__pureInstance"in t))return this.static().ensureBooted(),this.initializeProxy(),this.initialize(t,n),this._proxy}var t,n,r,i,a,o,s,l,u,c,d,p,f,h,m,g,w,k,A,E,D,j;return _(e,[{key:"static",value:function(e){var t=this.constructor;return e?t[e]:t}},{key:"newInstance",value:function(){for(var e=this.constructor,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return G(e,n)}},{key:"fresh",value:(j=C(O.mark((function e(){var t,n;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getPrimaryKey(),e.next=3,this.static().find(t);case 3:if(n=e.sent){e.next=6;break}throw new Pv("Couldn't get fresh instance for ".concat(this.static("modelName")," with id '").concat(t,"'"));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(){return j.apply(this,arguments)})},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e=this.castAttributes(e,this.static("fields")))this.setAttribute(t,e[t]);return this.save()}},{key:"hasRelation",value:function(e){return-1!==this.static("relations").indexOf(e)}},{key:"getRelation",value:function(e){return this._relations[e]||null}},{key:"requireRelation",value:function(e){var t;return null!==(t=this._relations[e])&&void 0!==t?t:nv(Pv,"Attempting to use undefined ".concat(e," relation."))}},{key:"getEngine",value:function(){var e;return null!==(e=this._engine)&&void 0!==e?e:this.static().getEngine()}},{key:"requireEngine",value:function(){var e;return null!==(e=this._engine)&&void 0!==e?e:this.static().requireEngine()}},{key:"loadRelation",value:function(e){var t=this.requireRelation(e);return t.relatedClass.withEngine(this.requireEngine(),(function(){return t.resolve()}))}},{key:"loadRelationIfUnloaded",value:(D=C(O.mark((function e(t){var n;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.requireRelation(t),e.abrupt("return",n.loaded?n.getLoadedModels():this.loadRelation(t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return D.apply(this,arguments)})},{key:"unloadRelation",value:function(e){this.requireRelation(e).unload()}},{key:"getRelationModel",value:function(e){var t,n,r,i=this.requireRelation(e);return i instanceof ug?(console.warn("You're getting a single model from the multi-model '".concat(e,"' relation ")+"in the '".concat(this.static("modelName"),"' model.")),null!==(n=null===(r=i.related)||void 0===r?void 0:r[0])&&void 0!==n?n:null):null!==(t=i.related)&&void 0!==t?t:null}},{key:"getRelationModels",value:function(e){var t,n=this.requireRelation(e);return n instanceof dg?n.related?[n.related]:null:null!==(t=n.related)&&void 0!==t?t:null}},{key:"setRelationModel",value:function(e,t){var n=this.requireRelation(e);if(n instanceof ug)return console.warn("You're setting a single model for the multi-model '".concat(e,"' relation ")+"in the '".concat(this.static("modelName"),"' model.")),void(n.related=[t]);n.related=t}},{key:"setRelationModels",value:function(e,t){var n=this.requireRelation(e);n.related=function(){var e;if(null===t||n instanceof ug)return t;if(t.length>0)throw new Pv("Can't set multiple models for SingleModelRelation, use setRelationModel instead");return null!==(e=t[0])&&void 0!==e?e:null}()}},{key:"isRelationLoaded",value:function(e){return this.requireRelation(e).loaded}},{key:"hasAttribute",value:function(e){var t,n=e.split("."),r=og(this._attributes,this.static("fields")),i=gg(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(!Nm(r)||!(a in r))return!1;r=r[a]}}catch(o){i.e(o)}finally{i.f()}return void 0!==r}},{key:"setAttribute",value:function(e,t){return this.hasAttributeSetter(e)?this.callAttributeSetter(e,t):this.setAttributeValue(e,t)}},{key:"setAttributeValue",value:function(e,t){this._attributes[e]=t=this.castAttribute(t,{definition:this.static("fields")[e]}),this.attributeValueChanged(this._originalAttributes[e],t)?this._dirtyAttributes[e]=t:delete this._dirtyAttributes[e]}},{key:"hasAttributeSetter",value:function(e){return this.static("__attributeSetters").has(e)}},{key:"callAttributeSetter",value:function(e,t){var n=this.static("__attributeSetters").get(e);return null==n?void 0:n.call(this,t)}},{key:"getOriginalAttribute",value:function(e){return this._originalAttributes[e]}},{key:"setOriginalAttribute",value:function(e,t){t=this.castAttribute(t,{definition:this.static("fields")[e]}),this._originalAttributes[e]=t,this._attributes[e]=t,delete this._dirtyAttributes[e]}},{key:"setAttributes",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=R(n[t],2),i=r[0],a=r[1];this.setAttribute(i,a)}}},{key:"getMalformedDocumentAttributes",value:function(){return this._malformedDocumentAttributes}},{key:"setMalformedDocumentAttributes",value:function(e){this._malformedDocumentAttributes=e}},{key:"setEngine",value:function(e){e?this._engine=e:delete this._engine}},{key:"withEngine",value:function(e,t){var n=this,r=this._engine;this.setEngine(e);var i=t(this);return i instanceof Promise?i.then((function(){return fv(i,(function(){return n.setEngine(r)}))})):fv(i,(function(){return n.setEngine(r)}))}},{key:"withoutTimestamps",value:(E=C(O.mark((function e(t){var n=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.static().ignoringTimestamps.set(this,!0),e.t0=fv,e.next=4,t();case 4:return e.t1=e.sent,e.t2=function(){return n.static().ignoringTimestamps.delete(n)},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return E.apply(this,arguments)})},{key:"getAttribute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.hasAttributeGetter(e)?this.callAttributeGetter(e):this.getAttributeValue(e,t)}},{key:"getAttributeValue",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.split("."),r=this.getAttributes(t);n.length>0;){var i=r[n.shift()];if(!Nm(i))return i;r=i}return r}},{key:"getAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?Um(this._attributes):og(this._attributes,this.static("fields"))}},{key:"hasAttributeGetter",value:function(e){return this.static("__attributeGetters").has(e)}},{key:"callAttributeGetter",value:function(e){var t=this.static("__attributeGetters").get(e);return null==t?void 0:t.call(this)}},{key:"unsetAttribute",value:function(e){Fm(this._attributes,e)&&(e in this.static("fields")?this._attributes[e]=void 0:delete this._attributes[e],void 0!==this._originalAttributes[e]&&(this._dirtyAttributes[e]=void 0))}},{key:"is",value:function(e){return this.getPrimaryKey()===e.getPrimaryKey()}},{key:"isDirty",value:function(e){return e?e in this._dirtyAttributes:Object.values(this._dirtyAttributes).length>0}},{key:"cleanDirty",value:function(){this._originalAttributes=Um(this._attributes),this._dirtyAttributes={},this._exists=!0}},{key:"getPrimaryKey",value:function(){var e;return null!==(e=this._attributes[this.static("primaryKey")])&&void 0!==e?e:null}},{key:"getSerializedPrimaryKey",value:function(){var e=this.getPrimaryKey();return e?this.serializeKey(e):null}},{key:"delete",value:(A=C(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._exists){e.next=2;break}return e.abrupt("return",this);case 2:return e.next=4,this.performDelete();case 4:return e.next=6,this.emit(_g);case 6:return e.abrupt("return",this);case 7:case"end":return e.stop()}}),e,this)}))),function(){return A.apply(this,arguments)})},{key:"save",value:(k=C(O.mark((function e(){var t;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ag(this._attributes,this.static("fields")),!(t=this.exists())||this.isDirty()){e.next=4;break}return e.abrupt("return",this);case 4:return e.next=6,this.beforeSave();case 6:return e.next=8,this.performSave();case 8:return e.next=10,this.afterSave();case 10:return e.next=12,this.emit(t?wg:bg);case 12:return e.abrupt("return",this);case 13:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"fixMalformedAttributes",value:function(){this.performMalformedAttributeFixes(),this._malformedDocumentAttributes={}}},{key:"touch",value:function(){this.setAttribute(eg.UpdatedAt,new Date)}},{key:"setExists",value:function(e){this._exists=e}},{key:"exists",value:function(){return this._exists}},{key:"wasRecentlyCreated",value:function(){return this._wasRecentlyCreated}},{key:"clone",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=null!==(e=n.clones)&&void 0!==e?e:new WeakMap;if(r.has(this))return r.get(this);var i=n.constructors,a=Array.isArray(i)?fv(new WeakMap,(function(e){i.forEach((function(t){var n=R(t,2),r=n[0],i=n[1];return e.set(r,i)}))})):null!=i?i:new WeakMap,o=null!==(t=a.get(this.static()))&&void 0!==t?t:this.static(),s=new o(this.getAttributes());r.set(this,s);for(var l=0,u=Object.entries(this._relations);l<u.length;l++){var c=R(u[l],2),d=c[0],p=c[1];s._relations[d]=fv(p.clone({clones:r,constructors:a}),(function(e){return e.parent=s}))}return n.clean&&s.cleanDirty(),s}},{key:"initialize",value:function(e,t){this._exists=t,this._wasRecentlyCreated=!1,this.initializeAttributes(e,t),this.initializeRelations()}},{key:"initializeProxy",value:function(){this._proxy=new Proxy(this,{get:function(e,t,n){if("string"!=typeof t||t in e||-1!==e.static("classFields").indexOf(t))return Reflect.get(e,t,n);if(e.hasRelation(t))return e._proxy.isRelationLoaded(t)?e._proxy.requireRelation(t).related:void 0;if(t.startsWith("related")){var r=av(t.substr(7));if(e._proxy.hasRelation(r))return e._relations[r]}return e._proxy.getAttribute(t)},set:function(e,t,n,r){return"string"!=typeof t||t in e||-1!==e.static("classFields").indexOf(t)?Reflect.set(e,t,n,r):e._proxy.hasRelation(t)?(e._proxy.requireRelation(t).related=n,!0):(e._proxy.setAttribute(t,n),!0)},deleteProperty:function(e,t){return"string"!=typeof t||t in e?Reflect.deleteProperty(e,t):e._proxy.hasRelation(t)?(e._proxy.unloadRelation(t),!0):t in e._attributes&&-1===e.static("classFields").indexOf(t)?(e._proxy.unsetAttribute(t),!0):Reflect.deleteProperty(e,t)}})}},{key:"initializeAttributes",value:function(e,t){var n=this.static("fields");this._malformedDocumentAttributes={},this._attributes=Um(e),this._attributes=this.castAttributes(ig(this._attributes,n),n,this._malformedDocumentAttributes),this._originalAttributes=t?Um(this._attributes):{},this._dirtyAttributes=t?{}:Um(this._attributes),delete this._malformedDocumentAttributes[this.static("primaryKey")]}},{key:"initializeRelations",value:function(){var e=this;this._relations=this.static("relations").reduce((function(t,n){var r,i=e._proxy,a=null===(r=i[av(n)+"Relationship"])||void 0===r?void 0:r.call(i);return a.name=n,t[n]=a,t}),{})}},{key:"getDefaultCollection",value:function(){return this.static("modelName").toLowerCase()+"s"}},{key:"createFromEngineDocument",value:(w=C(O.mark((function e(t,n){var r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.parseEngineDocumentAttributes(t,n);case 2:return(r=e.sent)[this.static("primaryKey")]=t,e.abrupt("return",this.newInstance(r,!0));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return w.apply(this,arguments)})},{key:"createManyFromEngineDocuments",value:(g=C(O.mark((function e(t){var n=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(Object.entries(t).map((function(e){var t=R(e,2),r=t[0],i=t[1];return n.createFromEngineDocument(n.parseKey(r),i)}))));case 1:case"end":return e.stop()}}),e)}))),function(e){return g.apply(this,arguments)})},{key:"beforeSave",value:(m=C(O.mark((function e(){var t,n,r,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new Date,(n=this.static().ignoringTimestamps).has(this)||n.has(this.static())||(this.static().hasAutomaticTimestamp(eg.CreatedAt)&&this.setAttribute(eg.CreatedAt,null!==(r=this.getAttribute(eg.CreatedAt))&&void 0!==r?r:t),this.static().hasAutomaticTimestamp(eg.UpdatedAt)&&(i=this.isDirty(eg.UpdatedAt)?this.getAttribute(eg.UpdatedAt):t,this.setAttribute(eg.UpdatedAt,null!=i?i:t)));case 3:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"performSave",value:(h=C(O.mark((function e(){var t,n;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.exists(),e.next=3,this.syncDirty();case 3:n=e.sent,this._wasRecentlyCreated=this._wasRecentlyCreated||!t,this._attributes[this.static("primaryKey")]=this.parseKey(n);case 6:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"afterSave",value:(f=C(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.cleanDirty(),e.next=3,this.loadEmptyRelations();case 3:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"performDelete",value:(p=C(O.mark((function e(){var t;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCascadeModels();case 2:return t=e.sent,e.next=5,this.deleteModelsFromEngine(t);case 5:t.forEach((function(e){return e.reset()}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"performMalformedAttributeFixes",value:function(){for(var e=this,t=Object.keys(this._malformedDocumentAttributes),n=function(n,r){return r.type===Xv.Array?t.some((function(e){return e.startsWith("".concat(n,"."))})):n in e._malformedDocumentAttributes},r=0,i=Object.entries(this.static("fields"));r<i.length;r++){var a=R(i[r],2),o=a[0];n(o,a[1])&&(this._dirtyAttributes[o]=this._attributes[o])}}},{key:"emit",value:(d=C(O.mark((function e(t){var n,r,i=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=this.static().listeners.get(this.static()))||void 0===n?void 0:n[t]){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Promise.all(r.map((function(e){return e(i)})));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"syncDirty",value:(c=C(O.mark((function e(){var t,n;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.exists()){e.next=2;break}return e.abrupt("return",this.requireEngine().create(this.static("collection"),this.toEngineDocument(),this.getSerializedPrimaryKey()||void 0));case 2:return t=this.getDirtyEngineDocumentUpdates(),n=this.getSerializedPrimaryKey(),e.next=6,this.requireEngine().update(this.static("collection"),n,t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getCascadeModels",value:(u=C(O.mark((function e(){var t,n,r,i=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.static("relations").map((function(e){return i.requireRelation(e)})).filter((function(e){return e.enabled&&"cascade"===e.deleteStrategy})).map(function(){var e=C(O.mark((function e(t){var n;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getModels();case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return e.getCascadeModels()})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:return n=e.sent,e.next=6,Promise.all(n.flat());case 6:return r=e.sent,e.abrupt("return",[].concat(x(r.flat()),[this]).filter((function(e){return e.exists()})));case 8:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"deleteModelsFromEngine",value:(l=C(O.mark((function e(t){var n,r=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return[e.static("collection"),e.getSerializedPrimaryKey()]})),e.next=3,Promise.all(n.map((function(e){var t=R(e,2),n=t[0],i=t[1];return r.requireEngine().delete(n,i)})));case 3:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)})},{key:"resetEngineData",value:function(){this.reset()}},{key:"reset",value:function(){delete this._attributes[this.static("primaryKey")],this._exists=!1,this._dirtyAttributes=Um(this._attributes)}},{key:"hasOne",value:function(e,t,n){return new hg(this,e,t,n)}},{key:"belongsToOne",value:function(e,t,n){return new pg(this,e,t,n)}},{key:"hasMany",value:function(e,t,n){return new fg(this,e,t,n)}},{key:"belongsToMany",value:function(e,t,n){return new cg(this,e,t,n)}},{key:"loadEmptyRelations",value:(s=C(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(this._relations).filter((function(e){return e.enabled&&!e.loaded&&e.isEmpty()})).map((function(e){return e.resolve()})));case 2:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"attributeValueChanged",value:function(e,t){return e instanceof Zv?qm(e)!==qm(t):!Lm(e,t)}},{key:"castAttributes",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i={};for(var a in e)i[a]=this.castAttribute(e[a],{field:r+a,malformedAttributes:n,definition:t[a]});return i}},{key:"castAttribute",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.field,i=n.definition,a=n.malformedAttributes;if(Bm(e))return e;if(void 0===i)switch(H(e)){case"object":return Array.isArray(e)?e.map((function(e,n){return t.castAttribute(e,{field:r&&"".concat(r,".").concat(n),malformedAttributes:a})})):e instanceof Date||e instanceof Zv?e:qm(e);case"symbol":case"function":case"undefined":return;default:return e}switch(i.type){case Xv.Date:if(!(["string","number"].includes(H(e))||e instanceof Date))throw new Pv("Invalid Date value: ".concat(e));return new Date(e);case Xv.Object:if(!Nm(e))throw new Pv("Invalid Object value: ".concat(e));return this.castAttributes(e,i.fields,a,r&&"".concat(r,"."));case Xv.Array:if(!Array.isArray(e))throw new Pv("Invalid Array value: ".concat(e));return e.map((function(e,n){return t.castAttribute(e,{field:r&&"".concat(r,".").concat(n),definition:i.items,malformedAttributes:a})}));case Xv.Boolean:return!!e;case Xv.Number:var o=parseFloat(e);if(isNaN(o))throw new Pv("Invalid Number value: ".concat(e));return o;case Xv.String:return qm(e);case Xv.Key:if(e instanceof Zv)return qm(e);if(r&&a){var s,l=null!==(s=a[r])&&void 0!==s?s:[];a[r]=[].concat(x(l),["malformed-key"])}return e;default:return e}}},{key:"toEngineDocument",value:function(){return og(this._attributes,this.static("fields"))}},{key:"getDirtyEngineDocumentUpdates",value:function(){var e=Um(this._dirtyAttributes);for(var t in e)void 0===e[t]&&(e[t]={$unset:!0});return e}},{key:"parseEngineDocumentAttributes",value:(o=C(O.mark((function e(t,n){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vg({},n));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)})},{key:"serializeKey",value:function(e){return qm(e)}},{key:"parseKey",value:function(e){return e}}],[{key:"boot",value:function(t){var n,r,i;this.bootedModels.set(this,!0);var a=this,o=a.pureInstance(),s={},l=Object.getOwnPropertyDescriptor(a,"modelName");if(a.modelName=null!==(n=null!==(r=null==l?void 0:l.value)&&void 0!==r?r:t)&&void 0!==n?n:a.name,a.collection=null!==(i=a.collection)&&void 0!==i?i:o.getDefaultCollection(),"boolean"==typeof a.timestamps||void 0===a.timestamps)if(void 0===a.timestamps||a.timestamps){var u,c=gg(tg);try{for(c.s();!(u=c.n()).done;)s[u.value]={type:Xv.Date,required:!1}}catch(j){c.e(j)}finally{c.f()}a.timestamps=tg}else a.timestamps=[];else{if(!Array.isArray(a.timestamps))throw new $v(a.modelName,"Invalid timestamps definition");var d,p=gg(a.timestamps);try{for(p.s();!(d=p.n()).done;){var f=d.value;if(!tg.includes(f))throw new $v(a.modelName,"Invalid timestamp field defined (".concat(f,")"));s[f]={type:Xv.Date,required:!1}}}catch(j){p.e(j)}finally{p.f()}}if(void 0!==this.fields)for(var h=0,m=Object.entries(this.fields);h<m.length;h++){var v,g,y=R(m[h],2),b=y[0],w=y[1];if(Fm(this.fields,b)&&(s[b]=rg(a.modelName,b,w),a.timestamps.includes(b)&&((null===(v=s[b])||void 0===v?void 0:v.type)!==Xv.Date||null!==(g=s[b])&&void 0!==g&&g.required)))throw new $v(a.modelName,"Field ".concat(b," definition must be type Date and not required ")+"because it is used an automatic timestamp. Learn more at https://soukai.js.org/guide/defining-models.html#automatic-timestamps")}a.primaryKey in s||(s[a.primaryKey]={type:Xv.Key,required:!1});for(var _=Object.getOwnPropertyNames(o).concat(["_engine"]),k=[],A=new Map,E=new Map,I=Object.getPrototypeOf(o);I!==e.prototype;){I.constructor.classFields&&_.push.apply(_,x(I.constructor.classFields));for(var S=0,C=Object.entries(Object.getOwnPropertyDescriptors(I));S<C.length;S++){var O=R(C[S],2),D=O[0];"function"==typeof O[1].value&&(D.endsWith("Relationship")?k.push(D.slice(0,-12)):D.match(/get.+Attribute/)?A.set(av(D.slice(3,-9)),o[D]):D.match(/set.+Attribute/)&&E.set(av(D.slice(3,-9)),o[D]))}I=Object.getPrototypeOf(I)}this.classFields=Xm(_),this.relations=Xm(k),this.__attributeGetters=A,this.__attributeSetters=E,this.fields=s}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new this(e);return t.save()}},{key:"createFromEngineDocument",value:function(e,t){return this.instance().createFromEngineDocument(e,t)}},{key:"createManyFromEngineDocuments",value:function(e){return this.instance().createManyFromEngineDocuments(e)}},{key:"findOrFail",value:(a=C(O.mark((function e(t){var n;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.find(t);case 2:return n=e.sent,e.abrupt("return",null!=n?n:nv("Failed getting required model ".concat(t)));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"find",value:(i=C(O.mark((function e(t){var n,r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ensureBooted(),e.prev=1,e.next=4,this.requireEngine().readOne(this.collection,this.instance().serializeKey(t));case 4:return n=e.sent,e.next=7,this.createFromEngineDocument(t,n);case 7:return r=e.sent,e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(e){return i.apply(this,arguments)})},{key:"all",value:(r=C(O.mark((function e(t){var n,r,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ensureBooted(),n=this.requireEngine(),e.next=4,n.readMany(this.collection,t);case 4:return r=e.sent,e.next=7,this.createManyFromEngineDocuments(r);case 7:return i=e.sent,e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"first",value:(n=C(O.mark((function e(t){var n,r,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all(t);case 2:return n=e.sent,r=R(n,1),i=r[0],e.abrupt("return",i||null);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"newInstance",value:function(){var e;return(e=this.instance()).newInstance.apply(e,arguments)}},{key:"on",value:function(e,t){var n;this.listeners.has(this)||this.listeners.set(this,{});var r=this.listeners.get(this),i=null!==(n=r[e])&&void 0!==n?n:r[e]=[];return i.push(t),function(){return Zm(i,t)}}},{key:"schema",value:function(e){var t,n;return n=t=function(e){v(n,e);var t=function(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r=I(t);if(n){var i=I(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return S(this,e)}}(n);function n(){return y(this,n),t.apply(this,arguments)}return _(n)}(this),b(t,"fields",e),n}},{key:"instance",value:function(){return this.instances.has(this)||this.instances.set(this,new this),this.instances.get(this)}},{key:"hasAutomaticTimestamp",value:function(e){return-1!==this.timestamps.indexOf(e)}},{key:"hasAutomaticTimestamps",value:function(){return this.timestamps.length>0}},{key:"getEngine",value:function(){var e;return null!==(e=this.engines.get(this))&&void 0!==e?e:Gv()}},{key:"requireEngine",value:function(){var e;return null!==(e=this.engines.get(this))&&void 0!==e?e:Wv()}},{key:"setEngine",value:function(e){e?this.engines.set(this,e):this.engines.delete(this)}},{key:"withEngine",value:function(e,t){var n,r=this,i=null!==(n=this.originalEngines.get(this))&&void 0!==n?n:[this.engines.get(this),0],a=R(i,2),o=a[0],s=a[1],l=function(){var e=r.originalEngines.get(r),t=R(e,2),n=t[0],i=t[1];i>1?r.originalEngines.set(r,[n,i-1]):(r.originalEngines.delete(r),r.setEngine(n))};this.originalEngines.set(this,[o,s+1]),this.setEngine(e);var u=t();return u instanceof Promise?u.then((function(){return fv(u,(function(){return l()}))})):fv(u,(function(){return l()}))}},{key:"withoutTimestamps",value:(t=C(O.mark((function e(t){var n=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ignoringTimestamps.set(this,!0),e.t0=fv,e.next=4,t();case 4:return e.t1=e.sent,e.t2=function(){return n.ignoringTimestamps.delete(n)},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"pureInstance",value:function(){return this.pureInstances.has(this)||this.pureInstances.set(this,new this({__pureInstance:!0})),this.pureInstances.get(this)}},{key:"ensureBooted",value:function(){this.bootedModels.has(this)||this.boot()}}]),e}();b(xg,"collection",void 0),b(xg,"primaryKey","id"),b(xg,"timestamps",void 0),b(xg,"fields",void 0),b(xg,"modelName",void 0),b(xg,"classFields",[]),b(xg,"relations",[]),b(xg,"__attributeGetters",new Map),b(xg,"__attributeSetters",new Map),b(xg,"instances",new WeakMap),b(xg,"pureInstances",new WeakMap),b(xg,"bootedModels",new WeakMap),b(xg,"engines",new WeakMap),b(xg,"originalEngines",new WeakMap),b(xg,"listeners",new WeakMap),b(xg,"ignoringTimestamps",new WeakMap),hg.inverseRelationClasses=[pg,cg],fg.inverseRelationClasses=[pg,cg],pg.inverseRelationClasses=[hg,fg],cg.inverseRelationClasses=[hg,fg];var kg=new Map;function Ag(e){var t;return null!==(t=kg.get(e))&&void 0!==t?t:nv(Pv,"Could not find Model with name '".concat(e,"', are you sure it's booted?"))}function Eg(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=R(n[t],2),i=r[0],a=r[1];a.boot(i),kg.set(i,a)}}function Ig(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[".schema"],n={},r=function(){var e,r=R(a[i],2),o=r[0],s=r[1],l=(o.match(/^(.*\/)?(.+)\.(j|t)s$/)||[])[2];return void 0===l||t.some((function(e){return l.endsWith(e)}))?"continue":void(n[l]=null!==(e=s.default)&&void 0!==e?e:s[Object.keys(s)[0]])},i=0,a=Object.entries(e);i<a.length;i++)r();return n}var Sg=function(){function e(){y(this,e),b(this,"_bootedModels",{})}var t;return _(e,[{key:"engine",get:function(){return Gv()}},{key:"requireEngine",value:function(){return Wv()}},{key:"useEngine",value:function(e){Jv(e)}},{key:"closeConnections",value:(t=C(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kv();case 2:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"model",value:function(e){return this._bootedModels[e]}},{key:"loadModel",value:function(e,t){t.boot(e)}},{key:"loadModels",value:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=R(n[t],2),i=r[0],a=r[1];a.boot(i),e[i]=a}}}]),e}();new Sg;const Rg="modulepreload",Cg={},Og=function(e,t,n){if(!t||0===t.length)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e=function(e){return"/"+e}(e))in Cg)return;Cg[e]=!0;const t=e.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(!!n)for(let n=r.length-1;n>=0;n--){const i=r[n];if(i.href===e&&(!t||"stylesheet"===i.rel))return}else if(document.querySelector(`link[href="${e}"]${i}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":Rg,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((t,n)=>{a.addEventListener("load",t),a.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e()))};var Dg=f,jg=Y,Tg=Z,Pg=K.RangeError,Mg=X,Lg=ee,$g=Y,Ng=function(e){var t=jg(Tg(this)),n="",r=Dg(e);if(r<0||r==1/0)throw Pg("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},Bg=Z,Ug=Mg(Ng),Fg=Mg("".slice),zg=Math.ceil,qg=function(e){return function(t,n,r){var i,a,o=$g(Bg(t)),s=Lg(n),l=o.length,u=void 0===r?" ":$g(r);return s<=l||""==u?o:((a=Ug(u,zg((i=s-l)/u.length))).length>i&&(a=Fg(a,0,i)),e?o+a:a+o)}},Vg={start:qg(!1),end:qg(!0)},Qg=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(te),Hg=Vg.start;function Gg(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}function Wg(){return Wg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Gg(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Wg.apply(this,arguments)}n({target:"String",proto:!0,forced:Qg},{padStart:function(e){return Hg(this,e,arguments.length>1?arguments[1]:void 0)}});var Jg=_((function e(t,n){y(this,e),this.resourceUrl=t,this.newResourceUrl=n,this.type=2})),Kg=function(){"undefined"!=typeof window&&(window.global="undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:window),Kg=function(){}};function Yg(e){return Zg.apply(this,arguments)}function Zg(){return(Zg=C(O.mark((function e(t){var n,r,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kg(),e.next=3,Og((()=>import("./external.chunk.hash.esm.54da7f4d.js")),1?["assets/external.chunk.hash.esm.54da7f4d.js","assets/noeldemartin-utils.esm.913e4d55.js"]:void 0);case 3:return n=e.sent,r=n.compact,e.next=7,r(t,{});case 7:if(!("@graph"in(i=e.sent))){e.next=10;break}return e.abrupt("return",i);case 10:if(!("@id"in i)){e.next=12;break}return e.abrupt("return",{"@graph":[i]});case 12:return e.abrupt("return",{"@graph":[]});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xg(e){return ey.apply(this,arguments)}function ey(){return ey=C(O.mark((function e(t){var n,r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kg(),e.next=3,Og((()=>import("./external.chunk.hash.esm.54da7f4d.js")),1?["assets/external.chunk.hash.esm.54da7f4d.js","assets/noeldemartin-utils.esm.913e4d55.js"]:void 0);case 3:return n=e.sent,r=n.fromRDF,e.abrupt("return",r(t));case 6:case"end":return e.stop()}}),e)}))),ey.apply(this,arguments)}function ty(e,t){return ny.apply(this,arguments)}function ny(){return ny=C(O.mark((function e(t,n){var r,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kg(),e.next=3,Og((()=>import("./external.chunk.hash.esm.54da7f4d.js")),1?["assets/external.chunk.hash.esm.54da7f4d.js","assets/noeldemartin-utils.esm.913e4d55.js"]:void 0);case 3:return r=e.sent,i=r.toRDF,e.abrupt("return",i(t,{base:n}));case 6:case"end":return e.stop()}}),e)}))),ny.apply(this,arguments)}function ry(e){return iy.apply(this,arguments)}function iy(){return iy=C(O.mark((function e(t){var n,r,i,a,o=arguments;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},Kg(),e.next=4,Og((()=>import("./index.9e3cbe73.js")),1?["assets/index.9e3cbe73.js","assets/noeldemartin-utils.esm.913e4d55.js","assets/events.4a98245a.js"]:void 0);case 4:return r=e.sent,i=r.Parser,a={quads:[],containsRelativeIRIs:!1},e.abrupt("return",new Promise((function(e,r){var o=new i(n),s=o._resolveRelativeIRI;o._resolveRelativeIRI=function(){return a.containsRelativeIRIs=!0,o._resolveRelativeIRI=s,o._resolveRelativeIRI.apply(o,arguments)},o.parse(t,(function(t,n){t?r(t):n?a.quads.push(n):e(a)}))})));case 8:case"end":return e.stop()}}),e)}))),iy.apply(this,arguments)}function ay(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ay(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ay(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sy={crdt:"https://vocab.noeldemartin.com/crdt/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",posix:"http://www.w3.org/ns/posix/stat#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",xsd:"http://www.w3.org/2001/XMLSchema#"};function ly(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(/^https?:\/\//.test(e))return e;var r=e.indexOf(":");if(-1===r)return n+e;t=oy(oy({},sy),t);var i=e.substr(0,r);return i in t?t[i]+e.substr(i.length+1):e}var uy=new(function(){function e(){y(this,e)}var t;return _(e,[{key:"createJsonLD",value:(t=C(O.mark((function e(t){var n;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xg(t);case 2:return n=e.sent,e.abrupt("return",{"@graph":n});case 4:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"getJsonLDProperty",value:function(e,t){if((t=ly(t))in e)return this.getJsonLDPropertyValue(e[t]);if(!("@context"in e))return null;var n=e["@context"],r=Object.entries(n).find((function(e){var n=R(e,2);n[0];var r=n[1];return t.startsWith(r)}));if(!r)return null;var i=e[("@vocab"===r[0]?"":"".concat(r[0],":"))+t.substr(r[1].length)];return this.getJsonLDPropertyValue(i)}},{key:"getJsonLDPropertyValue",value:function(e){return void 0===e?null:Array.isArray(e)&&1===e.length?e[0]:e}}]),e}());function cy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}var dy=_((function e(t){y(this,e),this.name=t})),py=ly("xsd:dateTime"),fy=ly("xsd:integer"),hy=ly("xsd:boolean"),my=ly("xsd:decimal"),vy=ly("xsd:float"),gy=ly("xsd:double"),yy=function(){function e(t,n,r){y(this,e),this.resourceUrl=t,this.name=n,this.value=r}return _(e,[{key:"toTurtle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.getTurtleSubject(e),n=this.getTurtlePredicate(),r=this.getTurtleObject(e);return"".concat(t," ").concat(n," ").concat(r)}},{key:"clone",value:function(t){var n;switch(t=null!==(n=t)&&void 0!==n?n:this.resourceUrl,this.type){case 2:return e.literal(t,this.name,this.value);case 0:return e.type(t,this.value);case 1:return e.reference(t,this.name,this.value)}}},{key:"getTurtleReference",value:function(e,t){var n,r=null!==(n=null==e?void 0:e.indexOf("#"))&&void 0!==n?n:-1;return e&&e!==t?null!==t&&e.startsWith(t)&&-1!==r?"<#".concat(e.substr(r+1),">"):"<".concat(encodeURI(e),">"):"<>"}},{key:"getTurtleSubject",value:function(e){return this.getTurtleReference(this.resourceUrl,e)}},{key:"getTurtlePredicate",value:function(){return"<".concat(encodeURI(this.name),">")}}],[{key:"fromStatement",value:function(e){var t="NamedNode"===e.subject.termType?e.subject.value:null;return e.predicate.value===ly("rdf:type")?this.type(t,e.object.value):"NamedNode"===e.object.termType?this.reference(t,e.predicate.value,e.object.value):"BlankNode"===e.object.termType?this.reference(t,e.predicate.value,null):"Variable"===e.object.termType?this.reference(t,e.predicate.value,new dy(e.object.value)):this.literal(t,e.predicate.value,this.castLiteralValue(e.object.value,e.object.datatype.value))}},{key:"literal",value:function(e,t,n){return new by(e,t,n)}},{key:"reference",value:function(e,t,n){return new wy(e,t,n)}},{key:"type",value:function(e,t){return new _y(e,t)}},{key:"toTurtle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.map((function(e){return e.toTurtle(t)+" ."})).join("\n")}},{key:"castLiteralValue",value:function(e,t){switch(t){case py:return new Date(e);case fy:case my:return parseInt(e);case hy:return"true"===e||"1"===e;case vy:case gy:return parseFloat(e)}return e}}]),e}(),by=function(e){v(n,yy);var t=cy(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this,e,r,i)).type=2,a}return _(n,[{key:"getTurtleObject",value:function(){if(this.value instanceof Date){var e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return e.toString().padStart(2,"0")}))},t=e(this.value.getUTCFullYear(),this.value.getUTCMonth()+1,this.value.getUTCDate()).join("-"),n=e(this.value.getUTCHours(),this.value.getUTCMinutes(),this.value.getUTCSeconds()).join(":"),r=this.value.getUTCMilliseconds().toString().padStart(3,"0");return'"'.concat(t,"T").concat(n,".").concat(r,'Z"^^<').concat(ly("xsd:dateTime"),">")}return JSON.stringify(this.value)}}]),n}(),wy=function(e){v(n,yy);var t=cy(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this,e,r,i)).type=1,a}return _(n,[{key:"getTurtleObject",value:function(e){return this.value instanceof dy?this.value.name:this.getTurtleReference(this.value,e)}}]),n}(),_y=function(e){v(n,yy);var t=cy(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,ly("rdf:type"),r)).type=0,i}return _(n,[{key:"getTurtlePredicate",value:function(){return"a"}},{key:"getTurtleObject",value:function(){return"<".concat(encodeURI(this.value),">")}}]),n}(),xy=function(){function e(t){y(this,e),this.url=t,this.statements=[],this.types=[],this.properties=[],this.propertiesIndex={}}return _(e,[{key:"name",get:function(){return this.getPropertyValue(ly("foaf:name"))}},{key:"label",get:function(){return this.getPropertyValue(ly("rdfs:label"))}},{key:"isType",value:function(e){return-1!==this.types.indexOf(ly(e))}},{key:"getPropertyValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.propertiesIndex[ly(e)]||[],r=R(n,1),i=r[0];return i?i.value:t}},{key:"getPropertyValues",value:function(e){return(this.propertiesIndex[ly(e)]||[]).map((function(e){return e.value}))}},{key:"addStatement",value:function(e){if(e.subject.value===this.url){var t=yy.fromStatement(e);0===t.type&&this.types.push(t.value),this.statements.push(e),this.properties.push(t),this.propertiesIndex[t.name]=[].concat(x(this.propertiesIndex[t.name]||[]),[t])}}}]),e}();function ky(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ay(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ky(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ky(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ey=function(e){v(RDFParsingError,Pv);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(RDFParsingError);function RDFParsingError(){return y(this,RDFParsingError),t.apply(this,arguments)}return _(RDFParsingError)}(),Iy=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};y(this,e),this.url=t,this.statements=n,this.metadata=r,this.resourcesIndex=this.statements.reduce((function(e,t){var n,r=t.subject.value;return(e[r]=null!==(n=e[r])&&void 0!==n?n:new xy(r)).addStatement(t),e}),{}),this.resources=Object.values(this.resourcesIndex),this.properties=this.resources.reduce((function(e,t){return e.concat(t.properties)}),[])}var t,n,r,i,a;return _(e,[{key:"isEmpty",value:function(){return 0===this.statements.length}},{key:"hasProperty",value:function(e,t){var n=this.resourcesIndex[e];return!!n&&t in n.propertiesIndex}},{key:"toJsonLD",value:(a=C(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uy.createJsonLD(this.statements));case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"resource",value:function(e){var t;return null!==(t=this.resourcesIndex[e])&&void 0!==t?t:null}},{key:"requireResource",value:function(e){var t=this.resource(e);if(!t)throw new Pv("Resource '".concat(e,"' not found"));return t}},{key:"clone",value:function(){var t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return T(new e(null!==(t=r.changeUrl)&&void 0!==t?t:this.url,[],this.metadata),(function(e){var t=r.removeResourceUrls;if(!t)return e.statements=n.statements.slice(0),e.properties=n.properties.slice(0),e.resources=n.resources.slice(0),void(e.resourcesIndex=Ay({},n.resourcesIndex));e.statements=n.statements.filter((function(e){return!t.includes(e.subject.value)})),e.properties=n.properties.filter((function(e){return!e.resourceUrl||!t.includes(e.resourceUrl)})),e.resources=n.resources.filter((function(e){return!t.includes(e.url)})),e.resourcesIndex=Ae(e.resources,"url")}))}}],[{key:"fromTurtle",value:(i=C(O.mark((function t(n){var r,i,a=arguments;return O.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},t.prev=1,t.next=4,ry(n,{baseIRI:r.baseUrl||"",format:r.format||"text/turtle"});case 4:return i=t.sent,t.abrupt("return",new e(r.baseUrl||"",i.quads,{containsRelativeIRIs:i.containsRelativeIRIs,describedBy:Sy(r),headers:r.headers}));case 8:throw t.prev=8,t.t0=t.catch(1),new Ey(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),function(e){return i.apply(this,arguments)})},{key:"resourceFromJsonLDGraph",value:(r=C(O.mark((function e(t,n,r){var i,a,o;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=function(){var e;return null!==(e=null!=r?r:t["@graph"].find((function(e){return e["@id"]===n})))&&void 0!==e?e:ne(Pv,"Resource '".concat(n,"' not found on document"))},null===(i=this.documentsCache.get(t))||void 0===i){e.next=5;break}e.t0=i,e.next=8;break;case 5:return e.next=7,this.fromJsonLD(a());case 7:e.t0=e.sent;case 8:return o=e.t0,e.abrupt("return",o.requireResource(n));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"fromJsonLD",value:(n=C(O.mark((function e(t,n){var r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=this.documentsCache.get(t))||void 0===r){e.next=4;break}e.t0=r,e.next=7;break;case 4:return e.next=6,this.getFromJsonLD(t,n);case 6:e.t0=e.sent;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"reduceJsonLDGraph",value:function(e,t){var n=this;return T({"@graph":e["@graph"].filter((function(e){return e["@id"]!==t}))},(function(r){var i=n.documentsCache.get(e);i&&n.cacheJsonLD(r,i.clone({removeResourceUrls:[t]}))}))}},{key:"cacheJsonLD",value:function(e,t){this.documentsCache.set(e,t)}},{key:"getFromJsonLD",value:(t=C(O.mark((function t(n,r){var i,a=this;return O.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ty(n,r);case 2:return i=t.sent,t.abrupt("return",T(new e(n["@id"]?V(n["@id"]):null,i),(function(e){a.documentsCache.set(n,e)})));case 4:case"end":return t.stop()}}),t)}))),function(e,n){return t.apply(this,arguments)})}]),e}();function Sy(e){var t,n;if(null!==(t=e.headers)&&void 0!==t&&t.has("Link")){var r=null===(n=e.headers.get("Link"))||void 0===n?void 0:n.match(/<([^>]+)>; rel="describedBy"/i);if(r)return F(e.baseUrl||"",r[1])}}Iy.documentsCache=new WeakMap;var Ry,Cy=_((function e(t,n,r){y(this,e),this.resourceUrl=t,this.property=n,this.value=r,this.type=1})),Oy=function(){function e(t){if(y(this,e),this.type=0,this.propertyOrProperties=t,Array.isArray(t)){var n=W(t),r=n[0],i=n.slice(1);if(!r)throw new Error("Cannot create an UpdatePropertyOperation with an empty array");var a=r.resourceUrl,o=r.name,s=r.type;if(i.some((function(e){return e.resourceUrl!==a||e.name!==o||e.type!==s})))throw new Error("All properties in an UpdatePropertyOperation must have the same resourceUrl, name and type")}}return _(e,[{key:"propertyResourceUrl",get:function(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].resourceUrl:this.propertyOrProperties.resourceUrl}},{key:"propertyName",get:function(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].name:this.propertyOrProperties.name}},{key:"propertyType",get:function(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].type:this.propertyOrProperties.type}}]),e}();function Dy(e){return e.reduce((function(e,t){switch(t.type){case 0:e[0].push(t.propertyOrProperties);break;case 1:e[1].push(E([t.resourceUrl,t.property,t.value]))}return e}),[[],[]])}(Ry||(Ry={})).RDF="RDF";var jy=function(e){v(MalformedDocumentError,Pv);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(MalformedDocumentError);function MalformedDocumentError(e,n,r){var i;return y(this,MalformedDocumentError),(i=t.call(this,"Malformed ".concat(n," document found at ").concat(e," - ").concat(r))).documentUrl=e,i.documentFormat=n,i.malformationDetails=r,i}return _(MalformedDocumentError)}();function Ty(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Py(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Py(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Py(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var My=[ly("ldp:contains"),ly("posix:mtime"),ly("posix:size"),ly("purl:modified")],Ly=[ly("ldp:Container"),ly("ldp:BasicContainer")],$y=function(){function e(t){var n;y(this,e),this.fetch=(n=C(O.mark((function e(n,r){var i,a;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(n,r);case 3:return i=e.sent,e.abrupt("return",i);case 7:throw e.prev=7,e.t0=e.catch(0),a="object"===H(n)?n.url:n,new Rh(a,{cause:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e,t){return n.apply(this,arguments)}),this.config={useGlobbing:!1,concurrentFetchBatchSize:5}}var t,n,r,i,a,o,s,l,u,c,d,p,f,h,m;return _(e,[{key:"getFetch",value:function(){return this.fetch}},{key:"setConfig",value:function(e){Object.assign(this.config,e)}},{key:"createDocument",value:(m=C(O.mark((function e(t){var n,r,i,a,o=arguments;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:null,r=o.length>2&&void 0!==o[2]?o[2]:[],i=ly("ldp:Container"),a=function(){return r.some((function(e){return e.resourceUrl===n&&0===e.type&&e.value===i}))},e.abrupt("return",n&&a()?this.createContainerDocument(t,n,r):this.createNonContainerDocument(t,n,r));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"getDocument",value:(h=C(O.mark((function e(t){var n,r,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(t,{headers:{Accept:"text/turtle"}});case 2:if(200===(n=e.sent).status){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,n.text();case 7:return r=e.sent,e.prev=8,e.next=11,Iy.fromTurtle(r,{headers:n.headers,baseUrl:t});case 11:return i=e.sent,e.abrupt("return",i);case 15:throw e.prev=15,e.t0=e.catch(8),new jy(t,Ry.RDF,null===e.t0||void 0===e.t0?void 0:e.t0.message);case 18:case"end":return e.stop()}}),e,this,[[8,15]])}))),function(e){return h.apply(this,arguments)})},{key:"getDocuments",value:(f=C(O.mark((function e(t){var n,r=arguments;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],e.prev=1,!this.config.useGlobbing||n){e.next=8;break}return e.next=5,this.getContainerDocumentsUsingGlobbing(t);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,this.getContainerDocuments(t);case 10:e.t0=e.sent;case 11:return e.abrupt("return",e.t0);case 14:if(e.prev=14,e.t1=e.catch(1),!(e.t1 instanceof Ey)){e.next=18;break}throw new jy(t,Ry.RDF,e.t1.message);case 18:if(!this.config.useGlobbing){e.next=21;break}return console.error(e.t1),e.abrupt("return",[]);case 21:throw e.t1;case 22:case"end":return e.stop()}}),e,this,[[1,14]])}))),function(e){return f.apply(this,arguments)})},{key:"updateDocument",value:(p=C(O.mark((function e(t,n){var r,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getDocument(t);case 4:if(null!==(i=e.sent)){e.next=7;break}throw new Lv(t);case 7:if(this.processChangeUrlOperations(i,n),this.processUpdatePropertyOperations(i,n),null===(r=i.resource(t))||void 0===r||!r.isType(ly("ldp:Container"))){e.next=14;break}return e.next=12,this.updateContainerDocument(i,n);case 12:e.next=16;break;case 14:return e.next=16,this.updateNonContainerDocument(i,n);case 16:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"overwriteDocument",value:(d=C(O.mark((function e(t,n){var r,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDocument(t);case 2:if(null!==(r=e.sent)){e.next=5;break}throw new Lv(t);case 5:return e.next=7,this.fetch(t,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:"\n                DELETE DATA { ".concat(yy.toTurtle(r.properties,t)," } ;\n                INSERT DATA { ").concat(yy.toTurtle(n,t)," }\n            ")});case 7:i=e.sent,this.assertSuccessfulResponse(i,"Error overwriting document at ".concat(r.url));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return d.apply(this,arguments)})},{key:"deleteDocument",value:(c=C(O.mark((function e(t,n){var r,i,a,o,s=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=4;break}e.t0=n,e.next=7;break;case 4:return e.next=6,this.getDocument(t);case 6:e.t0=e.sent;case 7:if(null!==(i=e.t0)){e.next=10;break}return e.abrupt("return");case 10:if(null===(r=i.resource(t))||void 0===r||!r.isType(ly("ldp:Container"))){e.next=23;break}if(!this.config.useGlobbing){e.next=17;break}return e.next=14,this.getContainerDocumentsUsingGlobbing(t);case 14:e.t1=e.sent,e.next=20;break;case 17:return e.next=19,this.getDocumentsFromContainer(t,i);case 19:e.t1=e.sent;case 20:return a=e.t1,e.next=23,Promise.all(a.map((function(e){return s.deleteDocument(e.url,e)})));case 23:return e.next=25,this.fetch(t,{method:"DELETE"});case 25:o=e.sent,this.assertSuccessfulResponse(o,"Error deleting document at ".concat(t));case 27:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"documentExists",value:(u=C(O.mark((function e(t){var n,r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(t,{headers:{Accept:"text/turtle"}});case 2:if(200!==(n=e.sent).status){e.next=10;break}return e.next=6,n.text();case 6:return r=e.sent,e.abrupt("return",r.length>0);case 10:if(404!==n.status){e.next=14;break}return e.abrupt("return",!1);case 14:throw new Pv("Couldn't determine if document at ".concat(t," exists, got ").concat(n.status," response"));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"createContainerDocument",value:(l=C(O.mark((function e(t,n,r){var i,a;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.startsWith(t)){e.next=2;break}throw new Pv("Explicit document url should start with the parent url");case 2:if(n.endsWith("/")){e.next=4;break}throw new Pv("Container urls must end with a trailing slash, given ".concat(n));case 4:return i=yy.toTurtle(this.withoutReservedContainerProperties(n,r),n),e.next=7,this.fetch(n,{method:"PUT",headers:{"Content-Type":"text/turtle",Link:'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"',"If-None-Match":"*"},body:i});case 7:if(a=e.sent,!this.isInternalErrorResponse(a)){e.next=10;break}return e.abrupt("return",this.createContainerDocumentUsingPOST(n,i));case 10:return this.assertSuccessfulResponse(a,"Error creating container at ".concat(n)),e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return l.apply(this,arguments)})},{key:"createContainerDocumentUsingPOST",value:(s=C(O.mark((function e(t,n){var r,i,a,o=arguments;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(o.length>2&&void 0!==o[2])||o[2],i=z(t),e.next=4,this.fetch(i,{method:"POST",headers:{"Content-Type":"text/turtle",Link:'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"',Slug:re(t),"If-None-Match":"*"},body:n});case 4:if(404!==(a=e.sent).status||!r){e.next=9;break}return e.next=8,this.createContainerDocumentUsingPOST(i,"");case 8:return e.abrupt("return",this.createContainerDocumentUsingPOST(t,n,!1));case 9:return this.assertSuccessfulResponse(a,"Error creating container at ".concat(t)),e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"createNonContainerDocument",value:(o=C(O.mark((function e(t,n,r){var i,a;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=6;break}return e.next=3,this.fetch(t,{headers:{"Content-Type":"text/turtle"},method:"POST",body:yy.toTurtle(r,n)});case 3:return i=e.sent,this.assertSuccessfulResponse(i,"Error creating document under ".concat(t)),e.abrupt("return",F(t,i.headers.get("Location")||""));case 6:if(n.startsWith(t)){e.next=8;break}throw new Pv("A minted document url should start with the parent url");case 8:return e.next=10,this.fetch(n,{method:"PATCH",headers:{"Content-Type":"application/sparql-update","If-None-Match":"*"},body:"INSERT DATA { ".concat(yy.toTurtle(r,n)," }")});case 10:return a=e.sent,this.assertSuccessfulResponse(a,"Error creating document at ".concat(n)),e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return o.apply(this,arguments)})},{key:"getContainerDocuments",value:(a=C(O.mark((function e(t){var n,r,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(t,{headers:{Accept:"text/turtle"}});case 2:return n=e.sent,e.next=5,n.text();case 5:return r=e.sent,e.next=8,Iy.fromTurtle(r,{baseUrl:t});case 8:return i=e.sent,e.abrupt("return",this.getDocumentsFromContainer(t,i));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"getDocumentsFromContainer",value:(i=C(O.mark((function e(t,n){var r,i,a,o,s,l,u=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],o=null!==(r=null===(i=n.resource(t))||void 0===i?void 0:i.getPropertyValues("ldp:contains"))&&void 0!==r?r:[];case 2:if(!(o.length>0)){e.next=10;break}return s=o.splice(0,this.config.concurrentFetchBatchSize||o.length),e.next=6,Promise.all(s.map((function(e){return u.getDocument(e)})));case 6:l=e.sent,a.push.apply(a,x(l)),e.next=2;break;case 10:return e.abrupt("return",a.filter((function(e){return!!e})));case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"getContainerDocumentsUsingGlobbing",value:(r=C(O.mark((function e(t){var n,r,i,a;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(t+"*",{headers:{Accept:"text/turtle"}});case 2:return n=e.sent,this.assertSuccessfulResponse(n,"Error getting container documents using globbing from ".concat(t)),e.next=6,n.text();case 6:return r=e.sent,e.next=9,Iy.fromTurtle(r,{baseUrl:t});case 9:return i=e.sent,a=i.statements.reduce((function(e,t){var n,r=ie(t.subject.value,{fragment:!1});return(e[r]=null!==(n=e[r])&&void 0!==n?n:[]).push(t),e}),{}),e.abrupt("return",Object.entries(a).map((function(e){var t=R(e,2),n=t[0],r=t[1];return new Iy(n,r)})));case 12:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"updateContainerDocument",value:(n=C(O.mark((function e(t,n){var r,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){return new Cy(t.url,e)},i=function(e){return new Cy(t.url,ly("rdf:type"),e)},n.push.apply(n,x(My.map(r))),n.push.apply(n,x(Ly.map(i))),e.next=6,this.updateNonContainerDocument(t.clone({changeUrl:t.metadata.describedBy||"".concat(t.url,".meta")}),n);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"updateNonContainerDocument",value:(t=C(O.mark((function e(t,n){var r,i,a,o,s,l,u;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Dy(n),i=R(r,2),a=i[0],o=i[1],s=yy.toTurtle(a.flat(),t.url),l=yy.toTurtle(t.properties.filter((function(e){return o.some((function(t){var n=R(t,3),r=n[0],i=n[1],a=n[2];return!(r!==e.resourceUrl||i&&i!==e.name||a&&a!==e.value)}))})),t.url),e.next=5,this.fetch(t.url,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:E([l.length>0&&"DELETE DATA { ".concat(l," }"),s.length>0&&"INSERT DATA { ".concat(s," }")]).join(" ; ")});case 5:u=e.sent,this.assertSuccessfulResponse(u,"Error updating document at ".concat(t.url));case 7:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"withoutReservedContainerProperties",value:function(e,t){return t.filter((function(t){return t.resourceUrl!==e||(n=t,!My.includes(n.name)&&!function(e){return 0===e.type&&Ly.includes(e.value)}(t));var n}))}},{key:"processChangeUrlOperations",value:function(e,t){var n,r,i,a=(r=t).reduce((function(e,t){return e[t.type].push(t),e}),(b(i={},0,[]),b(i,1,[]),b(i,2,[]),i)),o=Ty(a[2]);try{var s=function(){var r=n.value,i=e.resource(r.resourceUrl);if(!i)return"continue";var o=a[0].filter((function(e){return e.propertyResourceUrl===r.resourceUrl})),s=a[1].filter((function(e){return e.resourceUrl===r.resourceUrl}));o.forEach((function(e){e.propertyOrProperties=Array.isArray(e.propertyOrProperties)?e.propertyOrProperties.map((function(e){return e.clone(r.newResourceUrl)})):e.propertyOrProperties.clone(r.newResourceUrl)})),s.forEach((function(e){return e.resourceUrl=r.newResourceUrl})),t.push(new Cy(r.resourceUrl)),t.push.apply(t,x(i.properties.filter((function(e){return!o.some((function(t){return t.propertyName===e.name}))&&!s.some((function(t){return!t.property||t.property===e.name}))})).map((function(e){return new Oy(e.clone(r.newResourceUrl))})))),ae(t,r)};for(o.s();!(n=o.n()).done;)s()}catch(r){o.e(r)}finally{o.f()}}},{key:"processUpdatePropertyOperations",value:function(e,t){for(var n=[],r=[],i=function(i){var a=t[i];if(0!==a.type)return"continue";if(!Array.isArray(a.propertyOrProperties)||null===a.propertyResourceUrl)return"continue";var o=e.statements.filter((function(e){return e.subject.value===a.propertyResourceUrl&&e.predicate.value===a.propertyName})).map((function(e){return e.object})),s=2===a.propertyOrProperties[0].type,l=function(e){return"type"in e?1===e.type:"NamedNode"===e.termType},u=we(o,a.propertyOrProperties,(function(e,t){return e.value===t.value&&l(e)===l(t)})),c=u.added,d=u.removed;c.forEach((function(e){return t.push(new Oy(s?yy.literal(a.propertyResourceUrl,a.propertyName,e.value):yy.reference(a.propertyResourceUrl,a.propertyName,e.value)))})),d.forEach((function(e){return t.push(new Cy(a.propertyResourceUrl,a.propertyName,e.value))})),n.push(a),r.push("".concat(a.propertyResourceUrl,"-").concat(a.propertyName))},a=0;a<t.length;a++)i(a);n.forEach((function(e){return ae(t,e)}));var o,s=Ty(t.filter((function(t){return 0===t.type&&0!==t.propertyType&&e.hasProperty(t.propertyResourceUrl,t.propertyName)})));try{for(s.s();!(o=s.n()).done;){var l=o.value;r.includes("".concat(l.propertyResourceUrl,"-").concat(l.propertyName))||t.push(new Cy(l.propertyResourceUrl,l.propertyName))}}catch(u){s.e(u)}finally{s.f()}}},{key:"assertSuccessfulResponse",value:function(e,t){if(2!==Math.floor(e.status/100))throw new Dh(t,e)}},{key:"isInternalErrorResponse",value:function(e){return 5===Math.floor(e.status/100)}}]),e}();function Ny(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return By(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?By(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function By(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Uy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uy(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zy=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(this,e),this.listeners=[],this.helper=new zv,this.config=Fy({useGlobbing:!1,globbingBatchSize:5,concurrentFetchBatchSize:10},n),this.client=new $y(t),this.client.setConfig({useGlobbing:this.config.useGlobbing,concurrentFetchBatchSize:this.config.concurrentFetchBatchSize})}var t,n,r,i,a,o,s,l,u,c,d;return _(e,[{key:"setConfig",value:function(e){Object.assign(this.config,e)}},{key:"getFetch",value:function(){return this.client.getFetch()}},{key:"create",value:(d=C(O.mark((function e(t,n,r){var i,a;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.validateJsonLDGraph(n),e.t0=r,!e.t0){e.next=6;break}return e.next=5,this.client.documentExists(r);case 5:e.t0=e.sent;case 6:if(!e.t0){e.next=8;break}throw new Mv(r);case 8:return e.next=10,this.getJsonLDGraphProperties(n);case 10:return i=e.sent,e.next=13,this.client.createDocument(t,r,i);case 13:return a=e.sent,e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return d.apply(this,arguments)})},{key:"readOne",value:(c=C(O.mark((function e(t,n){var r,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.getDocument(n);case 2:if(null!==(r=e.sent)){e.next=5;break}throw new Lv(n);case 5:return e.next=7,this.convertToEngineDocument(r);case 7:return i=e.sent,this.emit("onRDFDocumentLoaded",r.url,r.metadata),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"readMany",value:(u=C(O.mark((function e(t){var n,r,i,a=this,o=arguments;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.getDocumentsForFilters(t,n);case 3:return r=e.sent,i={},e.next=7,Promise.all(r.map(function(){var e=C(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.convertToEngineDocument(t);case 2:i[t.url]=e.sent,a.emit("onRDFDocumentLoaded",t.url,t.metadata);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return e.abrupt("return",this.helper.filterDocuments(i,n));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"update",value:(l=C(O.mark((function e(t,n,r){var i,a;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("$overwrite"in r)){e.next=7;break}return e.next=3,this.getJsonLDGraphProperties(r.$overwrite);case 3:return i=e.sent,e.next=6,this.client.overwriteDocument(n,i);case 6:return e.abrupt("return");case 7:return e.next=9,this.extractJsonLDGraphUpdate(r);case 9:return a=e.sent,e.next=12,this.client.updateDocument(n,a);case 12:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return l.apply(this,arguments)})},{key:"delete",value:(s=C(O.mark((function e(t,n){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.deleteDocument(n);case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"addListener",value:function(e){var t=this;return this.listeners.push(e),function(){return t.removeListener(e)}}},{key:"removeListener",value:function(e){var t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.listeners.forEach((function(t){var r;return null===(r=t[e])||void 0===r?void 0:r.call.apply(r,[t].concat(n))}))}},{key:"getDocumentsForFilters",value:(o=C(O.mark((function e(t,n){var r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.extractJsonLDGraphTypes(n),!n.$in){e.next=7;break}return e.next=4,this.getDocumentsFromUrls(n.$in,r);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,this.client.getDocuments(t,r.includes(ly("ldp:Container")));case 9:e.t0=e.sent;case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"getDocumentsFromUrls",value:(a=C(O.mark((function e(t,n){var r,i,a,o=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.reduce((function(e,t){var n,r=null!==(n=q(t))&&void 0!==n?n:D(t);return Fy(Fy({},e),{},b({},r,[].concat(x(e[r]||[]),[t])))}),{}),i=Object.entries(r).map(function(){var e=C(O.mark((function e(t){var r,i,a,s,l;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=R(t,2),i=r[0],a=r[1],!(o.config.useGlobbing&&null!==o.config.globbingBatchSize&&o.config.globbingBatchSize<=a.length)){e.next=3;break}return e.abrupt("return",o.client.getDocuments(i,n.includes(ly("ldp:Container"))));case 3:return s=a.map((function(e){return o.client.getDocument(e)})),e.next=6,Promise.all(s);case 6:return l=e.sent,e.abrupt("return",l.filter((function(e){return null!=e})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.all(i);case 4:return a=e.sent,e.abrupt("return",a.flat());case 6:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)})},{key:"convertToEngineDocument",value:(i=C(O.mark((function e(t){var n,r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kh(t.statements);case 2:return n=e.sent,e.next=5,Yg(n);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"validateJsonLDGraph",value:function(e){if(!Array.isArray(e["@graph"]))throw new Pv("Invalid JSON-LD graph provided for SolidEngine. Are you using a model that isn't a SolidModel?")}},{key:"extractJsonLDGraphUpdate",value:(r=C(O.mark((function e(t){var n,r,i,a,o,s,l=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isJsonLDGraphUpdate(t)){e.next=2;break}throw new Pv("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");case 2:n=[],r="$apply"in t["@graph"]?t["@graph"].$apply:[t["@graph"]],i=Ny(r),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=17;break}if((o=a.value).$updateItems&&n.push.apply(n,x(oe(o.$updateItems).map((function(e){return l.extractJsonLDGraphItemsUpdate(e)})).flat())),!o.$push){e.next=15;break}return e.next=13,this.extractJsonLDGraphItemPush(o.$push);case 13:s=e.sent,n.push.apply(n,x(s));case 15:e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),i.e(e.t0);case 22:return e.prev=22,i.f(),e.finish(22);case 25:return e.abrupt("return",n);case 26:case"end":return e.stop()}}),e,this,[[5,19,22,25]])}))),function(e){return r.apply(this,arguments)})},{key:"extractJsonLDGraphItemsUpdate",value:function(e){var t=e.$where,n=e.$update,r=e.$unset;if(!t||!("@id"in t))throw new Pv("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");if(r){var i=t["@id"];return("string"==typeof i?[i]:i.$in).map((function(e){return new Cy(e)}))}for(var a=t["@id"],o=n,s=[],l=0,u=Object.entries(o);l<u.length;l++){var c=R(u[l],2),d=c[0],p=c[1];if(null===p)throw new Pv("SolidEngine doesn't support setting properties to null, delete");"object"===H(p)&&"$unset"in p?s.push(new Cy(a,d)):"@id"!==d?s.push(new Oy(this.getUpdatePropertyOperationProperty(a,d,p))):s.push(new Jg(a,p))}return s}},{key:"getUpdatePropertyOperationProperty",value:function(e,t,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return"@type"===t?yy.type(e,n):Array.isArray(n)?i?n.map((function(n){return r.getUpdatePropertyOperationProperty(e,t,n,!1)})):fail("Cannot have nested array values"):B(n)&&"@id"in n?yy.reference(e,t,n["@id"]):B(n)&&"@type"in n&&"http://www.w3.org/2001/XMLSchema#dateTime"===n["@type"]?yy.literal(e,t,new Date(n["@value"])):yy.literal(e,t,n)}},{key:"extractJsonLDGraphItemPush",value:(n=C(O.mark((function e(t){var n;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getJsonLDGraphProperties(t);case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return new Oy(e)})));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"extractJsonLDGraphTypes",value:function(e){if(!this.isJsonLDGraphTypesFilter(e))return[];var t=e["@graph"].$contains["@type"].$or.reduce((function(e,t){return"$contains"in t&&e.push.apply(e,x(t.$contains)),"$eq"in t&&e.push(t.$eq),e}),[]);return se(t.filter((function(e){return e.startsWith("http")})))}},{key:"getJsonLDGraphProperties",value:(t=C(O.mark((function e(t){var n;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Iy.fromJsonLD(t);case 2:return n=e.sent,e.abrupt("return",n.properties);case 4:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"isJsonLDGraphUpdate",value:function(e){var t,n=e["@graph"];return!!B(n)&&!(null!==(t=n.$apply)&&void 0!==t?t:[n]).some((function(e){var t,n=Object.keys(e);return 1!==n.length||!["$updateItems","$push"].includes(null!==(t=n[0])&&void 0!==t?t:"")}))}},{key:"isJsonLDGraphTypesFilter",value:function(e){var t=e["@graph"];return B(t)&&B(t.$contains)&&B(t.$contains["@type"])&&Array.isArray(t.$contains["@type"].$or)}}]),e}(),qy=function(){function e(){y(this,e)}var t;return _(e,[{key:"protected",get:function(){return this}},{key:"__loadDocumentModels",value:(t=C(O.mark((function e(t,n){var r,i,a,o,s,l,u,c,d=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new zv,i=this.parent.getAttribute(this.foreignKeyName),a=Array.isArray(i)?i:i?[i]:[],o=this.relatedClass.prepareEngineFilters(),s=Iy.reduceJsonLDGraph(n,this.parent.id),l=n["@graph"].filter((function(e){return-1!==a.indexOf(e["@id"])})).reduce((function(e,t){return e[t["@id"]]={"@graph":[t]},e}),{}),e.next=8,Promise.all(Object.keys(r.filterDocuments(l,o)).map((function(e){return d.relatedClass.createFromEngineDocument(t,s,e)})));case 8:u=e.sent,c=a.filter((function(e){return!u.some((function(t){return t.url===e}))&&V(e)!==t})),this.protected.loadDocumentModels(u,c);case 11:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),e}(),Vy=function(){function e(){y(this,e)}var t;return _(e,[{key:"protected",get:function(){return this}},{key:"__loadDocumentModels",value:(t=C(O.mark((function e(t,n){var r,i,a,o,s,l,u,c,d,p=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new zv,a=this.relatedClass.fields,o=null===(r=a[this.foreignKeyName])||void 0===r?void 0:r.rdfProperty,s=this.relatedClass.prepareEngineFilters(),l=Iy.reduceJsonLDGraph(n,this.parent.id),u=n["@graph"].filter((function(e){var t=uy.getJsonLDProperty(e,o);return"object"===H(t)&&null!==t&&"@id"in t&&t["@id"]===p.parent.url})).reduce((function(e,t){return e[t["@id"]]={"@graph":[t]},e}),{}),e.next=8,Promise.all(Object.keys(i.filterDocuments(u,s)).map((function(e){return p.relatedClass.createFromEngineDocument(t,l,e)})));case 8:c=e.sent,d=Object.keys(u).filter((function(e){return!c.some((function(t){return t.url===e}))&&V(e)!==t})),this.protected.loadDocumentModels(c,d);case 11:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),e}();function Qy(e){return"__beforeParentCreate"in e}function Hy(e){return"useSameDocument"in e}function Gy(e){return Ee(e,Vy)}function Wy(e){return"__synchronizeRelated"in e}var Jy=function(){function e(){y(this,e),this.useSameDocument=!1,this.documentModelsLoaded=!1}return _(e,[{key:"usingSameDocument",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.useSameDocument=e,this}}]),e}();function Ky(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Yy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yy(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Yy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zy=function(e){v(a,Jy);var t,n,r,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(a);function a(){var e;return y(this,a),(e=i.apply(this,arguments)).__newModels=[],e.__removedDocumentModels=[],e}return _(a,[{key:"isEmpty",value:function(){var e,t,n;return!this.documentModelsLoaded&&this.parent.exists()?null:0===((null===(e=this.__modelsInSameDocument)||void 0===e?void 0:e.length)||0)+((null===(t=this.__modelsInOtherDocumentIds)||void 0===t?void 0:t.length)||0)+this.__newModels.length+((null===(n=this.related)||void 0===n?void 0:n.length)||0)}},{key:"create",value:(r=C(O.mark((function e(){var t,n,r=arguments;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},this.assertLoaded("create"),n=this.relatedClass.newInstance(t),e.next=5,this.save(n);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"save",value:(n=C(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.assertLoaded("save"),this.attach(t),this.useSameDocument){e.next=7;break}return e.next=5,t.save();case 5:e.next=10;break;case 7:if(!this.parent.exists()){e.next=10;break}return e.next=10,this.parent.save();case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"attach",value:function(e){var t=this,n=e instanceof this.relatedClass?e:this.relatedClass.newInstance(e);return T(n,(function(){!t.assertLoaded("add")||t.related.includes(n)||t.__newModels.includes(n)||(n.exists()||t.__newModels.push(n),t.addRelated(n),t.initializeInverseRelations(n),t.setForeignAttributes(n))}))}},{key:"remove",value:(t=C(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.detach(t),e.next=3,this.parent.save();case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"detach",value:function(e){var t,n,r,i,a=this,o="string"==typeof e?e:e.getAttribute(this.localKeyName),s=null===(t=this.related)||void 0===t?void 0:t.find((function(e){return e.getAttribute(a.localKeyName)===o}));s&&(this.related=null===(n=this.related)||void 0===n?void 0:n.filter((function(e){return e.getAttribute(a.localKeyName)!==o})),this.__newModels=this.__newModels.filter((function(e){return e.getAttribute(a.localKeyName)!==o})),this.__modelsInSameDocument=null===(r=this.__modelsInSameDocument)||void 0===r?void 0:r.filter((function(e){return e.getAttribute(a.localKeyName)!==o})),this.__modelsInOtherDocumentIds=null===(i=this.__modelsInOtherDocumentIds)||void 0===i?void 0:i.filter((function(e){return e!==o})),s.getDocumentUrl()!==this.parent.getDocumentUrl()||this.parent.tracksHistory()||this.__removedDocumentModels.push(s),Gy(this)&&s.setAttribute(this.foreignKeyName,null),function(e){return Ee(e,qy)}(this)&&this.parent.setAttribute(this.foreignKeyName,this.parent.getAttribute(this.foreignKeyName).filter((function(e){return e!==o}))))}},{key:"cloneSolidData",value:function(e){var t,n=null!==(t=e.related)&&void 0!==t?t:[];e.useSameDocument=this.useSameDocument,e.documentModelsLoaded=this.documentModelsLoaded,e.__newModels=[],e.__removedDocumentModels=[];var r,i=Ky(this.__newModels);try{var a=function(){var t,i=r.value;e.__newModels.push(null!==(t=n.find((function(e){return e.is(i)})))&&void 0!==t?t:T(i.clone(),(function(e){return n.push(e)})))};for(i.s();!(r=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}var o,s=Ky(this.__removedDocumentModels);try{var l=function(){var t,r=o.value;e.__removedDocumentModels.push(null!==(t=n.find((function(e){return e.is(r)})))&&void 0!==t?t:T(r.clone(),(function(e){return n.push(e)})))};for(s.s();!(o=s.n()).done;)l()}catch(u){s.e(u)}finally{s.f()}this.__modelsInSameDocument&&(e.__modelsInSameDocument=this.__modelsInSameDocument.map((function(e){var t;return null!==(t=n.find((function(t){return t.is(e)})))&&void 0!==t?t:e.clone()}))),this.__modelsInOtherDocumentIds&&(e.__modelsInOtherDocumentIds=this.__modelsInOtherDocumentIds)}},{key:"loadDocumentModels",value:function(e,t){var n;this.__modelsInSameDocument=e,this.__modelsInOtherDocumentIds=t,0===this.__modelsInOtherDocumentIds.length&&(this.related=se([].concat(x(null!==(n=this.related)&&void 0!==n?n:[]),x(this.__modelsInSameDocument)))),this.documentModelsLoaded=!0}},{key:"assertLoaded",value:function(e){if(this.loaded)return!0;if(!this.parent.exists())return this.related=[],!0;throw new Pv('The "'.concat(e,`" method can't be called before loading the relationship`))}}]),a}();var Xy=function(e){v(i,Jy);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(i);function i(){return y(this,i),r.apply(this,arguments)}return _(i,[{key:"isEmpty",value:function(){return!this.documentModelsLoaded&&this.parent.exists()?null:!(this.__modelInSameDocument||this.__modelInOtherDocumentId||this.__newModel||this.related)}},{key:"create",value:(n=C(O.mark((function e(){var t,n,r=arguments;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},this.assertNotLoaded("create"),n=this.relatedClass.newInstance(t),e.next=5,this.save(n);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"save",value:(t=C(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.assertNotLoaded("save"),this.attach(t),this.useSameDocument){e.next=7;break}return e.next=5,t.save();case 5:e.next=10;break;case 7:if(!this.parent.exists()){e.next=10;break}return e.next=10,this.parent.save();case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"attach",value:function(e){var t=this,n=e instanceof this.relatedClass?e:this.relatedClass.newInstance(e);return T(n,(function(){t.related&&t.assertNotLoaded("set"),n.exists()||(t.__newModel=n),t.addRelated(n),t.initializeInverseRelations(n),t.setForeignAttributes(n)}))}},{key:"cloneSolidData",value:function(e){var t,n,r,i=null!==(t=e.related)&&void 0!==t?t:null;e.useSameDocument=this.useSameDocument,e.documentModelsLoaded=this.documentModelsLoaded,this.__newModel&&(this.__newModel=null!==(n=i)&&void 0!==n?n:T(this.__newModel.clone(),(function(e){return i=e}))),this.__modelInSameDocument&&(e.__modelInSameDocument=null!==(r=i)&&void 0!==r?r:this.__modelInSameDocument.clone()),this.__modelInOtherDocumentId&&(e.__modelInOtherDocumentId=this.__modelInOtherDocumentId)}},{key:"loadDocumentModels",value:function(e,t){var n;return e.length+t.length>1&&console.warn("The ".concat(this.name," relationship in ").concat(this.parent.static("modelName")," has been declared as hasOne, ")+"but more than one related model were found."),e.length>0?(this.__modelInSameDocument=e[0],this.related=this.__modelInSameDocument,this.documentModelsLoaded=!0,null!==(n=this.__modelInSameDocument)&&void 0!==n&&n.exists()?void delete this.__newModel:void(this.__newModel=this.__modelInSameDocument)):t.length>0?(this.__modelInOtherDocumentId=t[0],void(this.documentModelsLoaded=!0)):void(this.documentModelsLoaded=!0)}},{key:"assertNotLoaded",value:function(e){if(this.loaded)throw new Pv('The "'.concat(e,`" method can't be called because a related model already exists, `)+"use a hasMany relationship if you want to support multiple related models.")}}]),i}();function eb(e){return Ee(e,Zy)}function tb(e){return Ee(e,Xy)}var nb=function(){function e(){y(this,e)}var t,n,r;return _(e,[{key:"deleteModels",value:(r=C(O.mark((function e(t){var n,r=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.decantDocumentModelsByContainer(t),e.next=3,Promise.all(Object.entries(n).map((function(e){var t=R(e,2),n=t[0],i=t[1];return r.deleteContainerDocumentsModels(n,i)})));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"decantDocumentModelsByContainer",value:function(e){var t=this.decantModelsByDocument(e);return Object.entries(t).reduce((function(e,t){var n,r,i=R(t,2),a=i[0],o=i[1],s=null!==(n=q(a))&&void 0!==n?n:D(a);return(e[s]=null!==(r=e[s])&&void 0!==r?r:[]).push({documentUrl:a,models:o}),e}),{})}},{key:"decantModelsByDocument",value:function(e){return e.reduce((function(e,t){var n,r=t.requireDocumentUrl();return(e[r]=null!==(n=e[r])&&void 0!==n?n:[]).push(t),e}),{})}},{key:"deleteContainerDocumentsModels",value:(n=C(O.mark((function e(t,n){var r,i=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requireEngine().readMany(t,{$in:n.map((function(e){return e.documentUrl}))});case 2:return r=e.sent,e.next=5,Promise.all(n.map((function(e){var n=e.documentUrl,a=e.models;return i.deleteDocumentModels(r,t,n,a)})));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"deleteDocumentModels",value:(t=C(O.mark((function e(t,n,r,i){var a,o,s,l;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t[r]){e.next=3;break}return e.abrupt("return");case 3:if(o=this.requireEngine(),s=i.filter((function(e){return e.exists()})).map((function(e){return e.url})),a["@graph"].some((function(e){return!s.some((function(t){return t===e["@id"]}))}))){e.next=16;break}if(0!==(l=i.filter((function(e){return e.isRelationLoaded("tombstone")})).map((function(e){return e.tombstone}))).length){e.next=12;break}return e.next=10,o.delete(n,r);case 10:e.next=14;break;case 12:return e.next=14,o.update(n,r,{$overwrite:{"@graph":l.map((function(e){return e.serializeToJsonLD(!1)}))}});case 14:return i.forEach((function(e){return e.setDocumentExists(!1)})),e.abrupt("return");case 16:return e.next=18,o.update(n,r,{"@graph":{$updateItems:{$where:{"@id":{$in:s}},$unset:!0}}});case 18:case"end":return e.stop()}}),e,this)}))),function(e,n,r,i){return t.apply(this,arguments)})}]),e}();function rb(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ib(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ib(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function ib(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ab=function(){function e(){y(this,e)}var t,n,r,i,a,o;return _(e,[{key:"isPublic",get:function(){var e,t;return null!==(e=null===(t=this._publicPermissions)||void 0===t?void 0:t.includes(Ph.Read))&&void 0!==e?e:null}},{key:"isPrivate",get:function(){return this._publicPermissions?!this._publicPermissions.includes(Ph.Read):null}},{key:"fetchPublicPermissionsIfMissing",value:(o=C(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._publicPermissions){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.fetchPublicPermissions();case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"fetchPublicPermissions",value:(a=C(O.mark((function e(){var t,n,r,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ag("SolidACLAuthorization"),n=this.requireDocumentUrl(),e.next=4,t.fetch(n,{method:"HEAD"});case 4:r=e.sent,i=new Nh(n,[],r.headers),this._publicPermissions=i.getPublicPermissions();case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"updatePublicPermissions",value:(i=C(O.mark((function e(t){var n,r=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ag("SolidACLAuthorization"),e.next=3,this.withEngine(n.requireEngine(),(function(){return r.updateAuthorizations(t)}));case 3:this._publicPermissions=t;case 4:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"trackPublicPermissions",value:function(){var e=this.static().requireEngine();if(!(e instanceof zy))return{documentPermissions:{},stopTracking:function(){}};var t={},n=e.addListener({onRDFDocumentLoaded:function(e,n){if(n.headers){var r=new Nh(e,[],n.headers);t[e]=r.getPublicPermissions()}}});return{documentPermissions:t,stopTracking:n}}},{key:"updateAuthorizations",value:(r=C(O.mark((function e(t){var n,r,i,a,o,s,l,u,c,d,p;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.relatedAuthorizations.enable(),e.next=3,this.loadRelationIfUnloaded("authorizations");case 3:if(n=e.sent,r=Ag("SolidACLAuthorization"),i=t.map((function(e){return r.modeFromSolidDocumentPermission(e)})),a=n.filter((function(e){return e.agentClasses.includes(Th("foaf:Agent"))})),o=a.map((function(e){return e.modes})).flat(),i.length!==o.length||i.some((function(e){return o.includes(e)}))){e.next=10;break}return e.abrupt("return");case 10:if(this.relatedAuthorizations.isDocumentACL()){e.next=14;break}return e.next=13,this.createDocumentACLResource(i);case 13:return e.abrupt("return");case 14:if(0!==i.length){e.next=34;break}s=rb(a),e.prev=16,s.s();case 18:if((l=s.n()).done){e.next=24;break}return u=l.value,e.next=22,u.delete();case 22:e.next=18;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(16),s.e(e.t0);case 29:return e.prev=29,s.f(),e.finish(29);case 32:return this.relatedAuthorizations.related=le(n,a),e.abrupt("return");case 34:if(0!==a.length){e.next=38;break}return e.next=37,this.createPublicAuthorization(i);case 37:return e.abrupt("return");case 38:c=rb(a),e.prev=39,c.s();case 41:if((d=c.n()).done){e.next=47;break}return p=d.value,e.next=45,p.update({modes:i});case 45:e.next=41;break;case 47:e.next=52;break;case 49:e.prev=49,e.t1=e.catch(39),c.e(e.t1);case 52:return e.prev=52,c.f(),e.finish(52);case 55:case"end":return e.stop()}}),e,this,[[16,26,29,32],[39,49,52,55]])}))),function(e){return r.apply(this,arguments)})},{key:"createDocumentACLResource",value:(n=C(O.mark((function e(t){var n,r,i,a,o,s,l=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.relatedAuthorizations.enable(),n=Ag("SolidACLAuthorization"),r=this.authorizations,i=r.filter((function(e){return e.modes.includes(n.rdfProperty("acl:Control"))})).map((function(e){return T(new n(e.getAttributes()),(function(t){var n,r;t.accessTo=[l.requireDocumentUrl()],t.accessToClasses=[],t.default=[],t.mintUrl(l.relatedAuthorizations.requireACLUrl(),!1,null!==(n=null===(r=M(e.url))||void 0===r?void 0:r.fragment)&&void 0!==n?n:N())}))})),a=rb(i),e.prev=5,a.s();case 7:if((o=a.n()).done){e.next=13;break}return s=o.value,e.next=11,s.save();case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),a.e(e.t0);case 18:return e.prev=18,a.f(),e.finish(18);case 21:return this.relatedAuthorizations.related=i,this.relatedAuthorizations.effectiveACLUrl=this.relatedAuthorizations.aclUrl,e.next=25,this.createPublicAuthorization(t);case 25:case"end":return e.stop()}}),e,this,[[5,15,18,21]])}))),function(e){return n.apply(this,arguments)})},{key:"createPublicAuthorization",value:(t=C(O.mark((function e(t){var n,r,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.relatedAuthorizations.enable(),r=Ag("SolidACLAuthorization"),e.next=4,r.createInDocument({agentClasses:[r.rdfProperty("foaf:Agent")],accessTo:[this.requireDocumentUrl()],modes:t},this.relatedAuthorizations.requireACLUrl(),"public");case 4:i=e.sent,null===(n=this.relatedAuthorizations.related)||void 0===n||n.push(i);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function ob(e,t,n,r){var i=function(e){return L({type:e,rdfProperty:t,rdfPropertyAliases:n,required:r})};switch(H(e)){case"string":return i(Xv.String);case"number":case"bigint":return i(Xv.Number);case"boolean":return i(Xv.Boolean);case"object":return null===e?i(Xv.Any):e instanceof Zv?i(Xv.Key):e instanceof Date?i(Xv.Date):Array.isArray(e)?L({required:r,rdfProperty:t,type:Xv.Array,items:e.length>0?ob(e[0]):i(Xv.Any)}):L({required:r,rdfProperty:t,type:Xv.Object,fields:Object.entries(e).reduce((function(e,t){var n=R(t,2),r=n[0],i=n[1];return e[r]=ob(i),e}),{})});default:return i(Xv.Any)}}function sb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lb,ub=_((function e(){y(this,e)}));!function(e){e.Compacted="compacted",e.Expanded="expanded"}(lb||(lb={}));var cb,db=function(){function e(t){y(this,e),this.terms=t,this.reverseProperties=new Map}return _(e,[{key:"addReverseProperty",value:function(e,t){this.reverseProperties.set(e,t)}},{key:"addTerms",value:function(e){for(var t=this,n=function(){var e=R(i[r],2),n=e[0],a=e[1];if(t.terms.some((function(e){return e.value===a})))return"continue";for(var o=n,s=1;t.terms.some((function(e){return e.name===o}));)o="".concat(n).concat(++s);t.terms.push({name:n,value:a,compactingPrefix:"".concat(n),used:!1})},r=0,i=Object.entries(e);r<i.length;r++)n()}},{key:"getTermForExpandedIRI",value:function(e){var t;return null!==(t=this.terms.find((function(t){return e.startsWith(t.value)})))&&void 0!==t?t:null}},{key:"render",value:function(){var e=this.terms.reduce((function(e,t){return t.used&&(e[t.name]=t.value),e}),{});return this.reverseProperties.forEach((function(t,n){e[n]={"@reverse":t}})),e}}],[{key:"fromRdfClasses",value:function(t){var n,r=Object.entries(t).map((function(e){var t=R(e,2),n=t[0];return{name:n,value:t[1],compactingPrefix:"".concat(n,":"),used:!1}}));return r.unshift({name:"@vocab",compactingPrefix:"",value:null===(n=r[0])||void 0===n?void 0:n.value,used:!1}),new e(r)}}]),e}(),pb=function(){function e(t,n){y(this,e),this.context=t,this.iriFormat=n}return _(e,[{key:"serialize",value:function(e){var t,n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=new Set(null!==(t=a.ignoreModels)&&void 0!==t?t:[]),s={"@context":{},"@type":null};o.add(e);for(var l=0,u=Object.entries(null!==(c=a.attributes)&&void 0!==c?c:e.getAttributes());l<u.length;l++){var c,d=R(u[l],2),p=d[0],f=d[1];this.setJsonLDField(s,e,p,f,a)}return(null===(n=a.includeRelations)||void 0===n||n)&&this.setJsonLDRelations(s,e,o),null===(r=a.includeTypes)||void 0===r||r?this.setJsonLDTypes(s,e):delete s["@type"],null===(i=a.includeContext)||void 0===i||i?this.setJsonLDContext(s):delete s["@context"],s}},{key:"processExpandedIRI",value:function(e){return this.iriFormat===lb.Expanded?e:this.compactExpandedIRI(e)}},{key:"compactExpandedIRI",value:function(e){var t=this.context.getTermForExpandedIRI(e);return t?T(t.compactingPrefix+e.substr(t.value.length),(function(){return t.used=!0})):e}},{key:"setJsonLDField",value:function(e,t,n,r,i){if(n!==t.static("primaryKey")){var a=t.static().getFieldRdfProperty(n);a&&this.setJsonLDProperty(e,t,this.processExpandedIRI(a),n,r,i)}else e["@id"]=ue(r)}},{key:"setJsonLDRelations",value:function(e,t,n){var r,i=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return sb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sb(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(t.static("relations"));try{for(i.s();!(r=i.n()).done;){var a=r.value,o=t.requireRelation(a),s=o.getLoadedModels()[0];!(o.enabled&&o.loaded&&Hy(o))||o.isEmpty()||s&&n.has(s)||(this.context.addTerms(o.relatedClass.rdfContexts),this.setJsonLDRelation(e,o,n))}}catch(l){i.e(l)}finally{i.f()}}},{key:"setJsonLDRelation",value:function(e,t,n){var r=this,i=t.relatedClass.instance(),a=t.related,o=Gy(t),s=o?i.static().getFieldRdfProperty(t.foreignKeyName):t.parent.static().getFieldRdfProperty(t.foreignKeyName),l=this.processExpandedIRI(s),u={ignoreModels:n,includeRelations:!0,includeContext:!1},c=o?function(e){return T(r.serialize(e,u),(function(e){delete e[l]}))}:function(e){return r.serialize(e,u)};a&&(o&&this.context.addReverseProperty(t.name,l),e[o?t.name:l]=Array.isArray(a)?a.map((function(e){return c(e)})):c(a))}},{key:"setJsonLDTypes",value:function(e,t){var n=this,r=t.static("rdfsClasses").map((function(e){return n.processExpandedIRI(e)}));e["@type"]=1===r.length?r[0]:r}},{key:"setJsonLDContext",value:function(e){e["@context"]=this.context.render()}},{key:"setJsonLDProperty",value:function(e,t,n,r,i,a){(i=this.castJsonLDValue(i,t.static().getFieldDefinition(r,i)))instanceof ub?a.keepEmptyValues&&(e[n]=null):e[n]=i}},{key:"castJsonLDValue",value:function(e,t){var n=this;switch(t.type){case Xv.Any:var r=ob(e,t.rdfProperty,t.rdfPropertyAliases,t.required);if(r.type===Xv.Any)throw new Pv("Couldn't infer field definition for a field declared as any");return this.castJsonLDValue(e,r);case Xv.Key:return{"@id":ue(e)};case Xv.Date:return{"@type":"http://www.w3.org/2001/XMLSchema#dateTime","@value":new Date(e).toISOString()};case Xv.Array:var i=e,a=t.items;switch(i.length){case 0:return new ub;case 1:return this.castJsonLDValue(i[0],a);default:return i.map((function(e){return n.castJsonLDValue(e,a)}))}default:return JSON.parse(JSON.stringify(e))}}}],[{key:"forModel",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=db.fromRdfClasses(t.rdfContexts);return new e(r,n?lb.Compacted:lb.Expanded)}}]),e}();function fb(e){return hb()[e]}function hb(){var e;return null!==(e=cb)&&void 0!==e?e:cb={Operation:Ag("Operation"),PropertyOperation:Ag("PropertyOperation"),AddPropertyOperation:Ag("AddPropertyOperation"),RemovePropertyOperation:Ag("RemovePropertyOperation"),SetPropertyOperation:Ag("SetPropertyOperation"),UnsetPropertyOperation:Ag("UnsetPropertyOperation"),DeleteOperation:Ag("DeleteOperation")}}var mb=ce(fg,[Zy,Vy]),vb=function(e){v(r,mb);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(r);function r(){return y(this,r),n.apply(this,arguments)}return _(r,[{key:"resolve",value:(t=C(O.mark((function e(){var t;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isEmpty()){e.next=2;break}return e.abrupt("return",this.related=[]);case 2:if(this.__modelsInSameDocument&&this.__modelsInOtherDocumentIds){e.next=4;break}return e.abrupt("return",this.related=[]);case 4:return e.next=6,this.loadRelatedModels(this.__modelsInOtherDocumentIds);case 6:return t=e.sent,this.related=[].concat(x(this.__modelsInSameDocument),x(t)),e.abrupt("return",this.related);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"reset",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.related=[],this.__newModels=[],this.__modelsInSameDocument=[],t.forEach((function(t){var n;t.unsetAttribute(e.foreignKeyName),null===(n=e.related)||void 0===n||n.push(t),e.__newModels.push(t)}))}},{key:"clone",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return T(Wg(I(r.prototype),"clone",this).call(this,t),(function(t){e.cloneSolidData(t)}))}},{key:"__beforeParentCreate",value:function(){this.documentModelsLoaded||this.loadDocumentModels([],[])}},{key:"loadRelatedModels",value:function(e){return this.relatedClass.all({$in:e})}}]),r}();var gb=function(e){v(i,vb);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(i);function i(e){return y(this,i),r.call(this,e,fb("Operation"),"resourceUrl")}return _(i,[{key:"attach",value:function(e,t){var n=fb("Operation"),r=e instanceof n?e:fb(null!=t?t:"SetPropertyOperation").newInstance(e);if(r.constructor===n)throw new Error("Creating base operations is meaningless, you should create a specific operation instead (add property, remove property, etc.)");return Wg(I(i.prototype),"attach",this).call(this,r)}},{key:"attachAddOperation",value:function(e){return this.attach(e,"AddPropertyOperation")}},{key:"attachRemoveOperation",value:function(e){return this.attach(e,"RemovePropertyOperation")}},{key:"attachSetOperation",value:function(e){return this.attach(e,"SetPropertyOperation")}},{key:"attachUnsetOperation",value:function(e){return this.attach(e,"UnsetPropertyOperation")}},{key:"attachDeleteOperation",value:function(e){return this.attach(e,"DeleteOperation")}},{key:"__loadDocumentModels",value:(n=C(O.mark((function e(t,n){var r,i,a,o,s,l,u,c=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.relatedClass.fields,a=null===(r=i[this.foreignKeyName])||void 0===r?void 0:r.rdfProperty,o=Iy.reduceJsonLDGraph(n,this.parent.id),s=n["@graph"].filter((function(e){var t=uy.getJsonLDProperty(e,a);return"object"===H(t)&&null!==t&&"@id"in t&&t["@id"]===c.parent.url})),e.t0=E,e.next=7,Promise.all(s.map(function(){var e=C(O.mark((function e(n){var r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(r=c.getOperationClass(n))||void 0===r?void 0:r.createFromEngineDocument(t,o,n["@id"]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:e.t1=e.sent,l=(0,e.t0)(e.t1),u=s.map((function(e){return e["@id"]})).filter((function(e){return!l.some((function(t){return t.url===e}))&&V(e)!==t})),this.protected.loadDocumentModels(l,u);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"loadRelatedModels",value:(t=C(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("loading operations from different documents has not been implemented yet");case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"getOperationClass",value:function(e){var t,n=this.getOperationMatchers(),r=oe(null!==(t=e["@type"])&&void 0!==t?t:[]),i=n.find((function(e){return e.match(r)}));return null==i?void 0:i.operation}},{key:"getOperationMatchers",value:function(){var e;return null!==(e=i.operationMatchers)&&void 0!==e?e:i.operationMatchers=Object.values(hb()).map((function(e){var t=pb.forModel(e),n=e.rdfsClasses,r=n.map((function(e){return t.processExpandedIRI(e)})),i=[].concat(x(n),x(r));return{operation:e,match:function(e){return i.some((function(t){return e.includes(t)}))}}}))}}]),i}(),yb=function(){function e(){y(this,e)}var t;return _(e,[{key:"serializeToJsonLD",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return pb.forModel(this.static()).serialize(this,{includeRelations:e})}},{key:"parseEngineDocumentAttributesFromJsonLD",value:(t=C(O.mark((function e(t,n){var r,i,a,o,s,l,u,c,d,p,f,h,m,v,g,y,b;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null!==(r=(i=t)["@graph"].find((function(e){return e["@id"]===n})))&&void 0!==r?r:ne(Pv,"Resource '".concat(n,"' not found on document")),e.next=4,Iy.resourceFromJsonLDGraph(i,n,a);case 4:o=e.sent,s=this.static("fields"),(l={})[this.static("primaryKey")]=n,u=0,c=Object.entries(s);case 9:if(!(u<c.length)){e.next=22;break}if(p=R(c[u],2),f=p[0],(h=p[1]).rdfProperty){e.next=13;break}return e.abrupt("continue",19);case 13:if(m=null!==(d=o.propertiesIndex[h.rdfProperty])&&void 0!==d?d:h.rdfPropertyAliases.reduce((function(e,t){var n;return e.concat(null!==(n=o.propertiesIndex[t])&&void 0!==n?n:[])}),[]),v=m.map((function(e){return 1===e.type?new Zv(e.value):e.value})),g=W(v),y=g[0],b=g.slice(1),void 0!==y){e.next=18;break}return e.abrupt("continue",19);case 18:l[f]=b.length>0?[y].concat(x(b)):y;case 19:u++,e.next=9;break;case 22:return e.abrupt("return",l);case 23:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"convertEngineFiltersToJsonLD",value:function(e,t){var n={},r=pb.forModel(this.static()),i=this.static("rdfsClasses"),a=i.map((function(e){return r.processExpandedIRI(e)})),o=[];i.length>0&&(o.push({$contains:a}),o.push({$contains:i})),1===i.length&&(o.push({$eq:a[0]}),o.push({$eq:i[0]})),this.static("rdfsClassesAliases").forEach((function(e){e.length>0&&o.push({$contains:e}),1===e.length&&o.push({$eq:e[0]})})),e.$in&&(n.$in=e.$in,delete e.$in);var s=this.convertAttributeValuesToJsonLD(e,{compactIRIs:t,keepEmptyValues:!1});return o.length>0&&(s["@type"]={$or:o}),Object.keys(s).length>0&&(n["@graph"]={$contains:s}),n}},{key:"convertEngineUpdatesToJsonLD",value:function(e,t){for(var n=this.convertAttributeValuesToJsonLD(e,{compactIRIs:t,keepEmptyValues:!0}),r=0,i=Object.entries(n);r<i.length;r++){var a=R(i[r],2),o=a[0];null===a[1]&&(n[o]={$unset:!0})}return n}},{key:"convertAttributeValuesToJsonLD",value:function(e,t){return pb.forModel(this.static(),t.compactIRIs).serialize(this,{includeContext:!1,includeTypes:!1,includeRelations:!1,keepEmptyValues:t.keepEmptyValues,attributes:e})}}]),e}();var bb=function(e){v(r,ug);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(r);function r(e){y(this,r);var t=Ag("SolidACLAuthorization");return n.call(this,e,t)}return _(r,[{key:"requireACLUrl",value:function(){var e;return null!==(e=this.aclUrl)&&void 0!==e?e:fail("Could not get ACL Url")}},{key:"isDocumentACL",value:function(){return this.aclUrl&&this.effectiveACLUrl?this.aclUrl===this.effectiveACLUrl:null}},{key:"setForeignAttributes",value:function(){}},{key:"resolve",value:(t=C(O.mark((function e(){var t,n,r,i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ag("SolidACLAuthorization"),e.next=3,Om(this.parent.requireDocumentUrl(),t.fetch);case 3:return n=e.sent,e.next=6,Kh(n.document.statements());case 6:return r=e.sent,e.next=9,Promise.all(n.document.statements(void 0,"rdf:type","acl:Authorization").map((function(e){var i=e.subject;return t.createFromEngineDocument(n.effectiveUrl,r,i.value)})));case 9:return i=e.sent,this.aclUrl=n.url,this.effectiveACLUrl=n.effectiveUrl,this.related=i,e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}();function wb(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_b(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function _b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xb=ce(cg,[Zy,qy]),kb=function(e){v(r,xb);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(r);function r(){return y(this,r),n.apply(this,arguments)}return _(r,[{key:"resolve",value:(t=C(O.mark((function e(){var t,n,r,i,a,o,s,l,u,c,d=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.__modelsInSameDocument&&this.__modelsInOtherDocumentIds||(this.__modelsInSameDocument=[],this.__modelsInOtherDocumentIds=this.parent.getAttribute(this.foreignKeyName)),!this.isEmpty()){e.next=3;break}return e.abrupt("return",this.related=[]);case 3:n={},r=wb(null!==(t=this.__modelsInOtherDocumentIds)&&void 0!==t?t:[]);try{for(r.s();!(i=r.n()).done;)s=i.value,(l=null!==(a=q(s))&&void 0!==a?a:D(s))in n||(n[l]=new Set),null===(o=n[l])||void 0===o||o.add(V(s))}catch(p){r.e(p)}finally{r.f()}return e.next=8,Promise.all(Object.entries(n).map((function(e){var t=R(e,2),n=t[0],r=t[1];return d.relatedClass.from(n).all({$in:x(r)})})));case 8:return u=e.sent,c=u.reduce((function(e,t){return e.push.apply(e,x(t)),e}),[]),this.related=[].concat(x(this.__modelsInSameDocument),x(this.__newModels),x(c)),e.abrupt("return",this.related);case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"reset",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.related=[],this.__newModels=[],this.__modelsInSameDocument=[];var n=this.parent.getAttribute(this.foreignKeyName);t.forEach((function(t){var r;ae(n,t.getAttribute(e.localKeyName)),null===(r=e.related)||void 0===r||r.push(t),e.__newModels.push(t)})),this.parent.setAttribute(this.foreignKeyName,n)}},{key:"clone",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return T(Wg(I(r.prototype),"clone",this).call(this,t),(function(t){e.cloneSolidData(t)}))}},{key:"__beforeParentCreate",value:function(){this.documentModelsLoaded||this.loadDocumentModels([],this.parent.getAttribute(this.foreignKeyName))}},{key:"__synchronizeRelated",value:function(e){var t,n,r=this,i=hb(),a=i.SetPropertyOperation,o=i.AddPropertyOperation,s=i.RemovePropertyOperation,l=this.parent.static().getFieldRdfProperty(this.foreignKeyName),u=this.localKeyName,c=de(null!==(t=this.related)&&void 0!==t?t:[],u),d=de(null!==(n=e.related)&&void 0!==n?n:[],u),p=T(new WeakMap,(function(t){return t.set(e.parent,r.parent)}));this.parent.operations.filter((function(e){return!e.exists()&&(e instanceof a||e instanceof o||e instanceof s)&&e.property===l})).map((function(e){return oe(e.value)})).flat().map((function(e){return d.get(e instanceof Zv?e.toString():e)})).filter((function(e){return!!e})).forEach((function(e){var t;if(!c.hasKey(e.getAttribute(u))){var n=e.clone({clones:p});null===(t=r.related)||void 0===t||t.push(n),c.add(n)}})),this.related=[].concat(x(this.parent.getAttribute(this.foreignKeyName).map((function(e){var t=c.get(e),n=d.get(e);return t&&n?(t.static().synchronize(t,n),t):t})).filter((function(e){return!!e}))),x(this.__newModels))}}]),r}();var Ab=ce(pg,[Xy,qy]),Eb=function(e){v(r,Ab);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(r);function r(){return y(this,r),n.apply(this,arguments)}return _(r,[{key:"resolve",value:(t=C(O.mark((function e(){var t,n,r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.__modelInSameDocument){e.next=2;break}return e.abrupt("return",this.related=this.__modelInSameDocument);case 2:if(n=null!==(t=this.__modelInOtherDocumentId)&&void 0!==t?t:this.parent.getAttribute(this.foreignKeyName)){e.next=5;break}return e.abrupt("return",this.related=null);case 5:return e.next=7,this.relatedClass.find(n);case 7:return r=e.sent,e.abrupt("return",this.related=r);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0];delete this.related,delete this.__modelInSameDocument,delete this.__modelInSameDocument,t&&(this.parent.unsetAttribute(this.foreignKeyName),this.related=t,this.__newModel=t)}},{key:"clone",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return T(Wg(I(r.prototype),"clone",this).call(this,t),(function(t){e.cloneSolidData(t)}))}},{key:"__beforeParentCreate",value:function(){if(!this.documentModelsLoaded){var e=this.parent.getAttribute(this.foreignKeyName);this.loadDocumentModels([],e?[e]:[])}}}]),r}();var Ib=ce(hg,[Xy,Vy]),Sb=function(e){v(r,Ib);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(r);function r(){return y(this,r),n.apply(this,arguments)}return _(r,[{key:"resolve",value:(t=C(O.mark((function e(){var t,n=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isEmpty()){e.next=2;break}return e.abrupt("return",this.related=null);case 2:if(this.__modelInSameDocument||this.__modelInOtherDocumentId){e.next=4;break}return e.abrupt("return",this.related=null);case 4:return t=function(){var e=C(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.__modelInSameDocument){e.next=2;break}return e.abrupt("return",n.__modelInSameDocument);case 2:if(!n.__modelInOtherDocumentId){e.next=4;break}return e.abrupt("return",n.relatedClass.find(n.__modelInOtherDocumentId));case 4:return e.abrupt("return",null);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=7,t();case 7:return this.related=e.sent,e.abrupt("return",this.related);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0];delete this.related,delete this.__newModel,delete this.__modelInSameDocument,t&&(t.unsetAttribute(this.foreignKeyName),this.related=t,this.__newModel=t)}},{key:"clone",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return T(Wg(I(r.prototype),"clone",this).call(this,t),(function(t){e.cloneSolidData(t)}))}},{key:"__beforeParentCreate",value:function(){this.documentModelsLoaded||this.loadDocumentModels([],[])}}]),r}();var Rb=function(e){v(r,dg);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(r);function r(e,t){return y(this,r),n.call(this,e,t,"resourceUrls","url")}return _(r,[{key:"isEmpty",value:function(){return!1}},{key:"setForeignAttributes",value:function(e){this.parent.url&&(e.resourceUrls=se([].concat(x(e.resourceUrls),[this.parent.url])))}},{key:"resolve",value:(t=C(O.mark((function e(){var t,n,r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.relatedClass.collection,r=z(this.parent.url),e.next=4,this.relatedClass.from(null!==(t=q(r))&&void 0!==t?t:D(r)).find(r);case 4:return this.related=e.sent,this.relatedClass.collection=n,e.abrupt("return",this.related);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"addRelated",value:function(e){this.related=e}}]),r}();var Cb=function(e){v(r,dg);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(r);function r(e){return y(this,r),n.call(this,e,Ag("Tombstone"))}return _(r,[{key:"create",value:function(){var e=Ag("Tombstone");this.related=new e({url:this.parent.metadata.url,resourceUrl:this.parent.url,deletedAt:new Date})}},{key:"resolve",value:(t=C(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"setForeignAttributes",value:function(){}}]),r}();function Ob(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Db(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Db(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Db(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jb(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pb=pe(xg,[nb,yb,ab]),Mb=function(e){v(B,Pb);var t,n,r,i,a,o,s,l,u,c,d,p,f,h,m,g,b,w,k,A,E,j,P,$=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(B);function B(){var e;return y(this,B),(e=$.apply(this,arguments))._sourceSubject={},e}return _(B,[{key:"initialize",value:function(e,t){var n;this._documentExists=t,this._sourceDocumentUrl=null!==(n=this._sourceDocumentUrl)&&void 0!==n?n:null,this._trackedDirtyAttributes={},this._removedResourceUrls=[],this._usesRdfAliases=!1,Wg(I(B.prototype),"initialize",this).call(this,e,t)}},{key:"initializeRelations",value:function(){Wg(I(B.prototype),"initializeRelations",this).call(this),this.initializeRelationsEnabling(),this.initializeMetadataRelation()}},{key:"initializeRelationsEnabling",value:function(){this.static().hasAutomaticTimestamps()||this._proxy.relatedMetadata.disable(),this._proxy.tracksHistory()||(this._proxy.relatedOperations.disable(),this._proxy.relatedTombstone.disable()),this._proxy.relatedAuthorizations.disable()}},{key:"initializeMetadataRelation",value:function(){if(this._proxy.relatedMetadata.enabled){var e=Ag("Metadata").newInstance(L({resourceUrl:this._attributes[this.static("primaryKey")],createdAt:this._attributes.createdAt,updatedAt:this._attributes.updatedAt}),!1);e.resourceUrl&&e.mintUrl(this.getDocumentUrl()||void 0,this._documentExists),this._proxy.relatedMetadata.attach(e),delete this._attributes.createdAt,delete this._attributes.updatedAt,delete this._originalAttributes.createdAt,delete this._originalAttributes.updatedAt}}},{key:"static",value:function(e){return Wg(I(B.prototype),"static",this).call(this,e)}},{key:"save",value:function(e){var t=this;return this.static().withCollection(e||this.guessCollection(),(function(){return Wg(I(B.prototype),"save",t).call(t)}))}},{key:"saveInDocument",value:(P=C(O.mark((function e(t,n){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.exists()?me(this.getDocumentUrl()===t,Pv,"Model already exists and is not stored in the given document"):this.mintUrl(t,!0,n),e.next=3,this.save();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return P.apply(this,arguments)})},{key:"delete",value:function(){var e=this;return this.static().withCollection(this.guessCollection(),(function(){return Wg(I(B.prototype),"delete",e).call(e)}))}},{key:"softDelete",value:(j=C(O.mark((function e(){var t;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.static().hasAutomaticTimestamps()){e.next=2;break}throw new Pv("Cannot soft delete a model without automatic timestamps");case 2:if(!this.isSoftDeleted()){e.next=4;break}return e.abrupt("return",this);case 4:return t=new Date,this.metadata.setAttribute(eg.UpdatedAt,t),this.metadata.setAttribute("deletedAt",t),e.next=9,this.save();case 9:return e.abrupt("return",this);case 10:case"end":return e.stop()}}),e,this)}))),function(){return j.apply(this,arguments)})},{key:"mintUrl",value:function(e,t,n){this.setAttribute(this.static("primaryKey"),this.newUrl(e,n)),e&&(this._documentExists=null==t||t)}},{key:"toJsonLD",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Tb({ids:!0,timestamps:!0,history:!0},e);var t=this.clone();return e.ids||t.getRelatedModels().forEach((function(e){return e.setAttribute("url",null)})),e.timestamps||t.getRelatedModels().forEach((function(e){e.relatedMetadata.related=null,delete e.relatedMetadata.__modelInSameDocument,delete e.relatedMetadata.__modelInOtherDocumentId,delete e.relatedMetadata.__newModel})),e.history||t.getRelatedModels().forEach((function(e){e.relatedOperations.related=[],e.relatedOperations.__newModels=[],delete e.relatedOperations.__modelsInSameDocument,delete e.relatedOperations.__modelsInOtherDocumentIds})),t.serializeToJsonLD()}},{key:"getIdAttribute",value:function(){return this.getAttribute("url")}},{key:"setExists",value:function(e){this._documentExists=e&&this._documentExists,Wg(I(B.prototype),"setExists",this).call(this,e)}},{key:"documentExists",value:function(){return this._documentExists}},{key:"setDocumentExists",value:function(e){this._documentExists=e,Object.values(this._relations).filter(Hy).filter((function(e){return e.enabled&&e.useSameDocument})).map((function(e){return e.getLoadedModels()})).flat().forEach((function(t){return t.setDocumentExists(e)}))}},{key:"isDirty",value:function(e,t){var n,r;if(e)return this.static("timestamps").includes(e)&&(null===(n=this.metadata)||void 0===n?void 0:n.isDirty(e))||Wg(I(B.prototype),"isDirty",this).call(this,e);if(Wg(I(B.prototype),"isDirty",this).call(this))return!0;if(t)return null===(r=this.metadata)||void 0===r?void 0:r.isDirty("deletedAt");var i=this.getDocumentModels().filter((function(e){return e.isDirty(void 0,!0)})),a=this.getRemovedDocumentModels();return i.length+a.length>0}},{key:"isSoftDeleted",value:function(){var e;return!(null===(e=this.metadata)||void 0===e||!e.deletedAt)}},{key:"enableHistory",value:function(){this._history=!0}},{key:"disableHistory",value:function(){this._history=!1}},{key:"disableTombstone",value:function(){this._tombstone=!1}},{key:"enableTombstone",value:function(){this._tombstone=!0}},{key:"leavesTombstone",value:function(){var e;return null!==(e=this._tombstone)&&void 0!==e?e:this.static("tombstone")}},{key:"cleanDirty",value:function(e){Wg(I(B.prototype),"cleanDirty",this).call(this),this._documentExists=!0,this._trackedDirtyAttributes={},this._removedResourceUrls=[],Object.values(this._relations).filter(eb).filter((function(e){return e.enabled&&e.useSameDocument})).forEach((function(e){var t;e.__modelsInSameDocument=e.__modelsInSameDocument||[],(t=e.__modelsInSameDocument).push.apply(t,x(e.__newModels)),e.__newModels=[]})),Object.values(this._relations).filter(tb).filter((function(e){return e.enabled&&e.useSameDocument&&!!e.__newModel})).forEach((function(e){e.__modelInSameDocument=e.__newModel,delete e.__newModel})),e||this.getDocumentModels().forEach((function(e){return e.cleanDirty(!0)}))}},{key:"fixMalformedAttributes",value:function(){var e,t,n;(Wg(I(B.prototype),"fixMalformedAttributes",this).call(this),this.relatedMetadata.enabled)&&(this.static().hasAutomaticTimestamp(eg.CreatedAt)&&(this.metadata.createdAt=null!==(e=this.createdAt)&&void 0!==e?e:new Date),this.static().hasAutomaticTimestamp(eg.UpdatedAt)&&(this.metadata.updatedAt=null!==(t=null!==(n=this.updatedAt)&&void 0!==n?n:this.createdAt)&&void 0!==t?t:new Date))}},{key:"tracksHistory",value:function(){var e;return!this.static().historyDisabled.has(this)&&(null!==(e=this._history)&&void 0!==e?e:this.static("history"))}},{key:"withoutTrackingHistory",value:function(e){var t=this;if(!this.tracksHistory())return e();var n=function(){return t.static().historyDisabled.delete(t),!0};this.static().historyDisabled.set(this);var r=e();return ve(r)?r.then((function(e){return n()&&e})):n()&&r}},{key:"getHistoryHash",value:function(){var e=this.getRelatedModels().map((function(e){var t;return null!==(t=e.operations)&&void 0!==t?t:[]})).flat();return 0===e.length?null:ge(ye(e,"url").reduce((function(e,t){return e+t.url}),""))}},{key:"rebuildAttributesFromHistory",value:function(){var e,t,n=this;if(0!==this.operations.length){var r=fb("PropertyOperation"),i=ye(this.operations,"date"),a=new Set(Object.keys(this._attributes)),o=Object.entries(this.static("fields")).filter((function(e){var t=R(e,2);return t[0],t[1].type===Xv.Array})).map((function(e){return R(e,1)[0]}));a.delete(this.static("primaryKey")),a.delete(eg.CreatedAt),a.delete(eg.UpdatedAt),o.forEach((function(e){return n.setAttribute(e,[])})),i.forEach((function(e){if(e instanceof r){var t=n.static().getRdfPropertyField(e.property);t&&a.delete(t)}e.apply(n)})),a.forEach((function(e){return n.unsetAttribute(e)})),this.setAttribute("createdAt",null===(e=i[0])||void 0===e?void 0:e.date),this.setAttribute("updatedAt",null===(t=i.slice(-1)[0])||void 0===t?void 0:t.date)}}},{key:"getDocumentUrl",value:function(){return this.url?V(this.url):null}},{key:"requireDocumentUrl",value:function(){var e;return null!==(e=this.getDocumentUrl())&&void 0!==e?e:ne(Pv,"Failed getting required document url")}},{key:"usesRdfAliases",value:function(){return this._usesRdfAliases}},{key:"getSourceDocumentUrl",value:function(){return this._sourceDocumentUrl}},{key:"setSourceDocumentUrl",value:function(e){this._sourceDocumentUrl=e}},{key:"requireContainerUrl",value:function(){var e;return null!==(e=this.getContainerUrl())&&void 0!==e?e:ne(Pv,"Failed getting required container url")}},{key:"getContainerUrl",value:function(){var e=this.getDocumentUrl();return e?q(e):null}},{key:"getSourceContainerUrl",value:function(){var e=this.getSourceDocumentUrl();return e?q(e):null}},{key:"setAttribute",value:function(e,t){var n=this.getPrimaryKey();Wg(I(B.prototype),"setAttribute",this).call(this,e,t);var r=this.getPrimaryKey();n!==r&&this.onPrimaryKeyUpdated(r,n)}},{key:"unsetAttribute",value:function(e){var t,n;return(null===(t=this.static("fields"))||void 0===t||null===(n=t[e])||void 0===n?void 0:n.type)===Xv.Array?this.setAttributeValue(e,[]):Wg(I(B.prototype),"unsetAttribute",this).call(this,e)}},{key:"setCreatedAtAttribute",value:function(e){var t;(null!==(t=this.metadata)&&void 0!==t?t:this).setAttributeValue("createdAt",e)}},{key:"setUpdatedAtAttribute",value:function(e){var t;(null!==(t=this.metadata)&&void 0!==t?t:this).setAttributeValue("updatedAt",e)}},{key:"getCreatedAtAttribute",value:function(){var e,t;return null!==(e=null===(t=this.metadata)||void 0===t?void 0:t.getAttributeValue("createdAt"))&&void 0!==e?e:Wg(I(B.prototype),"getAttributeValue",this).call(this,"createdAt")}},{key:"getUpdatedAtAttribute",value:function(){var e,t;return null!==(e=null===(t=this.metadata)||void 0===t?void 0:t.getAttributeValue("updatedAt"))&&void 0!==e?e:Wg(I(B.prototype),"getAttributeValue",this).call(this,"updatedAt")}},{key:"getDeletedAtAttribute",value:function(){var e,t;return null!==(e=null===(t=this.metadata)||void 0===t?void 0:t.getAttributeValue("deletedAt"))&&void 0!==e?e:Wg(I(B.prototype),"getAttributeValue",this).call(this,"deletedAt")}},{key:"getDocumentModels",value:function(e){var t=null!=e?e:new Set;if(t.has(this))return x(t);var n=this.getDocumentUrl(),r=function(e){return e.forEach((function(e){return t.add(e)}))};t.add(this);for(var i=0,a=Object.values(this._relations);i<a.length;i++){var o=a[i];o.enabled&&o.loaded&&Hy(o)&&o.useSameDocument&&(tb(o)&&o.__newModel&&r(o.__newModel.getDocumentModels(t)),eb(o)&&r(o.__newModels.map((function(e){return e.getDocumentModels(t)})).flat()),r(o.getLoadedModels().filter((function(e){return e.getDocumentUrl()===n})).map((function(e){return e.getDocumentModels(t)})).flat()))}return x(t)}},{key:"getRemovedDocumentModels",value:function(){for(var e=new Set,t=0,n=Object.values(this._relations);t<n.length;t++){var r=n[t];r.enabled&&r.loaded&&Hy(r)&&eb(r)&&r.__removedDocumentModels.forEach((function(t){return e.add(t)}))}return x(e)}},{key:"getDirtyDocumentModels",value:function(){return this.getDocumentModels().filter((function(e){return e.isDirty()}))}},{key:"requireRelation",value:function(e){return Wg(I(B.prototype),"requireRelation",this).call(this,e)}},{key:"getRelationModel",value:function(e){return Wg(I(B.prototype),"getRelationModel",this).call(this,e)}},{key:"getRelationModels",value:function(e){return Wg(I(B.prototype),"getRelationModels",this).call(this,e)}},{key:"setRelationModel",value:function(e,t){return Wg(I(B.prototype),"setRelationModel",this).call(this,e,t)}},{key:"setRelationModels",value:function(e,t){return Wg(I(B.prototype),"setRelationModels",this).call(this,e,t)}},{key:"getRelatedModels",value:function(e){var t=null!=e?e:new Set;if(t.has(this))return x(t);t.add(this);for(var n=0,r=Object.values(this._relations);n<r.length;n++){var i=r[n];i.enabled&&[].concat(x(tb(i)&&i.__newModel?i.__newModel.getRelatedModels(t):[]),x(eb(i)?i.__newModels.map((function(e){return e.getRelatedModels(t)})).flat():[]),x(i.getLoadedModels().map((function(e){return e.getRelatedModels(t)})).flat())).forEach((function(e){return t.add(e)}))}return x(t)}},{key:"metadataRelationship",value:function(){var e=Ag("Metadata");return this.hasOne(e,"resourceUrl").usingSameDocument(!0).onDelete("cascade")}},{key:"operationsRelationship",value:function(){return new gb(this).usingSameDocument(!0).onDelete("cascade")}},{key:"tombstoneRelationship",value:function(){return new Cb(this)}},{key:"authorizationsRelationship",value:function(){return new bb(this)}},{key:"onMoved",value:function(e,t){t&&this.setSourceDocumentUrl(t),this.setAttribute("url",e),this.cleanDirty()}},{key:"getDefaultCollection",value:function(){var e=Wg(I(B.prototype),"getDefaultCollection",this).call(this);return"solid://".concat(e,"/")}},{key:"createFromEngineDocument",value:(E=C(O.mark((function e(t,n,r){var i,a,o,s=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){var e=C(O.mark((function e(){var i;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.parseEngineDocumentAttributes(t,n,r);case 2:return(i=e.sent)[s.static("primaryKey")]=new Zv(r||t),e.abrupt("return",s.newInstance(i,!0));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,Iy.resourceFromJsonLDGraph(n,r||t);case 3:return a=e.sent,e.next=6,i();case 6:return o=e.sent,e.next=9,o.loadDocumentModels(t,n);case 9:return e.abrupt("return",T(o,(function(e){e._sourceDocumentUrl=ie(t,{fragment:!1}),e._usesRdfAliases=s.static("rdfsClassesAliases").some((function(e){return!e.some((function(e){return!a.isType(e)}))}))})));case 10:case"end":return e.stop()}}),e)}))),function(e,t,n){return E.apply(this,arguments)})},{key:"createManyFromEngineDocuments",value:(A=C(O.mark((function e(t){var n,r,i=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[this.static("rdfsClasses")].concat(x(this.static("rdfsClassesAliases"))),e.next=3,Promise.all(Object.entries(t).map(function(){var e=C(O.mark((function e(t){var r,a,o,s;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(t,2),a=r[0],o=r[1],e.next=3,Iy.fromJsonLD(o);case 3:return s=e.sent,e.abrupt("return",Promise.all(s.resources.filter((function(e){return!!e.url&&n.some((function(t){return!t.some((function(t){return!e.isType(t)}))}))})).map(function(){var e=C(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.createFromEngineDocument(a,o,t.url));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return r=e.sent,e.abrupt("return",r.flat());case 5:case"end":return e.stop()}}),e,this)}))),function(e){return A.apply(this,arguments)})},{key:"loadDocumentModels",value:(k=C(O.mark((function e(t,n){var r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.requireEngine(),e.next=3,Promise.all(Object.values(this._relations).filter((function(e){return e.enabled&&Hy(e)})).map(function(){var e=C(O.mark((function e(i){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.relatedClass.withEngine(r,(function(){return i.__loadDocumentModels(t,n)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return k.apply(this,arguments)})},{key:"beforeSave",value:(w=C(O.mark((function e(t){var n,r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.isDirty(eg.UpdatedAt)||!(null===(n=this.metadata)||void 0===n||!n.isDirty(eg.UpdatedAt)),e.next=3,Wg(I(B.prototype),"beforeSave",this).call(this);case 3:if(!this.url&&this.static("mintsUrls")&&this.mintUrl(),!t){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Promise.all(this.getDirtyDocumentModels().map(function(){var e=C(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.exists()||t.beforeCreate());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return e.next=10,this.beforeDocumentSave();case 10:return e.next=12,Promise.all(this.getDirtyDocumentModels().map(function(){var e=C(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.exists()&&t.beforeUpdate());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:this.reconcileModelTimestamps(r);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"beforeDocumentSave",value:(b=C(O.mark((function e(){var t,n,r,i=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=new Set,r=function(){return(t=i.getDirtyDocumentModels().filter((function(e){return!n.has(e)}))).length>0};case 3:if(!r()){e.next=9;break}return this.static("mintsUrls")&&this.mintDocumentModelsKeys(t),e.next=7,Promise.all(t.map(function(){var e=C(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===i||!t.isDirty()){e.next=3;break}return e.next=3,t.beforeSave(!0);case 3:n.add(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"beforeCreate",value:(g=C(O.mark((function e(){var t,n,r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,n=Object.values(this._relations);case 1:if(!(t<n.length)){e.next=9;break}if((r=n[t]).enabled&&Qy(r)){e.next=5;break}return e.abrupt("continue",6);case 5:r.__beforeParentCreate();case 6:t++,e.next=1;break;case 9:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"beforeUpdate",value:(m=C(O.mark((function e(){var t=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.tracksHistory()){e.next=2;break}return e.abrupt("return");case 2:if(!this.isDirty(void 0,!0)){e.next=7;break}return e.next=5,this.addDirtyHistoryOperations();case 5:return e.next=7,Promise.all(this.operations.map(function(){var e=C(O.mark((function e(n){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.exists()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.beforeCreate();case 4:return e.next=6,n.beforeSave(!0);case 6:t.mintDocumentModelsKeys([n]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"performSave",value:(h=C(O.mark((function e(){var t;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getDirtyDocumentModels().map((function(e){return[e,e.exists()]})),e.prev=1,e.next=4,Wg(I(B.prototype),"performSave",this).call(this);case 4:e.next=13;break;case 6:if(e.prev=6,e.t0=e.catch(1),e.t0 instanceof Mv){e.next=10;break}throw e.t0;case 10:return this.url=this.newUniqueUrl(this.url),e.next=13,Wg(I(B.prototype),"performSave",this).call(this);case 13:t.forEach((function(e){var t=R(e,2),n=t[0],r=t[1];n._wasRecentlyCreated=n._wasRecentlyCreated||!r}));case 14:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return h.apply(this,arguments)})},{key:"performDelete",value:(f=C(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.tracksHistory()&&this.leavesTombstone()&&this.relatedTombstone.create(),e.next=3,Wg(I(B.prototype),"performDelete",this).call(this);case 3:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"afterSave",value:(p=C(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wg(I(B.prototype),"afterSave",this).call(this);case 2:if(!t){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Promise.all(this.getDirtyDocumentModels().map((function(e){return e.afterSave(!0)})));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"onPrimaryKeyUpdated",value:function(e,t){var n,r,i,a=this.getDocumentUrl()||void 0,o=this.documentExists(),s=Ob(Object.values(this._relations).filter((function(e){return e.enabled&&Gy(e)})));try{var l=function(){var n=i.value;n.getLoadedModels().forEach((function(r){var i=r.getAttribute(n.foreignKeyName);r.setAttribute(n.foreignKeyName,Array.isArray(i)?T(i.slice(0),(function(n){return Q(n,t,e)})):e)}))};for(s.s();!(i=s.n()).done;)l()}catch(u){s.e(u)}finally{s.f()}null===(n=this.metadata)||void 0===n||n.mintUrl(a,o),null===(r=this.operations)||void 0===r||r.map((function(e){return e.mintUrl(a,o)}))}},{key:"syncDirty",value:(d=C(O.mark((function e(){var t,n,r,i,a,o=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getDocumentUrl(),n=function(){return o.requireEngine().create(t?z(t):o.static("collection"),o.toEngineDocument(),t||void 0)},r=function(){return o.requireEngine().update(z(t),t,{"@graph":{$push:o.serializeToJsonLD()}})},i=function(){return o.requireEngine().update(z(t),t,o.getDirtyEngineDocumentUpdates())},a=function(){return o._documentExists?o._exists?i():r():n()},e.next=7,a();case 7:return e.abrupt("return",this.getSerializedPrimaryKey());case 8:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"deleteModelsFromEngine",value:(c=C(O.mark((function e(t){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.deleteModels(t);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"addDirtyHistoryOperations",value:(u=C(O.mark((function e(){var t,n,r,i,a,o,s,l,u,c,d;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadRelationIfUnloaded("operations");case 2:if(!("url"in this._dirtyAttributes)){e.next=4;break}throw new Pv("It wasn't possible to generate the changes history for a model because "+"its primary key was modified from '".concat(this.url,"' to '").concat(this._originalAttributes.url,"'."));case 4:if(0!==this.operations.length){e.next=17;break}t=L(be(this._originalAttributes,[this.static("primaryKey")])),n=0,r=Object.entries(t);case 7:if(!(n<r.length)){e.next=17;break}if(i=R(r[n],2),a=i[0],!(null===(o=i[1])||Array.isArray(o)&&0===o.length)){e.next=11;break}return e.abrupt("continue",14);case 11:if(!(a in this._trackedDirtyAttributes)||this._trackedDirtyAttributes[a]!==o){e.next=13;break}return e.abrupt("continue",14);case 13:this.relatedOperations.attachSetOperation({property:this.static().requireFieldRdfProperty(a),date:this.metadata.createdAt,value:this.getOperationValue(a,o)});case 14:n++,e.next=7;break;case 17:s=0,l=Object.entries(this._dirtyAttributes);case 18:if(!(s<l.length)){e.next=29;break}if(u=R(l[s],2),c=u[0],d=u[1],!(c in this._trackedDirtyAttributes)||this._trackedDirtyAttributes[c]!==d){e.next=22;break}return e.abrupt("continue",26);case 22:if(!Array.isArray(d)){e.next=25;break}return this.addArrayHistoryOperations(c,d,this._originalAttributes[c]),e.abrupt("continue",26);case 25:this.relatedOperations.attachSetOperation({property:this.static().requireFieldRdfProperty(c),date:this.metadata.updatedAt,value:this.getOperationValue(c,d)});case 26:s++,e.next=18;break;case 29:this.metadata.isDirty("deletedAt")&&this.metadata.deletedAt&&this.relatedOperations.attachDeleteOperation({date:this.metadata.deletedAt});case 30:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"addHistoryOperations",value:function(e){var t,n=this,r=fb("PropertyOperation"),i=new Set(this.operations.map((function(e){return e.url}))),a=[],o=new Set,s=Object.keys(this.static("fields")).reduce((function(e,t){var r=n.static().getFieldRdfProperty(t);return r&&(e[r]=t),e}),{}),l=Ob(e);try{for(l.s();!(t=l.n()).done;){var u=t.value;if(!i.has(u.url)){var c=u.clone();c.reset(),c.url=u.url,a.push(c),u instanceof r&&u.property in s&&o.add(u.property)}}}catch(h){l.e(h)}finally{l.f()}this.setRelationModels("operations",ye([].concat(x(this.operations),a),["date","url"])),this.removeDuplicatedHistoryOperations(),this.rebuildAttributesFromHistory();var d,p=Ob(o);try{for(p.s();!(d=p.n()).done;){var f=s[d.value];this._trackedDirtyAttributes[f]=this._dirtyAttributes[f]}}catch(h){p.e(h)}finally{p.f()}}},{key:"removeDuplicatedHistoryOperations",value:function(){var e,t=this,n=fb("PropertyOperation"),r=[],i=[],a=Ob(this.operations.filter((function(e){return e.date.getTime()===t.createdAt.getTime()})));try{for(a.s();!(e=a.n()).done;){var o=e.value;o instanceof n&&(r.includes(o.property)?(i.push(o.url),o.exists()&&this._removedResourceUrls.push(o.url)):r.push(o.property))}}catch(s){a.e(s)}finally{a.f()}this.setRelationModels("operations",this.operations.filter((function(e){return!i.includes(e.url)})))}},{key:"hasOne",value:function(e,t,n){return new Sb(this,e,t,n)}},{key:"hasMany",value:function(e,t,n){return new vb(this,e,t,n)}},{key:"belongsToOne",value:function(e,t,n){return new Eb(this,e,t,n)}},{key:"belongsToMany",value:function(e,t,n){return new kb(this,e,t,n)}},{key:"isContainedBy",value:function(e){return new Rb(this,e)}},{key:"toEngineDocument",value:function(){return{"@graph":x(this.getDirtyDocumentModels().map((function(e){return e.serializeToJsonLD(!1)})))}}},{key:"getDirtyEngineDocumentUpdates",value:function(e){var t=[],n=this.requireEngine(),r=this.getDirtyDocumentModels(),i=this.getRemovedDocumentModels();if(!e){var a,o=Ob(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(s!==this)if(s.exists()){var l=s.withEngine(n,(function(e){return e.getDirtyEngineDocumentUpdates(!0)}))["@graph"];"$apply"in l?t.push.apply(t,x(l.$apply)):t.push(l)}else t.push({$push:s.serializeToJsonLD(!1)})}}catch(f){o.e(f)}finally{o.f()}var u,c=Ob(i);try{for(c.s();!(u=c.n()).done;)u.value.getDocumentModels().forEach((function(e){return t.push({$updateItems:{$where:{"@id":e.url},$unset:!0}})}))}catch(f){c.e(f)}finally{c.f()}}if(Wg(I(B.prototype),"isDirty",this).call(this)&&this.url){var d=Wg(I(B.prototype),"getDirtyEngineDocumentUpdates",this).call(this),p=!(n instanceof zy);t.push({$updateItems:{$where:{"@id":this.url},$update:this.convertEngineUpdatesToJsonLD(d,p)}})}return this._removedResourceUrls.forEach((function(e){return t.push({$updateItems:{$where:{"@id":e},$unset:!0}})})),1===t.length?{"@graph":t[0]}:{"@graph":{$apply:t}}}},{key:"parseEngineDocumentAttributes",value:(l=C(O.mark((function e(t,n,r){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.parseEngineDocumentAttributesFromJsonLD(n,r||t));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return l.apply(this,arguments)})},{key:"castAttribute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(){var n,r=null==e;switch(null===(n=t.definition)||void 0===n?void 0:n.type){case Xv.Array:var i=r?[]:oe(e),a=se(i);return i.length!==a.length&&console.warn("An array field had duplicate values, this is not supported in Solid models."),a;case Xv.Any:if(!Array.isArray(e))return e;if(0===e.length)return;if(1===e.length)return e[0]}return r?void 0:e};return Wg(I(B.prototype),"castAttribute",this).call(this,n(),t)}},{key:"newUrl",value:function(e,t){var n,r,i,a,o,s;return e=null!==(n=e)&&void 0!==n?n:F(this.static("collection"),null!==(r=null===(i=this._sourceSubject)||void 0===i?void 0:i.documentName)&&void 0!==r?r:N()),t=null!==(a=null!==(o=t)&&void 0!==o?o:null===(s=this._sourceSubject)||void 0===s?void 0:s.resourceHash)&&void 0!==a?a:this.static("defaultResourceHash"),"".concat(e,"#").concat(t)}},{key:"newUniqueUrl",value:function(e){var t,n;e=null!==(t=e)&&void 0!==t?t:this.newUrl();var r=null===(n=M(e))||void 0===n?void 0:n.fragment,i=V(e);return"".concat(i,"-").concat(N()).concat(r?"#".concat(r):"")}},{key:"guessCollection",value:function(){var e;if(this.url)return null!==(e=q(this.url))&&void 0!==e?e:void 0}},{key:"mintDocumentModelsKeys",value:function(e){var t,n=this.requireDocumentUrl(),r=this._documentExists,i=Ob(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.url||a.mintUrl(n,r,N())}}catch(p){i.e(p)}finally{i.f()}var o,s=Ob(e);try{for(s.s();!(o=s.n()).done;)for(var l=o.value,u=function(){var e=d[c];if(!e.enabled)return"continue";e.getLoadedModels().forEach((function(t){return e.setForeignAttributes(t)}))},c=0,d=Object.values(l._relations);c<d.length;c++)u()}catch(p){s.e(p)}finally{s.f()}}},{key:"getOperationValue",value:function(e,t){var n,r=this,i="string"==typeof e?this.static().getFieldDefinition(e,t):e;return t=null!==(n=t)&&void 0!==n?n:this.getAttributeValue(e),function(e){return e.type===Xv.Array}(i)?(t?Array.isArray(t)||(t=[t]):t=[],t.map((function(e){return r.getOperationValue(i.items,e)}))):i.type===Xv.Key?new Zv(t):t}},{key:"addArrayHistoryOperations",value:function(e,t,n){var r=this.getOperationValue(e,n),i=this.getOperationValue(e,t),a=we(r,i,r[0]instanceof Zv?function(e,t){return e.equals(t)}:void 0),o=a.added,s=a.removed;o.length>0&&this.relatedOperations.attachAddOperation({property:this.static().getFieldRdfProperty(e),date:this.metadata.updatedAt,value:o}),s.length>0&&this.relatedOperations.attachRemoveOperation({property:this.static().getFieldRdfProperty(e),date:this.metadata.updatedAt,value:s})}},{key:"reconcileModelTimestamps",value:function(e){var t,n,r,i,a,o=null!==(t=null===(n=this.operations)||void 0===n?void 0:n.length)&&void 0!==t?t:0;if(o>0)this.setAttribute(eg.UpdatedAt,null===(a=this.operations[o-1])||void 0===a?void 0:a.date);else if(!e){var s=null!==(r=this._originalAttributes[eg.UpdatedAt])&&void 0!==r?r:null===(i=this.metadata)||void 0===i?void 0:i._originalAttributes[eg.UpdatedAt];if(s){var l=Object.keys(this._dirtyAttributes);l[1]||l[0]&&l[0]!==eg.UpdatedAt||this.setAttribute(eg.UpdatedAt,s)}}}}],[{key:"getFieldDefinition",value:function(e,t){var n;return null!==(n=this.fields[e])&&void 0!==n?n:ob(t,this.getDefaultRdfContext()+e,[],!1)}},{key:"getFieldRdfProperty",value:function(e){var t,n=this.fields[e];return n&&!n.rdfProperty?null:null!==(t=null==n?void 0:n.rdfProperty)&&void 0!==t?t:this.getDefaultRdfContext()+e}},{key:"getRdfPropertyField",value:function(e){var t,n,r=this;return null!==(n=(null!==(t=this.rdfPropertyFields)&&void 0!==t?t:this.rdfPropertyFields=fe(de(Object.keys(this.fields),(function(e){return r.getFieldRdfProperty(e)}))))[e])&&void 0!==n?n:null}},{key:"requireFieldRdfProperty",value:function(e){var t;return null!==(t=this.getFieldRdfProperty(e))&&void 0!==t?t:ne("Couldn't get required property for rdf field '".concat(e,"'"))}},{key:"from",value:function(e){return this.collection=e,this}},{key:"at",value:function(e){return this.from(e)}},{key:"boot",value:function(e){var t,n,r,i;Wg(I(B),"boot",this).call(this,e);var a=this,o=a.pureInstance();if(!a.collection.match(/^\w+:\/\/.*\/$/))throw new $v(a.name,"SolidModel collections must be valid container urls (ending with a trailing slash), "+"'".concat(a.collection,"' isn't."));a.rdfContexts=Tb(Tb({},a.rdfContexts),{},{solid:"http://www.w3.org/ns/solid/terms#",crdt:"https://vocab.noeldemartin.com/crdt/",ldp:"http://www.w3.org/ns/ldp#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#"});var s=a.fields,l=a.getDefaultRdfContext();o.static().hasAutomaticTimestamp(eg.CreatedAt)&&delete s[eg.CreatedAt],o.static().hasAutomaticTimestamp(eg.UpdatedAt)&&delete s[eg.UpdatedAt],a.rdfsClasses=se(null!==(t=null===(n=a.rdfsClasses)||void 0===n?void 0:n.map((function(e){return ly(e,a.rdfContexts,l)})))&&void 0!==t?t:[]),0===a.rdfsClasses.length&&(a.rdfsClasses=[l+a.modelName]),a.rdfsClassesAliases=a.rdfsClassesAliases.map((function(e){var t;return se(null!==(t=e.map((function(e){return ly(e,a.rdfContexts,l)})))&&void 0!==t?t:[])}));for(var u=0,c=Object.entries(s);u<c.length;u++){var d,p,f,h=R(c[u],2),m=h[0],v=h[1];v.rdfProperty=ly(null!==(d=v.rdfProperty)&&void 0!==d?d:"".concat(l).concat(m),a.rdfContexts,l),v.rdfPropertyAliases=null!==(p=null===(f=v.rdfPropertyAliases)||void 0===f?void 0:f.map((function(e){return ly(e,a.rdfContexts,l)})))&&void 0!==p?p:[]}null===(r=s[a.primaryKey])||void 0===r||delete r.rdfProperty,null===(i=s[a.primaryKey])||void 0===i||delete i.rdfPropertyAliases,a.fields=s}},{key:"aliasRdfPrefixes",value:function(e){var t=this;this.ensureBooted();for(var n=function(){var e=R(i[r],2),n=e[0],a=e[1],o=t.rdfsClasses.reduce((function(e,t){return t.startsWith(n)&&e.push(t.replace(n,a)),e}),[]);o.length>0&&t.rdfsClassesAliases.push(o);for(var s=0,l=Object.values(t.fields);s<l.length;s++){var u,c=l[s];null!==(u=c.rdfProperty)&&void 0!==u&&u.startsWith(n)&&c.rdfPropertyAliases.push(c.rdfProperty.replace(n,a))}},r=0,i=Object.entries(e);r<i.length;r++)n()}},{key:"resetRdfAliases",value:function(){this.rdfsClassesAliases=[];for(var e=0,t=Object.values(this.fields);e<t.length;e++){var n=t[e];n.rdfPropertyAliases&&(n.rdfPropertyAliases=[])}}},{key:"replaceRdfPrefixes",value:function(e){var t=this;this.ensureBooted();for(var n=function(){var e=R(i[r],2),n=e[0],a=e[1];t.rdfsClasses=t.rdfsClasses.map((function(e){return e.replace(n,a)}));for(var o=0,s=Object.values(t.fields);o<s.length;o++){var l,u=s[o];null!==(l=u.rdfProperty)&&void 0!==l&&l.startsWith(n)&&(u.rdfProperty=u.rdfProperty.replace(n,a))}},r=0,i=Object.entries(e);r<i.length;r++)n()}},{key:"createFromEngineDocument",value:function(e,t,n){return this.instance().createFromEngineDocument(e,t,n)}},{key:"find",value:(s=C(O.mark((function e(t){var n,r,i,a,o,s,l,u,c;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.instance().serializeKey(t),i=V(r),a=null!==(n=q(i))&&void 0!==n?n:D(i),this.ensureBooted(),e.prev=4,o=this.instance().trackPublicPermissions(),s=o.documentPermissions,l=o.stopTracking,e.next=8,this.requireEngine().readOne(a,i);case 8:return u=e.sent,e.next=11,this.instance().createFromEngineDocument(i,u,r);case 11:return c=e.sent,l(),c._publicPermissions=s[i],e.abrupt("return",c);case 17:return e.prev=17,e.t0=e.catch(4),e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,this,[[4,17]])}))),function(e){return s.apply(this,arguments)})},{key:"all",value:(o=C(O.mark((function e(){var t,n,r,i,a,o=this,s=arguments;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},t=this.prepareEngineFilters(t),n=this.instance().trackPublicPermissions(),r=n.documentPermissions,i=n.stopTracking,e.next=5,this.withCollection((function(){return Wg(I(B),"all",o).call(o,t)}));case 5:return a=e.sent,i(),a.forEach((function(e){return e._publicPermissions=r[e.requireDocumentUrl()]})),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"prepareEngineFilters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(this.requireEngine()instanceof zy);return this.instance().convertEngineFiltersToJsonLD(e,t)}},{key:"rdfProperty",value:function(e){return Th(e,{extraContext:this.rdfContexts,defaultPrefix:Object.values(this.rdfContexts).shift()})}},{key:"schema",value:function(e){return Wg(I(B),"schema",this).call(this,e)}},{key:"newFromJsonLD",value:(a=C(O.mark((function e(t,n,r){var i,a,o,s,l,u,c,d=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fm(t),e.next=3,Iy.fromJsonLD(i,null!=n?n:this.collection);case 3:return a=e.sent,e.next=6,a.toJsonLD();case 6:return o=e.sent,s=null!=r?r:this.findResourceId(a.statements,n),l=a.resource(s),u=n||V(s),e.next=12,this.instance().parseEngineDocumentAttributes(u,o,s);case 12:return c=e.sent,this.hasAutomaticTimestamp(eg.CreatedAt)&&(c.createdAt=null==l?void 0:l.getPropertyValue(ly("purl:created"))),this.hasAutomaticTimestamp(eg.UpdatedAt)&&(c.updatedAt=null==l?void 0:l.getPropertyValue(ly("purl:modified"))),e.abrupt("return",T(this.newInstance(L(c)),function(){var e=C(O.mark((function e(n){var r,i,a,s,l;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.loadDocumentModels(u,o);case 2:n.reset(),n._sourceSubject=t["@id"]?hm(t["@id"]):{},r=Ob(d.relations),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=17;break}if(a=i.value,s=n.requireRelation(a),l=s.getLoadedModels(),s.enabled){e.next=13;break}return e.abrupt("continue",15);case 13:he(s,Hy).reset(l),l.forEach((function(e){return e.reset()}));case 15:e.next=7;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),r.e(e.t0);case 22:return e.prev=22,r.f(),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[5,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()));case 16:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"createFromJsonLD",value:(i=C(O.mark((function e(t,n,r){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=T,e.next=3,this.newFromJsonLD(t,n,r);case 3:return e.t1=e.sent,e.t2=function(e){return e.save(n)},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"createInDocument",value:(r=C(O.mark((function e(t,n,r){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T(new this(t),(function(e){return e.saveInDocument(n,r)})));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"synchronize",value:(n=C(O.mark((function e(t,n){var r,i,a,o,s;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this===t.static()){e.next=2;break}return e.abrupt("return",t.static().synchronize(t,n));case 2:if(t.getPrimaryKey()===n.getPrimaryKey()){e.next=4;break}throw new Pv("Can't synchronize different models");case 4:return e.next=6,t.loadRelationIfUnloaded("operations");case 6:return e.next=8,n.loadRelationIfUnloaded("operations");case 8:if(0!==t.operations.length||0!==n.operations.length){e.next=10;break}return e.abrupt("return");case 10:if(t.getHistoryHash()!==n.getHistoryHash()){e.next=12;break}return e.abrupt("return");case 12:t.addHistoryOperations(n.operations),n.addHistoryOperations(t.operations),r=Ob(le(this.relations,this.reservedRelations)),e.prev=15,r.s();case 17:if((i=r.n()).done){e.next=27;break}if(a=i.value,o=t.requireRelation(a),s=n.requireRelation(a),o.enabled&&s.enabled){e.next=23;break}return e.abrupt("continue",25);case 23:he(o,Wy).__synchronizeRelated(s),he(s,Wy).__synchronizeRelated(o);case 25:e.next=17;break;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(15),r.e(e.t0);case 32:return e.prev=32,r.f(),e.finish(32);case 35:case"end":return e.stop()}}),e,this,[[15,29,32,35]])}))),function(e,t){return n.apply(this,arguments)})},{key:"getDefaultRdfContext",value:function(){return Object.values(this.rdfContexts).shift()||""}},{key:"withCollection",value:(t=C(O.mark((function e(){var t,n,r,i,a=arguments;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:"",n=a.length>1?a[1]:void 0,r=this.collection,"string"!=typeof t&&(n=t,t=""),n){e.next=6;break}throw new Pv("Invalid method given to withCollection (SolidModel internals)");case 6:return this.collection=t||r,e.next=9,n();case 9:return i=e.sent,this.collection=r,e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"findResourceId",value:function(e,t){var n,r=this,i=e.reduce((function(e,t){var n,r;return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===t.predicate.value&&(e[t.subject.value]=null!==(n=e[t.subject.value])&&void 0!==n?n:[],null===(r=e[t.subject.value])||void 0===r||r.push(t.object.value)),e}),{}),a=null===(n=Object.entries(i).find((function(e){var t=R(e,2);t[0];var n=t[1];return!r.rdfsClasses.some((function(e){return!n.includes(e)}))})))||void 0===n?void 0:n[0];if(!a)throw new Pv("Couldn't find matching resource in JSON-LD");return t?F(t,a):a}}]),B}();Mb.primaryKey="url",Mb.classFields=["_history","_publicPermissions","_tombstone"],Mb.rdfContexts={},Mb.rdfsClasses=[],Mb.rdfsClassesAliases=[],Mb.reservedRelations=["metadata","operations","tombstone","authorizations"],Mb.defaultResourceHash="it",Mb.mintsUrls=!0,Mb.history=!1,Mb.tombstone=!0,Mb.historyDisabled=new WeakMap;var Lb={resourceUrl:{type:Xv.Key,required:!0,rdfProperty:"resource"},date:{type:Xv.Date,required:!0}},$b=function(e){v(n,Mb);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(){return y(this,n),t.apply(this,arguments)}return _(n,[{key:"apply",value:function(e){}},{key:"newUrl",value:function(e,t){if(!this.resourceUrl)return Wg(I(n.prototype),"newUrl",this).call(this,e,t);var r=null!=t?t:N();return"".concat(this.resourceUrl,"-operation-").concat(r)}}]),n}();function Nb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nb(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}$b.rdfContexts={crdt:"https://vocab.noeldemartin.com/crdt/"},$b.rdfsClasses=["Operation"],$b.timestamps=!1,$b.fields=Lb;var Ub=Bb(Bb({},Lb),{},{property:{type:Xv.Key,required:!0}}),Fb=function(e){v(n,$b);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(){return y(this,n),t.apply(this,arguments)}return _(n,[{key:"apply",value:function(e){var t=e.static().getRdfPropertyField(this.property);t&&this.applyPropertyUpdate(e,t)}},{key:"applyPropertyUpdate",value:function(e,t){}}]),n}();function zb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zb(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Fb.rdfsClasses=["PropertyOperation"],Fb.fields=Ub;var Vb=function(e){v(n,Fb);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(){return y(this,n),t.apply(this,arguments)}return _(n,[{key:"applyPropertyUpdate",value:function(e,t){var n=e.getAttributeValue(t);if(!Array.isArray(n))throw new Pv("Can't apply Add operation to non-array field (should be Set instead)");e.setAttributeValue(t,[].concat(x(n),x(oe(this.value))))}}]),n}();Vb.rdfsClasses=["AddPropertyOperation"],Vb.fields=qb(qb({},Ub),{},{value:{type:Xv.Any,required:!0}});var Qb=function(e){v(n,$b);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(){return y(this,n),t.apply(this,arguments)}return _(n,[{key:"apply",value:function(e){e.metadata.setAttribute("deletedAt",this.date)}}]),n}();Qb.rdfsClasses=["DeleteOperation"];var Hb=function(e){v(n,Mb);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(){return y(this,n),t.apply(this,arguments)}return _(n,[{key:"getCreatedAtAttribute",value:function(){return this.getAttributeValue("createdAt")}},{key:"getUpdatedAtAttribute",value:function(){return this.getAttributeValue("updatedAt")}},{key:"newUrl",value:function(e,t){return this.resourceUrl?"".concat(this.resourceUrl,"-metadata"):Wg(I(n.prototype),"newUrl",this).call(this,e,t)}}]),n}();function Gb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gb(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}Hb.rdfContexts={crdt:"https://vocab.noeldemartin.com/crdt/"},Hb.rdfsClasses=["Metadata"],Hb.timestamps=!1,Hb.fields={resourceUrl:{type:Xv.Key,required:!0,rdfProperty:"resource"},createdAt:Xv.Date,updatedAt:Xv.Date,deletedAt:Xv.Date};var Kb=function(e){v(n,Fb);var t=Jb(n);function n(){return y(this,n),t.apply(this,arguments)}return _(n,[{key:"applyPropertyUpdate",value:function(e,t){var n=e.getAttributeValue(t);if(!Array.isArray(n))throw new Pv("Can't apply Remove operation to non-array field (use Unset instead)");e.setAttributeValue(t,le(n,this.castModelAttribute(e,t,oe(this.value))))}},{key:"castModelAttribute",value:function(e,t,r){var i,a=e.constructor;return(null!==(i=n.attributeCasters.get(a))&&void 0!==i?i:this.createAttributeCaster(a))(t,r)}},{key:"createAttributeCaster",value:function(e){var t=function(e){v(n,e);var t=Jb(n);function n(){return y(this,n),t.apply(this,arguments)}return _(n,[{key:"castAttribute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Wg(I(n.prototype),"castAttribute",this).call(this,e,t)}}]),n}(e),r=t.pureInstance();return T((function(e,t){return r.castAttribute(t,{definition:r.static().getFieldDefinition(e)})}),(function(t){return n.attributeCasters.set(e,t)}))}}]),n}();function Yb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yb(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Kb.rdfsClasses=["RemovePropertyOperation"],Kb.fields=Wb(Wb({},Ub),{},{value:{type:Xv.Any,required:!0}}),Kb.attributeCasters=new WeakMap;var Xb=function(e){v(n,Fb);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(){return y(this,n),t.apply(this,arguments)}return _(n,[{key:"applyPropertyUpdate",value:function(e,t){e.setAttributeValue(t,this.value)}}]),n}();Xb.rdfsClasses=["SetPropertyOperation"],Xb.fields=Zb(Zb({},Ub),{},{value:{type:Xv.Any,required:!0}});var ew=function(e){v(n,Hb);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(){return y(this,n),t.apply(this,arguments)}return _(n)}();ew.rdfsClasses=["Tombstone"];var tw=function(e){v(n,Fb);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(){return y(this,n),t.apply(this,arguments)}return _(n)}();tw.rdfsClasses=["UnsetPropertyOperation"];var nw,rw={AddPropertyOperation:Vb,DeleteOperation:Qb,Metadata:Hb,Operation:$b,PropertyOperation:Fb,RemovePropertyOperation:Kb,SetPropertyOperation:Xb,Tombstone:ew,UnsetPropertyOperation:tw};var iw=(b(nw={},Ph.Read,"http://www.w3.org/ns/auth/acl#Read"),b(nw,Ph.Write,"http://www.w3.org/ns/auth/acl#Write"),b(nw,Ph.Append,"http://www.w3.org/ns/auth/acl#Append"),b(nw,Ph.Control,"http://www.w3.org/ns/auth/acl#Control"),nw),aw=function(e){v(n,Mb);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(){return y(this,n),t.apply(this,arguments)}return _(n,null,[{key:"fetch",get:function(){var e=this.requireEngine();if(!(e instanceof zy))throw new Pv("ACL authorizations can only be fetched with Solid engines");return e.getFetch()}},{key:"modeFromSolidDocumentPermission",value:function(e){return iw[e]}}]),n}();aw.rdfContexts={acl:"http://www.w3.org/ns/auth/acl#"},aw.rdfsClasses=["Authorization"],aw.timestamps=!1,aw.fields={agents:{rdfProperty:"acl:agent",type:Xv.Array,items:Xv.Key},agentClasses:{rdfProperty:"acl:agentClass",type:Xv.Array,items:Xv.Key},agentGroups:{rdfProperty:"acl:agentGroup",type:Xv.Array,items:Xv.Key},accessTo:{type:Xv.Array,items:Xv.Key},accessToClasses:{rdfProperty:"acl:accessToClass",type:Xv.Array,items:Xv.Key},default:{type:Xv.Array,items:Xv.Key},modes:{rdfProperty:"acl:mode",type:Xv.Array,items:Xv.Key}};var ow=function(e){v(n,Mb);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(){return y(this,n),t.apply(this,arguments)}return _(n)}();ow.timestamps=!1,ow.rdfsClasses=["ldp:Resource"],ow.fields={updatedAt:{type:Xv.Date,rdfProperty:"purl:modified"}};var sw=function(e){v(r,kb);var t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(r);function r(e){return y(this,r),n.call(this,e,ow,"resourceUrls")}return _(r,[{key:"container",get:function(){return this.parent}},{key:"resolve",value:(t=C(O.mark((function e(){var t,n,i=this;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.parent.requireEngine(),!this.isEmpty()){e.next=3;break}return e.abrupt("return",this.related=[]);case 3:if(!(t instanceof zy)){e.next=5;break}return e.abrupt("return",Wg(I(r.prototype),"resolve",this).call(this));case 5:return e.next=7,t.readMany(this.container.requireDocumentUrl());case 7:return n=e.sent,this.related=Object.entries(n).map((function(e){var t=R(e,2),n=t[0],r=t[1];return new ow({url:n,updatedAt:i.getLatestUpdateDate(r["@graph"])})})),e.abrupt("return",this.related);case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getLatestUpdateDate",value:function(e){var t=e.reduce((function(e,t){var n,r,i,a,o=(null!==(n=null!==(r=null!==(i=null!==(a=t["purl:modified"])&&void 0!==a?a:t["http://purl.org/dc/terms/modified"])&&void 0!==i?i:t["purl:created"])&&void 0!==r?r:t["http://purl.org/dc/terms/created"])&&void 0!==n?n:{"@value":0})["@value"],s=new Date(o).getTime();return Math.max(e,s)}),0);return new Date(t)}}]),r}();var lw=function(e){v(a,cg);var t,n,r,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(a);function a(e,t){return y(this,a),i.call(this,e,t,"resourceUrls","url")}return _(a,[{key:"setForeignAttributes",value:function(e){e.url&&(this.parent.resourceUrls=se([].concat(x(this.parent.resourceUrls),[e.url])))}},{key:"resolve",value:(r=C(O.mark((function e(){return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isEmpty()){e.next=4;break}e.t0=[],e.next=7;break;case 4:return e.next=6,this.relatedClass.from(this.parent.url).all({$in:this.parent.resourceUrls});case 6:e.t0=e.sent;case 7:return this.related=e.t0,e.abrupt("return",this.related);case 9:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"create",value:(n=C(O.mark((function e(){var t,n,r=arguments;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=this.relatedClass.newInstance(t),e.next=4,this.save(n);case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"save",value:(t=C(O.mark((function e(t){var n;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.parent.exists()){e.next=2;break}throw new Pv("Cannot save a model because the container doesn't exist");case 2:return e.next=4,t.save(this.parent.url);case 4:if(!(this.parent.requireEngine()instanceof zy)){e.next=8;break}this.parent.setOriginalAttribute("resourceUrls",[].concat(x(this.parent.resourceUrls),[t.getDocumentUrl()])),e.next=10;break;case 8:return e.next=10,this.parent.update({resourceUrls:[].concat(x(this.parent.resourceUrls),[t.getDocumentUrl()])});case 10:return this.loaded&&(null===(n=this.related)||void 0===n||n.push(t)),e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),a}();var uw=function(e){v(n,Mb);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(){return y(this,n),t.apply(this,arguments)}return _(n)}();uw.rdfContexts={solid:"http://www.w3.org/ns/solid/terms#"},uw.rdfsClasses=["solid:TypeRegistration"],uw.timestamps=!1,uw.fields={forClass:{type:Xv.Key,required:!0},instance:Xv.Key,instanceContainer:Xv.Key};var cw=function(e){v(i,Mb);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(i);function i(){return y(this,i),r.apply(this,arguments)}return _(i,[{key:"documentsRelationship",value:function(){return new sw(this)}},{key:"register",value:(n=C(O.mark((function e(t,n){var r;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new uw({forClass:n.rdfsClasses[0],instanceContainer:this.url})).mintUrl(t,!0,N()),e.next=4,r.withEngine(this.requireEngine(),(function(){return r.save(z(t))}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"contains",value:function(e){return new lw(this,e)}},{key:"newUrl",value:function(){var e=this.hasAttribute("name")?_e(this.getAttribute("name")):N();return xe(this.static("collection"),e)}},{key:"newUniqueUrl",value:function(e){var t;e=null!==(t=e)&&void 0!==t?t:this.newUrl();var n=ke(e);return xe(z(e),"".concat(n,"-").concat(N()))}}],[{key:"fromTypeIndex",value:(t=C(O.mark((function e(t,n){var r,i,a;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.requireEngine(),i=r instanceof zy?r.getFetch():void 0,e.next=4,km(t,n.rdfsClasses,i);case 4:return a=e.sent,e.abrupt("return",a[0]?this.newInstance({url:a[0]},!0):null);case 6:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),i}();cw.rdfsClasses=["ldp:Container"],cw.timestamps=!1,cw.fields={name:{type:Xv.String,rdfProperty:"rdfs:label"},resourceUrls:{type:Xv.Array,rdfProperty:"ldp:contains",items:Xv.Key}};var dw=function(e){v(n,Mb);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}(n);function n(){return y(this,n),t.apply(this,arguments)}return _(n)}();function pw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pw(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hw(){Eg(fw(fw({},rw),{},{SolidACLAuthorization:aw,SolidContainerModel:cw,SolidDocument:ow,SolidTypeRegistration:uw}))}dw.rdfContexts={solid:"http://www.w3.org/ns/solid/terms#"},dw.rdfsClasses=["solid:TypeIndex"],dw.timestamps=!1,lw.inverseRelationClasses=[Rb],Rb.inverseRelationClasses=[lw];var mw=function(){function e(){y(this,e)}return _(e,[{key:"loadSolidModels",value:function(){hw()}}]),e}();new mw;class AuthenticationCancelledError extends g{}class ServiceBootError extends g{constructor(e,t){super(`Service '${e}' failed booting`,{cause:t})}}function vw(e=null){const t={instance:e,setInstance:e=>t.instance=e,requireInstance:()=>{var e;return null!=(e=t.instance)?e:ne("Facade not initialized")}};return new Proxy(t,{get:(e,n,r)=>{const i="constructor"!==n&&n in t?t:t.requireInstance();return Reflect.get(i,n,r)},set:(e,n,r)=>Reflect.set(t.requireInstance(),n,r)})}const gw=vw();class yw{constructor(){if(t(this,"_namespace"),t(this,"_proxy"),t(this,"_booted"),!this.static("__constructingPure"))return this._namespace=new.target.name,this._booted=new Ie,this.initialize(),this._proxy}static pureInstance(){return this.pureInstances.has(this)||(this.__constructingPure=!0,this.pureInstances.set(this,new this),this.__constructingPure=!1),this.pureInstances.get(this)}get booted(){return this._booted}static(e){const t=this.constructor;return e?t[e]:t}launch(e){const t=e=>this._booted.reject(new ServiceBootError(this._namespace,e));this._namespace=null!=e?e:this._namespace;try{this.boot().then((()=>this._booted.resolve())).catch(t)}catch(n){t(n)}return this._booted}initialize(){if(!this.static("__classProperties")){const e=this.static().pureInstance();this.static().__classProperties=Object.getOwnPropertyNames(e)}const e=(e,t)=>"string"!=typeof t||t in e||e.static("__classProperties").includes(t),t=this._proxy=new Proxy(this,{get:(n,r,i)=>e(n,r)?Reflect.get(n,r,i):t.hasState(r)?t.getState(r):t.hasComputedState(r)?t.getComputedState(r):t.__get(r),set:(n,r,i,a)=>e(n,r)?Reflect.set(n,r,i,a):(t.setState({[r]:i}),!0)})}hasState(e){var t;return e in(null!=(t=gw.state[this._namespace])?t:this.getInitialState())}getState(e){var t;const n=null!=(t=gw.state[this._namespace])?t:this.getInitialState();return e?n[e]:n}setState(e){gw.commit(`${this._namespace}/setState`,e),this.onStateUpdated(e)}onStateUpdated(e){const t=Se(e,this.static("persist"));if(Re(t))return;const n=Ce.require(this._namespace);Ce.set(this._namespace,{...n,...t})}hasComputedState(e){return`${this._namespace}/${e}`in gw.getters}getComputedState(e){return gw.getters[`${this._namespace}/${e}`]}getInitialState(){return{}}getComputedStateDefinitions(){return{}}__get(e){}async boot(){if(this.registerStoreModule(),!Re(this.static("persist")))if(Ce.has(this._namespace)){const e=Ce.require(this._namespace);this.setState(e)}else Ce.set(this._namespace,Se(this.getState(),this.static("persist")))}registerStoreModule(){const e=this.getInitialState();0!==Object.keys(e).length&&gw.registerModule(this._namespace,{namespaced:!0,state:e,mutations:{setState:(e,t)=>{Object.assign(e,t)}},getters:this.getComputedStateDefinitions()})}}t(yw,"persist",[]),t(yw,"__constructingPure",!1),t(yw,"__classProperties"),t(yw,"pureInstances",new WeakMap);const bw=vw(new class extends yw{constructor(){super(...arguments),t(this,"cache")}async get(e){const t=await this.open(),n=await t.match(e);return null!=n?n:null}async store(e,t){const n=await this.open();await n.put(e,t)}async replace(e,t){const n=await this.open();0!==(await n.keys(e)).length&&await n.put(e,t)}async open(){var e;return this.cache=null!=(e=this.cache)?e:T(new Ie,(e=>{caches.open("app").then((t=>e.resolve(t)))}))}});function ww(e){return e&&e.Math==Math?e:void 0}var _w="object"==typeof globalThis&&ww(globalThis)||"object"==typeof window&&ww(window)||"object"==typeof self&&ww(self)||"object"==typeof global&&ww(global)||function(){return this}()||{};function xw(){return _w}function kw(e,t,n){var r=n||_w,i=r.__SENTRY__=r.__SENTRY__||{};return i[e]||(i[e]=t())}var Aw=Object.prototype.toString;function isError(e){switch(Aw.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return jw(e,Error)}}function Ew(e,t){return Aw.call(e)===`[object ${t}]`}function Iw(e){return Ew(e,"ErrorEvent")}function isDOMError(e){return Ew(e,"DOMError")}function Sw(e){return Ew(e,"String")}function Rw(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function Cw(e){return Ew(e,"Object")}function Ow(e){return"undefined"!=typeof Event&&jw(e,Event)}function Dw(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function jw(e,t){try{return e instanceof t}catch(n){return!1}}function Tw(e,t){try{let s=e;var n=5,r=80,i=[];let l=0,u=0;var a=" > ",o=a.length;let c;for(;s&&l++<n&&(c=Pw(s,t),!("html"===c||l>1&&u+i.length*o+c.length>=r));)i.push(c),u+=c.length,s=s.parentNode;return i.reverse().join(a)}catch(s){return"<unknown>"}}function Pw(e,t){var n=e,r=[];let i,a,o,s,l;if(!n||!n.tagName)return"";r.push(n.tagName.toLowerCase());var u=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(u&&u.length)u.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),i=n.className,i&&Sw(i))for(a=i.split(/\s+/),l=0;l<a.length;l++)r.push(`.${a[l]}`);var c=["type","name","title","alt"];for(l=0;l<c.length;l++)o=c[l],s=n.getAttribute(o),s&&r.push(`[${o}="${s}"]`);return r.join("")}class SentryError extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}var Mw=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Lw(e,t=!1){const{host:n,path:r,pass:i,port:a,projectId:o,protocol:s,publicKey:l}=e;return`${s}://${l}${t&&i?`:${i}`:""}@${n}${a?`:${a}`:""}/${r?`${r}/`:r}${o}`}function $w(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Nw(e){var t="string"==typeof e?function(e){var t=Mw.exec(e);if(!t)throw new SentryError(`Invalid Sentry Dsn: ${e}`);const[n,r,i="",a,o="",s]=t.slice(1);let l="",u=s;var c=u.split("/");if(c.length>1&&(l=c.slice(0,-1).join("/"),u=c.pop()),u){var d=u.match(/^\d+/);d&&(u=d[0])}return $w({host:a,pass:i,path:l,projectId:u,port:o,protocol:n,publicKey:r})}(e):$w(e);return function(e){if("undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__)return;const{port:t,projectId:n,protocol:r}=e;if(["protocol","publicKey","host","projectId"].forEach((t=>{if(!e[t])throw new SentryError(`Invalid Sentry Dsn: ${t} missing`)})),!n.match(/^\d+$/))throw new SentryError(`Invalid Sentry Dsn: Invalid projectId ${n}`);if(!function(e){return"http"===e||"https"===e}(r))throw new SentryError(`Invalid Sentry Dsn: Invalid protocol ${r}`);if(t&&isNaN(parseInt(t,10)))throw new SentryError(`Invalid Sentry Dsn: Invalid port ${t}`)}(t),t}var Bw=xw(),Uw="Sentry Logger ",Fw=["debug","info","warn","error","log","assert","trace"];function zw(e){var t=xw();if(!("console"in t))return e();var n=t.console,r={};Fw.forEach((e=>{var i=n[e]&&n[e].__sentry_original__;e in t.console&&i&&(r[e]=n[e],n[e]=i)}));try{return e()}finally{Object.keys(r).forEach((e=>{n[e]=r[e]}))}}function qw(){let e=!1;var t={enable:()=>{e=!0},disable:()=>{e=!1}};return"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?Fw.forEach((n=>{t[n]=(...t)=>{e&&zw((()=>{Bw.console[n](`${Uw}[${n}]:`,...t)}))}})):Fw.forEach((e=>{t[e]=()=>{}})),t}let Vw;function Qw(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.substr(0,t)}...`}function Hw(e,t){if(!Array.isArray(e))return"";var n=[];for(let i=0;i<e.length;i++){var r=e[i];try{n.push(String(r))}catch(Mh){n.push("[value cannot be serialized]")}}return n.join(t)}function Gw(e,t){return!!Sw(e)&&(Ew(t,"RegExp")?t.test(e):"string"==typeof t&&-1!==e.indexOf(t))}function Ww(e,t,n){if(t in e){var r=e[t],i=n(r);if("function"==typeof i)try{Kw(i,r)}catch(a){}e[t]=i}}function Jw(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}function Kw(e,t){var n=t.prototype||{};e.prototype=t.prototype=n,Jw(e,"__sentry_original__",t)}function Yw(e){return e.__sentry_original__}function Zw(e){if(isError(e))return{message:e.message,name:e.name,stack:e.stack,...e_(e)};if(Ow(e)){var t={type:e.type,target:Xw(e.target),currentTarget:Xw(e.currentTarget),...e_(e)};return"undefined"!=typeof CustomEvent&&jw(e,CustomEvent)&&(t.detail=e.detail),t}return e}function Xw(e){try{return t=e,"undefined"!=typeof Element&&jw(t,Element)?Tw(e):Object.prototype.toString.call(e)}catch(n){return"<unknown>"}var t}function e_(e){if("object"==typeof e&&null!==e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function t_(e,t=40){var n=Object.keys(Zw(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Qw(n[0],t);for(let i=n.length;i>0;i--){var r=n.slice(0,i).join(", ");if(!(r.length>t))return i===n.length?r:Qw(r,t)}return""}function n_(e){return r_(e,new Map)}function r_(e,t){if(Cw(e)){if(void 0!==(i=t.get(e)))return i;var n={};for(var r of(t.set(e,n),Object.keys(e)))void 0!==e[r]&&(n[r]=r_(e[r],t));return n}if(Array.isArray(e)){var i;if(void 0!==(i=t.get(e)))return i;n=[];return t.set(e,n),e.forEach((e=>{n.push(r_(e,t))})),n}return e}Vw="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?kw("logger",qw):qw();var i_=50;function a_(...e){var t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{var r=[];for(var i of e.split("\n").slice(n)){var a=i.replace(/\(error: (.*)\)/,"$1");for(var o of t){var s=o(a);if(s){r.push(s);break}}}return function(e){if(!e.length)return[];let t=e;var n=t[0].function||"",r=t[t.length-1].function||"";-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(t=t.slice(1));-1!==r.indexOf("sentryWrapped")&&(t=t.slice(0,-1));return t.slice(0,i_).map((e=>({...e,filename:e.filename||t[0].filename,function:e.function||"?"}))).reverse()}(r)}}var o_="<anonymous>";function s_(e){try{return e&&"function"==typeof e&&e.name||o_}catch(Mh){return o_}}function l_(){if(!("fetch"in xw()))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(Mh){return!1}}function u_(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}var c_=xw(),d_={},p_={};function f_(e){if(!p_[e])switch(p_[e]=!0,e){case"console":!function(){if(!("console"in c_))return;Fw.forEach((function(e){e in c_.console&&Ww(c_.console,e,(function(t){return function(...n){m_("console",{args:n,level:e}),t&&t.apply(c_.console,n)}}))}))}();break;case"dom":!function(){if(!("document"in c_))return;var e=m_.bind(null,"dom"),t=x_(e,!0);c_.document.addEventListener("click",t,!1),c_.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{var n=c_[t]&&c_[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Ww(n,"addEventListener",(function(t){return function(n,r,i){if("click"===n||"keypress"==n)try{var a=this,o=a.__sentry_instrumentation_handlers__=a.__sentry_instrumentation_handlers__||{},s=o[n]=o[n]||{refCount:0};if(!s.handler){var l=x_(e);s.handler=l,t.call(this,n,l,i)}s.refCount+=1}catch(Mh){}return t.call(this,n,r,i)}})),Ww(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{var i=this,a=i.__sentry_instrumentation_handlers__||{},o=a[t];o&&(o.refCount-=1,o.refCount<=0&&(e.call(this,t,o.handler,r),o.handler=void 0,delete a[t]),0===Object.keys(a).length&&delete i.__sentry_instrumentation_handlers__)}catch(Mh){}return e.call(this,t,n,r)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in c_))return;var e=XMLHttpRequest.prototype;Ww(e,"open",(function(e){return function(...t){var n=this,r=t[1],i=n.__sentry_xhr__={method:Sw(t[0])?t[0].toUpperCase():t[0],url:t[1]};Sw(r)&&"POST"===i.method&&r.match(/sentry_key/)&&(n.__sentry_own_request__=!0);var a=function(){if(4===n.readyState){try{i.status_code=n.status}catch(Mh){}m_("xhr",{args:t,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:n})}};return"onreadystatechange"in n&&"function"==typeof n.onreadystatechange?Ww(n,"onreadystatechange",(function(e){return function(...t){return a(),e.apply(n,t)}})):n.addEventListener("readystatechange",a),e.apply(n,t)}})),Ww(e,"send",(function(e){return function(...t){return this.__sentry_xhr__&&void 0!==t[0]&&(this.__sentry_xhr__.body=t[0]),m_("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}();break;case"fetch":!function(){if(!function(){if(!l_())return!1;var e=xw();if(u_(e.fetch))return!0;let t=!1;var n=e.document;if(n&&"function"==typeof n.createElement)try{var r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(t=u_(r.contentWindow.fetch)),n.head.removeChild(r)}catch(i){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",i)}return t}())return;Ww(c_,"fetch",(function(e){return function(...t){var n={args:t,fetchData:{method:v_(t),url:g_(t)},startTimestamp:Date.now()};return m_("fetch",{...n}),e.apply(c_,t).then((e=>(m_("fetch",{...n,endTimestamp:Date.now(),response:e}),e)),(e=>{throw m_("fetch",{...n,endTimestamp:Date.now(),error:e}),e}))}}))}();break;case"history":!function(){if(e=xw(),t=e.chrome,n=t&&t.app&&t.app.runtime,r="history"in e&&!!e.history.pushState&&!!e.history.replaceState,n||!r)return;var e,t,n,r;var i=c_.onpopstate;function a(e){return function(...t){var n=t.length>2?t[2]:void 0;if(n){var r=y_,i=String(n);y_=i,m_("history",{from:r,to:i})}return e.apply(this,t)}}c_.onpopstate=function(...e){var t=c_.location.href,n=y_;if(y_=t,m_("history",{from:n,to:t}),i)try{return i.apply(this,e)}catch(r){}},Ww(c_.history,"pushState",a),Ww(c_.history,"replaceState",a)}();break;case"error":!function instrumentError(){k_=c_.onerror,c_.onerror=function(e,t,n,r,i){return m_("error",{column:r,error:i,line:n,msg:e,url:t}),!!k_&&k_.apply(this,arguments)}}();break;case"unhandledrejection":A_=c_.onunhandledrejection,c_.onunhandledrejection=function(e){return m_("unhandledrejection",e),!A_||A_.apply(this,arguments)};break;default:return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.warn("unknown instrumentation type:",e))}}function h_(e,t){d_[e]=d_[e]||[],d_[e].push(t),f_(e)}function m_(e,t){if(e&&d_[e])for(var n of d_[e]||[])try{n(t)}catch(Mh){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${s_(n)}\nError:`,Mh)}}function v_(e=[]){return"Request"in c_&&jw(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function g_(e=[]){return"string"==typeof e[0]?e[0]:"Request"in c_&&jw(e[0],Request)?e[0].url:String(e[0])}let y_;var b_=1e3;let w_,__;function x_(e,t=!1){return n=>{if(n&&__!==n&&!function(e){if("keypress"!==e.type)return!1;try{var t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(Mh){}return!0}(n)){var r="keypress"===n.type?"input":n.type;(void 0===w_||function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(Mh){}return!1}(__,n))&&(e({event:n,name:r,global:t}),__=n),clearTimeout(w_),w_=c_.setTimeout((()=>{w_=void 0}),b_)}}}let k_=null;let A_=null;function E_(){var e=xw(),t=e.crypto||e.msCrypto;if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");var n=t&&t.getRandomValues?()=>t.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function I_(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function S_(e){const{message:t,event_id:n}=e;if(t)return t;var r=I_(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function R_(e,t,n){var r=e.exception=e.exception||{},i=r.values=r.values||[],a=i[0]=i[0]||{};a.value||(a.value=t||""),a.type||(a.type=n||"Error")}function C_(e,t){var n=I_(e);if(n){var r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){var i={...r&&r.data,...t.data};n.mechanism.data=i}}}function O_(e){if(e&&e.__sentry_captured__)return!0;try{Jw(e,"__sentry_captured__",!0)}catch(t){}return!1}function D_(e){return Array.isArray(e)?e:[e]}function j_(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function T_(e,t=1/0,n=1/0){try{return M_("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function P_(e,t=3,n=100*1024){var r,i=T_(e,t);return r=i,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(r))>n?P_(e,t-1,n):i}function M_(e,t,n=1/0,r=1/0,i=function(){var e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[a,o]=i;if(null===t||["number","boolean","string"].includes(typeof t)&&("number"!=typeof(s=t)||s==s))return t;var s,l=function(e,t){try{return"domain"===e&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===e?"[DomainEmitter]":"undefined"!=typeof global&&t===global?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":function(e){return Cw(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t)?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?`[Function: ${s_(t)}]`:"symbol"==typeof t?`[${String(t)}]`:"bigint"==typeof t?`[BigInt: ${String(t)}]`:`[object ${Object.getPrototypeOf(t).constructor.name}]`}catch(n){return`**non-serializable** (${n})`}}(e,t);if(!l.startsWith("[object "))return l;if(t["__sentry_skip_normalization__"])return t;if(0===n)return l.replace("object ","");if(a(t))return"[Circular ~]";var u=t;if(u&&"function"==typeof u.toJSON)try{return M_("",u.toJSON(),n-1,r,i)}catch(m){}var c=Array.isArray(t)?[]:{};let d=0;var p=Zw(t);for(var f in p)if(Object.prototype.hasOwnProperty.call(p,f)){if(d>=r){c[f]="[MaxProperties ~]";break}var h=p[f];c[f]=M_(f,h,n-1,r,i),d+=1}return o(t),c}var L_;function $_(e){return new B_((t=>{t(e)}))}function N_(e){return new B_(((t,n)=>{n(e)}))}!function(e){e[e["PENDING"]=0]="PENDING";e[e["RESOLVED"]=1]="RESOLVED";e[e["REJECTED"]=2]="REJECTED"}(L_||(L_={}));class B_{__init(){this._state=L_.PENDING}__init2(){this._handlers=[]}constructor(e){B_.prototype.__init.call(this),B_.prototype.__init2.call(this),B_.prototype.__init3.call(this),B_.prototype.__init4.call(this),B_.prototype.__init5.call(this),B_.prototype.__init6.call(this);try{e(this._resolve,this._reject)}catch(Mh){this._reject(Mh)}}then(e,t){return new B_(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(Mh){r(Mh)}else n(t)},e=>{if(t)try{n(t(e))}catch(Mh){r(Mh)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new B_(((t,n)=>{let r,i;return this.then((t=>{i=!1,r=t,e&&e()}),(t=>{i=!0,r=t,e&&e()})).then((()=>{i?n(r):t(r)}))}))}__init3(){this._resolve=e=>{this._setResult(L_.RESOLVED,e)}}__init4(){this._reject=e=>{this._setResult(L_.REJECTED,e)}}__init5(){this._setResult=(e,t)=>{this._state===L_.PENDING&&(Dw(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init6(){this._executeHandlers=()=>{if(this._state!==L_.PENDING){var e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===L_.RESOLVED&&e[1](this._value),this._state===L_.REJECTED&&e[2](this._value),e[0]=!0)}))}}}}function U_(e){var t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return N_(new SentryError("Not adding Promise because buffer limit was reached."));var i=r();return-1===t.indexOf(i)&&t.push(i),i.then((()=>n(i))).then(null,(()=>n(i).then(null,(()=>{})))),i},drain:function(e){return new B_(((n,r)=>{let i=t.length;if(!i)return n(!0);var a=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{$_(e).then((()=>{--i||(clearTimeout(a),n(!0))}),r)}))}))}}}function F_(e){if(!e)return{};var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+r}}var z_=["fatal","error","warning","log","info","debug"];var q_={nowSeconds:()=>Date.now()/1e3};var V_=j_()?function(){try{return(e=module,t="perf_hooks",e.require(t)).performance}catch(n){return}var e,t}():function(){const{performance:e}=xw();if(e&&e.now)return{now:()=>e.now(),timeOrigin:Date.now()-e.now()}}(),Q_=void 0===V_?q_:{nowSeconds:()=>(V_.timeOrigin+V_.now())/1e3},H_=q_.nowSeconds.bind(q_),G_=Q_.nowSeconds.bind(Q_);function W_(e,t=[]){return[e,t]}function J_(e,t){const[n,r]=e;return[n,[...r,t]]}function K_(e,t){e[1].forEach((e=>{var n=e[0].type;t(e,n)}))}function Y_(e,t){return(t||new TextEncoder).encode(e)}function Z_(e,t){const[n,r]=e;let i=JSON.stringify(n);function a(e){"string"==typeof i?i="string"==typeof e?i+e:[Y_(i,t),e]:i.push("string"==typeof e?Y_(e,t):e)}for(var o of r){const[e,t]=o;if(a(`\n${JSON.stringify(e)}\n`),"string"==typeof t||t instanceof Uint8Array)a(t);else{let e;try{e=JSON.stringify(t)}catch(Mh){e=JSON.stringify(T_(t))}a(e)}}return"string"==typeof i?i:function(e){var t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(var i of e)n.set(i,r),r+=i.length;return n}(i)}function X_(e,t){var n="string"==typeof e.data?Y_(e.data,t):e.data;return[n_({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}(()=>{const{performance:e}=xw();if(e&&e.now){var t=3600*1e3,n=e.now(),r=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,a=i<t,o=e.timing&&e.timing.navigationStart,s="number"==typeof o?Math.abs(o+n-r):t;(a||s<t)&&(i<=s&&e.timeOrigin)}})();var ex={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default"};function tx(e){return ex[e]}var nx=60*1e3;function rx(e,{statusCode:t,headers:n},r=Date.now()){var i={...e},a=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(a)for(var s of a.trim().split(",")){const[e,t]=s.split(":",2);var l=parseInt(e,10),u=1e3*(isNaN(l)?60:l);if(t)for(var c of t.split(";"))i[c]=r+u;else i.all=r+u}else o?i.all=r+function(e,t=Date.now()){var n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(`${e}`);return isNaN(r)?nx:r-t}(o,r):429===t&&(i.all=r+60*1e3);return i}function ix(e){var t=G_(),n={sid:E_(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return n_({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&ax(n,e),n}function ax(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||G_(),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:E_()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{var n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}var ox=100;class sx{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(e){var t=new sx;return e&&(t._breadcrumbs=[...e._breadcrumbs],t._tags={...e._tags},t._extra={...e._extra},t._contexts={...e._contexts},t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=[...e._eventProcessors],t._requestSession=e._requestSession,t._attachments=[...e._attachments]),t}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&ax(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts={...this._contexts,[e]:t},this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){var e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if("function"==typeof e){var t=e(this);return t instanceof sx?t:this}return e instanceof sx?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):Cw(e)&&(this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(e,t){var n="number"==typeof t?t:ox;if(n<=0)return this;var r={timestamp:H_(),...e};return this._breadcrumbs=[...this._breadcrumbs,r].slice(-n),this._notifyScopeListeners(),this}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,t={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};var n=this._span.transaction&&this._span.transaction.name;n&&(e.tags={transaction:n,...e.tags})}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...lx(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}_notifyEventProcessors(e,t,n,r=0){return new B_(((i,a)=>{var o=e[r];if(null===t||"function"!=typeof o)i(t);else{var s=o({...t},n);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&o.id&&null===s&&Vw.log(`Event processor "${o.id}" dropped event`),Dw(s)?s.then((t=>this._notifyEventProcessors(e,t,n,r+1).then(i))).then(null,a):this._notifyEventProcessors(e,s,n,r+1).then(i).then(null,a)}}))}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}_applyFingerprint(e){e.fingerprint=e.fingerprint?D_(e.fingerprint):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function lx(){return kw("globalEventProcessors",(()=>[]))}function ux(e){lx().push(e)}var cx=4,dx=100;class px{__init(){this._stack=[{}]}constructor(e,t=new sx,n=cx){this._version=n,px.prototype.__init.call(this),this.getStackTop().scope=t,e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){var e=sx.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){var n=this._lastEventId=t&&t.event_id?t.event_id:E_(),r=new Error("Sentry syntheticException");return this._withClient(((i,a)=>{i.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},a)})),n}captureMessage(e,t,n){var r=this._lastEventId=n&&n.event_id?n.event_id:E_(),i=new Error(e);return this._withClient(((a,o)=>{a.captureMessage(e,t,{originalException:e,syntheticException:i,...n,event_id:r},o)})),r}captureEvent(e,t){var n=t&&t.event_id?t.event_id:E_();return"transaction"!==e.type&&(this._lastEventId=n),this._withClient(((r,i)=>{r.captureEvent(e,{...t,event_id:n},i)})),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:r}=this.getStackTop();if(!n||!r)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:a=dx}=r.getOptions&&r.getOptions()||{};if(!(a<=0)){var o={timestamp:H_(),...e},s=i?zw((()=>i(o,t))):o;null!==s&&n.addBreadcrumb(s,a)}}setUser(e){var t=this.getScope();t&&t.setUser(e)}setTags(e){var t=this.getScope();t&&t.setTags(e)}setExtras(e){var t=this.getScope();t&&t.setExtras(e)}setTag(e,t){var n=this.getScope();n&&n.setTag(e,t)}setExtra(e,t){var n=this.getScope();n&&n.setExtra(e,t)}setContext(e,t){var n=this.getScope();n&&n.setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();t&&n&&e(t)}run(e){var t=hx(this);try{e(this)}finally{hx(t)}}getIntegration(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(n){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){return this._callExtensionMethod("startTransaction",e,t)}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){var e=this.getStackTop(),t=e&&e.scope,n=t&&t.getSession();n&&function(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),ax(e,n)}(n),this._sendSessionUpdate(),t&&t.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:r,environment:i}=n&&n.getOptions()||{};var a=xw();const{userAgent:o}=a.navigator||{};var s=ix({release:r,environment:i,...t&&{user:t.getUser()},...o&&{userAgent:o},...e});if(t){var l=t.getSession&&t.getSession();l&&"ok"===l.status&&ax(l,{status:"exited"}),this.endSession(),t.setSession(s)}return s}shouldSendDefaultPii(){var e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop();if(e){var n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}}_withClient(e){const{scope:t,client:n}=this.getStackTop();n&&e(n,t)}_callExtensionMethod(e,...t){var n=fx().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function fx(){var e=xw();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function hx(e){var t=fx(),n=gx(t);return yx(t,e),n}function mx(){var e=fx();return vx(e)&&!gx(e).isOlderThan(cx)||yx(e,new px),j_()?function(e){try{var t=fx().__SENTRY__,n=t&&t.extensions&&t.extensions.domain&&t.extensions.domain.active;if(!n)return gx(e);if(!vx(n)||gx(n).isOlderThan(cx)){var r=gx(e).getStackTop();yx(n,new px(r.client,sx.clone(r.scope)))}return gx(n)}catch(i){return gx(e)}}(e):gx(e)}function vx(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function gx(e){return kw("hub",(()=>new px),e)}function yx(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}function bx(e,t){return mx().captureException(e,{captureContext:t})}function wx(e){mx().withScope(e)}var _x="7";function xx(e,t){return n={sentry_key:e.publicKey,sentry_version:_x,...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}function kx(e,t={}){var n="string"==typeof t?t:t.tunnel,r="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${function(e){var t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${xx(e,r)}`}function Ax(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Ex(e,t,n,r){var i=Ax(n),a=e.type||"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);var o=function(e,t,n,r){var i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&{dsn:Lw(r)},..."transaction"===e.type&&i&&{trace:n_({...i})}}}(e,i,r,t);return delete e.sdkProcessingMetadata,W_(o,[[{type:a},e]])}var Ix=[];function Sx(e){var t=e.defaultIntegrations||[],n=e.integrations;let r;t.forEach((e=>{e.isDefaultInstance=!0})),r=Array.isArray(n)?[...t,...n]:"function"==typeof n?D_(n(t)):t;var i=function(e){var t={};return e.forEach((e=>{const{name:n}=e;var r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.values(t)}(r),a=i.findIndex((e=>"Debug"===e.name));if(-1!==a){const[e]=i.splice(a,1);i.push(e)}return i}var Rx="Not capturing exception because it's already been captured.";class Cx{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}constructor(e){if(Cx.prototype.__init.call(this),Cx.prototype.__init2.call(this),Cx.prototype.__init3.call(this),Cx.prototype.__init4.call(this),this._options=e,e.dsn){this._dsn=Nw(e.dsn);var t=kx(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.warn("No DSN provided, client will not do anything.")}captureException(e,t,n){if(O_(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.log(Rx));let r=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{r=e}))),r}captureMessage(e,t,n,r){let i=n&&n.event_id;var a=Rw(e)?this.eventFromMessage(String(e),t,n):this.eventFromException(e,n);return this._process(a.then((e=>this._captureEvent(e,n,r))).then((e=>{i=e}))),i}captureEvent(e,t,n){if(t&&t.originalException&&O_(t.originalException))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.log(Rx));let r=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((e=>{r=e}))),r}captureSession(e){this._isEnabled()?"string"!=typeof e.release?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),ax(e,{init:!1})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getTransport(){return this._transport}flush(e){var t=this._transport;return t?this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e)))):$_(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,e)))}setupIntegrations(){var e,t;this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=(e=this._options.integrations,t={},e.forEach((e=>{t[e.name]=e,-1===Ix.indexOf(e.name)&&(e.setupOnce(ux,mx),Ix.push(e.name),("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.log(`Integration installed: ${e.name}`))})),t),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}sendEvent(e,t={}){if(this._dsn){let r=Ex(e,this._dsn,this._options._metadata,this._options.tunnel);for(var n of t.attachments||[])r=J_(r,X_(n,this._options.transportOptions&&this._options.transportOptions.textEncoder));this._sendEnvelope(r)}}sendSession(e){if(this._dsn){var t=function(e,t,n,r){var i=Ax(n);return W_({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!r&&{dsn:Lw(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}}recordDroppedEvent(e,t){if(this._options.sendClientReports){var n=`${e}:${t}`;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}_updateSessionFromEvent(e,t){let n=!1,r=!1;var i=t.exception&&t.exception.values;if(i)for(var a of(r=!0,i)){var o=a.mechanism;if(o&&!1===o.handled){n=!0;break}}var s="ok"===e.status;(s&&0===e.errors||s&&n)&&(ax(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new B_((t=>{let n=0;var r=1,i=setInterval((()=>{0==this._numProcessing?(clearInterval(i),t(!0)):(n+=r,e&&n>=e&&(clearInterval(i),t(!1)))}),r)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._dsn}_prepareEvent(e,t,n){const{normalizeDepth:r=3,normalizeMaxBreadth:i=1e3}=this.getOptions();var a={...e,event_id:e.event_id||t.event_id||E_(),timestamp:e.timestamp||H_()};this._applyClientOptions(a),this._applyIntegrationsMetadata(a);let o=n;t.captureContext&&(o=sx.clone(o).update(t.captureContext));let s=$_(a);if(o){var l=[...t.attachments||[],...o.getAttachments()];l.length&&(t.attachments=l),s=o.applyToEvent(a,t)}return s.then((e=>"number"==typeof r&&r>0?this._normalizeEvent(e,r,i):e))}_normalizeEvent(e,t,n){if(!e)return null;var r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:T_(e.data,t,n)}})))},...e.user&&{user:T_(e.user,t,n)},...e.contexts&&{contexts:T_(e.contexts,t,n)},...e.extra&&{extra:T_(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=T_(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map((e=>(e.data&&(e.data=T_(e.data,t,n)),e)))),r}_applyClientOptions(e){var t=this.getOptions();const{environment:n,release:r,dist:i,maxValueLength:a=250}=t;"environment"in e||(e.environment="environment"in t?n:"production"),void 0===e.release&&void 0!==r&&(e.release=r),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=Qw(e.message,a));var o=e.exception&&e.exception.values&&e.exception.values[0];o&&o.value&&(o.value=Qw(o.value,a));var s=e.request;s&&s.url&&(s.url=Qw(s.url,a))}_applyIntegrationsMetadata(e){var t=Object.keys(this._integrations);t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__){var t=e;"log"===t.logLevel?Vw.log(t.message):Vw.warn(t)}}))}_processEvent(e,t,n){const{beforeSend:r,sampleRate:i}=this.getOptions();if(!this._isEnabled())return N_(new SentryError("SDK not enabled, will not capture event.","log"));var a="transaction"===e.type;return!a&&"number"==typeof i&&Math.random()>i?(this.recordDroppedEvent("sample_rate","error"),N_(new SentryError(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"))):this._prepareEvent(e,t,n).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",e.type||"error"),new SentryError("An event processor returned null, will not send event.","log");return t.data&&!0===t.data.__sentry__||a||!r?n:function(e){var t="`beforeSend` method has to return `null` or a valid event.";if(Dw(e))return e.then((e=>{if(!Cw(e)&&null!==e)throw new SentryError(t);return e}),(e=>{throw new SentryError(`beforeSend rejected with ${e}`)}));if(!Cw(e)&&null!==e)throw new SentryError(t);return e}(r(n,t))})).then((r=>{if(null===r)throw this.recordDroppedEvent("before_send",e.type||"error"),new SentryError("`beforeSend` returned `null`, will not send event.","log");var i=n&&n.getSession();!a&&i&&this._updateSessionFromEvent(i,r);var o=r.transaction_info;if(a&&o&&r.transaction!==e.transaction){var s="custom";r.transaction_info={...o,source:s,changes:[...o.changes,{source:s,timestamp:r.timestamp,propagations:o.propagations}]}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof SentryError)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new SentryError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing+=1,e.then((e=>(this._numProcessing-=1,e)),(e=>(this._numProcessing-=1,e)))}_sendEnvelope(e){this._transport&&this._dsn?this._transport.send(e).then(null,(e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.error("Error while sending event:",e)})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.error("Transport disabled")}_clearOutcomes(){var e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e[t]}}))}}var Ox=30;function Dx(e,t,n=U_(e.bufferSize||Ox)){let r={};return{send:function(i){var a=[];if(K_(i,((t,n)=>{var i=tx(n);!function(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}(r,i)?a.push(t):e.recordDroppedEvent("ratelimit_backoff",i)})),0===a.length)return $_();var o=W_(i[0],a),s=t=>{K_(o,((n,r)=>{e.recordDroppedEvent(t,tx(r))}))};return n.add((()=>t({body:Z_(o,e.textEncoder)}).then((e=>{void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=rx(r,e)}),(e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.error("Failed while sending event:",e),s("network_error")})))).then((e=>e),(e=>{if(e instanceof SentryError)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.error("Skipped sending event because buffer is full."),s("queue_overflow"),$_();throw e}))},flush:e=>n.drain(e)}}var jx="7.14.2";let Tx;class Px{constructor(){Px.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=Px.id}setupOnce(){Tx=Function.prototype.toString,Function.prototype.toString=function(...e){var t=Yw(this)||this;return Tx.apply(t,e)}}}Px.__initStatic();var Mx=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];class Lx{static __initStatic(){this.id="InboundFilters"}__init(){this.name=Lx.id}constructor(e={}){this._options=e,Lx.prototype.__init.call(this)}setupOnce(e,t){var n=e=>{var n=t();if(n){var r=n.getIntegration(Lx);if(r){var i=n.getClient(),a=i?i.getOptions():{},o=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...Mx],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(r._options,a);return function(e,t){if(t.ignoreInternal&&function _isSentryError(e){try{return"SentryError"===e.exception.values[0].type}catch(Mh){}return!1}(e))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${S_(e)}`),!0;if(function _isIgnoredError(e,t){if(!t||!t.length)return!1;return function(e){if(e.message)return[e.message];if(e.exception)try{const{type:t="",value:n=""}=e.exception.values&&e.exception.values[0]||{};return[`${n}`,`${t}: ${n}`]}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.error(`Cannot extract message for event ${S_(e)}`),[]}return[]}(e).some((e=>t.some((t=>Gw(e,t)))))}(e,t.ignoreErrors))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${S_(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;var n=$x(e);return!!n&&t.some((e=>Gw(n,e)))}(e,t.denyUrls))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${S_(e)}.\nUrl: ${$x(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;var n=$x(e);return!n||t.some((e=>Gw(n,e)))}(e,t.allowUrls))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${S_(e)}.\nUrl: ${$x(e)}`),!0;return!1}(e,o)?null:e}}return e};n.id=this.name,e(n)}}function $x(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(Mh){}return t?function(e=[]){for(let n=e.length-1;n>=0;n--){var t=e[n];if(t&&"<anonymous>"!==t.filename&&"[native code]"!==t.filename)return t.filename||null}return null}(t):null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.error(`Cannot extract url for event ${S_(e)}`),null}}function exceptionFromError(e,t){var n=Nx(e,t),r={type:t&&t.name,value:Ux(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function eventFromError(e,t){return{exception:{values:[exceptionFromError(e,t)]}}}function Nx(e,t){var n=t.stacktrace||t.stack||"",r=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(Bx.test(e.message))return 1}return 0}(t);try{return e(n,r)}catch(Mh){}return[]}Lx.__initStatic();var Bx=/Minified React error #\d+;/i;function Ux(e){var t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function Fx(e,t,n,r,i){let a;if(Iw(t)&&t.error)return eventFromError(e,t.error);if(isDOMError(t)||Ew(t,"DOMException")){var o=t;if("stack"in t)a=eventFromError(e,t);else{var s=o.name||(isDOMError(o)?"DOMError":"DOMException"),l=o.message?`${s}: ${o.message}`:s;a=zx(e,l,n,r),R_(a,l)}return"code"in o&&(a.tags={...a.tags,"DOMException.code":`${o.code}`}),a}return isError(t)?eventFromError(e,t):Cw(t)||Ow(t)?(a=function(e,t,n,r){var i=mx().getClient(),a=i&&i.getOptions().normalizeDepth,o={exception:{values:[{type:Ow(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:`Non-Error ${r?"promise rejection":"exception"} captured with keys: ${t_(t)}`}]},extra:{__serialized__:P_(t,a)}};if(n){var s=Nx(e,n);s.length&&(o.exception.values[0].stacktrace={frames:s})}return o}(e,t,n,i),C_(a,{synthetic:!0}),a):(a=zx(e,t,n,r),R_(a,`${t}`,void 0),C_(a,{synthetic:!0}),a)}function zx(e,t,n,r){var i={message:t};if(r&&n){var a=Nx(e,n);a.length&&(i.exception={values:[{value:t,stacktrace:{frames:a}}]})}return i}var qx="Breadcrumbs";class Vx{static __initStatic(){this.id=qx}__init(){this.name=Vx.id}constructor(e){Vx.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){this.options.console&&h_("console",Qx),this.options.dom&&h_("dom",function(e){function t(t){let n,r="object"==typeof e?e.serializeAttribute:void 0;"string"==typeof r&&(r=[r]);try{n=t.event.target?Tw(t.event.target,r):Tw(t.event,r)}catch(Mh){n="<unknown>"}0!==n.length&&mx().addBreadcrumb({category:`ui.${t.name}`,message:n},{event:t.event,name:t.name,global:t.global})}return t}(this.options.dom)),this.options.xhr&&h_("xhr",Hx),this.options.fetch&&h_("fetch",Gx),this.options.history&&h_("history",Wx)}}function Qx(e){var t,n={category:"console",data:{arguments:e.args,logger:"console"},level:(t=e.level,"warn"===t?"warning":z_.includes(t)?t:"log"),message:Hw(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;n.message=`Assertion failed: ${Hw(e.args.slice(1)," ")||"console.assert"}`,n.data.arguments=e.args.slice(1)}mx().addBreadcrumb(n,{input:e.args,level:e.level})}function Hx(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;const{method:t,url:n,status_code:r,body:i}=e.xhr.__sentry_xhr__||{};mx().addBreadcrumb({category:"xhr",data:{method:t,url:n,status_code:r},type:"http"},{xhr:e.xhr,input:i})}else;}function Gx(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?mx().addBreadcrumb({category:"fetch",data:e.fetchData,level:"error",type:"http"},{data:e.error,input:e.args}):mx().addBreadcrumb({category:"fetch",data:{...e.fetchData,status_code:e.response.status},type:"http"},{input:e.args,response:e.response})))}function Wx(e){var t=xw();let n=e.from,r=e.to;var i=F_(t.location.href);let a=F_(n);var o=F_(r);a.path||(a=i),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),i.protocol===a.protocol&&i.host===a.host&&(n=a.relative),mx().addBreadcrumb({category:"navigation",data:{from:n,to:r}})}Vx.__initStatic();var Jx=xw();class Kx extends Cx{constructor(e){e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:jx}],version:jx},super(e),e.sendClientReports&&Jx.document&&Jx.document.addEventListener("visibilitychange",(()=>{"hidden"===Jx.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function(e,t,n,r){var i=Fx(e,t,n&&n.syntheticException||void 0,r);return C_(i),i.level="error",n&&n.event_id&&(i.event_id=n.event_id),$_(i)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return function(e,t,n="info",r,i){var a=zx(e,t,r&&r.syntheticException||void 0,i);return a.level=n,r&&r.event_id&&(a.event_id=r.event_id),$_(a)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}sendEvent(e,t){var n=this.getIntegrationById(qx);n&&n.options&&n.options.sentry&&mx().addBreadcrumb({category:`sentry.${"transaction"===e.type?"transaction":"event"}`,event_id:e.event_id,level:e.level,message:S_(e)},{event:e}),super.sendEvent(e,t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){var e=this._clearOutcomes();if(0!==e.length)if(this._dsn){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.log("Sending outcomes:",e);var t,n,r,i=kx(this._dsn,this._options),a=(t=e,W_((n=this._options.tunnel&&Lw(this._dsn))?{dsn:n}:{},[[{type:"client_report"},{timestamp:r||H_(),discarded_events:t}]]));try{var o=xw();if("[object Navigator]"===Object.prototype.toString.call(o&&o.navigator)&&"function"==typeof o.navigator.sendBeacon&&!this._options.transportOptions)o.navigator.sendBeacon.bind(o.navigator)(i,Z_(a));else this._sendEnvelope(a)}catch(Mh){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.error(Mh)}}else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.log("No dsn provided, will not send outcomes");else("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.log("No outcomes to send")}}var Yx=xw();let Zx;function Xx(e,t=function(){if(Zx)return Zx;if(u_(Yx.fetch))return Zx=Yx.fetch.bind(Yx);var e=Yx.document;let t=Yx.fetch;if(e&&"function"==typeof e.createElement)try{var n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);var r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(Mh){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",Mh)}return Zx=t.bind(Yx)}()){return Dx(e,(function(n){var r={body:n.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n.body.length<=65536,...e.fetchOptions};return t(e.url,r).then((e=>({statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}))}var ek=4;function tk(e){return Dx(e,(function(t){return new B_(((n,r)=>{var i=new XMLHttpRequest;for(var a in i.onerror=r,i.onreadystatechange=()=>{i.readyState===ek&&n({statusCode:i.status,headers:{"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")}})},i.open("POST",e.url),e.headers)Object.prototype.hasOwnProperty.call(e.headers,a)&&i.setRequestHeader(a,e.headers[a]);i.send(t.body)}))}))}var nk="?";function rk(e,t,n,r){var i={filename:e,function:t,in_app:!0};return void 0!==n&&(i.lineno=n),void 0!==r&&(i.colno=r),i}var ik=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ak=/\((\S*)(?::(\d+))(?::(\d+))\)/,ok=[30,e=>{var t=ik.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){var n=ak.exec(t[2]);n&&(t[2]=n[1],t[3]=n[2],t[4]=n[3])}const[e,r]=pk(t[1]||nk,t[2]);return rk(r,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],sk=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,lk=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,uk=[50,e=>{var t=sk.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){var n=lk.exec(t[3]);n&&(t[1]=t[1]||"eval",t[3]=n[1],t[4]=n[2],t[5]="")}let e=t[3],r=t[1]||nk;return[r,e]=pk(r,e),rk(e,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],ck=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,dk=a_(...[ok,uk,[40,e=>{var t=ck.exec(e);return t?rk(t[2],t[1]||nk,+t[3],t[4]?+t[4]:void 0):void 0}]]),pk=(e,t)=>{var n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:nk,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};let fk=0;function shouldIgnoreOnError(){return fk>0}function ignoreNextOnError(){fk+=1,setTimeout((()=>{fk-=1}))}function hk(e,t={},n){if("function"!=typeof e)return e;try{var r=e.__sentry_wrapped__;if(r)return r;if(Yw(e))return e}catch(Mh){return e}var i=function(){var r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var i=r.map((e=>hk(e,t)));return e.apply(this,i)}catch(a){throw ignoreNextOnError(),wx((e=>{e.addEventProcessor((e=>(t.mechanism&&(R_(e,void 0,void 0),C_(e,t.mechanism)),e.extra={...e.extra,arguments:r},e))),bx(a)})),a}};try{for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])}catch(o){}Kw(i,e),Jw(e,"__sentry_wrapped__",i);try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get:()=>e.name})}catch(o){}return i}class mk{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=mk.id}__init2(){this._installFunc={onerror:vk,onunhandledrejection:gk}}constructor(e){mk.prototype.__init.call(this),mk.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...e}}setupOnce(){Error.stackTraceLimit=50;var e,t=this._options;for(var n in t){var r=this._installFunc[n];r&&t[n]&&(e=n,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.log(`Global Handler attached: ${e}`),r(),this._installFunc[n]=void 0)}}}function vk(){h_("error",(e=>{const[t,n,r]=wk();if(!t.getIntegration(mk))return;const{msg:i,url:a,line:o,column:s,error:l}=e;if(!(shouldIgnoreOnError()||l&&l.__sentry_own_request__)){var u=void 0===l&&Sw(i)?function _eventFromIncompleteOnError(e,t,n,r){var i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let a=Iw(e)?e.message:e,o="Error";var s=a.match(i);s&&(o=s[1],a=s[2]);return yk({exception:{values:[{type:o,value:a}]}},t,n,r)}(i,a,o,s):yk(Fx(n,l||i,void 0,r,!1),a,o,s);u.level="error",bk(t,l,u,"onerror")}}))}function gk(){h_("unhandledrejection",(e=>{const[t,n,r]=wk();if(!t.getIntegration(mk))return;let i=e;try{"reason"in e?i=e.reason:"detail"in e&&"reason"in e.detail&&(i=e.detail.reason)}catch(o){}if(shouldIgnoreOnError()||i&&i.__sentry_own_request__)return!0;var a=Rw(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:Fx(n,i,void 0,r,!0);a.level="error",bk(t,i,a,"onunhandledrejection")}))}function yk(e,t,n,r){var i=e.exception=e.exception||{},a=i.values=i.values||[],o=a[0]=a[0]||{},s=o.stacktrace=o.stacktrace||{},l=s.frames=s.frames||[],u=isNaN(parseInt(r,10))?void 0:r,c=isNaN(parseInt(n,10))?void 0:n,d=Sw(t)&&t.length>0?t:function(){var e=xw();try{return e.document.location.href}catch(t){return""}}();return 0===l.length&&l.push({colno:u,filename:d,function:"?",in_app:!0,lineno:c}),e}function bk(e,t,n,r){C_(n,{handled:!1,type:r}),e.captureEvent(n,{originalException:t})}function wk(){var e=mx(),t=e.getClient(),n=t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[e,n.stackParser,n.attachStacktrace]}mk.__initStatic();var _k=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class xk{static __initStatic(){this.id="TryCatch"}__init(){this.name=xk.id}constructor(e){xk.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){var e=xw();this._options.setTimeout&&Ww(e,"setTimeout",kk),this._options.setInterval&&Ww(e,"setInterval",kk),this._options.requestAnimationFrame&&Ww(e,"requestAnimationFrame",Ak),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&Ww(XMLHttpRequest.prototype,"send",Ek);var t=this._options.eventTarget;t&&(Array.isArray(t)?t:_k).forEach(Ik)}}function kk(e){return function(...t){var n=t[0];return t[0]=hk(n,{mechanism:{data:{function:s_(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}}function Ak(e){return function(t){return e.apply(this,[hk(t,{mechanism:{data:{function:"requestAnimationFrame",handler:s_(e)},handled:!0,type:"instrument"}})])}}function Ek(e){return function(...t){var n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&Ww(n,e,(function(t){var n={mechanism:{data:{function:e,handler:s_(t)},handled:!0,type:"instrument"}},r=Yw(t);return r&&(n.mechanism.data.handler=s_(r)),hk(t,n)}))})),e.apply(this,t)}}function Ik(e){var t=xw(),n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Ww(n,"addEventListener",(function(t){return function(n,r,i){try{"function"==typeof r.handleEvent&&(r.handleEvent=hk(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:s_(r),target:e},handled:!0,type:"instrument"}}))}catch(a){}return t.apply(this,[n,hk(r,{mechanism:{data:{function:"addEventListener",handler:s_(r),target:e},handled:!0,type:"instrument"}}),i])}})),Ww(n,"removeEventListener",(function(e){return function(t,n,r){var i=n;try{var a=i&&i.__sentry_wrapped__;a&&e.call(this,t,a,r)}catch(Mh){}return e.call(this,t,i,r)}})))}xk.__initStatic();var Sk="cause",Rk=5;class Ck{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=Ck.id}constructor(e={}){Ck.prototype.__init.call(this),this._key=e.key||Sk,this._limit=e.limit||Rk}setupOnce(){var e=mx().getClient();e&&ux(((t,n)=>{var r=mx().getIntegration(Ck);return r?function(e,t,n,r,i){if(!(r.exception&&r.exception.values&&i&&jw(i.originalException,Error)))return r;var a=Ok(e,n,i.originalException,t);return r.exception.values=[...a,...r.exception.values],r}(e.getOptions().stackParser,r._key,r._limit,t,n):t}))}}function Ok(e,t,n,r,i=[]){if(!jw(n[r],Error)||i.length+1>=t)return i;var a=exceptionFromError(e,n[r]);return Ok(e,t,n[r],r,[a,...i])}Ck.__initStatic();var Dk=xw();class jk{constructor(){jk.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=jk.id}setupOnce(){ux((e=>{if(mx().getIntegration(jk)){if(!Dk.navigator&&!Dk.location&&!Dk.document)return e;var t=e.request&&e.request.url||Dk.location&&Dk.location.href;const{referrer:r}=Dk.document||{},{userAgent:i}=Dk.navigator||{};var n={...t&&{url:t},headers:{...e.request&&e.request.headers,...r&&{Referer:r},...i&&{"User-Agent":i}}};return{...e,request:n}}return e}))}}jk.__initStatic();class Tk{constructor(){Tk.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=Tk.id}setupOnce(e,t){var n=e=>{var n=t().getIntegration(Tk);if(n){try{if(function(e,t){if(!t)return!1;if(function(e,t){var n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!Mk(e,t))return!1;if(!Pk(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){var n=Lk(t),r=Lk(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!Mk(e,t))return!1;if(!Pk(e,t))return!1;return!0}(e,t))return!0;return!1}(e,n._previousEvent))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(r){return n._previousEvent=e}return n._previousEvent=e}return e};n.id=this.name,e(n)}}function Pk(e,t){let n=$k(e),r=$k(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let o=0;o<r.length;o++){var i=r[o],a=n[o];if(i.filename!==a.filename||i.lineno!==a.lineno||i.colno!==a.colno||i.function!==a.function)return!1}return!0}function Mk(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(i){return!1}}function Lk(e){return e.exception&&e.exception.values&&e.exception.values[0]}function $k(e){var t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(n){return}}Tk.__initStatic();var Nk=[new Lx,new Px,new xk,new Vx,new mk,new Ck,new Tk,new jk];function Bk(e={}){if(void 0===e.defaultIntegrations&&(e.defaultIntegrations=Nk),void 0===e.release){var t=xw();t.SENTRY_RELEASE&&t.SENTRY_RELEASE.id&&(e.release=t.SENTRY_RELEASE.id)}void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);var n,r={...e,stackParser:(n=e.stackParser||dk,Array.isArray(n)?a_(...n):n),integrations:Sx(e),transport:e.transport||(l_()?Xx:tk)};!function(e,t){!0===t.debug&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?Vw.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));var n=mx(),r=n.getScope();r&&r.update(t.initialScope);var i=new e(t);n.bindClient(i)}(Kx,r),e.autoSessionTracking&&function(){if(void 0===xw().document)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&Vw.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));var e=mx();if(!e.captureSession)return;Uk(e),h_("history",(({from:e,to:t})=>{void 0!==e&&e!==t&&Uk(mx())}))}()}function Uk(e){e.startSession({ignoreDuration:!0}),e.captureSession()}function Fk(e,t,...n){if(e in t){let r=t[e];return"function"==typeof r?r(...n):r}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map((e=>`"${e}"`)).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Fk),r}var zk,qk=((zk=qk||{})[zk.None=0]="None",zk[zk.RenderStrategy=1]="RenderStrategy",zk[zk.Static=2]="Static",zk),Vk=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Vk||{});function Qk({visible:e=!0,features:t=0,ourProps:n,theirProps:r,...i}){var a;let o=function(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},n={};for(let r of e)for(let e in r)e.startsWith("on")&&"function"==typeof r[e]?(null!=n[e]||(n[e]=[]),n[e].push(r[e])):t[e]=r[e];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map((e=>[e,void 0]))));for(let r in n)Object.assign(t,{[r](e,...t){let i=n[r];for(let n of i){if(e instanceof Event&&e.defaultPrevented)return;n(e,...t)}}});return t}(r,n),s=Object.assign(i,{props:o});if(e||2&t&&o.static)return Hk(s);if(1&t){return Fk(null==(a=o.unmount)||a?0:1,{0:()=>null,1:()=>Hk({...i,props:{...o,hidden:!0,style:{display:"none"}}})})}return Hk(s)}function Hk({props:e,attrs:t,slots:n,slot:r,name:i}){var a;let{as:o,...s}=Jk(e,["unmount","static"]),l=null==(a=n.default)?void 0:a.call(n,r),u={};if(r){let e=!1,t=[];for(let[n,i]of Object.entries(r))"boolean"==typeof i&&(e=!0),!0===i&&t.push(n);e&&(u["data-headlessui-state"]=t.join(" "))}if("template"===o){if(l=Gk(null!=l?l:[]),Object.keys(s).length>0||Object.keys(t).length>0){let[e,...n]=null!=l?l:[];if(!function(e){return null!=e&&("string"==typeof e.type||"object"==typeof e.type||"function"==typeof e.type)}(e)||n.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${i} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(s).concat(Object.keys(t)).sort(((e,t)=>e.localeCompare(t))).map((e=>`  - ${e}`)).join(`\n`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>`  - ${e}`)).join(`\n`)].join(`\n`));return ao(e,Object.assign({},s,u))}return Array.isArray(l)&&1===l.length?l[0]:l}return Bo(o,Object.assign({},s,u),l)}function Gk(e){return e.flatMap((e=>e.type===Ua?Gk(e.children):[e]))}function Wk(e){let t=Object.assign({},e);for(let n in t)void 0===t[n]&&delete t[n];return t}function Jk(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}let Kk=0;function Yk(){return++Kk}var Zk,Xk=((Zk=Xk||{}).Space=" ",Zk.Enter="Enter",Zk.Escape="Escape",Zk.Backspace="Backspace",Zk.Delete="Delete",Zk.ArrowLeft="ArrowLeft",Zk.ArrowUp="ArrowUp",Zk.ArrowRight="ArrowRight",Zk.ArrowDown="ArrowDown",Zk.Home="Home",Zk.End="End",Zk.PageUp="PageUp",Zk.PageDown="PageDown",Zk.Tab="Tab",Zk);var eA=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(eA||{});function tA(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),i=null!=r?r:-1,a=(()=>{switch(e.focus){case 0:return n.findIndex((e=>!t.resolveDisabled(e)));case 1:{let e=n.slice().reverse().findIndex(((e,n,r)=>!(-1!==i&&r.length-n-1>=i)&&!t.resolveDisabled(e)));return-1===e?e:n.length-1-e}case 2:return n.findIndex(((e,n)=>!(n<=i)&&!t.resolveDisabled(e)));case 3:{let e=n.slice().reverse().findIndex((e=>!t.resolveDisabled(e)));return-1===e?e:n.length-1-e}case 4:return n.findIndex((n=>t.resolveId(n)===e.id));case 5:return null;default:!function(e){throw new Error("Unexpected object: "+e)}(e)}})();return-1===a?r:a}function nA(e){var t;return null==e||null==e.value?null:null!=(t=e.value.$el)?t:e.value}let rA=Symbol("Context");var iA=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(iA||{});function aA(){return ci(rA,null)}function oA(e){ui(rA,e)}function sA(e,t){if(e)return e;let n=null!=t?t:"button";return"string"==typeof n&&"button"===n.toLowerCase()?"button":void 0}function lA(e,t){let n=_r(sA(e.value.type,e.value.as));return $i((()=>{n.value=sA(e.value.type,e.value.as)})),di((()=>{var e;n.value||!nA(t)||nA(t)instanceof HTMLButtonElement&&(null==(e=nA(t))||!e.hasAttribute("type"))&&(n.value="button")})),n}const uA="undefined"==typeof window||"undefined"==typeof document;function cA(e){if(uA)return null;if(e instanceof Node)return e.ownerDocument;if(null!=e&&e.hasOwnProperty("value")){let t=nA(e);if(t)return t.ownerDocument}return document}function dA({container:e,accept:t,walk:n,enabled:r}){di((()=>{let i=e.value;if(!i||void 0!==r&&!r.value)return;let a=cA(e);if(!a)return;let o=Object.assign((e=>t(e)),{acceptNode:t}),s=a.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,o,!1);for(;s.nextNode();)n(s.currentNode)}))}let pA=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((e=>`${e}:not([tabindex='-1'])`)).join(",");var fA,hA=((fA=hA||{})[fA.First=1]="First",fA[fA.Previous=2]="Previous",fA[fA.Next=4]="Next",fA[fA.Last=8]="Last",fA[fA.WrapAround=16]="WrapAround",fA[fA.NoScroll=32]="NoScroll",fA),mA=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(mA||{}),vA=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(vA||{});function gA(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(pA))}var yA=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(yA||{});function bA(e,t=0){var n;return e!==(null==(n=cA(e))?void 0:n.body)&&Fk(t,{0:()=>e.matches(pA),1(){let t=e;for(;null!==t;){if(t.matches(pA))return!0;t=t.parentElement}return!1}})}function wA(e){let t=cA(e);Vr((()=>{t&&!bA(t.activeElement,0)&&_A(e)}))}function _A(e){null==e||e.focus({preventScroll:!0})}let xA=["textarea","input"].join(",");function kA(e,t=(e=>e)){return e.slice().sort(((e,n)=>{let r=t(e),i=t(n);if(null===r||null===i)return 0;let a=r.compareDocumentPosition(i);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}function AA(e,t,n=!0,r=null){var i;let a=null!=(i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:null==e?void 0:e.ownerDocument)?i:document,o=Array.isArray(e)?n?kA(e):e:gA(e);r=null!=r?r:a.activeElement;let s,l=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,o.indexOf(r))-1;if(4&t)return Math.max(0,o.indexOf(r))+1;if(8&t)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=32&t?{preventScroll:!0}:{},d=0,p=o.length;do{if(d>=p||d+p<=0)return 0;let e=u+d;if(16&t)e=(e+p)%p;else{if(e<0)return 3;if(e>=p)return 1}s=o[e],null==s||s.focus(c),d+=l}while(s!==a.activeElement);return 6&t&&function(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,xA))&&n}(s)&&s.select(),s.hasAttribute("tabindex")||s.setAttribute("tabindex","0"),2}function EA(e,t,n){uA||di((r=>{document.addEventListener(e,t,n),r((()=>document.removeEventListener(e,t,n)))}))}function IA(e,t,n=Lo((()=>!0))){function r(r,i){if(!n.value||r.defaultPrevented)return;let a=i(r);if(null===a||!a.ownerDocument.documentElement.contains(a))return;let o=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(e);for(let e of o){if(null===e)continue;let t=e instanceof HTMLElement?e:nA(e);if(null!=t&&t.contains(a))return}return!bA(a,yA.Loose)&&-1!==a.tabIndex&&r.preventDefault(),t(r,a)}let i=_r(null);EA("mousedown",(e=>{var t,r;n.value&&(i.value=(null==(r=null==(t=e.composedPath)?void 0:t.call(e))?void 0:r[0])||e.target)}),!0),EA("click",(e=>{!i.value||(r(e,(()=>i.value)),i.value=null)}),!0),EA("blur",(e=>r(e,(()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null))),!0)}var SA=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(SA||{});let RA=Si({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup:(e,{slots:t,attrs:n})=>()=>{let{features:r,...i}=e;return Qk({ourProps:{"aria-hidden":2==(2&r)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...4==(4&r)&&2!=(2&r)&&{display:"none"}}},theirProps:i,slot:{},attrs:n,slots:t,name:"Hidden"})}});function CA(e={},t=null,n=[]){for(let[r,i]of Object.entries(e))DA(n,OA(t,r),i);return n}function OA(e,t){return e?e+"["+t+"]":t}function DA(e,t,n){if(Array.isArray(n))for(let[r,i]of n.entries())DA(e,OA(t,r.toString()),i);else n instanceof Date?e.push([t,n.toISOString()]):"boolean"==typeof n?e.push([t,n?"1":"0"]):"string"==typeof n?e.push([t,n]):"number"==typeof n?e.push([t,`${n}`]):null==n?e.push([t,""]):CA(n,t,e)}function jA(e){var t;let n=null!=(t=null==e?void 0:e.form)?t:e.closest("form");if(n)for(let r of n.elements)if("INPUT"===r.tagName&&"submit"===r.type||"BUTTON"===r.tagName&&"submit"===r.type||"INPUT"===r.nodeName&&"image"===r.type)return void r.click()}function TA(e,t,n){let r=_r(null==n?void 0:n.value),i=Lo((()=>void 0!==e.value));return[Lo((()=>i.value?e.value:r.value)),function(e){return i.value||(r.value=e),null==t?void 0:t(e)}]}var PA=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(PA||{});function MA(){let e=_r(0);return function(e,t,n){uA||di((r=>{window.addEventListener(e,t,n),r((()=>window.removeEventListener(e,t,n)))}))}("keydown",(t=>{"Tab"===t.key&&(e.value=t.shiftKey?1:0)})),e}function LA(e,t,n,r){uA||di((i=>{(e=null!=e?e:window).addEventListener(t,n,r),i((()=>e.removeEventListener(t,n,r)))}))}var $A=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))($A||{});let NA=Object.assign(Si({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:Object,default:_r(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:r}){let i=_r(null);r({el:i,$el:i});let a=Lo((()=>cA(i)));!function({ownerDocument:e},t){let n=_r(null);function r(){var t;n.value||(n.value=null==(t=e.value)?void 0:t.activeElement)}function i(){!n.value||(_A(n.value),n.value=null)}$i((()=>{fi(t,((e,t)=>{e!==t&&(e?r():i())}),{immediate:!0})})),Fi(i)}({ownerDocument:a},Lo((()=>Boolean(16&e.features))));let o=function({ownerDocument:e,container:t,initialFocus:n},r){let i=_r(null),a=_r(!1);return $i((()=>a.value=!0)),Fi((()=>a.value=!1)),$i((()=>{fi([t,n,r],((o,s)=>{if(o.every(((e,t)=>(null==s?void 0:s[t])===e))||!r.value)return;let l=nA(t);!l||function(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}((()=>{var t,r;if(!a.value)return;let o=nA(n),s=null==(t=e.value)?void 0:t.activeElement;if(o){if(o===s)return void(i.value=s)}else if(l.contains(s))return void(i.value=s);o?_A(o):AA(l,hA.First|hA.NoScroll)===mA.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),i.value=null==(r=e.value)?void 0:r.activeElement}))}),{immediate:!0,flush:"post"})})),i}({ownerDocument:a,container:i,initialFocus:Lo((()=>e.initialFocus))},Lo((()=>Boolean(2&e.features))));!function({ownerDocument:e,container:t,containers:n,previousActiveElement:r},i){var a;LA(null==(a=e.value)?void 0:a.defaultView,"focus",(e=>{if(!i.value)return;let a=new Set(null==n?void 0:n.value);a.add(t);let o=r.value;if(!o)return;let s=e.target;s&&s instanceof HTMLElement?function(e,t){var n;for(let r of e)if(null!=(n=r.value)&&n.contains(t))return!0;return!1}(a,s)?(r.value=s,_A(s)):(e.preventDefault(),e.stopPropagation(),_A(o)):_A(r.value)}),!0)}({ownerDocument:a,container:i,containers:e.containers,previousActiveElement:o},Lo((()=>Boolean(8&e.features))));let s=MA();function l(){let e=nA(i);!e||Fk(s.value,{[PA.Forwards]:()=>AA(e,hA.First),[PA.Backwards]:()=>AA(e,hA.Last)})}return()=>{let r={ref:i},{features:a,initialFocus:o,containers:s,...u}=e;return Bo(Ua,[Boolean(4&a)&&Bo(RA,{as:"button",type:"button",onFocus:l,features:SA.Focusable}),Qk({ourProps:r,theirProps:{...t,...u},slot:{},attrs:t,slots:n,name:"FocusTrap"}),Boolean(4&a)&&Bo(RA,{as:"button",type:"button",onFocus:l,features:SA.Focusable})])}}}),{features:$A});let BA="body > *",UA=new Set,FA=new Map;function zA(e){e.setAttribute("aria-hidden","true"),e.inert=!0}function qA(e){let t=FA.get(e);!t||(null===t["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",t["aria-hidden"]),e.inert=t.inert)}let VA=Symbol("ForcePortalRootContext");let QA=Si({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup:(e,{slots:t,attrs:n})=>(ui(VA,e.force),()=>{let{force:r,...i}=e;return Qk({theirProps:i,ourProps:{},slot:{},slots:t,attrs:n,name:"ForcePortalRoot"})})});let HA=Si({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:n}){let r=_r(null),i=Lo((()=>cA(r))),a=ci(VA,!1),o=ci(GA,null),s=_r(!0===a||null==o?function(e){let t=cA(e);if(!t){if(null===e)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let n=t.getElementById("headlessui-portal-root");if(n)return n;let r=t.createElement("div");return r.setAttribute("id","headlessui-portal-root"),t.body.appendChild(r)}(r.value):o.resolveTarget());return di((()=>{a||null!=o&&(s.value=o.resolveTarget())})),Fi((()=>{var e,t;let n=null==(e=i.value)?void 0:e.getElementById("headlessui-portal-root");!n||s.value===n&&s.value.children.length<=0&&(null==(t=s.value.parentElement)||t.removeChild(s.value))})),()=>{if(null===s.value)return null;let i={ref:r,"data-headlessui-portal":""};return Bo(Da,{to:s.value},Qk({ourProps:i,theirProps:e,slot:{},attrs:n,slots:t,name:"Portal"}))}}}),GA=Symbol("PortalGroupContext"),WA=Si({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:n}){let r=sr({resolveTarget:()=>e.target});return ui(GA,r),()=>{let{target:r,...i}=e;return Qk({theirProps:i,ourProps:{},slot:{},attrs:t,slots:n,name:"PortalGroup"})}}}),JA=Symbol("StackContext");var KA=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(KA||{});function YA({type:e,enabled:t,element:n,onUpdate:r}){let i=ci(JA,(()=>{}));function a(...e){null==r||r(...e),i(...e)}$i((()=>{fi(t,((t,r)=>{t?a(0,e,n):!0===r&&a(1,e,n)}),{immediate:!0,flush:"sync"})})),Fi((()=>{t.value&&a(1,e,n)})),ui(JA,a)}let ZA=Symbol("DescriptionContext");function XA({slot:e=_r({}),name:t="Description",props:n={}}={}){let r=_r([]);return ui(ZA,{register:function(e){return r.value.push(e),()=>{let t=r.value.indexOf(e);-1!==t&&r.value.splice(t,1)}},slot:e,name:t,props:n}),Lo((()=>r.value.length>0?r.value.join(" "):void 0))}let eE=Si({name:"Description",props:{as:{type:[Object,String],default:"p"}},setup(e,{attrs:t,slots:n}){let r=function(){let e=ci(ZA,null);if(null===e)throw new Error("Missing parent");return e}(),i=`headlessui-description-${Yk()}`;return $i((()=>Fi(r.register(i)))),()=>{let{name:a="Description",slot:o=_r({}),props:s={}}=r,l=e;return Qk({ourProps:{...Object.entries(s).reduce(((e,[t,n])=>Object.assign(e,{[t]:Ar(n)})),{}),id:i},theirProps:l,slot:o.value,attrs:t,slots:n,name:a})}}});var tE,nE=((tE=nE||{})[tE.Open=0]="Open",tE[tE.Closed=1]="Closed",tE);let rE=Symbol("DialogContext");function iE(e){let t=ci(rE,null);if(null===t){let t=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,iE),t}return t}let aE="DC8F892D-2EBD-447C-A4C8-A03058436FF4",oE=Si({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:aE},initialFocus:{type:Object,default:null}},emits:{close:e=>!0},setup(e,{emit:t,attrs:n,slots:r,expose:i}){var a;let o=_r(!1);$i((()=>{o.value=!0}));let s=_r(0),l=aA(),u=Lo((()=>e.open===aE&&null!==l?Fk(l.value,{[iA.Open]:!0,[iA.Closed]:!1}):e.open)),c=_r(new Set),d=_r(null),p=_r(null),f=Lo((()=>cA(d)));if(i({el:d,$el:d}),e.open===aE&&null===l)throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if("boolean"!=typeof u.value)throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${u.value===aE?void 0:e.open}`);let h=Lo((()=>o.value&&u.value?0:1)),m=Lo((()=>0===h.value)),v=Lo((()=>s.value>1)),g=null!==ci(rE,null),y=Lo((()=>v.value?"parent":"leaf"));(function(e,t=_r(!0)){di((n=>{if(!t.value||!e.value)return;let r=e.value,i=cA(r);if(i){UA.add(r);for(let e of FA.keys())e.contains(r)&&(qA(e),FA.delete(e));i.querySelectorAll(BA).forEach((e=>{if(e instanceof HTMLElement){for(let t of UA)if(e.contains(t))return;1===UA.size&&(FA.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),zA(e))}})),n((()=>{if(UA.delete(r),UA.size>0)i.querySelectorAll(BA).forEach((e=>{if(e instanceof HTMLElement&&!FA.has(e)){for(let t of UA)if(e.contains(t))return;FA.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),zA(e)}}));else for(let e of FA.keys())qA(e),FA.delete(e)}))}}))})(d,Lo((()=>!!v.value&&m.value))),YA({type:"Dialog",enabled:Lo((()=>0===h.value)),element:d,onUpdate:(e,t,n)=>{if("Dialog"===t)return Fk(e,{[KA.Add](){c.value.add(n),s.value+=1},[KA.Remove](){c.value.delete(n),s.value-=1}})}});let b=XA({name:"DialogDescription",slot:Lo((()=>({open:u.value})))}),w=`headlessui-dialog-${Yk()}`,_=_r(null),x={titleId:_,panelRef:_r(null),dialogState:h,setTitleId(e){_.value!==e&&(_.value=e)},close(){t("close",!1)}};return ui(rE,x),IA((()=>{var e,t,n;return[...Array.from(null!=(t=null==(e=f.value)?void 0:e.querySelectorAll("body > *, [data-headlessui-portal]"))?t:[]).filter((e=>!(!(e instanceof HTMLElement)||e.contains(nA(p))||x.panelRef.value&&e.contains(x.panelRef.value)))),null!=(n=x.panelRef.value)?n:d.value]}),((e,t)=>{x.close(),Vr((()=>null==t?void 0:t.focus()))}),Lo((()=>0===h.value&&!v.value))),LA(null==(a=f.value)?void 0:a.defaultView,"keydown",(e=>{e.defaultPrevented||e.key===Xk.Escape&&0===h.value&&(v.value||(e.preventDefault(),e.stopPropagation(),x.close()))})),di((e=>{var t;if(0!==h.value||g)return;let n=f.value;if(!n)return;let r=function(){let e=[],t=[],n={enqueue(e){t.push(e)},addEventListener:(e,t,r,i)=>(e.addEventListener(t,r,i),n.add((()=>e.removeEventListener(t,r,i)))),requestAnimationFrame(...e){let t=requestAnimationFrame(...e);n.add((()=>cancelAnimationFrame(t)))},nextFrame(...e){n.requestAnimationFrame((()=>{n.requestAnimationFrame(...e)}))},setTimeout(...e){let t=setTimeout(...e);n.add((()=>clearTimeout(t)))},add(t){e.push(t)},dispose(){for(let t of e.splice(0))t()},async workQueue(){for(let e of t.splice(0))await e()}};return n}();function i(e,t,n){let i=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),r.add((()=>{Object.assign(e.style,{[t]:i})}))}let a=null==n?void 0:n.documentElement,o=(null!=(t=n.defaultView)?t:window).innerWidth-a.clientWidth;if(i(a,"overflow","hidden"),o>0){i(a,"paddingRight",`${o-(a.clientWidth-a.offsetWidth)}px`)}if(/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0){let e=window.pageYOffset;i(a,"position","fixed"),i(a,"marginTop",`-${e}px`),i(a,"width","100%"),r.add((()=>window.scrollTo(0,e)))}e(r.dispose)})),di((e=>{if(0!==h.value)return;let t=nA(d);if(!t)return;let n=new IntersectionObserver((e=>{for(let t of e)0===t.boundingClientRect.x&&0===t.boundingClientRect.y&&0===t.boundingClientRect.width&&0===t.boundingClientRect.height&&x.close()}));n.observe(t),e((()=>n.disconnect()))})),()=>{let t={...n,ref:d,id:w,role:"dialog","aria-modal":0===h.value||void 0,"aria-labelledby":_.value,"aria-describedby":b.value},{open:i,initialFocus:a,...o}=e,s={open:0===h.value};return Bo(QA,{force:!0},(()=>[Bo(HA,(()=>Bo(WA,{target:d.value},(()=>Bo(QA,{force:!1},(()=>Bo(NA,{initialFocus:a,containers:c,features:m.value?Fk(y.value,{parent:NA.features.RestoreFocus,leaf:NA.features.All&~NA.features.FocusLock}):NA.features.None},(()=>Qk({ourProps:t,theirProps:o,slot:s,attrs:n,slots:r,visible:0===h.value,features:qk.RenderStrategy|qk.Static,name:"Dialog"}))))))))),Bo(RA,{features:SA.Hidden,ref:p})]))}}});Si({name:"DialogOverlay",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:t,slots:n}){let r=iE("DialogOverlay"),i=`headlessui-dialog-overlay-${Yk()}`;function a(e){e.target===e.currentTarget&&(e.preventDefault(),e.stopPropagation(),r.close())}return()=>Qk({ourProps:{id:i,"aria-hidden":!0,onClick:a},theirProps:e,slot:{open:0===r.dialogState.value},attrs:t,slots:n,name:"DialogOverlay"})}}),Si({name:"DialogBackdrop",props:{as:{type:[Object,String],default:"div"}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:r}){let i=iE("DialogBackdrop"),a=`headlessui-dialog-backdrop-${Yk()}`,o=_r(null);return r({el:o,$el:o}),$i((()=>{if(null===i.panelRef.value)throw new Error("A <DialogBackdrop /> component is being used, but a <DialogPanel /> component is missing.")})),()=>{let r=e,s={id:a,ref:o,"aria-hidden":!0};return Bo(QA,{force:!0},(()=>Bo(HA,(()=>Qk({ourProps:s,theirProps:{...t,...r},slot:{open:0===i.dialogState.value},attrs:t,slots:n,name:"DialogBackdrop"})))))}}});let sE=Si({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:t,slots:n,expose:r}){let i=iE("DialogPanel"),a=`headlessui-dialog-panel-${Yk()}`;function o(e){e.stopPropagation()}return r({el:i.panelRef,$el:i.panelRef}),()=>Qk({ourProps:{id:a,ref:i.panelRef,onClick:o},theirProps:e,slot:{open:0===i.dialogState.value},attrs:t,slots:n,name:"DialogPanel"})}}),lE=Si({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"}},setup(e,{attrs:t,slots:n}){let r=iE("DialogTitle"),i=`headlessui-dialog-title-${Yk()}`;return $i((()=>{r.setTitleId(i),Fi((()=>r.setTitleId(null)))})),()=>Qk({ourProps:{id:i},theirProps:e,slot:{open:0===r.dialogState.value},attrs:t,slots:n,name:"DialogTitle"})}});function uE(e,t){return e===t}var cE,dE=((cE=dE||{})[cE.Open=0]="Open",cE[cE.Closed=1]="Closed",cE),pE=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(pE||{}),fE=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(fE||{});let hE=Symbol("ListboxContext");function mE(e){let t=ci(hE,null);if(null===t){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,mE),t}return t}let vE=Si({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>uE},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:t,attrs:n,emit:r}){let i=_r(1),a=_r(null),o=_r(null),s=_r(null),l=_r([]),u=_r(""),c=_r(null),d=_r(1);function p(e=(e=>e)){let t=null!==c.value?l.value[c.value]:null,n=kA(e(l.value.slice()),(e=>nA(e.dataRef.domRef))),r=t?n.indexOf(t):null;return-1===r&&(r=null),{options:n,activeOptionIndex:r}}let f=Lo((()=>e.multiple?1:0)),[h,m]=TA(Lo((()=>e.modelValue)),(e=>r("update:modelValue",e)),Lo((()=>e.defaultValue))),v={listboxState:i,value:h,mode:f,compare(t,n){if("string"==typeof e.by){let r=e.by;return(null==t?void 0:t[r])===(null==n?void 0:n[r])}return e.by(t,n)},orientation:Lo((()=>e.horizontal?"horizontal":"vertical")),labelRef:a,buttonRef:o,optionsRef:s,disabled:Lo((()=>e.disabled)),options:l,searchQuery:u,activeOptionIndex:c,activationTrigger:d,closeListbox(){e.disabled||1!==i.value&&(i.value=1,c.value=null)},openListbox(){e.disabled||0!==i.value&&(i.value=0)},goToOption(t,n,r){if(e.disabled||1===i.value)return;let a=p(),o=tA(t===eA.Specific?{focus:eA.Specific,id:n}:{focus:t},{resolveItems:()=>a.options,resolveActiveIndex:()=>a.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.disabled});u.value="",c.value=o,d.value=null!=r?r:1,l.value=a.options},search(t){if(e.disabled||1===i.value)return;let n=""!==u.value?0:1;u.value+=t.toLowerCase();let r=(null!==c.value?l.value.slice(c.value+n).concat(l.value.slice(0,c.value+n)):l.value).find((e=>e.dataRef.textValue.startsWith(u.value)&&!e.dataRef.disabled)),a=r?l.value.indexOf(r):-1;-1===a||a===c.value||(c.value=a,d.value=1)},clearSearch(){e.disabled||1!==i.value&&""!==u.value&&(u.value="")},registerOption(e,t){let n=p((n=>[...n,{id:e,dataRef:t}]));l.value=n.options,c.value=n.activeOptionIndex},unregisterOption(e){let t=p((t=>{let n=t.findIndex((t=>t.id===e));return-1!==n&&t.splice(n,1),t}));l.value=t.options,c.value=t.activeOptionIndex,d.value=1},select(t){e.disabled||m(Fk(f.value,{0:()=>t,1:()=>{let e=hr(v.value.value).slice(),n=hr(t),r=e.findIndex((e=>v.compare(n,hr(e))));return-1===r?e.push(n):e.splice(r,1),e}}))}};return IA([o,s],((e,t)=>{var n;v.closeListbox(),bA(t,yA.Loose)||(e.preventDefault(),null==(n=nA(o))||n.focus())}),Lo((()=>0===i.value))),ui(hE,v),oA(Lo((()=>Fk(i.value,{0:iA.Open,1:iA.Closed})))),()=>{let{name:r,modelValue:a,disabled:o,...s}=e,l={open:0===i.value,disabled:o,value:h.value};return Bo(Ua,[...null!=r&&null!=h.value?CA({[r]:h.value}).map((([e,t])=>Bo(RA,Wk({features:SA.Hidden,key:e,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:e,value:t})))):[],Qk({ourProps:{},theirProps:{...n,...Jk(s,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:l,slots:t,attrs:n,name:"Listbox"})])}}}),gE=Si({name:"ListboxLabel",props:{as:{type:[Object,String],default:"label"}},setup(e,{attrs:t,slots:n}){let r=mE("ListboxLabel"),i=`headlessui-listbox-label-${Yk()}`;function a(){var e;null==(e=nA(r.buttonRef))||e.focus({preventScroll:!0})}return()=>{let o={open:0===r.listboxState.value,disabled:r.disabled.value};return Qk({ourProps:{id:i,ref:r.labelRef,onClick:a},theirProps:e,slot:o,attrs:t,slots:n,name:"ListboxLabel"})}}}),yE=Si({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"}},setup(e,{attrs:t,slots:n,expose:r}){let i=mE("ListboxButton"),a=`headlessui-listbox-button-${Yk()}`;function o(e){switch(e.key){case Xk.Space:case Xk.Enter:case Xk.ArrowDown:e.preventDefault(),i.openListbox(),Vr((()=>{var e;null==(e=nA(i.optionsRef))||e.focus({preventScroll:!0}),i.value.value||i.goToOption(eA.First)}));break;case Xk.ArrowUp:e.preventDefault(),i.openListbox(),Vr((()=>{var e;null==(e=nA(i.optionsRef))||e.focus({preventScroll:!0}),i.value.value||i.goToOption(eA.Last)}))}}function s(e){if(e.key===Xk.Space)e.preventDefault()}function l(e){i.disabled.value||(0===i.listboxState.value?(i.closeListbox(),Vr((()=>{var e;return null==(e=nA(i.buttonRef))?void 0:e.focus({preventScroll:!0})}))):(e.preventDefault(),i.openListbox(),function(e){requestAnimationFrame((()=>requestAnimationFrame(e)))}((()=>{var e;return null==(e=nA(i.optionsRef))?void 0:e.focus({preventScroll:!0})}))))}r({el:i.buttonRef,$el:i.buttonRef});let u=lA(Lo((()=>({as:e.as,type:t.type}))),i.buttonRef);return()=>{var r,c;let d={open:0===i.listboxState.value,disabled:i.disabled.value,value:i.value.value};return Qk({ourProps:{ref:i.buttonRef,id:a,type:u.value,"aria-haspopup":!0,"aria-controls":null==(r=nA(i.optionsRef))?void 0:r.id,"aria-expanded":i.disabled.value?void 0:0===i.listboxState.value,"aria-labelledby":i.labelRef.value?[null==(c=nA(i.labelRef))?void 0:c.id,a].join(" "):void 0,disabled:!0===i.disabled.value||void 0,onKeydown:o,onKeyup:s,onClick:l},theirProps:e,slot:d,attrs:t,slots:n,name:"ListboxButton"})}}}),bE=Si({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(e,{attrs:t,slots:n,expose:r}){let i=mE("ListboxOptions"),a=`headlessui-listbox-options-${Yk()}`,o=_r(null);function s(e){switch(o.value&&clearTimeout(o.value),e.key){case Xk.Space:if(""!==i.searchQuery.value)return e.preventDefault(),e.stopPropagation(),i.search(e.key);case Xk.Enter:if(e.preventDefault(),e.stopPropagation(),null!==i.activeOptionIndex.value){let e=i.options.value[i.activeOptionIndex.value];i.select(e.dataRef.value)}0===i.mode.value&&(i.closeListbox(),Vr((()=>{var e;return null==(e=nA(i.buttonRef))?void 0:e.focus({preventScroll:!0})})));break;case Fk(i.orientation.value,{vertical:Xk.ArrowDown,horizontal:Xk.ArrowRight}):return e.preventDefault(),e.stopPropagation(),i.goToOption(eA.Next);case Fk(i.orientation.value,{vertical:Xk.ArrowUp,horizontal:Xk.ArrowLeft}):return e.preventDefault(),e.stopPropagation(),i.goToOption(eA.Previous);case Xk.Home:case Xk.PageUp:return e.preventDefault(),e.stopPropagation(),i.goToOption(eA.First);case Xk.End:case Xk.PageDown:return e.preventDefault(),e.stopPropagation(),i.goToOption(eA.Last);case Xk.Escape:e.preventDefault(),e.stopPropagation(),i.closeListbox(),Vr((()=>{var e;return null==(e=nA(i.buttonRef))?void 0:e.focus({preventScroll:!0})}));break;case Xk.Tab:e.preventDefault(),e.stopPropagation();break;default:1===e.key.length&&(i.search(e.key),o.value=setTimeout((()=>i.clearSearch()),350))}}r({el:i.optionsRef,$el:i.optionsRef});let l=aA(),u=Lo((()=>null!==l?l.value===iA.Open:0===i.listboxState.value));return()=>{var r,o,l,c;let d={open:0===i.listboxState.value};return Qk({ourProps:{"aria-activedescendant":null===i.activeOptionIndex.value||null==(r=i.options.value[i.activeOptionIndex.value])?void 0:r.id,"aria-multiselectable":1===i.mode.value||void 0,"aria-labelledby":null!=(c=null==(o=nA(i.labelRef))?void 0:o.id)?c:null==(l=nA(i.buttonRef))?void 0:l.id,"aria-orientation":i.orientation.value,id:a,onKeydown:s,role:"listbox",tabIndex:0,ref:i.optionsRef},theirProps:e,slot:d,attrs:t,slots:n,features:qk.RenderStrategy|qk.Static,visible:u.value,name:"ListboxOptions"})}}}),wE=Si({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:n,expose:r}){let i=mE("ListboxOption"),a=`headlessui-listbox-option-${Yk()}`,o=_r(null);r({el:o,$el:o});let s=Lo((()=>null!==i.activeOptionIndex.value&&i.options.value[i.activeOptionIndex.value].id===a)),l=Lo((()=>Fk(i.mode.value,{0:()=>i.compare(hr(i.value.value),hr(e.value)),1:()=>hr(i.value.value).some((t=>i.compare(hr(t),hr(e.value))))}))),u=Lo((()=>Fk(i.mode.value,{1:()=>{var e;let t=hr(i.value.value);return(null==(e=i.options.value.find((e=>t.some((t=>i.compare(hr(t),hr(e.dataRef.value)))))))?void 0:e.id)===a},0:()=>l.value}))),c=Lo((()=>({disabled:e.disabled,value:e.value,textValue:"",domRef:o})));function d(t){if(e.disabled)return t.preventDefault();i.select(e.value),0===i.mode.value&&(i.closeListbox(),Vr((()=>{var e;return null==(e=nA(i.buttonRef))?void 0:e.focus({preventScroll:!0})})))}function p(){if(e.disabled)return i.goToOption(eA.Nothing);i.goToOption(eA.Specific,a)}function f(){e.disabled||s.value||i.goToOption(eA.Specific,a,0)}function h(){e.disabled||!s.value||i.goToOption(eA.Nothing)}return $i((()=>{var e,t;let n=null==(t=null==(e=nA(o))?void 0:e.textContent)?void 0:t.toLowerCase().trim();void 0!==n&&(c.value.textValue=n)})),$i((()=>i.registerOption(a,c))),Fi((()=>i.unregisterOption(a))),$i((()=>{fi([i.listboxState,l],(()=>{0===i.listboxState.value&&(!l.value||Fk(i.mode.value,{1:()=>{u.value&&i.goToOption(eA.Specific,a)},0:()=>{i.goToOption(eA.Specific,a)}}))}),{immediate:!0})})),di((()=>{0===i.listboxState.value&&(!s.value||0!==i.activationTrigger.value&&Vr((()=>{var e,t;return null==(t=null==(e=nA(o))?void 0:e.scrollIntoView)?void 0:t.call(e,{block:"nearest"})})))})),()=>{let{disabled:r}=e,i={active:s.value,selected:l.value,disabled:r};return Qk({ourProps:{id:a,ref:o,role:"option",tabIndex:!0===r?void 0:-1,"aria-disabled":!0===r||void 0,"aria-selected":l.value,disabled:void 0,onClick:d,onFocus:p,onPointermove:f,onMousemove:f,onPointerleave:h,onMouseleave:h},theirProps:Jk(e,["value","disabled"]),slot:i,attrs:n,slots:t,name:"ListboxOption"})}}});var _E,xE=((_E=xE||{})[_E.Open=0]="Open",_E[_E.Closed=1]="Closed",_E),kE=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(kE||{});let AE=Symbol("MenuContext");function EE(e){let t=ci(AE,null);if(null===t){let t=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,EE),t}return t}let IE=Si({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:n}){let r=_r(1),i=_r(null),a=_r(null),o=_r([]),s=_r(""),l=_r(null),u=_r(1);function c(e=(e=>e)){let t=null!==l.value?o.value[l.value]:null,n=kA(e(o.value.slice()),(e=>nA(e.dataRef.domRef))),r=t?n.indexOf(t):null;return-1===r&&(r=null),{items:n,activeItemIndex:r}}let d={menuState:r,buttonRef:i,itemsRef:a,items:o,searchQuery:s,activeItemIndex:l,activationTrigger:u,closeMenu:()=>{r.value=1,l.value=null},openMenu:()=>r.value=0,goToItem(e,t,n){let r=c(),i=tA(e===eA.Specific?{focus:eA.Specific,id:t}:{focus:e},{resolveItems:()=>r.items,resolveActiveIndex:()=>r.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.disabled});s.value="",l.value=i,u.value=null!=n?n:1,o.value=r.items},search(e){let t=""!==s.value?0:1;s.value+=e.toLowerCase();let n=(null!==l.value?o.value.slice(l.value+t).concat(o.value.slice(0,l.value+t)):o.value).find((e=>e.dataRef.textValue.startsWith(s.value)&&!e.dataRef.disabled)),r=n?o.value.indexOf(n):-1;-1===r||r===l.value||(l.value=r,u.value=1)},clearSearch(){s.value=""},registerItem(e,t){let n=c((n=>[...n,{id:e,dataRef:t}]));o.value=n.items,l.value=n.activeItemIndex,u.value=1},unregisterItem(e){let t=c((t=>{let n=t.findIndex((t=>t.id===e));return-1!==n&&t.splice(n,1),t}));o.value=t.items,l.value=t.activeItemIndex,u.value=1}};return IA([i,a],((e,t)=>{var n;d.closeMenu(),bA(t,yA.Loose)||(e.preventDefault(),null==(n=nA(i))||n.focus())}),Lo((()=>0===r.value))),ui(AE,d),oA(Lo((()=>Fk(r.value,{0:iA.Open,1:iA.Closed})))),()=>{let i={open:0===r.value};return Qk({ourProps:{},theirProps:e,slot:i,slots:t,attrs:n,name:"Menu"})}}}),SE=Si({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"}},setup(e,{attrs:t,slots:n,expose:r}){let i=EE("MenuButton"),a=`headlessui-menu-button-${Yk()}`;function o(e){switch(e.key){case Xk.Space:case Xk.Enter:case Xk.ArrowDown:e.preventDefault(),e.stopPropagation(),i.openMenu(),Vr((()=>{var e;null==(e=nA(i.itemsRef))||e.focus({preventScroll:!0}),i.goToItem(eA.First)}));break;case Xk.ArrowUp:e.preventDefault(),e.stopPropagation(),i.openMenu(),Vr((()=>{var e;null==(e=nA(i.itemsRef))||e.focus({preventScroll:!0}),i.goToItem(eA.Last)}))}}function s(e){if(e.key===Xk.Space)e.preventDefault()}function l(t){e.disabled||(0===i.menuState.value?(i.closeMenu(),Vr((()=>{var e;return null==(e=nA(i.buttonRef))?void 0:e.focus({preventScroll:!0})}))):(t.preventDefault(),i.openMenu(),function(e){requestAnimationFrame((()=>requestAnimationFrame(e)))}((()=>{var e;return null==(e=nA(i.itemsRef))?void 0:e.focus({preventScroll:!0})}))))}r({el:i.buttonRef,$el:i.buttonRef});let u=lA(Lo((()=>({as:e.as,type:t.type}))),i.buttonRef);return()=>{var r;let c={open:0===i.menuState.value};return Qk({ourProps:{ref:i.buttonRef,id:a,type:u.value,"aria-haspopup":!0,"aria-controls":null==(r=nA(i.itemsRef))?void 0:r.id,"aria-expanded":e.disabled?void 0:0===i.menuState.value,onKeydown:o,onKeyup:s,onClick:l},theirProps:e,slot:c,attrs:t,slots:n,name:"MenuButton"})}}}),RE=Si({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(e,{attrs:t,slots:n,expose:r}){let i=EE("MenuItems"),a=`headlessui-menu-items-${Yk()}`,o=_r(null);function s(e){var t;switch(o.value&&clearTimeout(o.value),e.key){case Xk.Space:if(""!==i.searchQuery.value)return e.preventDefault(),e.stopPropagation(),i.search(e.key);case Xk.Enter:if(e.preventDefault(),e.stopPropagation(),null!==i.activeItemIndex.value){null==(t=nA(i.items.value[i.activeItemIndex.value].dataRef.domRef))||t.click()}i.closeMenu(),wA(nA(i.buttonRef));break;case Xk.ArrowDown:return e.preventDefault(),e.stopPropagation(),i.goToItem(eA.Next);case Xk.ArrowUp:return e.preventDefault(),e.stopPropagation(),i.goToItem(eA.Previous);case Xk.Home:case Xk.PageUp:return e.preventDefault(),e.stopPropagation(),i.goToItem(eA.First);case Xk.End:case Xk.PageDown:return e.preventDefault(),e.stopPropagation(),i.goToItem(eA.Last);case Xk.Escape:e.preventDefault(),e.stopPropagation(),i.closeMenu(),Vr((()=>{var e;return null==(e=nA(i.buttonRef))?void 0:e.focus({preventScroll:!0})}));break;case Xk.Tab:e.preventDefault(),e.stopPropagation(),i.closeMenu(),Vr((()=>function(e,t){return AA(gA(),t,!0,e)}(nA(i.buttonRef),e.shiftKey?hA.Previous:hA.Next)));break;default:1===e.key.length&&(i.search(e.key),o.value=setTimeout((()=>i.clearSearch()),350))}}function l(e){if(e.key===Xk.Space)e.preventDefault()}r({el:i.itemsRef,$el:i.itemsRef}),dA({container:Lo((()=>nA(i.itemsRef))),enabled:Lo((()=>0===i.menuState.value)),accept:e=>"menuitem"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let u=aA(),c=Lo((()=>null!==u?u.value===iA.Open:0===i.menuState.value));return()=>{var r,o;let u={open:0===i.menuState.value};return Qk({ourProps:{"aria-activedescendant":null===i.activeItemIndex.value||null==(r=i.items.value[i.activeItemIndex.value])?void 0:r.id,"aria-labelledby":null==(o=nA(i.buttonRef))?void 0:o.id,id:a,onKeydown:s,onKeyup:l,role:"menu",tabIndex:0,ref:i.itemsRef},theirProps:e,slot:u,attrs:t,slots:n,features:qk.RenderStrategy|qk.Static,visible:c.value,name:"MenuItems"})}}}),CE=Si({name:"MenuItem",props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:n,expose:r}){let i=EE("MenuItem"),a=`headlessui-menu-item-${Yk()}`,o=_r(null);r({el:o,$el:o});let s=Lo((()=>null!==i.activeItemIndex.value&&i.items.value[i.activeItemIndex.value].id===a)),l=Lo((()=>({disabled:e.disabled,textValue:"",domRef:o})));function u(t){if(e.disabled)return t.preventDefault();i.closeMenu(),wA(nA(i.buttonRef))}function c(){if(e.disabled)return i.goToItem(eA.Nothing);i.goToItem(eA.Specific,a)}function d(){e.disabled||s.value||i.goToItem(eA.Specific,a,0)}function p(){e.disabled||!s.value||i.goToItem(eA.Nothing)}return $i((()=>{var e,t;let n=null==(t=null==(e=nA(o))?void 0:e.textContent)?void 0:t.toLowerCase().trim();void 0!==n&&(l.value.textValue=n)})),$i((()=>i.registerItem(a,l))),Fi((()=>i.unregisterItem(a))),di((()=>{0===i.menuState.value&&(!s.value||0!==i.activationTrigger.value&&Vr((()=>{var e,t;return null==(t=null==(e=nA(o))?void 0:e.scrollIntoView)?void 0:t.call(e,{block:"nearest"})})))})),()=>{let{disabled:r}=e,i={active:s.value,disabled:r};return Qk({ourProps:{id:a,ref:o,role:"menuitem",tabIndex:!0===r?void 0:-1,"aria-disabled":!0===r||void 0,onClick:u,onFocus:c,onPointermove:d,onMousemove:d,onPointerleave:p,onMouseleave:p},theirProps:e,slot:i,attrs:n,slots:t,name:"MenuItem"})}}}),OE=Symbol("LabelContext");function DE(){let e=ci(OE,null);if(null===e){let e=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,DE),e}return e}function jE({slot:e={},name:t="Label",props:n={}}={}){let r=_r([]);return ui(OE,{register:function(e){return r.value.push(e),()=>{let t=r.value.indexOf(e);-1!==t&&r.value.splice(t,1)}},slot:e,name:t,props:n}),Lo((()=>r.value.length>0?r.value.join(" "):void 0))}let TE=Si({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1}},setup(e,{slots:t,attrs:n}){let r=DE(),i=`headlessui-label-${Yk()}`;return $i((()=>Fi(r.register(i)))),()=>{let{name:a="Label",slot:o={},props:s={}}=r,{passive:l,...u}=e,c={...Object.entries(s).reduce(((e,[t,n])=>Object.assign(e,{[t]:Ar(n)})),{}),id:i};return l&&(delete c.onClick,delete u.onClick),Qk({ourProps:c,theirProps:u,slot:o,attrs:n,slots:t,name:a})}}});function PE(e,t){return e===t}let ME=Symbol("RadioGroupContext");function LE(e){let t=ci(ME,null);if(null===t){let t=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,LE),t}return t}let $E=Si({name:"RadioGroup",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"div"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>PE},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},name:{type:String,optional:!0}},inheritAttrs:!1,setup(e,{emit:t,attrs:n,slots:r,expose:i}){let a=_r(null),o=_r([]),s=jE({name:"RadioGroupLabel"}),l=XA({name:"RadioGroupDescription"});i({el:a,$el:a});let[u,c]=TA(Lo((()=>e.modelValue)),(e=>t("update:modelValue",e)),Lo((()=>e.defaultValue))),d={options:o,value:u,disabled:Lo((()=>e.disabled)),firstOption:Lo((()=>o.value.find((e=>!e.propsRef.disabled)))),containsCheckedOption:Lo((()=>o.value.some((t=>d.compare(hr(t.propsRef.value),hr(e.modelValue)))))),compare(t,n){if("string"==typeof e.by){let r=e.by;return(null==t?void 0:t[r])===(null==n?void 0:n[r])}return e.by(t,n)},change(t){var n;if(e.disabled||d.compare(hr(u.value),hr(t)))return!1;let r=null==(n=o.value.find((e=>d.compare(hr(e.propsRef.value),hr(t)))))?void 0:n.propsRef;return(null==r||!r.disabled)&&(c(t),!0)},registerOption(e){o.value.push(e),o.value=kA(o.value,(e=>e.element))},unregisterOption(e){let t=o.value.findIndex((t=>t.id===e));-1!==t&&o.value.splice(t,1)}};function p(e){if(!a.value||!a.value.contains(e.target))return;let t=o.value.filter((e=>!1===e.propsRef.disabled)).map((e=>e.element));switch(e.key){case Xk.Enter:jA(e.currentTarget);break;case Xk.ArrowLeft:case Xk.ArrowUp:if(e.preventDefault(),e.stopPropagation(),AA(t,hA.Previous|hA.WrapAround)===mA.Success){let e=o.value.find((e=>{var t;return e.element===(null==(t=cA(a))?void 0:t.activeElement)}));e&&d.change(e.propsRef.value)}break;case Xk.ArrowRight:case Xk.ArrowDown:if(e.preventDefault(),e.stopPropagation(),AA(t,hA.Next|hA.WrapAround)===mA.Success){let e=o.value.find((e=>{var t;return e.element===(null==(t=cA(e.element))?void 0:t.activeElement)}));e&&d.change(e.propsRef.value)}break;case Xk.Space:{e.preventDefault(),e.stopPropagation();let t=o.value.find((e=>{var t;return e.element===(null==(t=cA(e.element))?void 0:t.activeElement)}));t&&d.change(t.propsRef.value)}}}ui(ME,d),dA({container:Lo((()=>nA(a))),accept:e=>"radio"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let f=`headlessui-radiogroup-${Yk()}`;return()=>{let{disabled:t,name:i,...o}=e,c={ref:a,id:f,role:"radiogroup","aria-labelledby":s.value,"aria-describedby":l.value,onKeydown:p};return Bo(Ua,[...null!=i&&null!=u.value?CA({[i]:u.value}).map((([e,t])=>Bo(RA,Wk({features:SA.Hidden,key:e,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:e,value:t})))):[],Qk({ourProps:c,theirProps:{...n,...Jk(o,["modelValue","defaultValue"])},slot:{},attrs:n,slots:r,name:"RadioGroup"})])}}});var NE=(e=>(e[e.Empty=1]="Empty",e[e.Active=2]="Active",e))(NE||{});let BE=Si({name:"RadioGroupOption",props:{as:{type:[Object,String],default:"div"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(e,{attrs:t,slots:n,expose:r}){let i=LE("RadioGroupOption"),a=`headlessui-radiogroup-option-${Yk()}`,o=jE({name:"RadioGroupLabel"}),s=XA({name:"RadioGroupDescription"}),l=_r(null),u=Lo((()=>({value:e.value,disabled:e.disabled}))),c=_r(1);r({el:l,$el:l}),$i((()=>i.registerOption({id:a,element:l,propsRef:u}))),Fi((()=>i.unregisterOption(a)));let d=Lo((()=>{var e;return(null==(e=i.firstOption.value)?void 0:e.id)===a})),p=Lo((()=>i.disabled.value||e.disabled)),f=Lo((()=>i.compare(hr(i.value.value),hr(e.value)))),h=Lo((()=>p.value?-1:f.value||!i.containsCheckedOption.value&&d.value?0:-1));function m(){var t;!i.change(e.value)||(c.value|=2,null==(t=l.value)||t.focus())}function v(){c.value|=2}function g(){c.value&=-3}return()=>{let r=Jk(e,["value","disabled"]),i={checked:f.value,disabled:p.value,active:Boolean(2&c.value)};return Qk({ourProps:{id:a,ref:l,role:"radio","aria-checked":f.value?"true":"false","aria-labelledby":o.value,"aria-describedby":s.value,"aria-disabled":!!p.value||void 0,tabIndex:h.value,onClick:p.value?void 0:m,onFocus:p.value?void 0:v,onBlur:p.value?void 0:g},theirProps:r,slot:i,attrs:t,slots:n,name:"RadioGroupOption"})}}}),UE=TE,FE=eE,zE=Symbol("GroupContext"),qE=Si({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:n}){let r=_r(null),i=jE({name:"SwitchLabel",props:{onClick(){!r.value||(r.value.click(),r.value.focus({preventScroll:!0}))}}}),a=XA({name:"SwitchDescription"});return ui(zE,{switchRef:r,labelledby:i,describedby:a}),()=>Qk({theirProps:e,ourProps:{},slot:{},slots:t,attrs:n,name:"SwitchGroup"})}}),VE=Si({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,default:!1},name:{type:String,optional:!0},value:{type:String,optional:!0}},inheritAttrs:!1,setup(e,{emit:t,attrs:n,slots:r,expose:i}){let a=ci(zE,null),o=`headlessui-switch-${Yk()}`,[s,l]=TA(Lo((()=>e.modelValue)),(e=>t("update:modelValue",e)),Lo((()=>e.defaultChecked)));function u(){l(!s.value)}let c=_r(null),d=null===a?c:a.switchRef,p=lA(Lo((()=>({as:e.as,type:n.type}))),d);function f(e){e.preventDefault(),u()}function h(e){e.key===Xk.Space?(e.preventDefault(),u()):e.key===Xk.Enter&&jA(e.currentTarget)}function m(e){e.preventDefault()}return i({el:d,$el:d}),()=>{let{name:t,value:i,...l}=e,u={checked:s.value},c={id:o,ref:d,role:"switch",type:p.value,tabIndex:0,"aria-checked":s.value,"aria-labelledby":null==a?void 0:a.labelledby.value,"aria-describedby":null==a?void 0:a.describedby.value,onClick:f,onKeyup:h,onKeypress:m};return Bo(Ua,[null!=t&&null!=s.value?Bo(RA,Wk({features:SA.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:s.value,name:t,value:i})):null,Qk({ourProps:c,theirProps:{...n,...Jk(l,["modelValue","defaultChecked"])},slot:u,attrs:n,slots:r,name:"Switch"})])}}}),QE=TE,HE=eE;const GE={spacing:{edge:"2rem",content:"1280px"},fontSizes:{"4xl":"2.5rem"}},WE={};const JE={css(e){if(/^spacing\.\d+$/.test(e))return.25*parseInt(e.substring(8))+"rem";const t=e.split(".").reduce(((e,t)=>null==e?void 0:e[t]),GE);return"string"==typeof t?t:"0px"},mergeClasses(...e){const t=e.reduce(((e,t)=>{var n,r;const i=function(e){return e.reduce(((e,t)=>{var n,r,i,a,o;const s=null!=(a=null==(i=null==(r=null==(n=t.match(/((hover|focus):)*(px-|text-(xs|md|lg|(\d)*xl)|text-|bg-|ring-offset-(\d)+|ring-offset-|ring-(\d)+|ring-)/))?void 0:n[0])?void 0:r.replace(/\d+/,"[digits]"))?void 0:i.replace(/xs|md|lg|(\d)*xl/,"[size]"))?a:"others";return(null!=(o=e[s])?o:e[s]=[]).push(t),e}),{})}(t.split(" "));return null==(r=i.others)||r.push(...null!=(n=e.others)?n:[]),Object.assign(e,i),e}),{});return Object.values(t).map((e=>e.join(" "))).join(" ")},pixels(e){var t;return null!=(t=WE[e])?t:WE[e]=function(e){if(/\d+px/.test(e))return parseInt(e.slice(0,-2));const t=document.createElement("div");return t.style.position="fixed",t.style.width=e,document.body.append(t),T(t.clientWidth,(()=>t.remove()))}(this.css(e))}};function KE(e){return{type:Array,default:null!=e?e:()=>[]}}function YE(e=!1){return{type:Boolean,default:e}}function ZE(e,t){var n;const r=Object.values(e);return{type:String,default:null!=(n=null!=t?t:r[0])?n:null,validator:e=>r.includes(e)}}function XE(e,t){var n;return null!=(n=ci(e))?n:ne(null!=t?t:`Could not resolve '${e}' injection key`)}function eI(e){return{type:e,default:null}}function tI(e=null){return{type:Object,default:e}}function nI(){return{type:Array,required:!0}}function rI(e){return{type:e,required:!0}}function iI(){return{type:Number,required:!0}}function aI(){return{type:Object,required:!0}}function oI(){return{type:String,required:!0}}function sI(e=null){return{type:String,default:e}}function lI(e,t){var n,r;let i=null!=(r=null==(n=history.state)?void 0:n[e])?r:t;return new Sr(((t,n)=>({get:()=>(t(),i),set(t){var r;const a=null!=(r=history.state)?r:{};i=t,history.replaceState({...a,[e]:i},""),n()}})))}const uI=Si({props:{url:sI(),route:sI(),routeParams:tI((()=>({}))),routeQuery:tI((()=>({})))},setup(e,{expose:t}){const n=_r(null),r=ci("a11y",null),i=Lo((()=>e.route?{tag:"router-link",props:{to:L({name:e.route,params:e.routeParams,query:e.routeQuery})}}:e.url?{tag:"a",props:{target:"_blank",href:e.url}}:{tag:"button",props:{type:"button"}}));return t(qI(n)),(e,t)=>{var a;return Ha(),Ya(La(i.value.tag),fo({ref_key:"$root",ref:n},i.value.props,{tabindex:(null==(a=Ar(r))?void 0:a.hidden.value)?-1:void 0}),{default:ii((()=>[go(e.$slots,"default")])),_:3},16,["tabindex"])}}}),cI=Object.freeze(Object.defineProperty({__proto__:null,default:uI},Symbol.toStringTag,{value:"Module"})),dI=Si({props:{form:aI()},emits:["submit"],setup:(e,{emit:t})=>(ui("form",e.form),(n,r)=>(Ha(),Ka("form",{onSubmit:r[0]||(r[0]=Ls((n=>async function(){e.form.submit()&&t("submit",e.form.data())}()),["prevent"]))},[go(n.$slots,"default")],32)))}),pI=Object.freeze(Object.defineProperty({__proto__:null,default:dI},Symbol.toStringTag,{value:"Module"}));class fI{constructor(e){t(this,"value"),this.value=e}}const hI=Si({props:{id:sI(),name:sI(),placeholder:sI(),modelValue:eI([String,Number]),type:sI("text"),error:sI(),initialFocus:YE(),disabled:YE()},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){var r,i,a;const o=ci("form",null),s=Lo((()=>{if(!o||!e.name)return null;if(e.name.match(/\[\d+\]$/)){const[t,n]=e.name.split("["),r=o.input(t),i=parseInt(n.slice(0,-1));return r?{get value(){var e;return null==(e=r.value)?void 0:e[i]},get error(){return r.error},update(e){const t=r.value,n=t[i];r.update([...t.slice(0,i),n instanceof fI?n.update(e):e,...t.slice(i+1)])}}:null}return o.input(e.name)})),l=Lo((()=>{var t,n;return null!=(n=null==(t=s.value)?void 0:t.value)?n:e.modelValue})),u=Lo((()=>{var t,n;return null!=(n=null==(t=s.value)?void 0:t.error)?n:e.error})),c={id:null!=(r=e.id)?r:N(),type:e.type,name:null!=(i=e.name)?i:void 0,placeholder:null!=(a=e.placeholder)?a:void 0,get error(){return u.value},get disabled(){return e.disabled},get value(){return l.value instanceof fI?l.value.value:l.value},update(){var e;n("update:modelValue",T(null==(e=this.inputElement)?void 0:e.value,(e=>{var t;return null==(t=s.value)?void 0:t.update(e)})))}};return $i((()=>{var t;e.initialFocus&&(null==(t=c.inputElement)||t.focus())})),ui("input",c),t({...qI((()=>{var e;return null!=(e=c.inputElement)?e:null})),get value(){return null==c?void 0:c.value},get hasErrors(){return!!(null==c?void 0:c.error)}}),(e,t)=>go(e.$slots,"default",{hasErrors:!!c.error})}}),mI=Object.freeze(Object.defineProperty({__proto__:null,default:hI},Symbol.toStringTag,{value:"Module"})),vI=["id"],gI=Si({setup(e){const t=XE("input","<HeadlessInputError> must be a child of a <HeadlessInput>");return(e,n)=>Ar(t).error?(Ha(),Ka("p",{key:0,id:`${Ar(t).id}-error`},pt(Ar(t).error),9,vI)):lo("",!0)}}),yI=Object.freeze(Object.defineProperty({__proto__:null,default:gI},Symbol.toStringTag,{value:"Module"})),bI=["id","name","placeholder","value","type","aria-invalid","aria-describedby","tabindex","disabled"],wI=Si({setup(e){const t=ci("a11y",null),n=XE("input","<HeadlessInputInput> must be a child of a <HeadlessInput>");return(e,r)=>{var i;return Ha(),Ka("input",{id:Ar(n).id,ref:e=>Ar(n).inputElement=e,name:Ar(n).name,placeholder:Ar(n).placeholder,value:Ar(n).value,type:Ar(n).type,"aria-invalid":Ar(n).error?"true":"false","aria-describedby":Ar(n).error?`${Ar(n).id}-error`:void 0,tabindex:(null==(i=Ar(t))?void 0:i.hidden.value)?-1:void 0,disabled:Ar(n).disabled,onInput:r[0]||(r[0]=e=>Ar(n).update())},null,40,bI)}}}),_I=Object.freeze(Object.defineProperty({__proto__:null,default:wI},Symbol.toStringTag,{value:"Module"})),xI=["for"],kI=Si({setup(e){const t=XE("input","<HeadlessInputLabel> must be a child of a <HeadlessInput>");return(e,n)=>(Ha(),Ka("label",{for:Ar(t).id},[go(e.$slots,"default")],8,xI))}}),AI=Object.freeze(Object.defineProperty({__proto__:null,default:kI},Symbol.toStringTag,{value:"Module"})),EI=["id","name","placeholder","value","aria-invalid","aria-describedby","tabindex"],II=Si({setup(e){const t=ci("a11y",null),n=XE("input","<HeadlessInputTextArea> must be a child of a <HeadlessInput>");return(e,r)=>{var i,a;return Ha(),Ka("textarea",{id:Ar(n).id,ref:e=>Ar(n).inputElement=e,name:Ar(n).name,placeholder:Ar(n).placeholder,value:null!=(i=Ar(n).value)?i:void 0,"aria-invalid":Ar(n).error?"true":"false","aria-describedby":Ar(n).error?`${Ar(n).id}-error`:void 0,tabindex:(null==(a=Ar(t))?void 0:a.hidden.value)?-1:void 0,onInput:r[0]||(r[0]=e=>Ar(n).update())},null,40,EI)}}}),SI=Object.freeze(Object.defineProperty({__proto__:null,default:II},Symbol.toStringTag,{value:"Module"})),RI=Si({props:{route:sI(),routeParams:tI((()=>({}))),routeQuery:tI((()=>({}))),url:sI(),internal:YE()},setup(e){const t=ci("a11y",null),n=Lo((()=>e.route?"router-link":e.url?"a":"button")),r=Lo((()=>({a:{href:e.url,target:e.internal?null:"_blank"},button:{type:"button"},"router-link":{to:L({name:e.route,params:e.routeParams,query:e.routeQuery})}})));return(e,i)=>{var a;return Ha(),Ya(La(n.value),fo(r.value[n.value],{tabindex:(null==(a=Ar(t))?void 0:a.hidden.value)?-1:void 0}),{default:ii((()=>[go(e.$slots,"default")])),_:3},16,["tabindex"])}}}),CI=Object.freeze(Object.defineProperty({__proto__:null,default:RI},Symbol.toStringTag,{value:"Module"})),OI=["model-value"],DI=["value","selected"],jI=Si({inheritAttrs:!1}),TI=Si({...jI,props:{label:sI(),labelClass:sI(),labelTextClass:sI(),options:nI(),modelValue:rI([String,Number]),showLabel:YE(!1)},emits:["update:modelValue"],setup(e,{emit:t}){const n=_r(null);function r(){var r;n.value&&t("update:modelValue",null==(r=e.options[n.value.selectedIndex])?void 0:r.value)}return(t,i)=>{const a=$a("wobbly-border");return Ha(),Ka("label",{class:ut(e.labelClass)},[e.label?(Ha(),Ka("span",{key:0,class:ut([e.labelTextClass||e.showLabel||"sr-only"])},pt(e.label),3)):lo("",!0),va((Ha(),Ka("select",fo({ref_key:"$select",ref:n,"model-value":e.modelValue},t.$attrs,{onChange:r}),[(Ha(!0),Ka(Ua,null,mo(e.options,((t,n)=>(Ha(),Ka("option",{key:n,value:t.value,selected:e.modelValue===t.value},pt(t.text),9,DI)))),128))],16,OI)),[[a]])],2)}}}),PI=Object.freeze(Object.defineProperty({__proto__:null,default:TI},Symbol.toStringTag,{value:"Module"}));function MI(e,t){const n=new RegExp(`/([^/]+)${Oe(t)}`);return Object.entries(e).reduce(((e,[t,{default:r}])=>{var i;const a=null==(i=t.match(n))?void 0:i[1];return T(e,(()=>{a&&(e[a]=r)}))}),{})}const LI={};async function $I(e){await NI(document.createElement("div"),{duration:e})}async function NI(e,t){var n,r,i,a,o,s,l,u,c,d,p,f,h,m,v,g,y,b,w,_,x,k;null==(r=null==(n=t.before)?void 0:n.addClasses)||r.split(" ").forEach((t=>e.classList.add(t))),null==(a=null==(i=t.before)?void 0:i.removeClasses)||a.split(" ").forEach((t=>e.classList.remove(t))),(null==(o=t.before)?void 0:o.append)&&e.append(t.before.append),(null==(s=t.before)?void 0:s.prepend)&&e.prepend(t.before.prepend),(null==(l=t.before)?void 0:l.styles)&&Object.assign(e.style,t.before.styles);const A=e.animate(L({top:null==(c=null!=(u=t.boundingRects)?u:t.boundingPositions)?void 0:c.map((e=>`${e.top}px`)),left:null==(p=null!=(d=t.boundingRects)?d:t.boundingPositions)?void 0:p.map((e=>`${e.left}px`)),width:null==(h=null!=(f=t.boundingRects)?f:t.boundingDimensions)?void 0:h.map((e=>`${e.width}px`)),height:null==(v=null!=(m=t.boundingRects)?m:t.boundingDimensions)?void 0:v.map((e=>`${e.height}px`)),...null==(y=Object.entries(null!=(g=t.classes)?g:{}))?void 0:y.reduce(((e,[t,n])=>(e[t]=function(e,t){const n=t.map((t=>`${t}-${e}`));if(n.some((e=>!(e in LI)))){const r=document.createElement("div"),i=document.createElement("div");i.style.opacity="0",i.append(r),document.body.append(i);for(const a in n){const i=n[a],o=t[a];i in LI||(r.classList.add(o),LI[i]=getComputedStyle(r)[e],r.classList.remove(o))}i.remove()}return n.map((e=>LI[e]))}(t,n),e)),{}),...t.styles}),{duration:t.duration,fill:t.fill,easing:t.easing});await A.finished,null==(w=null==(b=t.after)?void 0:b.addClasses)||w.split(" ").forEach((t=>e.classList.add(t))),null==(x=null==(_=t.after)?void 0:_.removeClasses)||x.split(" ").forEach((t=>e.classList.remove(t))),(null==(k=t.after)?void 0:k.resetStyles)&&e.removeAttribute("style")}async function BI(e,t){await Promise.all(Object.values(t).filter((e=>!!e)).map((({element:t,...n})=>NI(t,{...e,...n}))))}function UI(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=window.innerHeight&&t.right<=window.innerWidth}function FI(e,t){var n;return null!=(n=e.querySelector(t))?n:ne(`Could not find child element with '${t}' selector`)}function zI(e){return{getRootElement:()=>{var t,n;return null!=(n=null==(t=e.value)?void 0:t.getRootElement())?n:null},focus:t=>{var n;return null==(n=e.value)?void 0:n.focus(t)},isFocused:()=>{var t;return!!(null==(t=e.value)?void 0:t.isFocused())},blur:()=>{var t;return null==(t=e.value)?void 0:t.blur()},scrollIntoView:()=>{var t;return null==(t=e.value)?void 0:t.scrollIntoView()}}}function qI(e){const t="function"==typeof e?e:()=>e.value;return{getRootElement:()=>{var e;return null!=(e=t())?e:null},focus(e={}){var n;const r=t(),i=null==(n=e.scrollIntoView)||n;r&&(i&&!UI(r)&&this.scrollIntoView(),r.focus())},isFocused:()=>{var e;return!!(null==(e=t())?void 0:e.matches(":focus"))},blur(){const e=t();e&&e.blur()},scrollIntoView:()=>{var e;return null==(e=t())?void 0:e.scrollIntoView()}}}const VI=MI(Object.assign({"/src/framework/components/headless/HeadlessButton.vue":cI,"/src/framework/components/headless/HeadlessForm.vue":pI,"/src/framework/components/headless/HeadlessInput.vue":mI,"/src/framework/components/headless/HeadlessInputError.vue":yI,"/src/framework/components/headless/HeadlessInputInput.vue":_I,"/src/framework/components/headless/HeadlessInputLabel.vue":AI,"/src/framework/components/headless/HeadlessInputTextArea.vue":SI,"/src/framework/components/headless/HeadlessLink.vue":CI,"/src/framework/components/headless/HeadlessSelect.vue":PI}),".vue");var QI=(e=>(e["Primary"]="primary",e["Solid"]="brand-solid",e["Danger"]="danger",e))(QI||{}),HI=(e=>(e["Start"]="start",e["Center"]="center",e["End"]="end",e))(HI||{});const GI=Si({props:{disabled:YE(),color:ZE(QI),class:sI(""),alignment:ZE(HI),secondary:YE(),tinted:YE(),clear:YE(),wobblyBorder:tI()},setup(e,{expose:t}){function n(t){const n=i[t];if(e.disabled)return"clear"===o.value?"text-gray-700 opacity-50 cursor-not-allowed":"bg-gray-300 text-gray-700 opacity-75 cursor-not-allowed";switch(o.value){case"primary":return["text-white",n.baseBackground,n.accentHoverBackground,n.baseFocusRing].join(" ");case"secondary":return["hover:text-white focus:text-white",e.tinted?`${n.tintedBackground} ${n.tintedText}`:"bg-gray-300 text-gray-700",n.accentHoverBackground,n.accentFocusHoverBackground,n.baseFocusBackground,n.baseFocusRing].join(" ");case"clear":return"text-gray-700 hover:bg-gray-200 focus:bg-gray-100 focus:hover:bg-gray-200 focus:ring-gray-200"}}const r=_r(null),i={[QI.Primary]:{baseBackground:"bg-primary-600",baseFocusBackground:"focus:bg-primary-600",baseFocusRing:"focus:ring-primary-600",tintedBackground:"bg-primary-gray-300",tintedText:"text-primary-gray-700",accentHoverBackground:"hover:bg-primary-700",accentFocusHoverBackground:"focus:hover:bg-primary-700"},[QI.Solid]:{baseBackground:"bg-brand-solid-500",baseFocusBackground:"focus:bg-brand-solid-500",baseFocusRing:"focus:ring-brand-solid-500",tintedBackground:"bg-brand-solid-gray-300",tintedText:"text-brand-solid-gray-700",accentHoverBackground:"hover:bg-brand-solid-700",accentFocusHoverBackground:"focus:hover:bg-brand-solid-700"},[QI.Danger]:{baseBackground:"bg-red-500",baseFocusBackground:"focus:bg-red-500",baseFocusRing:"focus:ring-red-500",tintedBackground:"bg-red-gray-300",tintedText:"text-red-gray-700",accentHoverBackground:"hover:bg-red-700",accentFocusHoverBackground:"focus:hover:bg-red-700"}},a={[HI.Start]:"justify-start",[HI.Center]:"justify-center",[HI.End]:"justify-end"},o=Lo((()=>e.secondary?"secondary":e.clear?"clear":"primary")),s=Lo((()=>{const t=["inline-flex items-center px-2.5 py-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2",a[e.alignment],n(e.color)].join(" ");return e.class?JE.mergeClasses(t,e.class):t}));return t(zI(r)),(t,n)=>{const i=Pa("HeadlessButton"),a=$a("wobbly-border");return va((Ha(),Ya(i,{ref_key:"$root",ref:r,class:ut(s.value),disabled:e.disabled},{default:ii((()=>[go(t.$slots,"default")])),_:3},8,["class","disabled"])),[[a,e.wobblyBorder]])}}}),WI={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},JI=[ro("g",{fill:"currentColor"},[ro("path",{d:"M7.172 14.243a1 1 0 1 1-1.415-1.415l7.071-7.07a1 1 0 1 1 1.415 1.414l-7.071 7.07Z"}),ro("path",{d:"M5.757 7.172a1 1 0 0 1 1.415-1.415l7.07 7.071a1 1 0 1 1-1.414 1.415l-7.07-7.071Z"})],-1)];const KI={name:"pepicons-times",render:function(e,t){return Ha(),Ka("svg",WI,JI)}};const YI=vw(new class extends yw{constructor(){super(...arguments),t(this,"listeners",{})}async emit(e,t){var n,r;const i=[...null!=(n=this.listeners[e])?n:[]];await Promise.all(null!=(r=i.map((e=>e(t))))?r:[])}on(e,t){var n,r;return(null!=(r=(n=this.listeners)[e])?r:n[e]=$([])).push(t),()=>this.off(e,t)}once(e,t){let n=null;return T((()=>n&&this.off(e,n)),(r=>{var i,a;(null!=(a=(i=this.listeners)[e])?a:i[e]=$([])).push(n=(...e)=>(r(),t(...e)))}))}off(e,t){const n=this.listeners[e];n&&(n.remove(t),n.isEmpty()&&delete this.listeners[e])}});function ZI(e,t){const n=YI.on(e,t);Fi((()=>n()))}function XI(e){return"number"!=typeof e?e:{duration:e}}async function eS(e,t){await NI(e,{...XI(t),before:{styles:{opacity:"0"}},after:{resetStyles:!0}})}async function tS(e,t){await NI(e,{...XI(t),styles:{opacity:["0","1"]}})}async function nS(e,t){await NI(e,{...XI(t),styles:{opacity:["1","0"]}})}async function rS(e,t){const n=e.clientHeight;await NI(e,{...XI(t),styles:{height:["0px",`${n}px`]}})}async function iS(e,t){await NI(e,{...XI(t),styles:{transform:["scale(1)","scale(.95)"]}})}async function aS(e,t){await NI(e,{...XI(t),styles:{transform:["scale(.95)","scale(1)"]}})}async function oS(e,t){const n=e.clientHeight;await NI(e,{...XI(t),styles:{height:[`${n}px`,"0px"]}})}async function sS(e,t){await NI(e,{...XI(t),styles:{transform:["translateY(100%)","translateY(0)"]}})}async function lS(e,t){await NI(e,{...XI(t),styles:{transform:["translateY(0)","translateY(100%)"]}})}const uS={class:"fixed inset-0 flex items-center justify-center m-edge"},cS=Si({props:{modal:aI(),title:sI(),childIndex:iI(),noPadding:YE(),cancellable:YE(!0)},setup(e,{expose:t}){let n=_r(!0),r=_r(!1);const i=No().slots,a=_r(null),o=Lo((()=>!e.noPadding)),s=Lo((()=>{var t;return null!=(t=fC.modals[e.childIndex])?t:null})),l=Lo((()=>e.title||i.title));async function u(){var e;(null==(e=a.value)?void 0:e.$el)&&(n.value||await async function(e,t){const n=FI(e,".app-modal--panel");await Promise.all([nS(n,{duration:t,easing:"ease-in"}),iS(n,{duration:t,easing:"ease-in"})]),e.classList.add("opacity-0"),e.classList.add("pointer-events-none")}(a.value.$el,300),n.value=!0)}async function c(){var e;(null==(e=a.value)?void 0:e.$el)&&(n.value&&await async function(e,t){const n=FI(e,".app-modal--panel");e.classList.remove("opacity-0"),e.classList.remove("pointer-events-none"),await Promise.all([tS(n,{duration:t,easing:"ease-out"}),aS(n,{duration:t,easing:"ease-out"})])}(a.value.$el,200),n.value=!1)}async function d(t){r.value||(YI.emit("modal-will-close",{modal:e.modal,result:t}),await u(),r.value=!0,YI.emit("modal-closed",{modal:e.modal,result:t}))}ZI("close-modal",(async({id:t,result:n})=>{t===e.modal.id&&await d(n)})),ZI("hide-modal",(async({id:t})=>{t===e.modal.id&&await u()})),ZI("show-modal",(async({id:t})=>{t===e.modal.id&&await c()}));const p={close:d};return ui("modal",p),t(p),(t,n)=>{const r=lE,i=KI,u=GI,c=sE,p=oE;return Ha(),Ya(p,{ref_key:"$root",ref:a,open:!0,class:"relative z-50 opacity-0 pointer-events-none",onClose:n[1]||(n[1]=t=>e.cancellable&&d())},{default:ii((()=>[ro("div",uS,[io(c,{class:"app-modal--panel relative max-w-full max-h-full overflow-hidden flex flex-col rounded-md shadow-xl bg-white"},{default:ii((()=>[l.value?(Ha(),Ya(r,{key:0,as:"h2",class:ut(["pt-4 pl-4 text-lg font-medium leading-6 text-gray-900",{"pr-14":e.cancellable,"pr-4":!e.cancellable}])},{default:ii((()=>[go(t.$slots,"title",{},(()=>[oo(pt(e.title),1)]))])),_:3},8,["class"])):lo("",!0),e.cancellable?(Ha(),Ya(u,{key:1,clear:"","aria-label":t.$t("ui.closeModal"),title:t.$t("ui.closeModal"),class:"absolute w-clickable h-clickable top-2 right-2",onClick:n[0]||(n[0]=e=>d())},{default:ii((()=>[io(i,{class:"w-6 h-6","aria-hidden":"true"})])),_:1},8,["aria-label","title"])):lo("",!0),ro("div",{ref:"content",class:ut(["flex overflow-auto flex-col mt-2 max-h-full",{"pl-4 pb-4":o.value,"pr-4":o.value&&(l.value||!e.cancellable),"pr-12":o.value&&!l.value&&e.cancellable}])},[go(t.$slots,"default",{close:d})],2),s.value?(Ha(),Ya(La(s.value.component),fo({key:2,"child-index":e.childIndex+1,modal:s.value},s.value.props),null,16,["child-index","modal"])):lo("",!0)])),_:3})])])),_:3},512)}}});function dS(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let pS={baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const fS=/[&<>"']/,hS=/[&<>"']/g,mS=/[<>"']|&(?!#?\w+;)/,vS=/[<>"']|&(?!#?\w+;)/g,gS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yS=e=>gS[e];function bS(e,t){if(t){if(fS.test(e))return e.replace(hS,yS)}else if(mS.test(e))return e.replace(vS,yS);return e}const wS=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function _S(e){return e.replace(wS,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const xS=/(^|[^\[])\^/g;function kS(e,t){e=e.source||e,t=t||"";const n={replace:(t,r)=>(r=(r=r.source||r).replace(xS,"$1"),e=e.replace(t,r),n),getRegex:()=>new RegExp(e,t)};return n}const AS=/[^\w:]/g,ES=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function IS(e,t,n){if(e){let e;try{e=decodeURIComponent(_S(n)).replace(AS,"").toLowerCase()}catch(Mh){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!ES.test(n)&&(n=function(e,t){SS[" "+e]||(RS.test(e)?SS[" "+e]=e+"/":SS[" "+e]=PS(e,"/",!0));const n=-1===(e=SS[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(CS,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(OS,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(Mh){return null}return n}const SS={},RS=/^[^:]+:\/*[^/]*$/,CS=/^([^:]+:)[\s\S]*$/,OS=/^([^:]+:\/*[^/]*)[\s\S]*$/;const DS={exec:function(){}};function jS(e){let t,n,r=1;for(;r<arguments.length;r++)for(n in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function TS(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let r=!1,i=t;for(;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"})).split(/ \|/);let r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function PS(e,t,n){const r=e.length;if(0===r)return"";let i=0;for(;i<r;){const a=e.charAt(r-i-1);if(a!==t||n){if(a===t||!n)break;i++}else i++}return e.substr(0,r-i)}function MS(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function LS(e,t){if(t<1)return"";let n="";for(;t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}function $S(e,t,n,r){const i=t.href,a=t.title?bS(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){r.state.inLink=!0;const e={type:"link",raw:n,href:i,title:a,text:o,tokens:r.inlineTokens(o,[])};return r.state.inLink=!1,e}return{type:"image",raw:n,href:i,title:a,text:bS(o)}}class NS{constructor(e){this.options=e||pS}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:PS(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const r=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=r.length?e.slice(r.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim():t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=PS(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}const n={type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(e,[]),text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n,r,i,a,o,s,l,u,c,d,p,f,h=t[1].trim();const m=h.length>1,v={type:"list",raw:"",ordered:m,start:m?+h.slice(0,-1):"",loose:!1,items:[]};h=m?`\\d{1,9}\\${h.slice(-1)}`:`\\${h}`,this.options.pedantic&&(h=m?h:"[*+-]");const g=new RegExp(`^( {0,3}${h})((?: [^\\n]*)?(?:\\n|$))`);for(;e&&(f=!1,t=g.exec(e))&&!this.rules.block.hr.test(e);){if(n=t[0],e=e.substring(n.length),u=t[2].split("\n",1)[0],c=e.split("\n",1)[0],this.options.pedantic?(a=2,p=u.trimLeft()):(a=t[2].search(/[^ ]/),a=a>4?1:a,p=u.slice(a),a+=t[1].length),s=!1,!u&&/^ *$/.test(c)&&(n+=c+"\n",e=e.substring(c.length+1),f=!0),!f){const t=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;e&&(d=e.split("\n",1)[0],u=d,this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!t.test(u));){if(u.search(/[^ ]/)>=a||!u.trim())p+="\n"+u.slice(a);else{if(s)break;p+="\n"+u}s||u.trim()||(s=!0),n+=d+"\n",e=e.substring(d.length+1)}}v.loose||(l?v.loose=!0:/\n *\n *$/.test(n)&&(l=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(p),r&&(i="[ ] "!==r[0],p=p.replace(/^\[[ xX]\] +/,""))),v.items.push({type:"list_item",raw:n,task:!!r,checked:i,loose:!1,text:p}),v.raw+=n}v.items[v.items.length-1].raw=n.trimRight(),v.items[v.items.length-1].text=p.trimRight(),v.raw=v.raw.trimRight();const y=v.items.length;for(o=0;o<y;o++){this.lexer.state.top=!1,v.items[o].tokens=this.lexer.blockTokens(v.items[o].text,[]);const e=v.items[o].tokens.filter((e=>"space"===e.type)),t=e.every((e=>{const t=e.raw.split("");let n=0;for(const r of t)if("\n"===r&&(n+=1),n>1)return!0;return!1}));!v.loose&&e.length&&t&&(v.loose=!0,v.items[o].loose=!0)}return v}}html(e){const t=this.rules.block.html.exec(e);if(t){const e={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};return this.options.sanitize&&(e.type="paragraph",e.text=this.options.sanitizer?this.options.sanitizer(t[0]):bS(t[0]),e.tokens=[],this.lexer.inline(e.text,e.tokens)),e}}def(e){const t=this.rules.block.def.exec(e);if(t){t[3]&&(t[3]=t[3].substring(1,t[3].length-1));return{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}}table(e){const t=this.rules.block.table.exec(e);if(t){const e={type:"table",header:TS(t[1]).map((e=>({text:e}))),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(e.header.length===e.align.length){e.raw=t[0];let n,r,i,a,o=e.align.length;for(n=0;n<o;n++)/^ *-+: *$/.test(e.align[n])?e.align[n]="right":/^ *:-+: *$/.test(e.align[n])?e.align[n]="center":/^ *:-+ *$/.test(e.align[n])?e.align[n]="left":e.align[n]=null;for(o=e.rows.length,n=0;n<o;n++)e.rows[n]=TS(e.rows[n],e.header.length).map((e=>({text:e})));for(o=e.header.length,r=0;r<o;r++)e.header[r].tokens=[],this.lexer.inlineTokens(e.header[r].text,e.header[r].tokens);for(o=e.rows.length,r=0;r<o;r++)for(a=e.rows[r],i=0;i<a.length;i++)a[i].tokens=[],this.lexer.inlineTokens(a[i].text,a[i].tokens);return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t){const e={type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e={type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}text(e){const t=this.rules.block.text.exec(e);if(t){const e={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:bS(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):bS(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=PS(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;const n=e.length;let r=0,i=0;for(;i<n;i++)if("\\"===e[i])i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return-1}(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),$S(t,{href:n?n.replace(this.rules.inline._escapes,"$1"):n,title:r?r.replace(this.rules.inline._escapes,"$1"):r},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=(n[2]||n[1]).replace(/\s+/g," ");if(e=t[e.toLowerCase()],!e||!e.href){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return $S(n,e,n[0],this.lexer)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r)return;if(r[3]&&n.match(/[\p{L}\p{N}]/u))return;const i=r[1]||r[2]||"";if(!i||i&&(""===n||this.rules.inline.punctuation.exec(n))){const n=r[0].length-1;let i,a,o=n,s=0;const l="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);null!=(r=l.exec(t));){if(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!i)continue;if(a=i.length,r[3]||r[4]){o+=a;continue}if((r[5]||r[6])&&n%3&&!((n+a)%3)){s+=a;continue}if(o-=a,o>0)continue;if(a=Math.min(a,a+o+s),Math.min(n,a)%2){const t=e.slice(1,n+r.index+a);return{type:"em",raw:e.slice(0,n+r.index+a+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}const t=e.slice(2,n+r.index+a-1);return{type:"strong",raw:e.slice(0,n+r.index+a+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),r=/^ /.test(e)&&/ $/.test(e);return n&&r&&(e=e.substring(1,e.length-1)),e=bS(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){const n=this.rules.inline.autolink.exec(e);if(n){let e,r;return"@"===n[2]?(e=bS(this.options.mangle?t(n[1]):n[1]),r="mailto:"+e):(e=bS(n[1]),r=e),{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e,t){let n;if(n=this.rules.inline.url.exec(e)){let e,r;if("@"===n[2])e=bS(this.options.mangle?t(n[0]):n[0]),r="mailto:"+e;else{let t;do{t=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(t!==n[0]);e=bS(n[0]),r="www."===n[1]?"http://"+e:e}return{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e,t){const n=this.rules.inline.text.exec(e);if(n){let e;return e=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):bS(n[0]):n[0]:bS(this.options.smartypants?t(n[0]):n[0]),{type:"text",raw:n[0],text:e}}}}const BS={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:DS,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};BS.def=kS(BS.def).replace("label",BS._label).replace("title",BS._title).getRegex(),BS.bullet=/(?:[*+-]|\d{1,9}[.)])/,BS.listItemStart=kS(/^( *)(bull) */).replace("bull",BS.bullet).getRegex(),BS.list=kS(BS.list).replace(/bull/g,BS.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+BS.def.source+")").getRegex(),BS._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",BS._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,BS.html=kS(BS.html,"i").replace("comment",BS._comment).replace("tag",BS._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),BS.paragraph=kS(BS._paragraph).replace("hr",BS.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",BS._tag).getRegex(),BS.blockquote=kS(BS.blockquote).replace("paragraph",BS.paragraph).getRegex(),BS.normal=jS({},BS),BS.gfm=jS({},BS.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),BS.gfm.table=kS(BS.gfm.table).replace("hr",BS.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",BS._tag).getRegex(),BS.gfm.paragraph=kS(BS._paragraph).replace("hr",BS.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",BS.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",BS._tag).getRegex(),BS.pedantic=jS({},BS.normal,{html:kS(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",BS._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:DS,paragraph:kS(BS.normal._paragraph).replace("hr",BS.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",BS.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const US={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:DS,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:DS,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function FS(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function zS(e){let t,n,r="";const i=e.length;for(t=0;t<i;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}US._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",US.punctuation=kS(US.punctuation).replace(/punctuation/g,US._punctuation).getRegex(),US.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,US.escapedEmSt=/\\\*|\\_/g,US._comment=kS(BS._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),US.emStrong.lDelim=kS(US.emStrong.lDelim).replace(/punct/g,US._punctuation).getRegex(),US.emStrong.rDelimAst=kS(US.emStrong.rDelimAst,"g").replace(/punct/g,US._punctuation).getRegex(),US.emStrong.rDelimUnd=kS(US.emStrong.rDelimUnd,"g").replace(/punct/g,US._punctuation).getRegex(),US._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,US._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,US._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,US.autolink=kS(US.autolink).replace("scheme",US._scheme).replace("email",US._email).getRegex(),US._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,US.tag=kS(US.tag).replace("comment",US._comment).replace("attribute",US._attribute).getRegex(),US._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,US._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,US._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,US.link=kS(US.link).replace("label",US._label).replace("href",US._href).replace("title",US._title).getRegex(),US.reflink=kS(US.reflink).replace("label",US._label).replace("ref",BS._label).getRegex(),US.nolink=kS(US.nolink).replace("ref",BS._label).getRegex(),US.reflinkSearch=kS(US.reflinkSearch,"g").replace("reflink",US.reflink).replace("nolink",US.nolink).getRegex(),US.normal=jS({},US),US.pedantic=jS({},US.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:kS(/^!?\[(label)\]\((.*?)\)/).replace("label",US._label).getRegex(),reflink:kS(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",US._label).getRegex()}),US.gfm=jS({},US.normal,{escape:kS(US.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),US.gfm.url=kS(US.gfm.url,"i").replace("email",US.gfm._extended_email).getRegex(),US.breaks=jS({},US.gfm,{br:kS(US.br).replace("{2,}","*").getRegex(),text:kS(US.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});class qS{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||pS,this.options.tokenizer=this.options.tokenizer||new NS,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:BS.normal,inline:US.normal};this.options.pedantic?(t.block=BS.pedantic,t.inline=US.pedantic):this.options.gfm&&(t.block=BS.gfm,this.options.breaks?t.inline=US.breaks:t.inline=US.gfm),this.tokenizer.rules=t}static get rules(){return{block:BS,inline:US}}static lex(e,t){return new qS(t).lex(e)}static lexInline(e,t){return new qS(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let n,r,i,a;for(this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),1===n.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?t.push(n):(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(r.raw+="\n"+n.raw,r.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else{if(i=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startBlock.forEach((function(e){r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i)))r=t[t.length-1],a&&"paragraph"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n),a=i.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let n,r,i,a,o,s,l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,a.index)+"["+LS("a",a[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,a.index)+"["+LS("a",a[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.escapedEmSt.exec(l));)l=l.slice(0,a.index)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(o||(s=""),o=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,s))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e,zS))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e,zS))){if(i=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startInline.forEach((function(e){r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(n=this.tokenizer.inlineText(i,FS))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(s=n.raw.slice(-1)),o=!0,r=t[t.length-1],r&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(n.raw.length),t.push(n);return t}}class VS{constructor(e){this.options=e||pS}code(e,t,n){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,r);null!=t&&t!==e&&(n=!0,e=t)}return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+bS(r,!0)+'">'+(n?e:bS(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:bS(e,!0))+"</code></pre>\n"}blockquote(e){return"<blockquote>\n"+e+"</blockquote>\n"}html(e){return e}heading(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,n){const r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return"<li>"+e+"</li>\n"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){const n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,n){if(null===(e=IS(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<a href="'+bS(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>",r}image(e,t,n){if(null===(e=IS(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">",r}text(e){return e}}class QS{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}class HS{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let n=e,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[e];do{r++,n=e+"-"+r}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=r,this.seen[n]=0),n}slug(e,t={}){const n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)}}class GS{constructor(e){this.options=e||pS,this.options.renderer=this.options.renderer||new VS,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new QS,this.slugger=new HS}static parse(e,t){return new GS(t).parse(e)}static parseInline(e,t){return new GS(t).parseInline(e)}parse(e,t=!0){let n,r,i,a,o,s,l,u,c,d,p,f,h,m,v,g,y,b,w,_="";const x=e.length;for(n=0;n<x;n++)if(d=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type]&&(w=this.options.extensions.renderers[d.type].call({parser:this},d),!1!==w||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(d.type)))_+=w||"";else switch(d.type){case"space":continue;case"hr":_+=this.renderer.hr();continue;case"heading":_+=this.renderer.heading(this.parseInline(d.tokens),d.depth,_S(this.parseInline(d.tokens,this.textRenderer)),this.slugger);continue;case"code":_+=this.renderer.code(d.text,d.lang,d.escaped);continue;case"table":for(u="",l="",a=d.header.length,r=0;r<a;r++)l+=this.renderer.tablecell(this.parseInline(d.header[r].tokens),{header:!0,align:d.align[r]});for(u+=this.renderer.tablerow(l),c="",a=d.rows.length,r=0;r<a;r++){for(s=d.rows[r],l="",o=s.length,i=0;i<o;i++)l+=this.renderer.tablecell(this.parseInline(s[i].tokens),{header:!1,align:d.align[i]});c+=this.renderer.tablerow(l)}_+=this.renderer.table(u,c);continue;case"blockquote":c=this.parse(d.tokens),_+=this.renderer.blockquote(c);continue;case"list":for(p=d.ordered,f=d.start,h=d.loose,a=d.items.length,c="",r=0;r<a;r++)v=d.items[r],g=v.checked,y=v.task,m="",v.task&&(b=this.renderer.checkbox(g),h?v.tokens.length>0&&"paragraph"===v.tokens[0].type?(v.tokens[0].text=b+" "+v.tokens[0].text,v.tokens[0].tokens&&v.tokens[0].tokens.length>0&&"text"===v.tokens[0].tokens[0].type&&(v.tokens[0].tokens[0].text=b+" "+v.tokens[0].tokens[0].text)):v.tokens.unshift({type:"text",text:b}):m+=b),m+=this.parse(v.tokens,h),c+=this.renderer.listitem(m,y,g);_+=this.renderer.list(c,p,f);continue;case"html":_+=this.renderer.html(d.text);continue;case"paragraph":_+=this.renderer.paragraph(this.parseInline(d.tokens));continue;case"text":for(c=d.tokens?this.parseInline(d.tokens):d.text;n+1<x&&"text"===e[n+1].type;)d=e[++n],c+="\n"+(d.tokens?this.parseInline(d.tokens):d.text);_+=t?this.renderer.paragraph(c):c;continue;default:{const e='Token with "'+d.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return _}parseInline(e,t){t=t||this.renderer;let n,r,i,a="";const o=e.length;for(n=0;n<o;n++)if(r=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(i=this.options.extensions.renderers[r.type].call({parser:this},r),!1!==i||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)))a+=i||"";else switch(r.type){case"escape":case"text":a+=t.text(r.text);break;case"html":a+=t.html(r.text);break;case"link":a+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case"image":a+=t.image(r.href,r.title,r.text);break;case"strong":a+=t.strong(this.parseInline(r.tokens,t));break;case"em":a+=t.em(this.parseInline(r.tokens,t));break;case"codespan":a+=t.codespan(r.text);break;case"br":a+=t.br();break;case"del":a+=t.del(this.parseInline(r.tokens,t));break;default:{const e='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return a}}function WS(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(n=t,t=null),MS(t=jS({},WS.defaults,t||{})),n){const r=t.highlight;let i;try{i=qS.lex(e,t)}catch(Mh){return n(Mh)}const a=function(e){let a;if(!e)try{t.walkTokens&&WS.walkTokens(i,t.walkTokens),a=GS.parse(i,t)}catch(Mh){e=Mh}return t.highlight=r,e?n(e):n(null,a)};if(!r||r.length<3)return a();if(delete t.highlight,!i.length)return a();let o=0;return WS.walkTokens(i,(function(e){"code"===e.type&&(o++,setTimeout((()=>{r(e.text,e.lang,(function(t,n){if(t)return a(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),o--,0===o&&a()}))}),0))})),void(0===o&&a())}try{const n=qS.lex(e,t);return t.walkTokens&&WS.walkTokens(n,t.walkTokens),GS.parse(n,t)}catch(Mh){if(Mh.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+bS(Mh.message+"",!0)+"</pre>";throw Mh}}WS.options=WS.setOptions=function(e){var t;return jS(WS.defaults,e),t=WS.defaults,pS=t,WS},WS.getDefaults=dS,WS.defaults=pS,WS.use=function(...e){const t=jS({},...e),n=WS.defaults.extensions||{renderers:{},childTokens:{}};let r;e.forEach((e=>{if(e.extensions&&(r=!0,e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if(e.renderer){const t=n.renderers?n.renderers[e.name]:null;n.renderers[e.name]=t?function(...n){let r=e.renderer.apply(this,n);return!1===r&&(r=t.apply(this,n)),r}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");n[e.level]?n[e.level].unshift(e.tokenizer):n[e.level]=[e.tokenizer],e.start&&("block"===e.level?n.startBlock?n.startBlock.push(e.start):n.startBlock=[e.start]:"inline"===e.level&&(n.startInline?n.startInline.push(e.start):n.startInline=[e.start]))}e.childTokens&&(n.childTokens[e.name]=e.childTokens)}))),e.renderer){const n=WS.defaults.renderer||new VS;for(const t in e.renderer){const r=n[t];n[t]=(...i)=>{let a=e.renderer[t].apply(n,i);return!1===a&&(a=r.apply(n,i)),a}}t.renderer=n}if(e.tokenizer){const n=WS.defaults.tokenizer||new NS;for(const t in e.tokenizer){const r=n[t];n[t]=(...i)=>{let a=e.tokenizer[t].apply(n,i);return!1===a&&(a=r.apply(n,i)),a}}t.tokenizer=n}if(e.walkTokens){const n=WS.defaults.walkTokens;t.walkTokens=function(t){e.walkTokens.call(this,t),n&&n.call(this,t)}}r&&(t.extensions=n),WS.setOptions(t)}))},WS.walkTokens=function(e,t){for(const n of e)switch(t.call(WS,n),n.type){case"table":for(const e of n.header)WS.walkTokens(e.tokens,t);for(const e of n.rows)for(const n of e)WS.walkTokens(n.tokens,t);break;case"list":WS.walkTokens(n.items,t);break;default:WS.defaults.extensions&&WS.defaults.extensions.childTokens&&WS.defaults.extensions.childTokens[n.type]?WS.defaults.extensions.childTokens[n.type].forEach((function(e){WS.walkTokens(n[e],t)})):n.tokens&&WS.walkTokens(n.tokens,t)}},WS.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");MS(t=jS({},WS.defaults,t||{}));try{const n=qS.lexInline(e,t);return t.walkTokens&&WS.walkTokens(n,t.walkTokens),GS.parseInline(n,t)}catch(Mh){if(Mh.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+bS(Mh.message+"",!0)+"</pre>";throw Mh}},WS.Parser=GS,WS.parser=GS.parse,WS.Renderer=VS,WS.TextRenderer=QS,WS.Lexer=qS,WS.lexer=qS.lex,WS.Tokenizer=NS,WS.Slugger=HS,WS.parse=WS,WS.options,WS.setOptions,WS.use,WS.walkTokens,WS.parseInline,GS.parse,qS.lex;const JS=["topLeft","topRight","bottomRight","bottomLeft"];function KS(e={}){const t={min:50,max:150,topLeft:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,...e};return De(2).map((()=>JS.map((e=>function(e,t){const{min:n,max:r,...i}=t;return i[e]?`${je(n,r)}px`:"0"}(e,t))).join(" "))).join(" / ")}const YS={mounted(e,{value:t}){!1!==t&&(!0!==t&&t||(t={}),e.style.borderRadius=KS(t))}},ZS=Object.freeze(Object.defineProperty({__proto__:null,sortedCorners:JS,randomWobblyBorderRadius:KS,default:YS},Symbol.toStringTag,{value:"Module"}));function XS(e){var t,n,r;return{url:null!=(t=eR(e,"url"))?t:"#",classes:null!=(n=eR(e,"class"))?n:"",color:null!=(r=eR(e,"color"))?r:QI.Primary}}function eR(e,t){var n;return null==(n=e.match(new RegExp(`${t}="([^"]+)"`)))?void 0:n[1]}function tR({url:e,text:t,title:n,color:r,classes:i}){const a=KS(),o=`${function(e){switch(e){case QI.Solid:return"text-brand-solid-700 focus-visible:ring-brand-solid-100 focus-visible:bg-brand-solid-100";case QI.Danger:return"text-red-700 focus-visible:ring-red-100 focus-visible:bg-red-100";default:return"text-primary-700 focus-visible:ring-primary-200 focus-visible:bg-primary-200"}}(r)} ${null!=i?i:""}`;return e.startsWith("action:")?`<button\n            type="button"\n            style="border-radius:${a}" ${n&&`title="${n}"`||""}\n            class="no-underline hover:underline focus-visible:outline-none focus-visible:ring-2 ${o}"\n            data-markdown-action="${e.substring("action:".length)}"\n        >${t}</button>`:`<a\n        href="${e}"\n        style="border-radius:${a}" ${n&&`title="${n}"`||""}\n        ${e.startsWith("/")?"":'target="_blank"'}\n        class="no-underline hover:underline focus-visible:outline-none focus-visible:ring-2 ${o}"\n    >${t}</a>`}function nR(e){return WS(function(e){const t=Te(e,/<CoreLink([^>]*)>([^<]+)<\/CoreLink>/g);for(const[n,r,i]of t){const{url:t,classes:a,color:o}=XS(r);e=e.replace(n,tR({url:t,text:i,color:o,classes:a}))}return e}(e))}const rR=Si({props:{text:oI(),actions:tI((()=>({}))),heading:YE(),raw:YE()},setup(e){const t=Lo((()=>{const t=nR(e.text);return e.heading?t.replace("<p>","<span>").replace("</p>","</span>"):t}));return(n,r)=>{const i=$a("safe-html");return va((Ha(),Ka("div",{class:ut(e.raw||"prose"),onClick:r[0]||(r[0]=t=>function({target:t}){var n,r;t instanceof HTMLElement&&t.dataset.markdownAction&&(null==(r=(n=e.actions)[t.dataset.markdownAction])||r.call(n))}(t))},null,2)),[[i,t.value]])}}}),iR={key:0,class:"text-xl font-semibold"},aR={class:"flex flex-row-reverse items-end space-x-2 space-x-reverse mt-4"},oR=Si({props:{title:sI(),message:sI(),acceptText:sI(),acceptColor:ZE(QI),cancelText:sI(),showCancel:YE(!0)},setup:e=>(t,n)=>{const r=rR,i=GI,a=cS,o=$a("initial-focus");return Ha(),Ya(a,{cancellable:!1},{default:ii((({close:n})=>[e.title?(Ha(),Ka("h2",iR,pt(e.title),1)):lo("",!0),io(r,{class:"mt-2",text:e.message||t.$t("ui.confirm")},null,8,["text"]),ro("div",aR,[va((Ha(),Ya(i,{color:e.acceptColor,onClick:e=>n(!0)},{default:ii((()=>[oo(pt(e.acceptText||t.$t("ui.confirm_accept")),1)])),_:2},1032,["color","onClick"])),[[o]]),e.showCancel?(Ha(),Ya(i,{key:0,clear:"",onClick:e=>n(!1)},{default:ii((()=>[oo(pt(e.cancelText||t.$t("ui.confirm_cancel")),1)])),_:2},1032,["onClick"])):lo("",!0)])])),_:1})}}),sR=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},lR={class:"relative flex flex-col flex-grow items-center justify-center w-full h-full max-w-content"};const uR=sR({},[["render",function(e,t){return Ha(),Ka("main",lR,[go(e.$slots,"default")])}]]),cR={width:"1.2em",height:"0.4229226361031519em",viewBox:"0 0 1047 369"},dR=[ro("path",{"fill-rule":"evenodd",d:"M757.88 83.95c-.24 2.05-1.1 3.9-2.59 5.55-1.49 1.65-2.35 3.5-2.59 5.55-.39 3.33-1.55 5.54-3.5 6.61-3.98 2.92-19.78 3.56-47.41 1.92l-20.57-.82-1.34 11.54c-.86 7.44-.27 11.28 1.79 11.52.26.03.64.07 1.15.13.54-.2 1.07-.27 1.58-.21 6.02-.34 19.55-.47 40.6-.37 21.33-.13 34.58-.03 39.74.31l2.69.31c10.77 1.25 17.25 7.07 19.43 17.46.61 3.71.87 5.95.78 6.72-.27 2.31-2 6.01-5.18 11.1-3.82 6.06-6.5 9-8.04 8.82l-.77-.09-1.15-.13c-4.1-.47-14.42-.11-30.93 1.1-16.49.95-26.87 1.96-31.16 3.02-2.94.7-9.47.98-19.6.85-1.31.11-2.88.19-4.71.24-1.54-.18-2.69-.31-3.46-.4-.51-.06-1.3-.02-2.35.12-1.06.14-1.74.45-2.06.93-.32.48-.66 1.22-1.04 2.22-.35.74-.61 1.88-.79 3.42-.15 1.28-.23 3.09-.24 5.43.02 2.08-.07 5.06-.25 8.94.1 3.65.1 7.03 0 10.14l.02 23.4 17.57 3.2c19.06 3.77 32.69 7.29 40.89 10.58 8.23 3.03 14.63 7.28 19.19 12.75 2.53 2.89 7.51 6.98 14.96 12.26 5.77 4.05 9.62 7.87 11.54 11.47 2.18 3.63 2.91 8.53 2.2 14.68-.59 5.13-1.33 9.21-2.19 12.22-2.88 11.37-4.47 17.29-4.79 17.77-.92 1.19-2.4 1.67-4.46 1.43-4.36-.5-9.45-3.69-15.27-9.57-28.67-28.53-52.37-43.89-71.1-46.05-3.33-.39-5.8-.41-7.4-.08-2.65.47-4.43 1.18-5.31 2.11-.63.97-1.11 2.86-1.44 5.68-1.2 5.84-2.57 9.84-4.12 12-1.9 2.9-3.05 6.15-3.47 9.74-.39 3.33-4.33 10.42-11.82 21.25-7.24 10.86-13.65 19.09-19.23 24.68-8.76 8.34-23.06 12.8-42.88 13.37-4.68-.02-7.78-.12-9.32-.3-4.62-.53-10.53-2.26-17.73-5.17-9.45-3.69-15.76-7.54-18.94-11.55-3.18-4.01-5.61-11.05-7.3-21.12-1.67-7.99-2.29-13.91-1.84-17.76.12-1.03 1.14-5.33 3.05-12.9 2.32-8.83 5.25-16.16 8.78-21.99 3.79-5.8 9.78-12.65 17.97-20.54 7.33-7.21 17.24-13.08 29.73-17.62 20.65-7.75 36.24-11.01 46.76-9.8l5.77.67 2.33-23.52 1.9-23.18-12.99-2.28-4.23-.49c-7.44-.86-15.83-.27-25.16 1.77-13.59 2.85-25.38 3.69-35.39 2.53-5.64-.65-13.75-2.5-24.32-5.54-10.02-3.24-16.97-6.12-20.84-8.65-3.61-2.5-5.19-5.67-4.75-9.52.12-1.03.55-2.54 1.3-4.53 2.37-7 6.44-11.86 12.22-14.57 5.77-2.71 14.78-4.14 27.01-4.28 7.27.06 14.05-.06 20.32-.38 6.28-.31 14.6-.39 24.98-.23 19.73.2 31.04.21 33.92.03 2.91-.44 4.54-2.2 4.9-5.28.5-4.36.58-8.38.23-12.06-.25-2.37-.71-3.98-1.39-4.84-.68-.86-2.69-1.48-6.02-1.87-4.36-.5-16.29-.72-35.8-.63-28.92.55-50.43.01-64.54-1.62-3.59-.42-6.38-1-8.38-1.75-2.48-1.07-4.53-3.51-6.17-7.34-1.61-4.09-2.2-7.92-1.79-11.52.59-5.13 5.05-9.94 13.37-14.44 8.58-4.47 18.1-7 28.57-7.61 22.02-1.61 42.27-1.35 60.74.79 6.93.8 10.54-.08 10.83-2.65.36-3.08-.24-6.92-1.79-11.52-1.26-4.83-2.7-8.11-4.32-9.86-2.07-2.32-2.99-4.51-2.75-6.56.06-.51.55-2.54 1.48-6.07 1.48-6.07 4.97-10.34 10.45-12.83 4.43-2.35 9.06-4.15 13.88-5.41 4-.84 6.38-1.21 7.15-1.12 1.03.12 2.67 1.61 4.94 4.47 1.76 2.8 3.4 7.67 4.94 14.61 1.82 6.71 2.54 11.73 2.16 15.07-.36 3.08.97 6.22 3.98 9.43 2.04 2.58 4.09 3.98 6.14 4.22 1.54.18 4.15.09 7.83-.26 14.5-1.7 25.59-2.11 33.29-1.22 4.62.53 10.7 1.89 18.25 4.06 11.08 3.1 17.67 5.68 19.77 7.75 1.39 1.46 1.83 4.37 1.33 8.73s-1.44 6.85-2.81 7.47c-1.37.62-2.25 2.6-2.64 5.93zM634.86 270.93c.4-1.25.71-2.78.92-4.57.18-1.54-.25-2.37-1.27-2.49-1.03-.12-3.42.38-7.19 1.51-12.88 3.45-23.07 8.38-30.57 14.79-5.15 4.08-9.14 5.96-11.96 5.63-2.57-.3-5.32 1.07-8.27 4.11-2.69 3.07-4.69 6.87-6 11.39-.35.74-.61 1.88-.79 3.42-.27 2.31 1.59 5.38 5.56 9.22 3.52 3.27 6.69 5.06 9.51 5.39 2.05.24 3.86.32 5.43.24 12.01-.43 21.32-4.55 27.95-12.36 2.12-2.61 4.94-7.88 8.46-15.79 3.8-8.14 6.54-14.97 8.22-20.5zM990.6 56.85c3.14-2.4 7.36-3.26 12.67-2.56 5.54.73 9.63 2.68 12.26 5.85.6.78 1.82 2.24 3.65 4.36 2.06 2.15 3.4 3.62 4 4.4 5.36 5.64 10.54 19.83 15.52 42.57 5.37 25.14 7.45 42.33 6.23 51.56-.61 4.62-1.88 7.97-3.8 10.07-7.25 8.67-14.72 12.74-22.4 12.19-5.08-.67-8.87-3.99-11.37-9.96-2.5-5.97-5.13-18.06-7.89-36.28-1.21-8.62-3.37-16.3-6.47-23.05-2.19-4.75-3.86-9.91-5.01-15.46-1.12-5.78-2.15-10.38-3.11-13.8-1.87-5.41-2.57-9.85-2.12-13.32.27-2.08.6-3.68.99-4.8 1.66-5.42 3.94-9.35 6.84-11.78zm-86.13 174.66c-.18 1.39-.2 4.2-.06 8.45.17 4.02 1.07 10.59 2.68 19.73 1.84 9.17 3.34 13.83 4.5 13.98 1.39.18 4.22-2.61 8.51-8.39 4.32-6.01 7.36-11.24 9.12-15.71 1.41-3.57 2.64-5.76 3.69-6.56 1.05-.8 3.72-1.51 8.03-2.11 4.8-.78 8.12-1.04 9.97-.8.23.03.56.19.99.48l.35.05c1.96 1.2 4.06 5.7 6.32 13.52 2.83 8.83 3.84 16.25 3.05 22.25-.85 6.46-4.03 12.74-9.53 18.82-14.55 15.93-28.74 24.63-42.56 26.09-5.03.74-9.05.92-12.05.52-3.69-.49-8.88-3.05-15.54-7.69-7.99-5.28-13.38-11.63-16.16-19.05-2.75-7.64-4.67-20.7-5.75-39.16-.54-10.17 1.21-30.49 5.23-60.97 2.01-15.24 4-27.66 5.98-37.26 5.74-27.43 12.92-44.45 21.54-51.06 3.92-3.01 7.03-4.36 9.34-4.05 3 .4 6.87 2.2 11.62 5.41 4.74 3.21 7.57 5.82 8.48 7.81 1.53 4.43 1.58 12.07.14 22.92-1.49 11.31-4.15 23.41-7.96 36.3-3.72 12.19-6.06 21.87-7 29.02-.98 7.39-2.68 25.6-2.92 27.45zM345.99 31.16c23.54.58 51.84 1.89 84.9 3.93 32.62 2.02 53 4.37 61.13 7.05 5.11 2.06 7.43 7.01 6.94 14.84-.54 8.7-2.66 18.39-6.38 29.08-4.21 11.53-7.96 26.36-11.26 44.49-5.9 31.94-18.71 62.59-38.42 91.94-11.54 17.19-25.87 33.55-42.98 49.08-17.09 15.1-33.05 26.12-47.89 33.06L329.12 315l-3.17 19.45c-2.57 13.38-5.9 21.25-9.97 23.62-5.43 3.16-20.59 4.62-45.46 4.4-25.77.15-42.2 1.1-49.3 2.85-6.69 2.21-20.25 2.68-40.69 1.42-18.7-1.16-29.07-2.89-31.12-5.2-2.04-2.31-3.03-11.1-2.96-26.38l.11-22.92-25.62-19.92c-16.24-12.79-34.55-30.95-54.92-54.48-20.38-23.53-33.63-42.25-39.76-56.16-6.92-15.27-12.88-35.29-17.9-60.05-4.99-25.2-7.05-44.97-6.16-59.32.97-15.66 2.4-24.74 4.3-27.24 3.8-5 18.77-6.92 44.89-5.74 17.4 1.07 52.72 1.73 105.98 1.96 53.28-.2 82.79-.78 88.52-1.74 5.3-.98 38.67-.45 100.1 1.6zM234.44 53.63c-2.78 2-16.19 3.69-40.24 5.08-6.77.38-12.33 1.35-16.69 2.94-2.93 1.28-5.62 3.52-8.08 6.72-2.43 2.96-3.84 6.16-4.24 9.59-.32 2.75 1.22 6.52 4.6 11.31 3.41 4.57 6.38 7 8.89 7.29 8.69 1.01 23.8.67 45.33-1.01 21.75-1.65 35.18-3.46 40.28-5.42 1.96-.93 5.49-1.34 10.57-1.21 8.34.04 14.69-2.7 19.04-8.23 2.71-3.4 4.27-6.81 4.66-10.24.58-5.03-1.99-9.85-7.72-14.46-3.4-2.71-8.75-4.49-16.08-5.34-7.55-.87-15.55-.87-24 0-9.36.77-14.81 1.76-16.34 2.98zm-24.75 72.6c-1.79 1.42-3.37 2.04-4.74 1.89-.92-.11-2.39.65-4.44 2.27-2.04 1.62-4.55 2.26-7.53 1.91-3.89-.45-8.59 1.09-14.1 4.63-5.28 3.56-9.38 7.96-12.31 13.18-3.46 5.86-5.31 9.82-5.55 11.88-.21 1.83.6 4.82 2.44 8.98 3.9 8.34 10.2 13.01 18.9 14.01 12.58 1.46 29.16-4.51 49.72-17.89 10.03-6.49 17.33-9.47 21.9-8.94 2.75.32 6.4 1.78 10.97 4.4 6.49 4 10.81 7.74 12.96 11.24 2.37 3.52 3.23 8.14 2.57 13.86-.82 7.09-2.71 13.37-5.66 18.82-2.72 5.48-10.64 18.82-23.76 40.03-5.69 9.08-10.7 15.34-15.04 18.78-4.11 3.47-10.27 6.58-18.47 9.34-6.72 2-11.35 3.9-13.88 5.7-2.53 1.79-3.96 4.18-4.31 7.15-.26 2.29-.26 4.26.01 5.91.95 9.85 4.18 17.99 9.69 24.42 2.63 3.32 5.78 5.19 9.44 5.61 9.15 1.06 26.32-10.05 51.51-33.34 13.21-11.92 19.94-19.02 20.21-21.31.24-2.06 2.44-6.09 6.62-12.1 9.34-12.6 15.84-29.7 19.51-51.3 1.41-8.18 2.21-13.08 2.4-14.68.69-5.95.49-13.27-.58-21.98-1.23-9.42-3.51-16.75-6.84-22.01-3.1-5.23-8.52-10.49-16.26-15.79l-11.6-7.95-23.34-2.7c-4.35-.5-7.91-.8-10.68-.89-2.75-.32-5.05-.47-6.9-.45-1.83-.21-3.69-.2-5.57.05-1.86.02-3.27.2-4.24.55-.71.15-2.38.54-5 1.16-2.37.42-4.39.88-6.07 1.38-5.68.97-9.66 2.36-11.96 4.18z"},null,-1)];const pR={name:"app-umai",render:function(e,t){return Ha(),Ka("svg",cR,dR)}},fR=vw(),hR=(...e)=>fR.translate(...e),mR={class:"text-red-600 mt-2 text-2xl font-medium"},vR=Si({props:{report:aI()},setup(e){const t=Lo((()=>e.report.description===hR("errors.unsupportedBrowser_indexedDB")));return(n,r)=>{const i=pR,a=rR,o=GI,s=uR;return Ha(),Ya(s,null,{default:ii((()=>[io(i,{class:"h-auto w-[250px] max-w-[60vw] fill-red-600","aria-hidden":"true"}),ro("h1",mR,pt(e.report.title),1),e.report.description?(Ha(),Ya(a,{key:0,text:e.report.description,class:"text-center mt-4"},null,8,["text"])):lo("",!0),t.value?(Ha(),Ka(Ua,{key:1},[n.$browser.isFirefox?(Ha(),Ya(a,{key:0,text:n.$t("errors.unsupportedBrowser_indexedDBHelpFirefox"),class:"mt-1"},null,8,["text"])):lo("",!0),io(o,{url:"https://caniuse.com/#feat=indexeddb",color:"danger",class:"mt-3"},{default:ii((()=>[oo(pt(n.$t("errors.unsupportedBrowser_indexedDBHelp")),1)])),_:1})],64)):lo("",!0)])),_:1})}}}),gR={class:"fixed inset-0 bg-dark-overlay flex items-center justify-center z-10"},yR={class:"bg-white p-4 rounded-md"},bR=Si({props:{text:sI("Loading...")},setup:e=>(t,n)=>(Ha(),Ka("div",gR,[ro("div",yR,pt(e.text),1)]))}),wR=Si({props:{title:sI(),content:oI()},setup:e=>(t,n)=>{const r=rR,i=cS;return Ha(),Ya(i,{title:e.title},{default:ii((()=>[io(r,{text:e.content},null,8,["text"])])),_:1},8,["title"])}}),_R=Si({props:{color:ZE(QI),secondary:YE()},setup(e){const t={[QI.Primary]:{text:"text-primary-700",hoverText:"hover:text-primary-700",focusVisibleRing:"focus-visible:ring-primary-200",focusVisibleBackground:"focus-visible:bg-primary-200"},[QI.Solid]:{text:"text-brand-solid-700",hoverText:"hover:text-brand-solid-700",focusVisibleRing:"focus-visible:ring-brand-solid-100",focusVisibleBackground:"focus-visible:bg-brand-solid-100"},[QI.Danger]:{text:"text-red-700",hoverText:"hover:text-red-700",focusVisibleRing:"focus-visible:ring-red-100",focusVisibleBackground:"focus-visible:bg-red-100"}},n=Lo((()=>{const n=t[e.color];return(e.secondary?["text-gray-700",n.hoverText,n.focusVisibleBackground,n.focusVisibleRing]:["hover:underline",n.text,n.focusVisibleBackground,n.focusVisibleRing]).join(" ")}));return(e,t)=>{const r=Pa("HeadlessLink"),i=$a("wobbly-border");return va((Ha(),Ya(r,{class:ut(["inline-block focus-visible:outline-none focus-visible:ring-4",n.value])},{default:ii((()=>[go(e.$slots,"default")])),_:3},8,["class"])),[[i]])}}}),xR={class:"flex flex-col items-center justify-center flex-grow w-full h-full p-8"},kR={class:"font-medium text-2xl"};const AR=sR({},[["render",function(e,t){const n=_R;return Ha(),Ka("div",xR,[ro("h1",kR,pt(e.$t("errors.notFound")),1),io(n,{route:"home",class:"mt-2"},{default:ii((()=>[oo(pt(e.$t("errors.notFound_goHome")),1)])),_:1})])}]]),ER={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},IR=[ro("path",{fill:"currentColor",d:"M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16c1.1 0 2-.9 2-2V6a2 2 0 0 0-2-2zm0 14H4V8h16v10zm-2-1h-6v-2h6v2zM7.5 17l-1.41-1.41L8.67 13l-2.59-2.59L7.5 9l4 4l-4 4z"},null,-1)];const SR={name:"ic-baseline-terminal",render:function(e,t){return Ha(),Ka("svg",ER,IR)}},RR={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},CR=[ro("g",{fill:"currentColor"},[ro("path",{"fill-rule":"evenodd",d:"M15.5 6.5h-8a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-8a1 1 0 0 0-1-1Zm-7 8v-6h6v6h-6Z","clip-rule":"evenodd"}),ro("path",{d:"M6.5 13.5h-2a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v2h-2v-1h-6v6h1v2Z"})],-1)];const OR={name:"pepicons-duplicate",render:function(e,t){return Ha(),Ka("svg",RR,CR)}},DR={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},jR=[ro("path",{fill:"currentColor",d:"m15.3 14.89l2.77 2.77a1 1 0 0 1 0 1.41a1 1 0 0 1-1.41 0l-2.59-2.58A5.99 5.99 0 0 1 11 18V9.04a1 1 0 0 0-2 0V18a5.98 5.98 0 0 1-3.07-1.51l-2.59 2.58a1 1 0 0 1-1.41 0a1 1 0 0 1 0-1.41l2.77-2.77A5.95 5.95 0 0 1 4.07 13H1a1 1 0 1 1 0-2h3V8.41L.93 5.34a1 1 0 0 1 0-1.41a1 1 0 0 1 1.41 0l2.1 2.1h11.12l2.1-2.1a1 1 0 0 1 1.41 0a1 1 0 0 1 0 1.41L16 8.41V11h3a1 1 0 1 1 0 2h-3.07c-.1.67-.32 1.31-.63 1.89zM15 5H5a5 5 0 1 1 10 0z"},null,-1)];const TR={name:"zondicons-bug",render:function(e,t){return Ha(),Ka("svg",DR,jR)}},PR={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},MR=[ro("path",{fill:"currentColor",d:"M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"},null,-1)];const LR={name:"mdi-github",render:function(e,t){return Ha(),Ka("svg",PR,MR)}},$R={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},NR=[ro("g",{fill:"currentColor"},[ro("path",{d:"M11.732 9.36a1 1 0 1 1 1.536 1.28l-5 6a1 1 0 1 1-1.536-1.28l5-6Z"}),ro("path",{d:"M6.732 4.64a1 1 0 0 1 1.536-1.28l5 6a1 1 0 1 1-1.536 1.28l-5-6Z"})],-1)];const BR={name:"pepicons-angle-right",render:function(e,t){return Ha(),Ka("svg",$R,NR)}},UR={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},FR=[ro("g",{fill:"currentColor"},[ro("path",{d:"M6.732 10.64a1 1 0 1 1 1.536-1.28l5 6a1 1 0 1 1-1.536 1.28l-5-6Z"}),ro("path",{d:"M8.268 10.64a1 1 0 1 1-1.536-1.28l5-6a1 1 0 1 1 1.536 1.28l-5 6Z"})],-1)];const zR={name:"pepicons-angle-left",render:function(e,t){return Ha(),Ka("svg",UR,FR)}},qR={class:"px-4 pt-1 pb-4"},VR={class:"flex justify-between"},QR={class:"font-medium text-lg flex items-center"},HR={key:0,class:"flex flex-row-reverse space-x-reverse space-x-2 mr-10"},GR={class:"hidden group-hover:block group-hover:ml-2 group-focus:block group-focus:ml-2"},WR={class:"hidden group-hover:block group-hover:ml-2 group-focus:block group-focus:ml-2"},JR={class:"hidden group-hover:block group-hover:ml-2 group-focus:block group-focus:ml-2"},KR={class:"hidden group-hover:block group-hover:ml-2 group-focus:block group-focus:ml-2"},YR={key:1,class:"flex flex-row justify-end mt-4"},ZR=["textContent"],XR=Si({props:{reports:nI()},setup(e){const t=_r(0),n=Lo((()=>e.reports[t.value])),r=Lo((()=>n.value.description?`${n.value.title}: ${n.value.description}`:n.value.title)),i=Lo((()=>n.value.details)),a=Lo((()=>{var e;const t=hR("errors.githubIssueBody"),n=encodeURIComponent(r.value),a=encodeURIComponent(t.replace("%DETAILS%",Pe(null!=(e=i.value)?e:"Details missing from report",1900-t.length-n.length-Jj.sourceUrl.length).trim()));return`${Jj.sourceUrl}/issues/new?title=${n}&body=${a}`}));function o(){window.error=n.value.error,fC.showSnackbar(hR("errors.addedToConsole"))}async function s(){await navigator.clipboard.writeText(`${r.value}\n\n${i.value}`),fC.showSnackbar(hR("errors.copiedToClipboard"))}return(r,l)=>{const u=rR,c=zR,d=GI,p=BR,f=LR,h=TR,m=OR,v=SR,g=cS;return Ha(),Ya(g,{"no-padding":"",cancellable:!!i.value},{default:ii((({close:g})=>[ro("div",qR,[ro("div",VR,[ro("h2",QR,[io(u,{text:n.value.title,heading:""},null,8,["text"]),e.reports.length>1?(Ha(),Ka(Ua,{key:0},[oo(" ("+pt(t.value+1)+"/"+pt(e.reports.length)+") ",1),io(d,{clear:"","wobbly-border":{topRight:!1,bottomRight:!1},disabled:0===t.value,title:r.$t("errors.previousReport"),"aria-label":r.$t("errors.previousReport"),onClick:l[0]||(l[0]=e=>t.value--)},{default:ii((()=>[io(c,{class:"w-6 h-6","aria-hidden":"true"})])),_:1},8,["disabled","title","aria-label"]),io(d,{clear:"","wobbly-border":{topLeft:!1,bottomLeft:!1},disabled:t.value===e.reports.length-1,title:r.$t("errors.nextReport"),"aria-label":r.$t("errors.nextReport"),onClick:l[1]||(l[1]=e=>t.value++)},{default:ii((()=>[io(p,{class:"w-6 h-6","aria-hidden":"true"})])),_:1},8,["disabled","title","aria-label"])],64)):lo("",!0)]),i.value?(Ha(),Ka("div",HR,[io(d,{clear:"",class:"group",title:r.$t("errors.reportToGithub"),"aria-label":r.$t("errors.reportToGithub"),url:a.value},{default:ii((()=>[io(f,{class:"w-6 h-6","aria-hidden":"true"}),ro("span",GR,pt(r.$t("errors.reportToGithub")),1)])),_:1},8,["title","aria-label","url"]),r.$errors.sentryConfigured&&null!==n.value.sentryId?(Ha(),Ya(d,{key:0,clear:"",class:"group",title:n.value.sentryId?r.$t("errors.viewSentryId"):r.$t("errors.reportToSentry"),"aria-label":n.value.sentryId?r.$t("errors.viewSentryId"):r.$t("errors.reportToSentry"),onClick:l[2]||(l[2]=()=>{return n.value.sentryId?(e=n.value.sentryId,void fC.showSnackbar(hR("errors.viewSentryIdSuccess",{sentryId:e}))):function(){const e=n.value.sentryId=mC.reportToSentry(n.value.error);e?fC.showSnackbar(hR("errors.reportToSentrySuccess",{sentryId:e})):fC.showSnackbar(hR("errors.reportToSentryFailed"))}();var e})},{default:ii((()=>[io(h,{class:"w-6 h-6","aria-hidden":"true"}),ro("span",WR,pt(n.value.sentryId?r.$t("errors.viewSentryId"):r.$t("errors.reportToSentry")),1)])),_:1},8,["title","aria-label"])):lo("",!0),io(d,{clear:"",class:"group",title:r.$t("errors.copyToClipboard"),"aria-label":r.$t("errors.copyToClipboard"),onClick:s},{default:ii((()=>[io(m,{class:"w-6 h-6","aria-hidden":"true"}),ro("span",JR,pt(r.$t("errors.copyToClipboard")),1)])),_:1},8,["title","aria-label"]),io(d,{clear:"",class:"group",title:r.$t("errors.inspectInConsole"),"aria-label":r.$t("errors.inspectInConsole"),onClick:o},{default:ii((()=>[io(v,{class:"w-6 h-6","aria-hidden":"true"}),ro("span",KR,pt(r.$t("errors.inspectInConsole")),1)])),_:1},8,["title","aria-label"])])):lo("",!0)]),n.value.description?(Ha(),Ya(u,{key:0,text:n.value.description,class:"mt-2"},null,8,["text"])):lo("",!0),i.value?lo("",!0):(Ha(),Ka("div",YR,[io(d,{color:"danger",onClick:g},{default:ii((()=>[oo(pt(r.$t("ui.error_accept")),1)])),_:2},1032,["onClick"])]))]),i.value?(Ha(),Ka("pre",{key:0,class:"overflow-auto p-4 h-full text-xs text-red-900 bg-gray-200",textContent:pt(i.value)},null,8,ZR)):lo("",!0)])),_:1},8,["cancellable"])}}}),eC={};const tC=e=>`(?:(\\d+(?:(?:.|,)\\d+)?)${e})?`,nC=e=>`(?:(\\d+)\\s*${e})?`,rC=[tC("Y"),tC("M"),tC("W"),tC("D")].join(""),iC=[tC("H"),tC("M"),tC("S")].join(""),aC=[nC("y(?:s|ears?)?"),nC("months?"),nC("w(?:s|eeks?)?"),nC("d(?:ays?)?"),nC("h(?:ours?)?"),nC("m(?:in(?:s|utes?)?)?"),nC("s(?:ec(?:s|onds?)?)?")].join("(?:\\s|,)*"),oC=new RegExp(`P${rC}(?:T${iC})?`),sC=new RegExp(aC);function lC(e,t){const n=e.match(t);if(!n)return null;const r=e=>{const t=n[e];return t?parseFloat(t.replace(",",".")):null},i=L({years:r(1),months:r(2),weeks:r(3),days:r(4),hours:r(5),minutes:r(6),seconds:r(7)});return Re(i)?null:i}const uC=768;var cC=(e=>(e["ConfirmModal"]="confirm-modal",e["ErrorReportModal"]="error-report-modal",e["ErrorReport"]="error-report",e["LoadingModal"]="loading-modal",e["MarkdownModal"]="markdown-modal",e["NotFound"]="not-found",e))(cC||{}),dC=(e=>(e["Error"]="error",e["Info"]="info",e))(dC||{});class pC extends yw{constructor(){super(...arguments),t(this,"$layout",null),t(this,"modalCallbacks",{}),t(this,"components",{"confirm-modal":mr(oR),"error-report":mr(vR),"error-report-modal":mr(XR),"loading-modal":mr(bR),"markdown-modal":mr(wR),"not-found":mr(AR)})}setLayoutElement(e){this.$layout=e}alert(e,t){const n="string"==typeof t?e:void 0;t=null!=t?t:e,this.openModal(this.components["confirm-modal"],{title:n,message:t,showCancel:!1})}async confirm(e={}){const t="string"==typeof e?{message:e}:e,n=await this.openModal(this.components["confirm-modal"],t);return!!(await n.afterClose)}async openModal(e,t){const n=N(),r={},i={id:n,props:null!=t?t:{},component:mr(e),beforeClose:new Promise((e=>r.willClose=e)),afterClose:new Promise((e=>r.closed=e))},a=this.modals.at(-1),o=this.modals.concat(i);return this.modalCallbacks[i.id]=r,this.setState({modals:o}),await Vr(),await(a&&YI.emit("hide-modal",{id:a.id})),await Promise.all([a||YI.emit("show-overlays-backdrop"),YI.emit("show-modal",{id:i.id})]),i}async closeModal(e,t){await YI.emit("close-modal",{id:e,result:t})}renderDuration(e){return e&&(n=e=>{const t=function(e){return lC(e,oC)}(e);return t?function(e){return E([e.years&&(1===e.years?"1 year":`${e.years} years`),e.months&&(1===e.months?"1 month":`${e.months} months`),e.weeks&&(1===e.weeks?"1 week":`${e.weeks} weeks`),e.days&&(1===e.days?"1 day":`${e.days} days`),e.hours&&(1===e.hours?"1 hour":`${e.hours} hours`),e.minutes&&`${e.minutes} min`,e.seconds&&(1===e.seconds?"1 second":`${e.seconds} seconds`)]).join(" ")}(t):e},null!=(r=eC[t=e])?r:eC[t]=n(t));var t,n,r}async runOperation(e,t={}){try{t.blocking&&this.showLoading(t.loadingMessage),await e(),t.successMessage&&this.showSnackbar(t.successMessage)}finally{t.blocking&&this.hideLoading()}}async showMarkdown(e,t){const n="string"==typeof t?e:null;t=null!=t?t:e,await this.openModal(this.components["markdown-modal"],{title:n,content:t})}showSnackbar(e,t={}){var n,r;const i={id:N(),message:e,actions:null!=(n=t.actions)?n:[],style:null!=(r=t.style)?r:"info"};return this.setState({snackbars:[...this.snackbars,i]}),setTimeout((()=>this.hideSnackbar(i.id)),5e3),i.id}hideSnackbar(e){const t=this.snackbars.findIndex((t=>t.id===e));-1!==t&&this.setState({snackbars:Me(this.snackbars,t)})}async showLoading(e){if(this.loadingModal){(await this.loadingModal).props.text=e}else this.loadingModal=new Ie,this.loadingModal.resolve(await this.openModal(this.components["loading-modal"],{text:e}))}async hideLoading(){if(!this.loadingModal)return;const e=await this.loadingModal;this.loadingModal=null,await this.closeModal(e.id)}resolveComponent(e){return this.components[e]}registerComponent(e,t){this.components[e]=mr(t)}scrollLayout(e){var t;null==(t=this.$layout)||t.scrollTo(e)}updateHeaderHeight(e){this.setState({headerHeight:e})}showHeader(){this.setState({headerHidden:!1})}hideHeader(){this.setState({headerHidden:!0})}async boot(){await super.boot(),this.watchWindowMedia(),this.watchModalEvents()}getInitialState(){return{animations:!0,headerHeight:0,headerHidden:!1,loadingModal:null,modals:[],snackbars:[],layout:this.getCurrentLayout()}}getComputedStateDefinitions(){return{isMobile:({layout:e})=>"mobile"===e,isDesktop:({layout:e})=>"desktop"===e}}getCurrentLayout(){return window.innerWidth>uC?"desktop":"mobile"}watchWindowMedia(){const e=()=>this.setState({layout:this.getCurrentLayout()});window.matchMedia(`(min-width: ${uC}px)`).addEventListener("change",e),e()}watchModalEvents(){YI.on("modal-will-close",(({modal:e,result:t})=>{var n,r;null==(r=null==(n=this.modalCallbacks[e.id])?void 0:n.willClose)||r.call(n,t),1===this.modals.length&&YI.emit("hide-overlays-backdrop")})),YI.on("modal-closed",(async({modal:e,result:t})=>{var n,r;this.setState({modals:this.modals.filter((t=>t.id!==e.id))}),null==(r=null==(n=this.modalCallbacks[e.id])?void 0:n.closed)||r.call(n,t),delete this.modalCallbacks[e.id];const i=this.modals.at(-1);await(i&&YI.emit("show-modal",{id:i.id}))}))}}t(pC,"persist",["animations"]);const fC=vw(new pC);class hC extends yw{constructor(){super(...arguments),t(this,"forceReporting",!1),t(this,"sentryConfigured",!1),t(this,"enabled",!0),t(this,"sentryInitialized",!1)}enable(){this.enabled=!0}disable(){this.enabled=!1}async inspect(e){const t=Array.isArray(e)?e:[await this.createErrorReport(e)];fC.openModal(fC.resolveComponent(cC.ErrorReportModal),{reports:t})}async report(e,t){var n;if(Jj.isDevelopment&&console.error(e),!this.enabled)throw e;let r;if(this.reportErrors()&&(r=null!=(n=this.reportToSentry(e))?n:void 0),!Jj.isMounted){const t=await this.createStartupErrorReport(e,r);return void(t&&this.setState({startupErrors:this.startupErrors.concat(t)}))}const i=await this.createErrorReport(e,r);fC.showSnackbar(null!=t?t:hR("errors.notice"),{style:dC.Error,actions:[{text:hR("errors.viewDetails"),handler:()=>fC.openModal(fC.resolveComponent(cC.ErrorReportModal),{reports:[i]})}]})}reportToSentry(e){this.initializeSentry();try{return T(bx(e),(t=>console.error(`Error reported to Sentry: '${t}'`,e)))}catch(t){console.error("Failed reporting an error to Sentry",e,t)}return null}async boot(){await super.boot(),this.sentryConfigured=!!Jj.env("SENTRY_DSN"),Le("errorReporting")&&(this.forceReporting=$e(Ne("errorReporting")))}getInitialState(){return{reporting:!1,startupErrors:[]}}getComputedStateDefinitions(){return{hasStartupErrors:({startupErrors:e})=>e.length>0}}reportErrors(){return this.sentryConfigured&&(this.reporting||this.forceReporting)}async createErrorReport(e,t){if("string"==typeof e)return{sentryId:t,title:e};if(e instanceof Dh){const n=await e.response.text();return this.createErrorReportFromError(e,{sentryId:t,title:"Unsuccessful Request",details:`Response body:\n${n}\n\nStack trace:\n${e.stack}`})}return e instanceof Error||e instanceof g?this.createErrorReportFromError(e,{sentryId:t}):{title:hR("errors.unknown"),sentryId:t,error:e}}async createStartupErrorReport(e,t){return e instanceof ServiceBootError?e.cause instanceof ServiceBootError?null:this.createErrorReport(e.cause,t):this.createErrorReport(e,t)}createErrorReportFromError(e,t={}){return{title:e.name,description:e.message,details:e.stack,error:e,...t}}initializeSentry(){if(!this.sentryInitialized)try{Bk({dsn:Jj.env("SENTRY_DSN")}),this.sentryInitialized=!0}catch(e){console.error("Failed initializing Sentry",e)}}}t(hC,"persist",["reporting"]);const mC=vw(new hC);let vC,gC;const yC=new WeakMap,bC=new WeakMap,wC=new WeakMap,_C=new WeakMap,xC=new WeakMap;let kC={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return bC.get(e);if("objectStoreNames"===t)return e.objectStoreNames||wC.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return IC(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function AC(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(gC||(gC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(SC(this),t),IC(yC.get(this))}:function(...t){return IC(e.apply(SC(this),t))}:function(t,...n){const r=e.call(SC(this),t,...n);return wC.set(r,t.sort?t.sort():[t]),IC(r)}}function EC(e){return"function"==typeof e?AC(e):(e instanceof IDBTransaction&&function(e){if(bC.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));bC.set(e,t)}(e),t=e,(vC||(vC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,kC):e);var t}function IC(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(IC(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&yC.set(t,e)})).catch((()=>{})),xC.set(t,e),t}(e);if(_C.has(e))return _C.get(e);const t=EC(e);return t!==e&&(_C.set(e,t),xC.set(t,e)),t}const SC=e=>xC.get(e);const RC=["get","getKey","getAll","getAllKeys","count"],CC=["put","add","delete","clear"],OC=new Map;function DC(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(OC.get(t))return OC.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=CC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!RC.includes(n))return;const a=async function(e,...t){const a=this.transaction(e,i?"readwrite":"readonly");let o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return OC.set(t,a),a}!function(e){kC=e(kC)}((e=>({...e,get:(t,n,r)=>DC(t,n)||e.get(t,n,r),has:(t,n)=>!!DC(t,n)||e.has(t,n)})));const jC="app",TC="files",PC=1e3;const MC=vw(new class extends yw{constructor(){super(...arguments),t(this,"connection"),t(this,"connectionTimeout")}async get(e){const t=await this.connect(),n=await t.get(TC,e);return null!=n?n:null}async has(e){const t=await this.connect();return!!(await t.getKey(TC,e))}async getUrls(){return(await this.connect()).getAllKeys(TC)}async store(e,t,n){const r=await this.connect();await r.put(TC,{url:e,mimeType:t,blob:n})}async rename(e,t){const n=await this.transaction("readwrite"),r=await n.store.get(e);r&&(r.url=t,n.store.delete(e),n.store.put(r)),await n.done}async delete(e){const t=await this.connect();await t.delete(TC,e)}async deleteAll(){const e=await this.transaction("readwrite"),t=await e.store.getAllKeys();await Promise.all(t.map((t=>e.store.delete(t)))),await e.done}async boot(){await super.boot(),YI.on("logout",(()=>this.deleteAll()))}async transaction(e){return(await this.connect()).transaction(TC,e)}async connect(){var e;const t=null!=(e=this.connection)?e:await this.openDatabaseConnection();return T(t,(e=>this.rememberDatabaseConnection(e)))}openDatabaseConnection(){return new Promise(((e,t)=>{(function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(e,t),s=IC(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(IC(o.result),e.oldVersion,e.newVersion,IC(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),s.then((e=>{a&&e.addEventListener("close",(()=>a())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),s})(jC,1,{upgrade(e){e.objectStoreNames.contains(TC)||e.createObjectStore(TC,{keyPath:"url"})},blocked:()=>t(new Error(`Could not open '${jC}' database because it is blocked`))}).then(e).catch(t)}))}rememberDatabaseConnection(e){this.connectionTimeout&&window.clearTimeout(this.connectionTimeout),this.connection=e,this.connectionTimeout=window.setTimeout((()=>this.forgetDatabaseConnection()),PC)}forgetDatabaseConnection(){var e;null==(e=this.connection)||e.close(),this.connection=void 0,this.connectionTimeout=void 0}});const LC=vw(new class extends yw{getInitialState(){return{online:!0}}}),$C=new WeakMap,NC=new WeakMap;function BC(e){var n;return null!=(n=$C.get(e))?n:function(e){var n;const r=e,i=(e,t)=>{e.timestamps=r.timestamps,e.history=r.history,t(),e.timestamps=[],e.history=!1},a=(t(n=class extends r{initialize(e,t){i(this._proxy.static(),(()=>super.initialize(e,t)))}fixMalformedAttributes(){i(this.static(),(()=>super.fixMalformedAttributes()))}},"timestamps",!1),t(n,"history",!1),n);return $C.set(r,a),NC.set(a,r),Eg({[`Remote${e.modelName}`]:a}),a}(e)}const UC=10,FC=class extends yw{constructor(){super(...arguments),t(this,"handlers",new Map),t(this,"asyncLock",new Be),t(this,"engine",null),t(this,"syncInterval",null)}async sync(e){gj.isLoggedIn()&&await this.asyncLock.run((async()=>{const t=Date.now();this.status="syncing";try{await this.pullChanges(e),await this.pushChanges(e),await this.uploadFiles(),await Ue({milliseconds:Math.max(0,1e3-(Date.now()-t))})}catch(n){mC.report(n,hR("errors.sync"))}finally{this.status="online"}}))}async syncIfOnline(e){LC.online&&await this.sync(e)}async registerHandler(e,t){await t.initialize(),this.engine&&BC(e).setEngine(this.engine),this.handlers.set(e,t),e.on("created",(e=>t.active&&this.createRemoteModel(e))),e.on("updated",(e=>t.active&&this.updateRemoteModel(e)))}enqueueFileUpload(e){this.dirtyFileUrls=T(new Set(this.dirtyFileUrls),(t=>t.add(e)))}removeFileUpload(e){this.dirtyFileUrls=T(new Set(this.dirtyFileUrls),(t=>t.delete(e)))}onModelMoved(e,t){e in this.localModelUpdates&&this.setState({localModelUpdates:{...be(this.localModelUpdates,e),[t]:this.localModelUpdates[e]}})}async boot(){await super.boot(),await Promise.all([...this.handlers.values()].map((e=>e.booted))),gj.authenticator&&this.initializeEngine(gj.authenticator),YI.on("login",(({authenticator:e})=>this.initializeEngine(e))),YI.on("logout",(()=>this.setState({status:"disconnected",dirtyFileUrls:new Set,dirtyRemoteModels:de([],"url"),remoteOperationUrls:{},localModelUpdates:{}}))),YI.once("application-mounted",(async()=>{this.startupSync?await this.sync():this.status=gj.isLoggedIn()?"online":"disconnected"})),this.updateSyncInterval(this.autoSync)}getInitialState(){return{autoSync:10,status:"disconnected",startupSync:!0,dirtyFileUrls:new Set,dirtyRemoteModels:de([],"url"),remoteOperationUrls:{},localModelUpdates:{}}}getComputedStateDefinitions(){return{dirty:(e,{pendingUpdates:t})=>t>0,online:({status:e})=>"online"===e,offline:({status:e})=>"offline"===e,syncing:({status:e})=>"syncing"===e,disconnected:({status:e})=>"disconnected"===e,pendingUpdates:({dirtyFileUrls:e,localModelUpdates:t})=>Object.values(t).reduce(((e,t)=>e+t),e.size)}}onStateUpdated(e){super.onStateUpdated(e),"autoSync"in e&&this.updateSyncInterval(e.autoSync)}initializeEngine(e){this.engine=e.engine,BC(ew).setEngine(this.requireEngine());for(const t of this.handlers.keys())BC(t).setEngine(this.engine)}requireEngine(){var e;return null!=(e=this.engine)?e:ne("Could not get required Engine")}updateSyncInterval(e){this.syncInterval&&clearInterval(this.syncInterval),this.syncInterval=e?window.setInterval((()=>this.sync()),60*e*1e3):null}async pullChanges(e){const t=de(e?[e]:this.getLocalModels(),"url"),n=e?await this.fetchRemoteModelsForLocal(e):await this.fetchRemoteModels(t.getItems()),r=de(n,(e=>e instanceof ew?e.resourceUrl:e.url));await this.synchronizeModels(t,r),this.setState({dirtyRemoteModels:de(r.getItems().filter((e=>e.isDirty())),"url"),remoteOperationUrls:r.getItems().reduce(((e,t)=>(e[t.url]=t.getRelatedModels().map((e=>{var t;return null!=(t=e.operations)?t:[]})).flat().map((e=>e.url)),e)),{})})}async pushChanges(e){const t=gj.requireAuthenticator().requireAuthenticatedFetch(),n=this.dirtyRemoteModels.getItems().filter((t=>!e||t.url===e.url)),r=de(this.getLocalModelsWithRemoteFileUrls(),(({model:e})=>e.url));await Promise.all(n.map((async e=>{var n;if(e.isSoftDeleted()){const i=r.get(e.url);return await Promise.all(null!=(n=null==i?void 0:i.remoteFileUrls.map((e=>t(e,{method:"DELETE"}))))?n:[]),e.enableHistory(),e.enableTombstone(),await e.delete(),void(await(null==i?void 0:i.model.delete()))}await e.save()}))),this.setState({dirtyRemoteModels:e?this.dirtyRemoteModels.filter(((t,n)=>n!==e.url)):de([],"url"),remoteOperationUrls:n.reduce(((e,t)=>(e[t.url]=t.getRelatedModels().map((e=>{var t;return null!=(t=e.operations)?t:[]})).flat().map((e=>e.url)),e)),this.remoteOperationUrls),localModelUpdates:e?be(this.localModelUpdates,e.url):{}})}async uploadFiles(){const e=gj.requireAuthenticator().requireAuthenticatedFetch(),t=new Set(this.dirtyFileUrls);for(const n of t){const t=await MC.get(n);if(t){const r=await e(n,{method:"PUT",headers:{"Content-Type":t.mimeType},body:t.blob});if(!Fe(r))continue;await MC.delete(n),await bw.replace(n,new Response(t.blob))}this.removeFileUpload(n)}}async synchronizeModels(e,t){const n=new Set;for(const r of t.items()){if(r instanceof ew){const t=e.get(r.resourceUrl);t&&(await t.delete(),n.add(r.url));continue}const t=this.getLocalModel(r,e);await Mb.synchronize(t,r),await this.reconcileInconsistencies(t,r),await t.save(),e.add(t),n.add(t.url)}for(const[r,i]of e){if(n.has(r))continue;const e=this.getRemoteModel(i,t);await Mb.synchronize(i,e),t.add(e)}}createRemoteModel(e){const t=this.cloneLocalModel(e),n=de(this.dirtyRemoteModels.getItems(),"url");n.add(t),this.setState({dirtyRemoteModels:n,localModelUpdates:{...this.localModelUpdates,[e.url]:1}})}async updateRemoteModel(e){var t;const n=this.getRemoteModel(e,this.dirtyRemoteModels),r=null!=(t=this.localModelUpdates[e.url])?t:0;if(await Mb.synchronize(e,n),!this.dirtyRemoteModels.hasKey(n.url)){const e=de(this.dirtyRemoteModels.getItems(),"url");e.add(n),this.setState({dirtyRemoteModels:e})}this.setState({localModelUpdates:{...this.localModelUpdates,[e.url]:r+1}})}getLocalModel(e,t){var n;return null!=(n=t.get(e.url))?n:this.cloneRemoteModel(e)}getRemoteModel(e,t){var n;return null!=(n=t.get(e.url))?n:this.cloneLocalModel(e)}cloneLocalModel(e){const t=e.static(),n=BC(e.static());return T(e.clone({constructors:[[t,n]]}),(e=>{this.cleanRemoteModel(e)}))}cloneRemoteModel(e){var t;const n=e.static(),r=function(e){var t;return null!=(t=NC.get(e))?t:ne(`Couldn't find local class for ${e.modelName}`)}(n);for(const i of this.handlers.keys())if(i===r){null==(t=this.handlers.get(i))||t.mendRemoteModel(e);break}return e.clone({constructors:[[n,r]]})}async fetchRemoteModels(e){const t=await Promise.all([...this.handlers.entries()].map((async([e,t])=>{if(!t.active)return[];const n=[],r=BC(e),i=new Set([r.collection]),a=new Set;for(;i.size>a.size;){const e=[...i].find((e=>!a.has(e))),o=await cw.withEngine(this.requireEngine(),(()=>cw.find(e)));if(a.add(e),!o)continue;const s=o.resourceUrls.filter((e=>{const t=e.endsWith("/");return t&&i.add(e),!t})),l=ze(s.filter((e=>!/\.(jpe?|pn)g$/.test(e))),UC);for(const i of l){const e=await r.all({$in:i});e.some((e=>e.usesRdfAliases()))&&t.foundModelUsingRdfAliases(),n.push(...e)}}return n})));return this.completeRemoteModels(e,t.flat())}async fetchRemoteModelsForLocal(e){const t=await BC(e.static()).find(e.url);return this.completeRemoteModels([e],E([t]))}async completeRemoteModels(e,t){const n=BC(ew),r=t.map((e=>e.url)),i=e.filter((e=>!r.includes(e.url))).map((e=>e.requireDocumentUrl())),a=await n.all({$in:i});return t.concat(a)}async reconcileInconsistencies(e,t){e.rebuildAttributesFromHistory(),e.setAttributes(t.getAttributes()),this.getSameDocumentRelations(e.static()).forEach((n=>{var r,i;const a=null!=(r=e.getRelationModels(n))?r:[],o=de(null!=(i=t.getRelationModels(n))?i:[],"url");a.forEach((e=>{var t,n;e.isRelationLoaded("operations")&&(e.rebuildAttributesFromHistory(),e.setAttributes(null!=(n=null==(t=o.get(e.url))?void 0:t.getAttributes())?n:{}))}))})),e.isDirty()&&(await e.save(),await Mb.synchronize(e,t))}getLocalModels(){return[...this.handlers.values()].map((e=>e.active?e.getLocalModels():[])).flat()}getLocalModelsWithRemoteFileUrls(){return[...this.handlers.values()].map((e=>e.active?e.getLocalModelsWithRemoteFileUrls():[])).flat()}getSameDocumentRelations(e){var t;return FC.sameDocumentRelations.has(e)||FC.sameDocumentRelations.set(e,e.relations.filter((t=>{if(Mb.reservedRelations.includes(t))return!1;const n=e.instance().requireRelation(t);return Hy(n)&&n.useSameDocument}))),null!=(t=FC.sameDocumentRelations.get(e))?t:[]}cleanRemoteModel(e){var t;const n=this.remoteOperationUrls[e.url];if(!n)return;const r=e.getRelatedModels().filter((e=>!(e instanceof aw||e instanceof Hb||e instanceof $b)));for(const i of r){const e=null!=(t=i.operations)?t:[];i.setRelationModels("operations",e.filter((e=>!!n.includes(e.url)&&(e.cleanDirty(!0),!0)))),i.rebuildAttributesFromHistory(),i.cleanDirty(!0),i.metadata.cleanDirty(!0),i.setRelationModels("operations",e),i.rebuildAttributesFromHistory()}}};let zC=FC;t(zC,"persist",["autoSync","startupSync","localModelUpdates"]),t(zC,"sameDocumentRelations",new WeakMap);const qC=vw(new zC),VC=vw();class QC{constructor(){t(this,"name"),t(this,"authenticatedFetch"),t(this,"booted"),t(this,"listeners",$([])),t(this,"_engine")}get engine(){var e;return this._engine=null!=(e=this._engine)?e:new zy(this.requireAuthenticatedFetch()),this._engine}getAuthenticatedFetch(){var e;return null!=(e=this.authenticatedFetch)?e:null}requireAuthenticatedFetch(){var e;return null!=(e=this.authenticatedFetch)?e:ne("Authenticated fetch is not ready")}addListener(e){return this.listeners.includes(e)||this.listeners.push(e),()=>{this.removeListener(e)}}removeListener(e){this.listeners.includes(e)&&this.listeners.remove(e)}async boot(){if(this.booted)return this.booted;this.booted=new Ie,await this.restoreSession(),this.booted.resolve()}async initAuthenticatedFetch(e){this.authenticatedFetch=e,await this.notifyListeners("onAuthenticatedFetchReady",e)}async startSession(e){const t={authenticator:this,...e};return await this.notifyListeners("onSessionStarted",t),t}async failSession(e,t){await this.notifyListeners("onSessionFailed",e,t)}async endSession(){await this.notifyListeners("onSessionEnded")}async notifyListeners(e,...t){await Promise.all(this.listeners.toArray().map((async n=>{const r=n[e];await(null==r?void 0:r(...t))})))}}const HC="local-storage-authenticator";
/*!
  * shared v9.2.0-beta.40
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */
const GC="undefined"!=typeof window,WC="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,JC=e=>WC?Symbol(e):e,KC=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),YC=e=>"number"==typeof e&&isFinite(e),ZC=e=>"[object RegExp]"===fO(e),XC=e=>hO(e)&&0===Object.keys(e).length;function eO(e,t){"undefined"!=typeof console&&(console.warn(`[intlify] `+e),t&&console.warn(t.stack))}const tO=Object.assign;let nO;const rO=()=>nO||(nO="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});function iO(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const aO=Object.prototype.hasOwnProperty;function oO(e,t){return aO.call(e,t)}const sO=Array.isArray,lO=e=>"function"==typeof e,uO=e=>"string"==typeof e,cO=e=>"boolean"==typeof e,dO=e=>null!==e&&"object"==typeof e,pO=Object.prototype.toString,fO=e=>pO.call(e),hO=e=>"[object Object]"===fO(e),mO=15;function createCompileError(e,t,n={}){const{domain:r,messages:i,args:a}=n,o=new SyntaxError(String(e));return o.code=e,t&&(o.location=t),o.domain=r,o}
/*!
  * devtools-if v9.2.0-beta.40
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const vO="i18n:init",gO="function:translate",yO=[];
/*!
  * core-base v9.2.0-beta.40
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */yO[0]={w:[0],i:[3,0],"[":[4],o:[7]},yO[1]={w:[1],".":[2],"[":[4],o:[7]},yO[2]={w:[2],i:[3,0],0:[3,0]},yO[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},yO[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},yO[5]={"'":[4,0],o:8,l:[5,0]},yO[6]={'"':[4,0],o:8,l:[6,0]};const bO=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function wO(e){if(null==e)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function _O(e){const t=e.trim();return("0"!==e.charAt(0)||!isNaN(parseInt(e)))&&(n=t,bO.test(n)?function(e){const t=e.charCodeAt(0);return t!==e.charCodeAt(e.length-1)||34!==t&&39!==t?e:e.slice(1,-1)}(t):"*"+t);var n}const xO=new Map;function kO(e,t){return dO(e)?e[t]:null}const AO=e=>e,EO=e=>"",IO="text",SO=e=>0===e.length?"":e.join(""),RO=e=>null==e?"":sO(e)||hO(e)&&e.toString===pO?JSON.stringify(e,null,2):String(e);function CO(e,t){return e=Math.abs(e),2===t?e?e>1?1:0:1:e?Math.min(e,2):0}function OO(e={}){const t=e.locale,n=function(e){const t=YC(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(YC(e.named.count)||YC(e.named.n))?YC(e.named.count)?e.named.count:YC(e.named.n)?e.named.n:t:t}(e),r=dO(e.pluralRules)&&uO(t)&&lO(e.pluralRules[t])?e.pluralRules[t]:CO,i=dO(e.pluralRules)&&uO(t)&&lO(e.pluralRules[t])?CO:void 0,a=e.list||[],o=e.named||{};YC(e.pluralIndex)&&function(e,t){t.count||(t.count=e),t.n||(t.n=e)}(n,o);function s(t){const n=lO(e.messages)?e.messages(t):!!dO(e.messages)&&e.messages[t];return n||(e.parent?e.parent.message(t):EO)}const l=hO(e.processor)&&lO(e.processor.normalize)?e.processor.normalize:SO,u=hO(e.processor)&&lO(e.processor.interpolate)?e.processor.interpolate:RO,c={list:e=>a[e],named:e=>o[e],plural:e=>e[r(n,e.length,i)],linked:(t,...n)=>{const[r,i]=n;let a="text",o="";1===n.length?dO(r)?(o=r.modifier||o,a=r.type||a):uO(r)&&(o=r||o):2===n.length&&(uO(r)&&(o=r||o),uO(i)&&(a=i||a));let l=s(t)(c);return"vnode"===a&&sO(l)&&o&&(l=l[0]),o?(u=o,e.modifiers?e.modifiers[u]:AO)(l,a):l;var u},message:s,type:hO(e.processor)&&uO(e.processor.type)?e.processor.type:IO,interpolate:u,normalize:l};return c}let DO=null;const jO=TO(gO);function TO(e){return t=>DO&&DO.emit(e,t)}function PO(e,t,n){return[...new Set([n,...sO(t)?t:dO(t)?Object.keys(t):uO(t)?[t]:[n]])]}function MO(e,t,n){const r=uO(n)?n:FO,i=e;i.__localeChainCache||(i.__localeChainCache=new Map);let a=i.__localeChainCache.get(r);if(!a){a=[];let e=[n];for(;sO(e);)e=LO(a,e,t);const o=sO(t)||!hO(t)?t:t["default"]?t["default"]:null;e=uO(o)?[o]:o,sO(e)&&LO(a,e,!1),i.__localeChainCache.set(r,a)}return a}function LO(e,t,n){let r=!0;for(let i=0;i<t.length&&cO(r);i++){const a=t[i];uO(a)&&(r=$O(e,t[i],n))}return r}function $O(e,t,n){let r;const i=t.split("-");do{r=NO(e,i.join("-"),n),i.splice(-1,1)}while(i.length&&!0===r);return r}function NO(e,t,n){let r=!1;if(!e.includes(t)&&(r=!0,t)){r="!"!==t[t.length-1];const i=t.replace(/!/g,"");e.push(i),(sO(n)||hO(n))&&n[i]&&(r=n[i])}return r}const BO="9.2.0-beta.40",UO=-1,FO="en-US",zO="",qO=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;let VO,QO,HO;let GO=null;const WO=e=>{GO=e};let JO=null;const KO=e=>{JO=e};let YO=0;function ZO(e={}){const t=uO(e.version)?e.version:BO,n=uO(e.locale)?e.locale:FO,r=sO(e.fallbackLocale)||hO(e.fallbackLocale)||uO(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:n,i=hO(e.messages)?e.messages:{[n]:{}},a=hO(e.datetimeFormats)?e.datetimeFormats:{[n]:{}},o=hO(e.numberFormats)?e.numberFormats:{[n]:{}},s=tO({},e.modifiers||{},{upper:(e,t)=>"text"===t&&uO(e)?e.toUpperCase():"vnode"===t&&dO(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>"text"===t&&uO(e)?e.toLowerCase():"vnode"===t&&dO(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>"text"===t&&uO(e)?qO(e):"vnode"===t&&dO(e)&&"__v_isVNode"in e?qO(e.children):e}),l=e.pluralRules||{},u=lO(e.missing)?e.missing:null,c=!cO(e.missingWarn)&&!ZC(e.missingWarn)||e.missingWarn,d=!cO(e.fallbackWarn)&&!ZC(e.fallbackWarn)||e.fallbackWarn,p=!!e.fallbackFormat,f=!!e.unresolving,h=lO(e.postTranslation)?e.postTranslation:null,m=hO(e.processor)?e.processor:null,v=!cO(e.warnHtmlMessage)||e.warnHtmlMessage,g=!!e.escapeParameter,y=lO(e.messageCompiler)?e.messageCompiler:VO,b=lO(e.messageResolver)?e.messageResolver:QO||kO,w=lO(e.localeFallbacker)?e.localeFallbacker:HO||PO,_=dO(e.fallbackContext)?e.fallbackContext:void 0,x=lO(e.onWarn)?e.onWarn:eO,k=e,A=dO(k.__datetimeFormatters)?k.__datetimeFormatters:new Map,E=dO(k.__numberFormatters)?k.__numberFormatters:new Map,I=dO(k.__meta)?k.__meta:{};YO++;const S={version:t,cid:YO,locale:n,fallbackLocale:r,messages:i,modifiers:s,pluralRules:l,missing:u,missingWarn:c,fallbackWarn:d,fallbackFormat:p,unresolving:f,postTranslation:h,processor:m,warnHtmlMessage:v,escapeParameter:g,messageCompiler:y,messageResolver:b,localeFallbacker:w,fallbackContext:_,onWarn:x,__meta:I};return S.datetimeFormats=a,S.numberFormats=o,S.__datetimeFormatters=A,S.__numberFormatters=E,__INTLIFY_PROD_DEVTOOLS__&&function(e,t,n){DO&&DO.emit(vO,{timestamp:Date.now(),i18n:e,version:t,meta:n})}(S,t,I),S}function XO(e,t,n,r,i){const{missing:a,onWarn:o}=e;if(null!==a){const r=a(e,n,t,i);return uO(r)?r:t}return t}function eD(e,t,n){e.__localeChainCache=new Map,e.localeFallbacker(e,n,t)}let tD=mO;const nD=()=>++tD,rD={INVALID_ARGUMENT:tD,INVALID_DATE_ARGUMENT:nD(),INVALID_ISO_DATE_ARGUMENT:nD(),__EXTEND_POINT__:nD()};function createCoreError(e){return createCompileError(e,null,void 0)}const iD=()=>"",aD=e=>lO(e);function oD(e,...t){const{fallbackFormat:n,postTranslation:r,unresolving:i,messageCompiler:a,fallbackLocale:o,messages:s}=e,[l,u]=uD(...t),c=cO(u.missingWarn)?u.missingWarn:e.missingWarn,d=cO(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn,p=cO(u.escapeParameter)?u.escapeParameter:e.escapeParameter,f=!!u.resolvedMessage,h=uO(u.default)||cO(u.default)?cO(u.default)?a?l:()=>l:u.default:n?a?l:()=>l:"",m=n||""!==h,v=uO(u.locale)?u.locale:e.locale;p&&function(e){sO(e.list)?e.list=e.list.map((e=>uO(e)?iO(e):e)):dO(e.named)&&Object.keys(e.named).forEach((t=>{uO(e.named[t])&&(e.named[t]=iO(e.named[t]))}))}(u);let[g,y,b]=f?[l,v,s[v]||{}]:sD(e,l,v,o,d,c),w=g,_=l;if(f||uO(w)||aD(w)||m&&(w=h,_=w),!(f||(uO(w)||aD(w))&&uO(y)))return i?UO:l;let x=!1;const k=aD(w)?w:lD(e,l,y,w,_,(()=>{x=!0}));if(x)return w;const A=function(e,t,n,r){const{modifiers:i,pluralRules:a,messageResolver:o,fallbackLocale:s,fallbackWarn:l,missingWarn:u,fallbackContext:c}=e,d=r=>{let i=o(n,r);if(null==i&&c){const[,,e]=sD(c,r,t,s,l,u);i=o(e,r)}if(uO(i)){let n=!1;const a=lD(e,r,t,i,r,(()=>{n=!0}));return n?iD:a}return aD(i)?i:iD},p={locale:t,modifiers:i,pluralRules:a,messages:d};e.processor&&(p.processor=e.processor);r.list&&(p.list=r.list);r.named&&(p.named=r.named);YC(r.plural)&&(p.pluralIndex=r.plural);return p}(e,y,b,u),E=function(e,t,n){return t(n)}(0,k,OO(A)),I=r?r(E,l):E;if(__INTLIFY_PROD_DEVTOOLS__){const t={timestamp:Date.now(),key:uO(l)?l:aD(w)?w.key:"",locale:y||(aD(w)?w.locale:""),format:uO(w)?w:aD(w)?w.source:"",message:I};t.meta=tO({},e.__meta,GO||{}),jO(t)}return I}function sD(e,t,n,r,i,a){const{messages:o,onWarn:s,messageResolver:l,localeFallbacker:u}=e,c=u(e,r,n);let d,p={},f=null;const h="translate";for(let m=0;m<c.length&&(d=c[m],p=o[d]||{},null===(f=l(p,t))&&(f=p[t]),!uO(f)&&!lO(f));m++){const n=XO(e,t,d,0,h);n!==t&&(f=n)}return[f,d,p]}function lD(e,t,n,r,i,a){const{messageCompiler:o,warnHtmlMessage:s}=e;if(aD(r)){const e=r;return e.locale=e.locale||n,e.key=e.key||t,e}if(null==o){const e=()=>r;return e.locale=n,e.key=t,e}const l=o(r,function(e,t,n,r,i,a){return{warnHtmlMessage:i,onError:e=>{throw a&&a(e),e},onCacheKey:e=>((e,t,n)=>KC({l:e,k:t,s:n}))(t,n,e)}}(0,n,i,0,s,a));return l.locale=n,l.key=t,l.source=r,l}function uD(...e){const[t,n,r]=e,i={};if(!uO(t)&&!YC(t)&&!aD(t))throw createCoreError(rD.INVALID_ARGUMENT);const a=YC(t)?String(t):(aD(t),t);return YC(n)?i.plural=n:uO(n)?i.default=n:hO(n)&&!XC(n)?i.named=n:sO(n)&&(i.list=n),YC(r)?i.plural=r:uO(r)?i.default=r:hO(r)&&tO(i,r),[a,i]}function cD(e,...t){const{datetimeFormats:n,unresolving:r,fallbackLocale:i,onWarn:a,localeFallbacker:o}=e,{__datetimeFormatters:s}=e,[l,u,c,d]=pD(...t);cO(c.missingWarn)?c.missingWarn:e.missingWarn;cO(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn;const p=!!c.part,f=uO(c.locale)?c.locale:e.locale,h=o(e,i,f);if(!uO(l)||""===l)return new Intl.DateTimeFormat(f,d).format(u);let m,v={},g=null;const y="datetime format";for(let _=0;_<h.length&&(m=h[_],v=n[m]||{},g=v[l],!hO(g));_++)XO(e,l,m,0,y);if(!hO(g)||!uO(m))return r?UO:l;let b=`${m}__${l}`;XC(d)||(b=`${b}__${JSON.stringify(d)}`);let w=s.get(b);return w||(w=new Intl.DateTimeFormat(m,tO({},g,d)),s.set(b,w)),p?w.formatToParts(u):w.format(u)}const dD=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function pD(...e){const[t,n,r,i]=e,a={};let o,s={};if(uO(t)){const e=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!e)throw createCoreError(rD.INVALID_ISO_DATE_ARGUMENT);const n=e[3]?e[3].trim().startsWith("T")?`${e[1].trim()}${e[3].trim()}`:`${e[1].trim()}T${e[3].trim()}`:e[1].trim();o=new Date(n);try{o.toISOString()}catch(Mh){throw createCoreError(rD.INVALID_ISO_DATE_ARGUMENT)}}else if("[object Date]"===fO(t)){if(isNaN(t.getTime()))throw createCoreError(rD.INVALID_DATE_ARGUMENT);o=t}else{if(!YC(t))throw createCoreError(rD.INVALID_ARGUMENT);o=t}return uO(n)?a.key=n:hO(n)&&Object.keys(n).forEach((e=>{dD.includes(e)?s[e]=n[e]:a[e]=n[e]})),uO(r)?a.locale=r:hO(r)&&(s=r),hO(i)&&(s=i),[a.key||"",o,a,s]}function fD(e,t,n){const r=e;for(const i in n){const e=`${t}__${i}`;r.__datetimeFormatters.has(e)&&r.__datetimeFormatters.delete(e)}}function hD(e,...t){const{numberFormats:n,unresolving:r,fallbackLocale:i,onWarn:a,localeFallbacker:o}=e,{__numberFormatters:s}=e,[l,u,c,d]=vD(...t);cO(c.missingWarn)?c.missingWarn:e.missingWarn;cO(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn;const p=!!c.part,f=uO(c.locale)?c.locale:e.locale,h=o(e,i,f);if(!uO(l)||""===l)return new Intl.NumberFormat(f,d).format(u);let m,v={},g=null;const y="number format";for(let _=0;_<h.length&&(m=h[_],v=n[m]||{},g=v[l],!hO(g));_++)XO(e,l,m,0,y);if(!hO(g)||!uO(m))return r?UO:l;let b=`${m}__${l}`;XC(d)||(b=`${b}__${JSON.stringify(d)}`);let w=s.get(b);return w||(w=new Intl.NumberFormat(m,tO({},g,d)),s.set(b,w)),p?w.formatToParts(u):w.format(u)}const mD=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function vD(...e){const[t,n,r,i]=e,a={};let o={};if(!YC(t))throw createCoreError(rD.INVALID_ARGUMENT);const s=t;return uO(n)?a.key=n:hO(n)&&Object.keys(n).forEach((e=>{mD.includes(e)?o[e]=n[e]:a[e]=n[e]})),uO(r)?a.locale=r:hO(r)&&(o=r),hO(i)&&(o=i),[a.key||"",s,a,o]}function gD(e,t,n){const r=e;for(const i in n){const e=`${t}__${i}`;r.__numberFormatters.has(e)&&r.__numberFormatters.delete(e)}}function yD(){return"undefined"!=typeof navigator&&"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}}"boolean"!=typeof __INTLIFY_PROD_DEVTOOLS__&&(rO().__INTLIFY_PROD_DEVTOOLS__=!1);const bD="function"==typeof Proxy,wD="devtools-plugin:setup",_D="plugin:settings:set";let xD,kD;function AD(){return void 0!==xD||("undefined"!=typeof window&&window.performance?(xD=!0,kD=window.performance):"undefined"!=typeof global&&(null===(e=global.perf_hooks)||void 0===e?void 0:e.performance)?(xD=!0,kD=global.perf_hooks.performance):xD=!1),xD?kD.now():Date.now();var e}class ED{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const n={};if(e.settings)for(const a in e.settings){const t=e.settings[a];n[a]=t.defaultValue}const r=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},n);try{const e=localStorage.getItem(r),t=JSON.parse(e);Object.assign(i,t)}catch(Mh){}this.fallbacks={getSettings:()=>i,setSettings(e){try{localStorage.setItem(r,JSON.stringify(e))}catch(Mh){}i=e},now:()=>AD()},t&&t.on(_D,((e,t)=>{e===this.plugin.id&&this.fallbacks.setSettings(t)})),this.proxiedOn=new Proxy({},{get:(e,t)=>this.target?this.target.on[t]:(...e)=>{this.onQueue.push({method:t,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,t)=>this.target?this.target[t]:"on"===t?this.proxiedOn:Object.keys(this.fallbacks).includes(t)?(...e)=>(this.targetQueue.push({method:t,args:e,resolve:()=>{}}),this.fallbacks[t](...e)):(...e)=>new Promise((n=>{this.targetQueue.push({method:t,args:e,resolve:n})}))})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function ID(e,t){const n=e,r=yD(),i=yD().__VUE_DEVTOOLS_GLOBAL_HOOK__,a=bD&&n.enableEarlyProxy;if(!i||!r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&a){const e=a?new ED(n,i):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:e}),e&&t(e.proxiedTarget)}else i.emit(wD,e,t)}
/*!
  * vue-i18n v9.2.0-beta.40
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const SD="9.2.0-beta.40";let RD=mO;const CD=()=>++RD,OD={UNEXPECTED_RETURN_TYPE:RD,INVALID_ARGUMENT:CD(),MUST_BE_CALL_SETUP_TOP:CD(),NOT_INSLALLED:CD(),NOT_AVAILABLE_IN_LEGACY_MODE:CD(),REQUIRED_VALUE:CD(),INVALID_VALUE:CD(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:CD(),NOT_INSLALLED_WITH_PROVIDE:CD(),UNEXPECTED_ERROR:CD(),NOT_COMPATIBLE_LEGACY_VUE_I18N:CD(),BRIDGE_SUPPORT_VUE_2_ONLY:CD(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:CD(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:CD(),__EXTEND_POINT__:CD()};function createI18nError(e,...t){return createCompileError(e,null,void 0)}const DD=JC("__transrateVNode"),jD=JC("__datetimeParts"),TD=JC("__numberParts"),PD=JC("__setPluralRules");JC("__intlifyMeta");const MD=JC("__injectWithOption");function LD(e){if(!dO(e))return e;for(const t in e)if(oO(e,t))if(t.includes(".")){const n=t.split("."),r=n.length-1;let i=e;for(let e=0;e<r;e++)n[e]in i||(i[n[e]]={}),i=i[n[e]];i[n[r]]=e[t],delete e[t],dO(i[n[r]])&&LD(i[n[r]])}else dO(e[t])&&LD(e[t]);return e}function $D(e,t){const{messages:n,__i18n:r,messageResolver:i,flatJson:a}=t,o=hO(n)?n:sO(r)?{}:{[e]:{}};if(sO(r)&&r.forEach((e=>{if("locale"in e&&"resource"in e){const{locale:t,resource:n}=e;t?(o[t]=o[t]||{},BD(n,o[t])):BD(n,o)}else uO(e)&&BD(JSON.parse(e),o)})),null==i&&a)for(const s in o)oO(o,s)&&LD(o[s]);return o}const ND=e=>!dO(e)||sO(e);function BD(e,t){if(ND(e)||ND(t))throw createI18nError(OD.INVALID_VALUE);for(const n in e)oO(e,n)&&(ND(e[n])||ND(t[n])?t[n]=e[n]:BD(e[n],t[n]))}function UD(e){return e.type}function FD(e){return io(Fa,null,e,0)}const zD="__INTLIFY_META__";let qD=0;function VD(e){return(t,n,r,i)=>e(n,r,Io()||void 0,i)}function QD(e={},t){const{__root:n}=e,r=void 0===n;let i=!cO(e.inheritLocale)||e.inheritLocale;const a=_r(n&&i?n.locale.value:uO(e.locale)?e.locale:FO),o=_r(n&&i?n.fallbackLocale.value:uO(e.fallbackLocale)||sO(e.fallbackLocale)||hO(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:a.value),s=_r($D(a.value,e)),l=_r(hO(e.datetimeFormats)?e.datetimeFormats:{[a.value]:{}}),u=_r(hO(e.numberFormats)?e.numberFormats:{[a.value]:{}});let c=n?n.missingWarn:!cO(e.missingWarn)&&!ZC(e.missingWarn)||e.missingWarn,d=n?n.fallbackWarn:!cO(e.fallbackWarn)&&!ZC(e.fallbackWarn)||e.fallbackWarn,p=n?n.fallbackRoot:!cO(e.fallbackRoot)||e.fallbackRoot,f=!!e.fallbackFormat,h=lO(e.missing)?e.missing:null,m=lO(e.missing)?VD(e.missing):null,v=lO(e.postTranslation)?e.postTranslation:null,g=n?n.warnHtmlMessage:!cO(e.warnHtmlMessage)||e.warnHtmlMessage,y=!!e.escapeParameter;const b=n?n.modifiers:hO(e.modifiers)?e.modifiers:{};let w,_=e.pluralRules||n&&n.pluralRules;w=function(){r&&KO(null);const t={version:SD,locale:a.value,fallbackLocale:o.value,messages:s.value,modifiers:b,pluralRules:_,missing:null===m?void 0:m,missingWarn:c,fallbackWarn:d,fallbackFormat:f,unresolving:!0,postTranslation:null===v?void 0:v,warnHtmlMessage:g,escapeParameter:y,messageResolver:e.messageResolver,__meta:{framework:"vue"}};t.datetimeFormats=l.value,t.numberFormats=u.value,t.__datetimeFormatters=hO(w)?w.__datetimeFormatters:void 0,t.__numberFormatters=hO(w)?w.__numberFormatters:void 0;const n=ZO(t);return r&&KO(n),n}(),eD(w,a.value,o.value);const x=Lo({get:()=>a.value,set:e=>{a.value=e,w.locale=a.value}}),k=Lo({get:()=>o.value,set:e=>{o.value=e,w.fallbackLocale=o.value,eD(w,a.value,e)}}),A=Lo((()=>s.value)),E=Lo((()=>l.value)),I=Lo((()=>u.value));function S(e,t,i,c,d,f){let h;if(a.value,o.value,s.value,l.value,u.value,__INTLIFY_PROD_DEVTOOLS__)try{WO((()=>{const e=Io();let t=null;return e&&(t=UD(e)[zD])?{[zD]:t}:null})()),r||(w.fallbackContext=n?JO:void 0),h=e(w)}finally{WO(null),r||(w.fallbackContext=void 0)}else h=e(w);if(YC(h)&&h===UO){const[e,r]=t();return n&&p?c(n):d(e)}if(f(h))return h;throw createI18nError(OD.UNEXPECTED_RETURN_TYPE)}function R(...e){return S((t=>Reflect.apply(oD,null,[t,...e])),(()=>uD(...e)),0,(t=>Reflect.apply(t.t,t,[...e])),(e=>e),(e=>uO(e)))}const C={normalize:function(e){return e.map((e=>uO(e)||YC(e)||cO(e)?FD(String(e)):e))},interpolate:e=>e,type:"vnode"};function O(e){return s.value[e]||{}}qD++,n&&GC&&(fi(n.locale,(e=>{i&&(a.value=e,w.locale=e,eD(w,a.value,o.value))})),fi(n.fallbackLocale,(e=>{i&&(o.value=e,w.fallbackLocale=e,eD(w,a.value,o.value))})));const D={id:qD,locale:x,fallbackLocale:k,get inheritLocale(){return i},set inheritLocale(e){i=e,e&&n&&(a.value=n.locale.value,o.value=n.fallbackLocale.value,eD(w,a.value,o.value))},get availableLocales(){return Object.keys(s.value).sort()},messages:A,get modifiers(){return b},get pluralRules(){return _||{}},get isGlobal(){return r},get missingWarn(){return c},set missingWarn(e){c=e,w.missingWarn=c},get fallbackWarn(){return d},set fallbackWarn(e){d=e,w.fallbackWarn=d},get fallbackRoot(){return p},set fallbackRoot(e){p=e},get fallbackFormat(){return f},set fallbackFormat(e){f=e,w.fallbackFormat=f},get warnHtmlMessage(){return g},set warnHtmlMessage(e){g=e,w.warnHtmlMessage=e},get escapeParameter(){return y},set escapeParameter(e){y=e,w.escapeParameter=e},t:R,getLocaleMessage:O,setLocaleMessage:function(e,t){s.value[e]=t,w.messages=s.value},mergeLocaleMessage:function(e,t){s.value[e]=s.value[e]||{},BD(t,s.value[e]),w.messages=s.value},getPostTranslationHandler:function(){return lO(v)?v:null},setPostTranslationHandler:function(e){v=e,w.postTranslation=e},getMissingHandler:function(){return h},setMissingHandler:function(e){null!==e&&(m=VD(e)),h=e,w.missing=m},[PD]:function(e){_=e,w.pluralRules=_}};return D.datetimeFormats=E,D.numberFormats=I,D.rt=function(...e){const[t,n,r]=e;if(r&&!dO(r))throw createI18nError(OD.INVALID_ARGUMENT);return R(t,n,tO({resolvedMessage:!0},r||{}))},D.te=function(e,t){const n=O(uO(t)?t:a.value);return null!==w.messageResolver(n,e)},D.tm=function(e){const t=function(e){let t=null;const n=MO(w,o.value,a.value);for(let r=0;r<n.length;r++){const i=s.value[n[r]]||{},a=w.messageResolver(i,e);if(null!=a){t=a;break}}return t}(e);return null!=t?t:n&&n.tm(e)||{}},D.d=function(...e){return S((t=>Reflect.apply(cD,null,[t,...e])),(()=>pD(...e)),0,(t=>Reflect.apply(t.d,t,[...e])),(()=>zO),(e=>uO(e)))},D.n=function(...e){return S((t=>Reflect.apply(hD,null,[t,...e])),(()=>vD(...e)),0,(t=>Reflect.apply(t.n,t,[...e])),(()=>zO),(e=>uO(e)))},D.getDateTimeFormat=function(e){return l.value[e]||{}},D.setDateTimeFormat=function(e,t){l.value[e]=t,w.datetimeFormats=l.value,fD(w,e,t)},D.mergeDateTimeFormat=function(e,t){l.value[e]=tO(l.value[e]||{},t),w.datetimeFormats=l.value,fD(w,e,t)},D.getNumberFormat=function(e){return u.value[e]||{}},D.setNumberFormat=function(e,t){u.value[e]=t,w.numberFormats=u.value,gD(w,e,t)},D.mergeNumberFormat=function(e,t){u.value[e]=tO(u.value[e]||{},t),w.numberFormats=u.value,gD(w,e,t)},D[MD]=e.__injectWithOption,D[DD]=function(...e){return S((t=>{let n;const r=t;try{r.processor=C,n=Reflect.apply(oD,null,[r,...e])}finally{r.processor=null}return n}),(()=>uD(...e)),0,(t=>t[DD](...e)),(e=>[FD(e)]),(e=>sO(e)))},D[jD]=function(...e){return S((t=>Reflect.apply(cD,null,[t,...e])),(()=>pD(...e)),0,(t=>t[jD](...e)),(()=>[]),(e=>uO(e)||sO(e)))},D[TD]=function(...e){return S((t=>Reflect.apply(hD,null,[t,...e])),(()=>vD(...e)),0,(t=>t[TD](...e)),(()=>[]),(e=>uO(e)||sO(e)))},D}const HD={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>"parent"===e||"global"===e,default:"parent"},i18n:{type:Object}};function GD(e){return Ua}const WD={name:"i18n-t",props:tO({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>YC(e)||!isNaN(e)}},HD),setup(e,t){const{slots:n,attrs:r}=t,i=e.i18n||nj({useScope:e.scope,__useComponent:!0});return()=>{const a=Object.keys(n).filter((e=>"_"!==e)),o={};e.locale&&(o.locale=e.locale),void 0!==e.plural&&(o.plural=uO(e.plural)?+e.plural:e.plural);const s=function({slots:e},t){if(1===t.length&&"default"===t[0])return(e.default?e.default():[]).reduce(((e,t)=>[...e,...sO(t.children)?t.children:[t]]),[]);return t.reduce(((t,n)=>{const r=e[n];return r&&(t[n]=r()),t}),{})}(t,a),l=i[DD](e.keypath,s,o),u=tO({},r);return Bo(uO(e.tag)||dO(e.tag)?e.tag:GD(),u,l)}}};function JD(e,t,n,r){const{slots:i,attrs:a}=t;return()=>{const t={part:!0};let o={};e.locale&&(t.locale=e.locale),uO(e.format)?t.key=e.format:dO(e.format)&&(uO(e.format.key)&&(t.key=e.format.key),o=Object.keys(e.format).reduce(((t,r)=>n.includes(r)?tO({},t,{[r]:e.format[r]}):t),{}));const s=r(e.value,t,o);let l=[t.key];sO(s)?l=s.map(((e,t)=>{const n=i[e.type],r=n?n({[e.type]:e.value,index:t,parts:s}):[e.value];var a;return sO(a=r)&&!uO(a[0])&&(r[0].key=`${e.type}-${t}`),r})):uO(s)&&(l=[s]);const u=tO({},a);return Bo(uO(e.tag)||dO(e.tag)?e.tag:GD(),u,l)}}const KD={name:"i18n-n",props:tO({value:{type:Number,required:!0},format:{type:[String,Object]}},HD),setup(e,t){const n=e.i18n||nj({useScope:"parent",__useComponent:!0});return JD(e,t,mD,((...e)=>n[TD](...e)))}},YD={name:"i18n-d",props:tO({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},HD),setup(e,t){const n=e.i18n||nj({useScope:"parent",__useComponent:!0});return JD(e,t,dD,((...e)=>n[jD](...e)))}};function ZD(e){const t=(t,{instance:n,value:r,modifiers:i})=>{if(!n||!n.$)throw createI18nError(OD.UNEXPECTED_ERROR);const a=function(e,t){const n=e;if("composition"===e.mode)return n.__getInstance(t)||e.global;{const r=n.__getInstance(t);return null!=r?r.__composer:e.global.__composer}}(e,n.$),o=function(e){if(uO(e))return{path:e};if(hO(e)){if(!("path"in e))throw createI18nError(OD.REQUIRED_VALUE);return e}throw createI18nError(OD.INVALID_VALUE)}(r);t.textContent=Reflect.apply(a.t,a,[...XD(o)])};return{beforeMount:t,beforeUpdate:t}}function XD(e){const{path:t,locale:n,args:r,choice:i,plural:a}=e,o={},s=r||{};return uO(n)&&(o.locale=n),YC(i)&&(o.plural=i),YC(a)&&(o.plural=a),[t,s,o]}const ej=JC("global-vue-i18n");function tj(e={},t){const n=!cO(e.globalInjection)||e.globalInjection,r=!0,i=new Map,[a,o]=function(e,t,n){const r=new Xt(i);var i;{const t=r.run((()=>QD(e)));if(null==t)throw createI18nError(OD.UNEXPECTED_ERROR);return[r,t]}}(e),s=JC("");{const e={get mode(){return"composition"},get allowComposition(){return r},async install(t,...r){t.__VUE_I18N_SYMBOL__=s,t.provide(t.__VUE_I18N_SYMBOL__,e),n&&function(e,t){const n=Object.create(null);rj.forEach((e=>{const r=Object.getOwnPropertyDescriptor(t,e);if(!r)throw createI18nError(OD.UNEXPECTED_ERROR);const i=wr(r.value)?{get:()=>r.value.value,set(e){r.value.value=e}}:{get:()=>r.get&&r.get()};Object.defineProperty(n,e,i)})),e.config.globalProperties.$i18n=n,ij.forEach((n=>{const r=Object.getOwnPropertyDescriptor(t,n);if(!r||!r.value)throw createI18nError(OD.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${n}`,r)}))}(t,e.global),function(e,t,...n){const r=hO(n[0])?n[0]:{},i=!!r.useI18nComponentName;(!cO(r.globalInstall)||r.globalInstall)&&(e.component(i?"i18n":WD.name,WD),e.component(KD.name,KD),e.component(YD.name,YD)),e.directive("t",ZD(t))}(t,e,...r);const i=t.unmount;t.unmount=()=>{e.dispose(),i()}},get global(){return o},dispose(){a.stop()},__instances:i,__getInstance:function(e){return i.get(e)||null},__setInstance:function(e,t){i.set(e,t)},__deleteInstance:function(e){i.delete(e)}};return e}}function nj(e={}){const t=Io();if(null==t)throw createI18nError(OD.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&null!=t.appContext.app&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(OD.NOT_INSLALLED);const n=function(e){{const t=ci(e.isCE?ej:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw createI18nError(e.isCE?OD.NOT_INSLALLED_WITH_PROVIDE:OD.UNEXPECTED_ERROR);return t}}(t),r=function(e){return"composition"===e.mode?e.global:e.global.__composer}(n),i=UD(t),a=function(e,t){return XC(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}(e,i);if("global"===a)return function(e,t,n){let r=dO(t.messages)?t.messages:{};"__i18nGlobal"in n&&(r=$D(e.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const i=Object.keys(r);if(i.length&&i.forEach((t=>{e.mergeLocaleMessage(t,r[t])})),dO(t.datetimeFormats)){const n=Object.keys(t.datetimeFormats);n.length&&n.forEach((n=>{e.mergeDateTimeFormat(n,t.datetimeFormats[n])}))}if(dO(t.numberFormats)){const n=Object.keys(t.numberFormats);n.length&&n.forEach((n=>{e.mergeNumberFormat(n,t.numberFormats[n])}))}}(r,e,i),r;if("parent"===a){let i=function(e,t,n=!1){let r=null;const i=t.root;let a=t.parent;for(;null!=a;){const t=e;if("composition"===e.mode&&(r=t.__getInstance(a)),null!=r)break;if(i===a)break;a=a.parent}return r}(n,t,e.__useComponent);return null==i&&(i=r),i}const o=n;let s=o.__getInstance(t);if(null==s){const n=tO({},e);"__i18n"in i&&(n.__i18n=i.__i18n),r&&(n.__root=r),s=QD(n),function(e,t,n){$i((()=>{}),t),Fi((()=>{e.__deleteInstance(t)}),t)}(o,t),o.__setInstance(t,s)}return s}const rj=["locale","fallbackLocale","availableLocales"],ij=["t","rt","d","n","tm"];var aj,oj;if(aj=function(e,t){if(!dO(e))return null;let n=xO.get(t);if(n||(n=function(e){const t=[];let n,r,i,a,o,s,l,u=-1,c=0,d=0;const p=[];function f(){const t=e[u+1];if(5===c&&"'"===t||6===c&&'"'===t)return u++,i="\\"+t,p[0](),!0}for(p[0]=()=>{void 0===r?r=i:r+=i},p[1]=()=>{void 0!==r&&(t.push(r),r=void 0)},p[2]=()=>{p[0](),d++},p[3]=()=>{if(d>0)d--,c=4,p[0]();else{if(d=0,void 0===r)return!1;if(r=_O(r),!1===r)return!1;p[1]()}};null!==c;)if(u++,n=e[u],"\\"!==n||!f()){if(a=wO(n),l=yO[c],o=l[a]||l["l"]||8,8===o)return;if(c=o[0],void 0!==o[1]&&(s=p[o[1]],s&&(i=n,!1===s())))return;if(7===c)return t}}(t),n&&xO.set(t,n)),!n)return null;const r=n.length;let i=e,a=0;for(;a<r;){const e=i[n[a]];if(void 0===e)return null;i=e,a++}return i},QO=aj,HO=MO,"boolean"!=typeof __INTLIFY_PROD_DEVTOOLS__&&(rO().__INTLIFY_PROD_DEVTOOLS__=!1),__INTLIFY_PROD_DEVTOOLS__){const e=rO();e.__INTLIFY__=!0,oj=e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__,DO=oj}const sj="lang.locale";const lj=vw(new class extends yw{constructor(){super(),t(this,"locales"),t(this,"displayNames"),t(this,"defaultLocale"),t(this,"fallbackLocale","en"),t(this,"localeLoaders"),t(this,"loadedLocales",new Set),this.localeLoaders=this.initLocaleLoaders(),this.locales=Object.keys(this.localeLoaders),this.displayNames=this.locales.reduce(((e,t)=>{var n;return e[t]=qe(null!=(n=new Intl.DisplayNames([t],{type:"language"}).of(t))?n:t),e}),{}),this.defaultLocale=this.initDefaultLocale()}async loadLocaleMessages(e){var t,n;const{default:r}=await(null==(n=(t=this.localeLoaders)[e])?void 0:n.call(t));return r}async getDefaultLocalesMessages(){const e=await Promise.all(se([this.defaultLocale,this.fallbackLocale]).map((async e=>({locale:e,messages:await this.loadLocaleMessages(e)}))));return e.map((({locale:e})=>this.loadedLocales.add(e))),e.reduce(((e,{locale:t,messages:n})=>(e[t]=n,e)),{})}async change(e){var t;if(!this.loadedLocales.has(e)){const t=await this.loadLocaleMessages(e);fR.setLocaleMessages(e,t)}fR.locale.value=e,null==(t=document.querySelector("html"))||t.setAttribute("lang",e)}async boot(){await super.boot(),YI.on("application-mounted",(()=>{fi(fR.locale,(()=>Ce.set(sj,fR.locale.value)))}))}initLocaleLoaders(){const e=Object.assign({"/src/lang/ca.yaml":()=>Og((()=>import("./ca.47a40c64.js")),1?[]:void 0),"/src/lang/en.yaml":()=>Og((()=>import("./en.4f6bd60f.js")),1?[]:void 0),"/src/lang/es.yaml":()=>Og((()=>import("./es.1f50ddc8.js")),1?[]:void 0)});return Object.entries(e).reduce(((e,[t,n])=>{var r;const i=null==(r=A(t,/.*\/lang\/(.+)\.yaml/))?void 0:r[1];return i&&(e[i]=n),e}),{})}initDefaultLocale(){var e;return Ce.has(sj)?Ce.require(sj):T(null!=(e=navigator.languages.find((e=>this.locales.includes(e))))?e:"en",(e=>{Ce.set(sj,e)}))}}),uj={"auth.invalidWebId":"`{webId}` does not return a valid webId document.","auth.stuckConnecting":"We didn't hear back from the identity provider, maybe try reconnecting?"};function cj(e,t={}){var n;const r=null!=(n=uj[e])?n:e;return Object.entries(t).reduce(((e,[t,n])=>e.replace(`{${t}}`,n)),r)}async function dj(){const e=await lj.getDefaultLocalesMessages();return tj({locale:lj.defaultLocale,fallbackLocale:lj.fallbackLocale,globalInjection:!0,messages:e})}const pj="inrupt-authenticator";const fj={},hj={localStorage:new class extends QC{async login(e,t){var n,r,i,a;const o=null!=(n=prompt("What is your webId?",e))?n:ne(AuthenticationCancelledError);return t=null!=t?t:{webId:o,name:null!=(r=prompt("What is your name?","John Doe"))?r:ne(AuthenticationCancelledError),cloaked:!1,writableProfileUrl:o,storageUrls:[null!=(i=prompt("Where is your storage?","http://localhost:4000/"))?i:ne(AuthenticationCancelledError)],privateTypeIndexUrl:null!=(a=prompt("Where is the type index?","http://localhost:4000/settings/privateTypeIndex"))?a:ne(AuthenticationCancelledError),oidcIssuerUrl:e},Ce.set(HC,{loginUrl:e,user:t}),location.reload(),await Ue({seconds:60}),ne("Browser should have redirected, but it didn't")}async logout(){Ce.remove(HC),await this.endSession()}async restoreSession(){Ce.has(HC)&&(await this.initAuthenticatedFetch(window.fetch.bind(window)),await this.startSession(Ce.require(HC)))}},inrupt:new class extends QC{constructor(){super(...arguments),t(this,"_fetch"),t(this,"_login"),t(this,"_logout"),t(this,"_handleIncomingRedirect")}async login(e){return Ce.set(pj,!0),await this._login({oidcIssuer:e,redirectUrl:window.location.href,clientName:Jj.name}),await Ue({seconds:60}),ne("Browser should have redirected, but it didn't")}async logout(){await this._logout(),await this.endSession()}async restoreSession(){const{fetch:e,handleIncomingRedirect:t,login:n,logout:r}=await Og((()=>import("./index.5ce03388.js").then((e=>e.i))),1?["assets/index.5ce03388.js","assets/noeldemartin-utils.esm.913e4d55.js","assets/events.4a98245a.js"]:void 0);this._fetch=e,this._login=n,this._logout=r,this._handleIncomingRedirect=t,await this.loginFromRedirect()}async loginFromRedirect(){if(!Ce.has(pj))return;const e=await this._handleIncomingRedirect(window.location.href);if(Ce.remove(pj),(null==e?void 0:e.isLoggedIn)&&e.webId){await this.initAuthenticatedFetch(this._fetch);const t=await gj.getUserProfile(e.webId);t?await this.startSession({user:t,loginUrl:e.webId}):await this.failSession(e.webId,cj("auth.invalidWebId",{webId:e.webId}))}}}};function mj(e){return fj[e]}class vj extends yw{isLoggedIn(){return this.loggedIn}requireAuthenticator(){var e;return null!=(e=this.authenticator)?e:ne("Could not get authenticator")}requireUser(){var e;return null!=(e=this.user)?e:ne("Could not get user profile")}async getUserProfile(e){var t;return null!=(t=this.profiles[e])?t:T(await function(e,t){return cm.apply(this,arguments)}(e,this.fetch),(e=>e&&this.rememberProfile(e)))}async refreshUserProfile(){if(!this.isLoggedIn())return;this.setState({profiles:be(this.profiles,[this.user.webId])});const e=await this.getUserProfile(this.user.webId);if(!e)throw new Error("User profile went missing");this.setState({session:{...this.session,user:e}})}async login(e,t){var n,r,i;if(t=null!=(n=null!=t?t:this.preferredAuthenticator)?n:"default",this.loggedIn)return!0;if(this.ongoing)throw new Error("Authentication already in progress");const a=setTimeout((()=>this.stale=!0),1e4);this.ongoing=!0;try{const n=await this.getUserProfile(e),o=null!=(i=null==n?void 0:n.oidcIssuerUrl)?i:D(null!=(r=null==n?void 0:n.webId)?r:e),s=await this.bootAuthenticator(t);return this.setState({dismissed:!1,ignorePreviousSessionError:!0,previousSession:{loginUrl:e,avatarUrl:null==n?void 0:n.avatarUrl,authenticator:t,error:cj("auth.stuckConnecting")}}),await s.login(o),!0}catch(o){return o instanceof AuthenticationCancelledError||(Jj.isMounted?mC.report(o):this.setState({loginError:o})),!1}finally{clearTimeout(a),this.ongoing=!1,this.stale=!1}}async reconnect(e=!1){this.loggedIn||!this.previousSession||null!==this.previousSession.error&&!e||await this.login(this.previousSession.loginUrl,this.previousSession.authenticator)}async logout(e=!1){(e||await fC.confirm({title:hR("menu.logOut_confirmTitle"),message:qC.dirty?hR("menu.logOut_confirmMessageWithWarning"):hR("menu.logOut_confirmMessage"),acceptText:hR("menu.logOut"),acceptColor:QI.Danger}))&&this.previousSession&&(this.setState({previousSession:null}),this.isLoggedIn()&&await this.authenticator.logout(),await Wv().purgeDatabase(),await VC.push({name:"home"}),await YI.emit("logout"))}dismiss(){this.setState({dismissed:!0})}async createPrivateTypeIndex(){if(!this.isLoggedIn())throw new Error("Can't create a type index because the user is not logged in");const e=this.user,t=await function(e,t){return xm.apply(this,arguments)}(e,this.authenticator.requireAuthenticatedFetch());return T(t,(()=>{e.privateTypeIndexUrl=t,this.rememberProfile(e)}))}async createPublicTypeIndex(){if(!this.isLoggedIn())throw new Error("Can't create a type index because the user is not logged in");const e=this.user,t=await function(e,t){return _m.apply(this,arguments)}(e,this.authenticator.requireAuthenticatedFetch());return await dw.withEngine(this.authenticator.engine,(async()=>{const e=await dw.find(t);await(null==e?void 0:e.updatePublicPermissions([Ph.Read]))})),T(t,(()=>{e.publicTypeIndexUrl=t,this.rememberProfile(e)}))}async boot(){await super.boot(),await mC.booted;const e=new URL(location.href);e.searchParams.has("authenticator")&&this.setState({preferredAuthenticator:e.searchParams.get("authenticator")}),this.previousSession&&await this.bootAuthenticator(this.previousSession.authenticator),this.reconnectOnStartup()&&await this.reconnect()}getInitialState(){return{autoReconnect:!0,loginError:null,session:null,dismissed:!1,ongoing:!1,stale:!1,ignorePreviousSessionError:!1,previousSession:null,preferredAuthenticator:null,profiles:{}}}getComputedStateDefinitions(){return{authenticator:e=>{var t,n;return null!=(n=null==(t=e.session)?void 0:t.authenticator)?n:null},error:e=>{var t,n,r;return e.loginError?null!=(t=e.loginError)?t:null:e.ignorePreviousSessionError?null:null!=(r=null==(n=e.previousSession)?void 0:n.error)?r:null},fetch:(e,{authenticator:t})=>{var n;return null!=(n=null==t?void 0:t.getAuthenticatedFetch())?n:window.fetch.bind(window)},loggedIn:e=>!!e.session,userAvatarUrl:e=>{var t,n,r,i,a;return null!=(a=null!=(i=null==(n=null==(t=e.session)?void 0:t.user)?void 0:n.avatarUrl)?i:null==(r=e.previousSession)?void 0:r.avatarUrl)?a:null},wasLoggedIn:e=>{var t;return!!(null==(t=e.previousSession)?void 0:t.loginUrl)},hasLoggedIn:(e,t)=>t.loggedIn||t.wasLoggedIn,user:e=>{var t,n;return null!=(n=null==(t=e.session)?void 0:t.user)?n:null}}}reconnectOnStartup(){return!1!==VC.currentRoute.value.meta.reconnect&&(Le("autoReconnect")?$e(Ne("autoReconnect")):this.autoReconnect)}refreshProfileOnSessionStarted(e){return!(!e.cloaked&&e.writableProfileUrl)||$e(Ne("refreshProfile"))}async bootAuthenticator(e){const t=mj(e);return t.addListener({onSessionStarted:async e=>{this.setState({session:e,previousSession:{authenticator:t.name,loginUrl:e.loginUrl,avatarUrl:e.user.avatarUrl,error:null}}),this.refreshProfileOnSessionStarted(e.user)&&await this.refreshUserProfile(),aw.setEngine(e.authenticator.engine),await YI.emit("login",e)},onSessionFailed:async(e,n)=>{this.setState({previousSession:{authenticator:t.name,loginUrl:e,error:n}})},onSessionEnded:()=>this.setState({session:null}),onAuthenticatedFetchReady:e=>YI.emit("authenticated-fetch-ready",e)}),await t.boot(),t}rememberProfile(e){this.setState({profiles:{...this.profiles,[e.webId]:e}})}}t(vj,"persist",["autoReconnect","dismissed","previousSession","profiles"]);const gj=vw(new vj);class yj extends yw{async boot(){await super.boot(),await this.initIndexedDBSupport()}getInitialState(){return{supportsIndexedDB:null,supportsSharing:"share"in navigator,isFirefox:!!(navigator&&navigator.userAgent&&/firefox/i.test(navigator.userAgent))}}async initIndexedDBSupport(){null===this.supportsIndexedDB&&this.setState({supportsIndexedDB:await this.isIndexedDBSupported()})}async isIndexedDBSupported(){try{const e="browser-storage://capabilities-check";return await MC.store(e,"",new Blob),await MC.delete(e),!0}catch(Mh){return!1}}}t(yj,"persist",["supportsIndexedDB"]);const bj=vw(new yj);class CookbookExistsError extends g{constructor(e){super(`Cookbook with url '${e.url}' already exists`),t(this,"cookbook"),this.cookbook=e}}const wj=Mb.schema({text:{type:Xv.String,required:!0},position:{type:Xv.Number,required:!0}}),_j=Object.freeze(Object.defineProperty({__proto__:null,default:wj},Symbol.toStringTag,{value:"Module"}));class xj extends wj{}t(xj,"history",!0),t(xj,"rdfContexts",{schema:"https://schema.org/"}),t(xj,"rdfsClasses",["schema:HowToStep"]);const kj=Object.freeze(Object.defineProperty({__proto__:null,default:xj},Symbol.toStringTag,{value:"Module"})),Aj=Mb.schema({name:{type:Xv.String,required:!0},description:Xv.String,creatorWebId:{type:Xv.Key,rdfProperty:"purl:creator"},itemUrls:{type:Xv.Array,rdfProperty:"schema:itemListElement",items:Xv.Key}}),Ej=Object.freeze(Object.defineProperty({__proto__:null,default:Aj},Symbol.toStringTag,{value:"Module"})),Ij=Mb.schema({recipeUrl:{type:Xv.Key,rdfProperty:"schema:item",required:!0}}),Sj=Object.freeze(Object.defineProperty({__proto__:null,default:Ij},Symbol.toStringTag,{value:"Module"}));class Rj extends Ij{recipeRelationship(){return this.belongsToOne(Qj,"recipeUrl")}}t(Rj,"history",!1),t(Rj,"timestamps",!1),t(Rj,"rdfContexts",{schema:"https://schema.org/"}),t(Rj,"rdfsClasses",["schema:ListItem"]);const Cj=Object.freeze(Object.defineProperty({__proto__:null,default:Rj},Symbol.toStringTag,{value:"Module"}));class Oj extends Aj{constructor(){super(...arguments),t(this,"isRegistered",!1)}itemsRelationship(){return this.belongsToMany(Rj,"itemUrls").onDelete("cascade").usingSameDocument(!0)}has(e){var t;return!!(null==(t=this.items)?void 0:t.some((t=>t.recipeUrl===e.url)))}}t(Oj,"history",!1),t(Oj,"timestamps",!1),t(Oj,"rdfContexts",{schema:"https://schema.org/",purl:"http://purl.org/dc/terms/"}),t(Oj,"rdfsClasses",["schema:ItemList"]);const Dj=Object.freeze(Object.defineProperty({__proto__:null,default:Oj},Symbol.toStringTag,{value:"Module"})),jj={"½":.5,"¼":.25},Tj=Object.entries(jj).reduce(((e,[t,n])=>(e[n.toString()]=t,e)),{}),Pj={grams:{g:1,grams:1,kg:1e3,kilograms:1e3,tsp:15},milliliters:{ml:1,milliliters:1,l:1e3,liters:1e3}},Mj={tsp:" tsp"},[Lj,$j,Nj]=function(){const e=`(?:(?:\\d+[.,\\d]*)|${Object.keys(jj).join("|")})`,t="to|-|~",n=`${e}\\s*(?:${t})\\s*${e}`,r=Object.values(Pj).reduce(((e,t)=>[...e,Object.keys(t).join("|")]),[]).join("|");return[new RegExp(`((?:${n})|(?:${e}))\\s*(?:(${r})\\s+)?(.*)`,"i"),new RegExp(t,"i"),Object.entries(Pj).reduce(((e,[t,n])=>(Object.entries(n).forEach((([n,r])=>{e[n]=(e,n)=>{var i,a;return[Array.isArray(e)?[e[0]*r,e[1]*r]:e*r,t,r,null!=(a=null!=(i=Mj[null!=n?n:""])?i:n)?a:""]}})),e)),{})]}();function Bj(e){var t;return null!=(t=jj[e])?t:parseFloat(e.replace(",","."))}function Uj(e){var t;const n=e.toString();return null!=(t=Tj[n])?t:n}function Fj(e){var t;const n=e,r=e.match(Lj),i=(null!=(t=null==r?void 0:r[3])?t:e).trim(),a=null==r?void 0:r[2],[o,s,l,u]=function(e,t){var n,r,i;if(!e)return[];const a=e.match($j)?e.split($j).map(Bj):Bj(e);return null!=(i=null==(r=Nj[null!=(n=null==t?void 0:t.trim().toLowerCase())?n:""])?void 0:r.call(Nj,a,t))?i:[a]}(null==r?void 0:r[1],a);return L({name:i,original:n,quantity:o,unit:s,unitMultiplier:l,renderQuantity:void 0!==o?Array.isArray(o)?e=>e.map(Uj).join(" - ")+` ${i}`:e=>`${Uj(e)}${null!=u?u:""} ${i}`:()=>n})}function zj(e){return e.sort(((e,t)=>function(e,t){if(e.unit&&!t.unit)return 1;if(!e.unit&&t.unit)return-1;const n=Array.isArray(e.quantity)?e.quantity[0]:e.quantity,r=Array.isArray(t.quantity)?t.quantity[0]:t.quantity;if(!n&&!r)return Ve(t.original,e.original);if(n&&!r)return 1;if(!n&&r)return-1;const i=Ve(n,r);return 0===i?Ve(t.original,e.original):i}(t,e))),e}const qj=Mb.schema({name:{type:Xv.String,required:!0},description:Xv.String,imageUrls:{type:Xv.Array,items:Xv.Key,rdfProperty:"schema:image"},servings:{type:Xv.String,rdfProperty:"schema:recipeYield"},prepTime:Xv.String,cookTime:Xv.String,ingredients:{type:Xv.Array,items:Xv.String,rdfProperty:"schema:recipeIngredient"},instructionStepUrls:{type:Xv.Array,items:Xv.Key,rdfProperty:"schema:recipeInstructions"},listUrls:{type:Xv.Array,items:Xv.Key,rdfProperty:"purl:isReferencedBy"},externalUrls:{type:Xv.Array,items:Xv.Key,rdfProperty:"schema:sameAs"}}),Vj=Object.freeze(Object.defineProperty({__proto__:null,default:qj},Symbol.toStringTag,{value:"Module"}));class Qj extends qj{get imageUrl(){return this.imageUrls.length>0?this.imageUrls[0]:void 0}get slug(){if(!this.url)return null;const e=e=>{var t,n;return null!=(n=null==(t=this.url.substring(e).replaceAll("/","-").match(/([^#]+)(#.*)?$/))?void 0:t[1])?n:null};return Wj.remoteCookbookUrl&&this.url.startsWith(Wj.remoteCookbookUrl)?e(Wj.remoteCookbookUrl.length):this.url.startsWith(Wj.localCookbookUrl)?e(Wj.localCookbookUrl.length):null}get sortedExternalUrls(){const e=this.externalUrls.map((e=>{var t,n;return{url:e,domain:null==(n=null==(t=M(e))?void 0:t.domain)?void 0:n.replace(/^www\./,"")}}));return ye(e,((e,t)=>Ve(e.domain,t.domain))).map((({url:e})=>e))}get sortedIngredients(){return this.sortedIngredientsBreakdown.map((({original:e})=>e))}get sortedIngredientsBreakdown(){const e=this.ingredients.map(Fj);return zj(e),e}get servingsBreakdown(){var e;const t=this.servings,[n]=null!=(e=null==t?void 0:t.match(/\d+/))?e:[];return t&&n?{original:t,quantity:parseInt(n),renderQuantity:e=>t.replace(n,e.toString())}:null}get sortedInstructions(){var e;return ye(null!=(e=this.instructions)?e:[],"position")}is(e){return this.url===e.url||this.externalUrls.some((t=>t===e.url))}instructionsRelationship(){return this.belongsToMany(xj,"instructionStepUrls").onDelete("cascade").usingSameDocument(!0)}listsRelationship(){return this.belongsToMany(Oj,"listUrls")}toExternalJsonLD(e={}){var t,n,r,i;return this.toJsonLD({ids:null!=(n=e.includeIds)?n:null==(t=this.url)?void 0:t.startsWith("http"),timestamps:null!=(r=e.includeHistory)&&r,history:null!=(i=e.includeHistory)&&i})}download(e={}){var t;const n=null!=(t=this.slug)?t:"recipe",r=this.toExternalJsonLD(e);Qe(`${n}.json`,JSON.stringify(r),"application/json")}async updatePublicPermissions(e){var t;await super.updatePublicPermissions(e),(null==(t=this.imageUrl)?void 0:t.startsWith(this.requireContainerUrl()))&&await new ow({url:this.imageUrl}).updatePublicPermissions(e)}newUrl(e,t){return`${e=null!=e?e:F(this.static("collection"),_e(this.name))}#${t=null!=t?t:this.static("defaultResourceHash")}`}}t(Qj,"history",!0),t(Qj,"tombstone",!1),t(Qj,"rdfContexts",{schema:"https://schema.org/",purl:"http://purl.org/dc/terms/"});const Hj=Object.freeze(Object.defineProperty({__proto__:null,default:Qj},Symbol.toStringTag,{value:"Module"}));class Gj extends yw{constructor(){super(...arguments),t(this,"cookbook",new Ie),t(this,"tmpRecipes",{})}async initializeRemote(e,t){const n=gj.requireAuthenticator().engine,r=await cw.withEngine(n,(async()=>{const n=xe(t,_e(e)),r=await cw.find(n);if(r)throw new CookbookExistsError(r);return new cw({url:n,name:e})}));await this.initializeRemoteUsing(r)}async initializeRemoteUsing(e){const t=gj.requireUser(),n=gj.requireAuthenticator().engine;await cw.withEngine(n,(async()=>{var n;const r=null!=(n=t.privateTypeIndexUrl)?n:await gj.createPrivateTypeIndex();await e.save(),await e.register(r,Qj)})),await this.initializeRemoteCookbook(e),await this.reloadRecipes()}getTmpRecipe(e){var t;return null!=(t=this.tmpRecipes[e])?t:null}saveTmpRecipe(e){return T(N(),(t=>this.tmpRecipes[t]=e))}async deleteRecipe(e){if(this.isRemote)return await e.softDelete(),void(await qC.syncIfOnline(e));e.imageUrl&&await MC.has(e.imageUrl)&&await MC.delete(e.imageUrl),await e.delete()}async updatePublicRecipeListing(e,t){var n;const r=await this.loadPublicRecipesList();if(t&&!r.has(e)&&(r.relatedItems.attach({recipeUrl:e.url}),e.listUrls=[...e.listUrls,r.url]),!t&&r.has(e)){const t=null==(n=r.items)?void 0:n.find((t=>t.recipeUrl===e.url));t&&r.relatedItems.detach(t),e.listUrls=e.listUrls.filter((e=>e!==r.url))}(r.exists()||r.items&&r.items.length>0)&&await Oj.withEngine(gj.requireAuthenticator().engine,(()=>r.save())),r.exists()&&r.wasRecentlyCreated()&&!r.isRegistered&&await this.registerPublicRecipesList(r),e.isDirty()&&(await e.save(),await qC.sync(e))}mendRecipe(e){this.mendRecipeInstructions(e),e.fixMalformedAttributes()}foundRecipeUsingRdfAliases(){this.setState({usingRdfAliases:!0}),this.replaceRdfAliases()}async boot(){await super.boot(),await gj.booted,await bj.booted,this.cookbook.onResolve((()=>this.setState({created:!0}))),this.cookbook.onReset((()=>this.setState({created:!1}))),this.cookbook.onReject((()=>this.setState({created:!1}))),this.aliasRdfPrefixes(),bj.supportsIndexedDB&&(await this.loadCookbook(),await this.loadRecipes(),await this.enqueueFileUploads(),YI.on("login",(async e=>{await this.loadCookbook(),Oj.setEngine(e.authenticator.engine),uw.setEngine(e.authenticator.engine)})),YI.on("logout",(async()=>{this.cookbook.reset(),this.resetModelDefinitions(),this.setState({remoteCookbookUrl:null,allRecipes:$(),usingRdfAliases:!1})})),Qj.on("deleted",(e=>{this.setState({allRecipes:this.allRecipes.without([e])}),YI.emit("recipe-deleted")})),Qj.on("created",(e=>{this.setState({allRecipes:this.allRecipes.concat([e])}),YI.emit("recipe-created")})),Qj.on("updated",(()=>this.setState({allRecipes:this.allRecipes.slice(0)}))))}getInitialState(){return{created:this.cookbook.isResolved(),localCookbookUrl:Qj.collection,remoteCookbookUrl:null,publicRecipesList:null,allRecipes:$([]),usingRdfAliases:!1}}getComputedStateDefinitions(){return{isLocal:({remoteCookbookUrl:e})=>!e,isRemote:({remoteCookbookUrl:e})=>!!e,recipes:({allRecipes:e})=>e.filter((e=>!e.isSoftDeleted()))}}async initializeRemoteCookbook(e){await this.migrateLocalRecipes(e.url),function(e,t){e.collection=t;const n=$C.get(e);n&&(n.collection=t)}(Qj,e.url),e.url!==this.remoteCookbookUrl&&this.setState({remoteCookbookUrl:e.url}),this.cookbook.resolve(e)}getCookbookModels(){return[Qj,xj,Oj,Rj]}aliasRdfPrefixes(){this.usingRdfAliases?this.replaceRdfAliases():this.getCookbookModels().forEach((e=>e.aliasRdfPrefixes({"https://schema.org/":"http://schema.org/"})))}replaceRdfAliases(){this.getCookbookModels().forEach((e=>{e.resetRdfAliases(),e.replaceRdfPrefixes({"https://schema.org/":"http://schema.org/"}),e.aliasRdfPrefixes({"http://schema.org/":"https://schema.org/"})}))}async loadRecipes(){const e=[],t=Qj.collection,n=Qj.requireEngine(),r=(await n.getCollections()).filter((e=>e.startsWith(t)));for(const i of r){const t=await Qj.from(i).all();e.push(...t)}Qj.collection=t,this.allRecipes=$(e)}async loadCookbook(){var e,t;if(gj.isLoggedIn()){const e=gj.authenticator.engine;await cw.withEngine(e,(async()=>T(await this.findCookbook(),(e=>e&&this.initializeRemoteCookbook(e)))))}else Qj.collection=null!=(e=this.remoteCookbookUrl)?e:this.localCookbookUrl,Oj.collection=null!=(t=this.remoteCookbookUrl)?t:Oj.collection,this.cookbook.resolve(new cw({url:Qj.collection,name:"cookbook"}))}async loadPublicRecipesList(){var e,t;return this.publicRecipesList=null!=(t=null!=(e=this.publicRecipesList)?e:await this.findPublicRecipesList())?t:this.newPublicRecipesList(),this.publicRecipesList}async reloadRecipes(){await this.loadRecipes()}async findCookbook(e=!0){var t,n;const r=gj.requireUser();try{return null!=(n=null!=(t=await this.findCookbookInTypeIndex(r.privateTypeIndexUrl))?t:await this.findCookbookInTypeIndex(r.publicTypeIndexUrl))?n:null}catch(i){if(!e)throw i;return await gj.refreshUserProfile(),await gj.createPrivateTypeIndex(),this.findCookbook(!1)}}async findCookbookInTypeIndex(e){return e?cw.fromTypeIndex(e,Qj):null}async findPublicRecipesList(){if(!gj.isLoggedIn())return null;const e=gj.requireUser();if(e.publicTypeIndexUrl){const t=gj.requireAuthenticator(),n=t.engine,r=await function(e,t,n){return Em.apply(this,arguments)}(e.publicTypeIndexUrl,Oj.rdfsClasses,t.requireAuthenticatedFetch());for(const e of r){const t=await Oj.withEngine(n,(()=>Oj.find(e)));if(null==t?void 0:t.isPublic)return t}}return null}newPublicRecipesList(){var e;const t=gj.requireUser(),n=null!=(e=this.remoteCookbookUrl)?e:fail("Cannot create a recipes list without a remote cookbook");return new Oj({url:`${n}public#it`,name:t.name?`${t.name}'s Public Recipes`:"Public Recipes",creatorWebId:t.webId})}async migrateLocalRecipes(e){const t=await Qj.all(),n=Qj.requireEngine(),r=e=>"@id"in e&&e["@id"].startsWith(Qj.collection),i=t=>{const n=t["@id"],r=n.replace(Qj.collection,e);return t["@id"]=r,[n,r]},a=e=>{const t=Object.entries(e);return r(e)&&(i(e),1===t.length)?[]:t.reduce(((e,[t,n])=>(B(n)&&e.push(..."image"===t&&r(n)?[i(n)]:a(n)),e)),[])};for(const o of t){if(o.url.startsWith(e))continue;const t=o.url,r=o.url.replace(Qj.collection,e),i=V(t),s=V(r),l=await n.readOne(Qj.collection,i),u=a(l);await Promise.all(u.map((async([e,t])=>{await MC.rename(e,t),qC.enqueueFileUpload(t)}))),await n.create(e,l,s),await n.delete(Qj.collection,i),o.onMoved(r),qC.onModelMoved(t,r)}}async enqueueFileUploads(){if(!this.remoteCookbookUrl)return;const e=await MC.getUrls();for(const t of e)t.startsWith(this.remoteCookbookUrl)&&qC.enqueueFileUpload(t)}async registerPublicRecipesList(e){var t;const n=gj.requireUser(),r=gj.requireAuthenticator().engine,i=null!=(t=n.publicTypeIndexUrl)?t:await gj.createPublicTypeIndex();await Promise.all(Oj.rdfsClasses.map((async t=>{const n=new uw({forClass:t,instance:e.url});n.mintUrl(i,!0,N()),await uw.withEngine(r,(()=>n.save(z(i))))}))),await Oj.withEngine(r,(()=>e.updatePublicPermissions([Ph.Read]))),e.isRegistered=!0}mendRecipeInstructions(e){var t;if(e.instructions||e.setRelationModels("instructions",[]),(null==(t=e.instructions)?void 0:t.length)===e.instructionStepUrls.length)return;const{protocol:n}=He(e.url);e.instructionStepUrls=De(e.instructionStepUrls.length).map((t=>{const r=e.instructionStepUrls[t];if(r.startsWith(n))return r;const i=e.relatedInstructions.attach({text:r,position:t+1});return i.mintUrl(e.requireDocumentUrl(),!0,N()),i.url}))}resetModelDefinitions(){Qj.collection=this.localCookbookUrl,this.getCookbookModels().forEach((e=>{e.resetRdfAliases(),e.replaceRdfPrefixes({"http://schema.org/":"https://schema.org/"}),e.aliasRdfPrefixes({"https://schema.org/":"http://schema.org/"})}))}}t(Gj,"persist",["remoteCookbookUrl","usingRdfAliases"]);const Wj=vw(new Gj);const Jj=vw(new class extends yw{constructor(){super(...arguments),t(this,"name","Solid App"),t(this,"isDevelopment",!1),t(this,"isProduction",!1),t(this,"isStaging",!1),t(this,"sourceUrl",""),t(this,"version",""),t(this,"versionName",""),t(this,"releaseNotesUrl","")}env(e){return{VITE_DEFAULT_PROXY_URL:"https://proxy.noeldemartin.com/fetch",VITE_SENTRY_DSN:"https://0b0fb30a1f46455c846ce37bdb75a2ad@o424851.ingest.sentry.io/4503941584846848",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}[`VITE_${e}`]}async reload(e){e&&Ge(e),location.reload(),await new Promise((()=>{}))}async boot(){await super.boot(),await gj.booted,await Wj.booted;const e="57553cf7e2d4cd122ebe900516e2d4a3b22f3b9d\n";this.sourceUrl="https://github.com/noeldemartin/umai",this.isDevelopment=!1,this.isProduction=!0,this.isStaging=!1,this.version="0.1.0-beta.4",this.versionName=this.formatVersionName(this.isStaging||this.isDevelopment?(this.isStaging?"staging.":"dev.")+e.toString().substring(0,7):this.version),this.releaseNotesUrl=this.sourceUrl+(this.isStaging||this.isDevelopment?`/tree/${e}`:`/releases/tag/${this.versionName}`),this.isOnboarding=!gj.isLoggedIn()&&null===gj.previousSession&&Wj.recipes.isEmpty(),YI.on("recipe-created",(async()=>{this.isOnboarding&&(this.setState({isOnboarding:!1,onboardingCompleting:!0}),await $I(500),this.setState({onboardingCompleting:!1}))})),YI.on("recipe-deleted",(async()=>{gj.isLoggedIn()||null!==gj.previousSession||Wj.recipes.length>0||this.setState({isOnboarding:!0})})),YI.on("logout",(()=>this.setState({isOnboarding:!0}))),YI.once("application-mounted",(()=>this.setState({isMounted:!0})))}getInitialState(){return{isMounted:!1,isOnboarding:!1,onboardingCompleting:!1}}formatVersionName(e){var t;return/\d/.test(null!=(t=e[0])?t:"")?`v${e}`:e}}),Kj="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,Yj=e=>Kj?Symbol(e):"_vr_"+e,Zj=Yj("rvlm"),Xj=Yj("rvd"),eT=Yj("r"),tT=Yj("rl"),nT=Yj("rvl"),rT="undefined"!=typeof window;
/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const iT=Object.assign;function aT(e,t){const n={};for(const r in t){const i=t[r];n[r]=Array.isArray(i)?i.map(e):e(i)}return n}const oT=()=>{},sT=/\/$/;function lT(e,t,n="/"){let r,i={},a="",o="";const s=t.indexOf("?"),l=t.indexOf("#",s>-1?s:0);return s>-1&&(r=t.slice(0,s),a=t.slice(s+1,l>-1?l:t.length),i=e(a)),l>-1&&(r=r||t.slice(0,l),o=t.slice(l,t.length)),r=function(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let i,a,o=n.length-1;for(i=0;i<r.length;i++)if(a=r[i],1!==o&&"."!==a){if(".."!==a)break;o--}return n.slice(0,o).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}(null!=r?r:t,n),{fullPath:r+(a&&"?")+a+o,path:r,query:i,hash:o}}function uT(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function cT(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function dT(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!pT(e[n],t[n]))return!1;return!0}function pT(e,t){return Array.isArray(e)?fT(e,t):Array.isArray(t)?fT(t,e):e===t}function fT(e,t){return Array.isArray(t)?e.length===t.length&&e.every(((e,n)=>e===t[n])):1===e.length&&e[0]===t}var hT,mT,vT,gT;function yT(e){if(!e)if(rT){const t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),e.replace(sT,"")}(mT=hT||(hT={}))["pop"]="pop",mT["push"]="push",(gT=vT||(vT={}))["back"]="back",gT["forward"]="forward",gT["unknown"]="";const bT=/^[^#]+#/;function wT(e,t){return e.replace(bT,"#")+t}const _T=()=>({left:window.pageXOffset,top:window.pageYOffset});function xT(e){let t;if("el"in e){const n=e.el,r="string"==typeof n&&n.startsWith("#"),i="string"==typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=function(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.pageXOffset,null!=t.top?t.top:window.pageYOffset)}function kT(e,t){return(history.state?history.state.position-t:-1)+e}const AT=new Map;function ET(e,t){const{pathname:n,search:r,hash:i}=t,a=e.indexOf("#");if(a>-1){let t=i.includes(e.slice(a))?e.slice(a).length:1,n=i.slice(t);return"/"!==n[0]&&(n="/"+n),uT(n,"")}return uT(n,e)+r+i}function IT(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?_T():null}}function ST(e){const{history:t,location:n}=window,r={value:ET(e,n)},i={value:t.state};function a(r,a,o){const s=e.indexOf("#"),l=s>-1?(n.host&&document.querySelector("base")?e:e.slice(s))+r:location.protocol+"//"+location.host+e+r;try{t[o?"replaceState":"pushState"](a,"",l),i.value=a}catch(u){console.error(u),n[o?"replace":"assign"](l)}}return i.value||a(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:function(e,n){const o=iT({},i.value,t.state,{forward:e,scroll:_T()});a(o.current,o,!0),a(e,iT({},IT(r.value,e,null),{position:o.position+1},n),!1),r.value=e},replace:function(e,n){a(e,iT({},t.state,IT(i.value.back,e,i.value.forward,!0),n,{position:i.value.position}),!0),r.value=e}}}function RT(e){const t=ST(e=yT(e)),n=function(e,t,n,r){let i=[],a=[],o=null;const s=({state:a})=>{const s=ET(e,location),l=n.value,u=t.value;let c=0;if(a){if(n.value=s,t.value=a,o&&o===l)return void(o=null);c=u?a.position-u.position:0}else r(s);i.forEach((e=>{e(n.value,l,{delta:c,type:hT.pop,direction:c?c>0?vT.forward:vT.back:vT.unknown})}))};function l(){const{history:e}=window;e.state&&e.replaceState(iT({},e.state,{scroll:_T()}),"")}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",l),{pauseListeners:function(){o=n.value},listen:function(e){i.push(e);const t=()=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)};return a.push(t),t},destroy:function(){for(const e of a)e();a=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",l)}}}(e,t.state,t.location,t.replace);const r=iT({location:"",base:e,go:function(e,t=!0){t||n.pauseListeners(),history.go(e)},createHref:wT.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function CT(e){return"string"==typeof e||"symbol"==typeof e}const OT={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},DT=Yj("nf");var jT,TT;function createRouterError(e,t){return iT(new Error,{type:e,[DT]:!0},t)}function PT(e,t){return e instanceof Error&&DT in e&&(null==t||!!(e.type&t))}(TT=jT||(jT={}))[TT["aborted"]=4]="aborted",TT[TT["cancelled"]=8]="cancelled",TT[TT["duplicated"]=16]="duplicated";const MT="[^/]+?",LT={sensitive:!1,strict:!1,start:!0,end:!0},$T=/[.+*?^${}()[\]/\\]/g;function NT(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?1===e.length&&e[0]===40+40?-1:1:e.length>t.length?1===t.length&&t[0]===40+40?1:-1:0}function BT(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const e=NT(r[n],i[n]);if(e)return e;n++}return i.length-r.length}const UT={type:0,value:""},FT=/[a-zA-Z0-9_]/;function zT(e,t,n){const r=function(e,t){const n=iT({},LT,t),r=[];let i=n.start?"^":"";const a=[];for(const l of e){const e=l.length?[]:[90];n.strict&&!l.length&&(i+="/");for(let t=0;t<l.length;t++){const r=l[t];let o=40+(n.sensitive?.25:0);if(0===r.type)t||(i+="/"),i+=r.value.replace($T,"\\$&"),o+=40;else if(1===r.type){const{value:e,repeatable:n,optional:u,regexp:c}=r;a.push({name:e,repeatable:n,optional:u});const d=c||MT;if(d!==MT){o+=10;try{new RegExp(`(${d})`)}catch(s){throw new Error(`Invalid custom RegExp for param "${e}" (${d}): `+s.message)}}let p=n?`((?:${d})(?:/(?:${d}))*)`:`(${d})`;t||(p=u&&l.length<2?`(?:/${p})`:"/"+p),u&&(p+="?"),i+=p,o+=20,u&&(o+=-8),n&&(o+=-20),".*"===d&&(o+=-50)}e.push(o)}r.push(e)}if(n.strict&&n.end){const e=r.length-1;r[e][r[e].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");return{re:o,score:r,keys:a,parse:function(e){const t=e.match(o),n={};if(!t)return null;for(let r=1;r<t.length;r++){const e=t[r]||"",i=a[r-1];n[i.name]=e&&i.repeatable?e.split("/"):e}return n},stringify:function(t){let n="",r=!1;for(const i of e){r&&n.endsWith("/")||(n+="/"),r=!1;for(const e of i)if(0===e.type)n+=e.value;else if(1===e.type){const{value:a,repeatable:o,optional:s}=e,l=a in t?t[a]:"";if(Array.isArray(l)&&!o)throw new Error(`Provided param "${a}" is an array but it is not repeatable (* or + modifiers)`);const u=Array.isArray(l)?l.join("/"):l;if(!u){if(!s)throw new Error(`Missing required param "${a}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=u}}return n}}}(function(e){if(!e)return[[]];if("/"===e)return[[UT]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${u}": ${e}`)}let n=0,r=n;const i=[];let a;function o(){a&&i.push(a),a=[]}let s,l=0,u="",c="";function d(){u&&(0===n?a.push({type:0,value:u}):1===n||2===n||3===n?(a.length>1&&("*"===s||"+"===s)&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:u,regexp:c,repeatable:"*"===s||"+"===s,optional:"*"===s||"?"===s})):t("Invalid state to consume buffer"),u="")}function p(){u+=s}for(;l<e.length;)if(s=e[l++],"\\"!==s||2===n)switch(n){case 0:"/"===s?(u&&d(),o()):":"===s?(d(),n=1):p();break;case 4:p(),n=r;break;case 1:"("===s?n=2:FT.test(s)?p():(d(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&l--);break;case 2:")"===s?"\\"==c[c.length-1]?c=c.slice(0,-1)+s:n=3:c+=s;break;case 3:d(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&l--,c="";break;default:t("Unknown state")}else r=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${u}"`),d(),o(),i}(e.path),n),i=iT(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function qT(e,t){const n=[],r=new Map;function i(e,n,r){const s=!r,l=function(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:VT(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}(e);l.aliasOf=r&&r.record;const u=GT(t,e),c=[l];if("alias"in e){const t="string"==typeof e.alias?[e.alias]:e.alias;for(const e of t)c.push(iT({},l,{components:r?r.record.components:l.components,path:e,aliasOf:r?r.record:l}))}let d,p;for(const t of c){const{path:c}=t;if(n&&"/"!==c[0]){const e=n.record.path,r="/"===e[e.length-1]?"":"/";t.path=n.record.path+(c&&r+c)}if(d=zT(t,n,u),r?r.alias.push(d):(p=p||d,p!==d&&p.alias.push(d),s&&e.name&&!QT(d)&&a(e.name)),"children"in l){const e=l.children;for(let t=0;t<e.length;t++)i(e[t],d,r&&r.children[t])}r=r||d,o(d)}return p?()=>{a(p)}:oT}function a(e){if(CT(e)){const t=r.get(e);t&&(r.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(a),t.alias.forEach(a))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&r.delete(e.record.name),e.children.forEach(a),e.alias.forEach(a))}}function o(e){let t=0;for(;t<n.length&&BT(e,n[t])>=0;)t++;n.splice(t,0,e),e.record.name&&!QT(e)&&r.set(e.record.name,e)}return t=GT({strict:!1,end:!0,sensitive:!1},t),e.forEach((e=>i(e))),{addRoute:i,resolve:function(e,t){let i,a,o,s={};if("name"in e&&e.name){if(i=r.get(e.name),!i)throw createRouterError(1,{location:e});o=i.record.name,s=iT(function(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}(t.params,i.keys.filter((e=>!e.optional)).map((e=>e.name))),e.params),a=i.stringify(s)}else if("path"in e)a=e.path,i=n.find((e=>e.re.test(a))),i&&(s=i.parse(a),o=i.record.name);else{if(i=t.name?r.get(t.name):n.find((e=>e.re.test(t.path))),!i)throw createRouterError(1,{location:e,currentLocation:t});o=i.record.name,s=iT({},t.params,e.params),a=i.stringify(s)}const l=[];let u=i;for(;u;)l.unshift(u.record),u=u.parent;return{name:o,path:a,params:s,matched:l,meta:HT(l)}},removeRoute:a,getRoutes:function(){return n},getRecordMatcher:function(e){return r.get(e)}}}function VT(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]="boolean"==typeof n?n:n[r];return t}function QT(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function HT(e){return e.reduce(((e,t)=>iT(e,t.meta)),{})}function GT(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}const WT=/#/g,JT=/&/g,KT=/\//g,YT=/=/g,ZT=/\?/g,XT=/\+/g,eP=/%5B/g,tP=/%5D/g,nP=/%5E/g,rP=/%60/g,iP=/%7B/g,aP=/%7C/g,oP=/%7D/g,sP=/%20/g;function lP(e){return encodeURI(""+e).replace(aP,"|").replace(eP,"[").replace(tP,"]")}function uP(e){return lP(e).replace(XT,"%2B").replace(sP,"+").replace(WT,"%23").replace(JT,"%26").replace(rP,"`").replace(iP,"{").replace(oP,"}").replace(nP,"^")}function cP(e){return null==e?"":function(e){return lP(e).replace(WT,"%23").replace(ZT,"%3F")}(e).replace(KT,"%2F")}function dP(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function pP(e){const t={};if(""===e||"?"===e)return t;const n=("?"===e[0]?e.slice(1):e).split("&");for(let r=0;r<n.length;++r){const e=n[r].replace(XT," "),i=e.indexOf("="),a=dP(i<0?e:e.slice(0,i)),o=i<0?null:dP(e.slice(i+1));if(a in t){let e=t[a];Array.isArray(e)||(e=t[a]=[e]),e.push(o)}else t[a]=o}return t}function fP(e){let t="";for(let n in e){const r=e[n];if(n=uP(n).replace(YT,"%3D"),null==r){void 0!==r&&(t+=(t.length?"&":"")+n);continue}(Array.isArray(r)?r.map((e=>e&&uP(e))):[r&&uP(r)]).forEach((e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))}))}return t}function hP(e){const t={};for(const n in e){const r=e[n];void 0!==r&&(t[n]=Array.isArray(r)?r.map((e=>null==e?null:""+e)):null==r?r:""+r)}return t}function mP(){let e=[];return{add:function(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}},list:()=>e,reset:function(){e=[]}}}function vP(e,t,n,r,i){const a=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((o,s)=>{const l=e=>{var l;!1===e?s(createRouterError(4,{from:n,to:t})):e instanceof Error?s(e):"string"==typeof(l=e)||l&&"object"==typeof l?s(createRouterError(2,{from:t,to:e})):(a&&r.enterCallbacks[i]===a&&"function"==typeof e&&a.push(e),o())},u=e.call(r&&r.instances[i],t,n,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch((e=>s(e)))}))}function gP(e,t,n,r){const i=[];for(const o of e)for(const e in o.components){let s=o.components[e];if("beforeRouteEnter"===t||o.instances[e])if("object"==typeof(a=s)||"displayName"in a||"props"in a||"__vccOpts"in a){const a=(s.__vccOpts||s)[t];a&&i.push(vP(a,n,r,o,e))}else{let a=s();i.push((()=>a.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${o.path}"`));const a=(s=i).__esModule||Kj&&"Module"===s[Symbol.toStringTag]?i.default:i;var s;o.components[e]=a;const l=(a.__vccOpts||a)[t];return l&&vP(l,n,r,o,e)()}))))}}var a;return i}function yP(e){const t=ci(eT),n=ci(tT),r=Lo((()=>t.resolve(Ar(e.to)))),i=Lo((()=>{const{matched:e}=r.value,{length:t}=e,i=e[t-1],a=n.matched;if(!i||!a.length)return-1;const o=a.findIndex(cT.bind(null,i));if(o>-1)return o;const s=wP(e[t-2]);return t>1&&wP(i)===s&&a[a.length-1].path!==s?a.findIndex(cT.bind(null,e[t-2])):o})),a=Lo((()=>i.value>-1&&function(e,t){for(const n in t){const r=t[n],i=e[n];if("string"==typeof r){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some(((e,t)=>e!==i[t])))return!1}return!0}(n.params,r.value.params))),o=Lo((()=>i.value>-1&&i.value===n.matched.length-1&&dT(n.params,r.value.params)));return{route:r,href:Lo((()=>r.value.href)),isActive:a,isExactActive:o,navigate:function(n={}){return function(e){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)return;if(e.defaultPrevented)return;if(void 0!==e.button&&0!==e.button)return;if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}e.preventDefault&&e.preventDefault();return!0}(n)?t[Ar(e.replace)?"replace":"push"](Ar(e.to)).catch(oT):Promise.resolve()}}}const bP=Si({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:yP,setup(e,{slots:t}){const n=sr(yP(e)),{options:r}=ci(eT),i=Lo((()=>({[_P(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[_P(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const r=t.default&&t.default(n);return e.custom?r:Bo("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}});function wP(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const _P=(e,t,n)=>null!=e?e:null!=t?t:n,xP=Si({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:n}){const r=ci(nT),i=Lo((()=>e.route||r.value)),a=ci(Xj,0),o=Lo((()=>i.value.matched[a]));ui(Xj,a+1),ui(Zj,o),ui(nT,i);const s=_r();return fi((()=>[s.value,o.value,e.name]),(([e,t,n],[r,i,a])=>{t&&(t.instances[n]=e,i&&i!==t&&e&&e===r&&(t.leaveGuards.size||(t.leaveGuards=i.leaveGuards),t.updateGuards.size||(t.updateGuards=i.updateGuards))),!e||!t||i&&cT(t,i)&&r||(t.enterCallbacks[n]||[]).forEach((t=>t(e)))}),{flush:"post"}),()=>{const r=i.value,a=o.value,l=a&&a.components[e.name],u=e.name;if(!l)return kP(n.default,{Component:l,route:r});const c=a.props[e.name],d=c?!0===c?r.params:"function"==typeof c?c(r):c:null,p=Bo(l,iT({},d,t,{onVnodeUnmounted:e=>{e.component.isUnmounted&&(a.instances[u]=null)},ref:s}));return kP(n.default,{Component:p,route:r})||p}}});function kP(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const AP=xP;function EP(e){const t=qT(e.routes,e),n=e.parseQuery||pP,r=e.stringifyQuery||fP,i=e.history,a=mP(),o=mP(),s=mP(),l=xr(OT,!0);let u=OT;rT&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=aT.bind(null,(e=>""+e)),d=aT.bind(null,cP),p=aT.bind(null,dP);function f(e,a){if(a=iT({},a||l.value),"string"==typeof e){const r=lT(n,e,a.path),o=t.resolve({path:r.path},a),s=i.createHref(r.fullPath);return iT(r,o,{params:p(o.params),hash:dP(r.hash),redirectedFrom:void 0,href:s})}let o;if("path"in e)o=iT({},e,{path:lT(n,e.path,a.path).path});else{const t=iT({},e.params);for(const e in t)null==t[e]&&delete t[e];o=iT({},e,{params:d(e.params)}),a.params=d(a.params)}const s=t.resolve(o,a),u=e.hash||"";s.params=c(p(s.params));const f=function(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}(r,iT({},e,{hash:(h=u,lP(h).replace(iP,"{").replace(oP,"}").replace(nP,"^")),path:s.path}));var h;const m=i.createHref(f);return iT({fullPath:f,hash:u,query:r===fP?hP(e.query):e.query||{}},s,{redirectedFrom:void 0,href:m})}function h(e){return"string"==typeof e?lT(n,e,l.value.path):iT({},e)}function m(e,t){if(u!==e)return createRouterError(8,{from:t,to:e})}function v(e){return y(e)}function g(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let r="function"==typeof n?n(e):n;return"string"==typeof r&&(r=r.includes("?")||r.includes("#")?r=h(r):{path:r},r.params={}),iT({query:e.query,hash:e.hash,params:e.params},r)}}function y(e,t){const n=u=f(e),i=l.value,a=e.state,o=e.force,s=!0===e.replace,c=g(n);if(c)return y(iT(h(c),{state:a,force:o,replace:s}),t||n);const d=n;let p;return d.redirectedFrom=t,!o&&function(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&cT(t.matched[r],n.matched[i])&&dT(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}(r,i,n)&&(p=createRouterError(16,{to:d,from:i}),C(i,i,!0,!1)),(p?Promise.resolve(p):w(d,i)).catch((e=>PT(e)?e:triggerError(e,d,i))).then((e=>{if(e){if(PT(e,2))return y(iT(h(e.to),{state:a,force:o,replace:s}),t||d)}else e=x(d,i,!0,s,a);return _(d,i,e),e}))}function b(e,t){const n=m(e,t);return n?Promise.reject(n):Promise.resolve()}function w(e,t){let n;const[r,i,s]=function(e,t){const n=[],r=[],i=[],a=Math.max(t.matched.length,e.matched.length);for(let o=0;o<a;o++){const a=t.matched[o];a&&(e.matched.find((e=>cT(e,a)))?r.push(a):n.push(a));const s=e.matched[o];s&&(t.matched.find((e=>cT(e,s)))||i.push(s))}return[n,r,i]}(e,t);n=gP(r.reverse(),"beforeRouteLeave",e,t);for(const a of r)a.leaveGuards.forEach((r=>{n.push(vP(r,e,t))}));const l=b.bind(null,e,t);return n.push(l),IP(n).then((()=>{n=[];for(const r of a.list())n.push(vP(r,e,t));return n.push(l),IP(n)})).then((()=>{n=gP(i,"beforeRouteUpdate",e,t);for(const r of i)r.updateGuards.forEach((r=>{n.push(vP(r,e,t))}));return n.push(l),IP(n)})).then((()=>{n=[];for(const r of e.matched)if(r.beforeEnter&&!t.matched.includes(r))if(Array.isArray(r.beforeEnter))for(const i of r.beforeEnter)n.push(vP(i,e,t));else n.push(vP(r.beforeEnter,e,t));return n.push(l),IP(n)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),n=gP(s,"beforeRouteEnter",e,t),n.push(l),IP(n)))).then((()=>{n=[];for(const r of o.list())n.push(vP(r,e,t));return n.push(l),IP(n)})).catch((e=>PT(e,8)?e:Promise.reject(e)))}function _(e,t,n){for(const r of s.list())r(e,t,n)}function x(e,t,n,r,a){const o=m(e,t);if(o)return o;const s=t===OT,u=rT?history.state:{};n&&(r||s?i.replace(e.fullPath,iT({scroll:s&&u&&u.scroll},a)):i.push(e.fullPath,a)),l.value=e,C(e,t,n,s),R()}let k;function A(){k=i.listen(((e,t,n)=>{const r=f(e),a=g(r);if(a)return void y(iT(a,{replace:!0}),r).catch(oT);u=r;const o=l.value;var s,c;rT&&(s=kT(o.fullPath,n.delta),c=_T(),AT.set(s,c)),w(r,o).catch((e=>PT(e,4|8)?e:PT(e,2)?(y(e.to,r).then((e=>{PT(e,4|16)&&!n.delta&&n.type===hT.pop&&i.go(-1,!1)})).catch(oT),Promise.reject()):(n.delta&&i.go(-n.delta,!1),triggerError(e,r,o)))).then((e=>{(e=e||x(r,o,!1))&&(n.delta?i.go(-n.delta,!1):n.type===hT.pop&&PT(e,4|16)&&i.go(-1,!1)),_(r,o,e)})).catch(oT)}))}let E,I=mP(),S=mP();function triggerError(e,t,n){R(e);const r=S.list();return r.length?r.forEach((r=>r(e,t,n))):console.error(e),Promise.reject(e)}function R(e){E||(E=!0,A(),I.list().forEach((([t,n])=>e?n(e):t())),I.reset())}function C(t,n,r,i){const{scrollBehavior:a}=e;if(!rT||!a)return Promise.resolve();const o=!r&&function(e){const t=AT.get(e);return AT.delete(e),t}(kT(t.fullPath,0))||(i||!r)&&history.state&&history.state.scroll||null;return Vr().then((()=>a(t,n,o))).then((e=>e&&xT(e))).catch((e=>triggerError(e,t,n)))}const O=e=>i.go(e);let D;const j=new Set;return{currentRoute:l,addRoute:function(e,n){let r,i;return CT(e)?(r=t.getRecordMatcher(e),i=n):i=e,t.addRoute(i,r)},removeRoute:function(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)},hasRoute:function(e){return!!t.getRecordMatcher(e)},getRoutes:function(){return t.getRoutes().map((e=>e.record))},resolve:f,options:e,push:v,replace:function(e){return v(iT(h(e),{replace:!0}))},go:O,back:()=>O(-1),forward:()=>O(1),beforeEach:a.add,beforeResolve:o.add,afterEach:s.add,onError:S.add,isReady:function(){return E&&l.value!==OT?Promise.resolve():new Promise(((e,t)=>{I.add([e,t])}))},install(e){e.component("RouterLink",bP),e.component("RouterView",AP),e.config.globalProperties.$router=this,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>Ar(l)}),rT&&!D&&l.value===OT&&(D=!0,v(i.location).catch((e=>{})));const t={};for(const r in OT)t[r]=Lo((()=>l.value[r]));e.provide(eT,this),e.provide(tT,sr(t)),e.provide(nT,l);const n=e.unmount;j.add(e),e.unmount=function(){j.delete(e),j.size<1&&(u=OT,k&&k(),l.value=OT,D=!1,E=!1),n()}}}}function IP(e){return e.reduce(((e,t)=>e.then((()=>t()))),Promise.resolve())}const SP=10;class RP{constructor(){t(this,"modelBindings",{}),t(this,"runtimeHistory",[])}get previousRoute(){var e;return null!=(e=this.runtimeHistory[1])?e:null}initialize(){this.modelBindings={},this.runtimeHistory=[],this.beforeEach(We((()=>this.handleGithubPagesRedirect()))),this.beforeEach((e=>this.onCurrentRouteChanged(e)))}registerModelBinding(e,t){this.modelBindings[e]=t}getModelBinding(e){var t;return null!=(t=this.modelBindings[e])?t:null}getQueryParam(e){return this.getQueryParams()[e]}getQueryParams(){return this.currentRoute.value.query}hasNavigated(){return this.runtimeHistory.length>1}previousRouteWas(e){var t;return(null==(t=this.previousRoute)?void 0:t.name)===e}currentRouteIs(e){return"string"==typeof e?this.currentRoute.value.name===e:e.test(ue(this.currentRoute.value.name))}onCurrentRouteChanged(e){this.runtimeHistory.unshift(e),this.runtimeHistory.splice(SP)}handleGithubPagesRedirect(){const e=Ce.pull("github-pages-redirect");e&&this.replace(e)}}function CP(e){if("function"==typeof e.component){const t=e.component;return T(e,(e=>{e.component=async()=>{const{default:n}=await t();return DP(n,e.meta)}}))}return e.component?T(e,(e=>{e.component=DP(e.component,e.meta)})):e}function OP(e,t,n,r){var i;return null==(i=e[t])?void 0:i.call(n,...r)}function DP(e,t){return Si({data:()=>({subscriptions:[],routeParameters:null}),created(){this.updateRouteParameters()},unmounted(){this.clearSubscriptions()},beforeRouteEnter(...t){return OP(e,"beforeRouteEnter",this,t)},beforeRouteUpdate(...t){return this.updateRouteParameters(),OP(e,"beforeRouteUpdate",this,t)},beforeRouteLeave(...t){return fC.showHeader(),OP(e,"beforeRouteLeave",this,t)},methods:{clearSubscriptions(){this.subscriptions.forEach((e=>e())),this.subscriptions=[]},updateRouteParameters(){this.routeParameters=this.resolveRouteParameters(),this.routeParameters||fC.hideHeader()},resolveRouteParameters(){try{return Object.entries(this.$route.params).reduce(((e,[t,n])=>{if(Array.isArray(n))return e;const r=this.$router.getModelBinding(t);return r?T(e,(e=>{var i;e[t]=null!=(i=r.find(n))?i:ne(),r.subscribe&&this.subscriptions.push(r.subscribe(n,(e=>{this.routeParameters&&(e?this.routeParameters[t]=new Proxy(e,{}):this.routeParameters=null)})))})):e}),Object.assign({},this.$route.params))}catch(e){return null}}},render(){var n;if((null==(n=null==t?void 0:t.requiresIndexedDB)||n)&&!bj.supportsIndexedDB){const e={title:hR("errors.unsupportedBrowser"),description:hR("errors.unsupportedBrowser_indexedDB")};return Bo(fC.resolveComponent(cC.ErrorReport),{report:e})}return this.routeParameters?Bo(e,this.routeParameters):Bo(fC.resolveComponent(cC.NotFound))}})}function jP(e){return e.routes=e.routes.map(CP),t=EP(e),Je(t.constructor,[RP]),T(t,(e=>e.initialize()));var t}function TP(e){const t=RT();return T(jP({history:t,routes:e}),(e=>VC.setInstance(e)))}
/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var PP="store";function MP(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function LP(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function $P(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;BP(e,n,[],e._modules.root,!0),NP(e,n,t)}function NP(e,t,n){var r=e._state;e.getters={},e._makeLocalGettersCache=Object.create(null);var i=e._wrappedGetters,a={};MP(i,(function(t,n){a[n]=function(e,t){return function(){return e(t)}}(t,e),Object.defineProperty(e.getters,n,{get:function(){return a[n]()},enumerable:!0})})),e._state=sr({data:t}),e.strict&&function(e){fi((function(){return e._state.data}),(function(){}),{deep:!0,flush:"sync"})}(e),r&&n&&e._withCommit((function(){r.data=null}))}function BP(e,t,n,r,i){var a=!n.length,o=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[o]&&0&&console.error("[vuex] duplicate namespace "+o+" for the namespaced module "+n.join("/")),e._modulesNamespaceMap[o]=r),!a&&!i){var s=FP(t,n.slice(0,-1)),l=n[n.length-1];e._withCommit((function(){s[l]=r.state}))}var u=r.context=function(e,t,n){var r=""===t,i={dispatch:r?e.dispatch:function(n,r,i){var a=zP(n,r,i),o=a.payload,s=a.options,l=a.type;return s&&s.root||(l=t+l),e.dispatch(l,o)},commit:r?e.commit:function(n,r,i){var a=zP(n,r,i),o=a.payload,s=a.options,l=a.type;s&&s.root||(l=t+l),e.commit(l,o,s)}};return Object.defineProperties(i,{getters:{get:r?function(){return e.getters}:function(){return UP(e,t)}},state:{get:function(){return FP(e.state,n)}}}),i}(e,o,n);r.forEachMutation((function(t,n){!function(e,t,n,r){(e._mutations[t]||(e._mutations[t]=[])).push((function(t){n.call(e,r.state,t)}))}(e,o+n,t,u)})),r.forEachAction((function(t,n){var r=t.root?n:o+n,i=t.handler||t;!function(e,t,n,r){(e._actions[t]||(e._actions[t]=[])).push((function(t){var i,a=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},t);return(i=a)&&"function"==typeof i.then||(a=Promise.resolve(a)),e._devtoolHook?a.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):a}))}(e,r,i,u)})),r.forEachGetter((function(t,n){!function(e,t,n,r){if(e._wrappedGetters[t])return;e._wrappedGetters[t]=function(e){return n(r.state,r.getters,e.state,e.getters)}}(e,o+n,t,u)})),r.forEachChild((function(r,a){BP(e,t,n.concat(a),r,i)}))}function UP(e,t){if(!e._makeLocalGettersCache[t]){var n={},r=t.length;Object.keys(e.getters).forEach((function(i){if(i.slice(0,r)===t){var a=i.slice(r);Object.defineProperty(n,a,{get:function(){return e.getters[i]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function FP(e,t){return t.reduce((function(e,t){return e[t]}),e)}function zP(e,t,n){var r;return null!==(r=e)&&"object"==typeof r&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var qP="vuex bindings",VP="vuex:mutations",QP="vuex:actions",HP="vuex",GP=0;function WP(e,t){ID({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[qP]},(function(n){n.addTimelineLayer({id:VP,label:"Vuex Mutations",color:JP}),n.addTimelineLayer({id:QP,label:"Vuex Actions",color:JP}),n.addInspector({id:HP,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree((function(n){if(n.app===e&&n.inspectorId===HP)if(n.filter){var r=[];XP(r,t._modules.root,n.filter,""),n.rootNodes=r}else n.rootNodes=[ZP(t._modules.root,"")]})),n.on.getInspectorState((function(n){if(n.app===e&&n.inspectorId===HP){var r=n.nodeId;UP(t,r),n.state=function(e,t,n){t="root"===n?t:t[n];var r=Object.keys(t),i={state:Object.keys(e.state).map((function(t){return{key:t,editable:!0,value:e.state[t]}}))};if(r.length){var a=function(e){var t={};return Object.keys(e).forEach((function(n){var r=n.split("/");if(r.length>1){var i=t,a=r.pop();r.forEach((function(e){i[e]||(i[e]={_custom:{value:{},display:e,tooltip:"Module",abstract:!0}}),i=i[e]._custom.value})),i[a]=eM((function(){return e[n]}))}else t[n]=eM((function(){return e[n]}))})),t}(t);i.getters=Object.keys(a).map((function(e){return{key:e.endsWith("/")?YP(e):e,editable:!1,value:eM((function(){return a[e]}))}}))}return i}((i=t._modules,o=(a=r).split("/").filter((function(e){return e})),o.reduce((function(e,t,n){var r=e[t];if(!r)throw new Error('Missing module "'+t+'" for path "'+a+'".');return n===o.length-1?r:r._children}),"root"===a?i:i.root._children)),"root"===r?t.getters:t._makeLocalGettersCache,r)}var i,a,o})),n.on.editInspectorState((function(n){if(n.app===e&&n.inspectorId===HP){var r=n.nodeId,i=n.path;"root"!==r&&(i=r.split("/").filter(Boolean).concat(i)),t._withCommit((function(){n.set(t._state.data,i,n.state.value)}))}})),t.subscribe((function(e,t){var r={};e.payload&&(r.payload=e.payload),r.state=t,n.notifyComponentUpdate(),n.sendInspectorTree(HP),n.sendInspectorState(HP),n.addTimelineEvent({layerId:VP,event:{time:Date.now(),title:e.type,data:r}})})),t.subscribeAction({before:function(e,t){var r={};e.payload&&(r.payload=e.payload),e._id=GP++,e._time=Date.now(),r.state=t,n.addTimelineEvent({layerId:QP,event:{time:e._time,title:e.type,groupId:e._id,subtitle:"start",data:r}})},after:function(e,t){var r={},i=Date.now()-e._time;r.duration={_custom:{type:"duration",display:i+"ms",tooltip:"Action duration",value:i}},e.payload&&(r.payload=e.payload),r.state=t,n.addTimelineEvent({layerId:QP,event:{time:Date.now(),title:e.type,groupId:e._id,subtitle:"end",data:r}})}})}))}var JP=8702998,KP={label:"namespaced",textColor:16777215,backgroundColor:6710886};function YP(e){return e&&"root"!==e?e.split("/").slice(-2,-1)[0]:"Root"}function ZP(e,t){return{id:t||"root",label:YP(t),tags:e.namespaced?[KP]:[],children:Object.keys(e._children).map((function(n){return ZP(e._children[n],t+n+"/")}))}}function XP(e,t,n,r){r.includes(n)&&e.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:t.namespaced?[KP]:[]}),Object.keys(t._children).forEach((function(i){XP(e,t._children[i],n,r+i+"/")}))}function eM(e){try{return e()}catch(Mh){return Mh}}var tM=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"==typeof n?n():n)||{}},nM={namespaced:{configurable:!0}};nM.namespaced.get=function(){return!!this._rawModule.namespaced},tM.prototype.addChild=function(e,t){this._children[e]=t},tM.prototype.removeChild=function(e){delete this._children[e]},tM.prototype.getChild=function(e){return this._children[e]},tM.prototype.hasChild=function(e){return e in this._children},tM.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},tM.prototype.forEachChild=function(e){MP(this._children,e)},tM.prototype.forEachGetter=function(e){this._rawModule.getters&&MP(this._rawModule.getters,e)},tM.prototype.forEachAction=function(e){this._rawModule.actions&&MP(this._rawModule.actions,e)},tM.prototype.forEachMutation=function(e){this._rawModule.mutations&&MP(this._rawModule.mutations,e)},Object.defineProperties(tM.prototype,nM);var rM=function(e){this.register([],e,!1)};function iM(e,t,n){if(t.update(n),n.modules)for(var r in n.modules){if(!t.getChild(r))return;iM(e.concat(r),t.getChild(r),n.modules[r])}}rM.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},rM.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return e+((t=t.getChild(n)).namespaced?n+"/":"")}),"")},rM.prototype.update=function(e){iM([],this.root,e)},rM.prototype.register=function(e,t,n){var r=this;void 0===n&&(n=!0);var i=new tM(t,n);0===e.length?this.root=i:this.get(e.slice(0,-1)).addChild(e[e.length-1],i);t.modules&&MP(t.modules,(function(t,i){r.register(e.concat(i),t,n)}))},rM.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],r=t.getChild(n);r&&r.runtime&&t.removeChild(n)},rM.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};var aM=function(e){var t=this;void 0===e&&(e={});var n=e.plugins;void 0===n&&(n=[]);var r=e.strict;void 0===r&&(r=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new rM(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=i;var a=this,o=this.dispatch,s=this.commit;this.dispatch=function(e,t){return o.call(a,e,t)},this.commit=function(e,t,n){return s.call(a,e,t,n)},this.strict=r;var l=this._modules.root.state;BP(this,l,[],this._modules.root),NP(this,l),n.forEach((function(e){return e(t)}))},oM={state:{configurable:!0}};function sM(){return T(new aM({}),(e=>gw.setInstance(e)))}aM.prototype.install=function(e,t){e.provide(t||PP,this),e.config.globalProperties.$store=this,void 0!==this._devtools&&this._devtools&&WP(e,this)},oM.state.get=function(){return this._state.data},oM.state.set=function(e){},aM.prototype.commit=function(e,t,n){var r=this,i=zP(e,t,n),a=i.type,o=i.payload,s={type:a,payload:o},l=this._mutations[a];l&&(this._withCommit((function(){l.forEach((function(e){e(o)}))})),this._subscribers.slice().forEach((function(e){return e(s,r.state)})))},aM.prototype.dispatch=function(e,t){var n=this,r=zP(e,t),i=r.type,a=r.payload,o={type:i,payload:a},s=this._actions[i];if(s){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(o,n.state)}))}catch(Mh){}var l=s.length>1?Promise.all(s.map((function(e){return e(a)}))):s[0](a);return new Promise((function(e,t){l.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(o,n.state)}))}catch(Mh){}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(o,n.state,e)}))}catch(Mh){}t(e)}))}))}},aM.prototype.subscribe=function(e,t){return LP(e,this._subscribers,t)},aM.prototype.subscribeAction=function(e,t){return LP("function"==typeof e?{before:e}:e,this._actionSubscribers,t)},aM.prototype.watch=function(e,t,n){var r=this;return fi((function(){return e(r.state,r.getters)}),t,Object.assign({},n))},aM.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._state.data=e}))},aM.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),BP(this,this.state,e,this._modules.get(e),n.preserveState),NP(this,this.state)},aM.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){delete FP(t.state,e.slice(0,-1))[e[e.length-1]]})),$P(this)},aM.prototype.hasModule=function(e){return"string"==typeof e&&(e=[e]),this._modules.isRegistered(e)},aM.prototype.hotUpdate=function(e){this._modules.update(e),$P(this,!0)},aM.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(aM.prototype,oM);const lM=vw(new class extends yw{constructor(){super(...arguments),t(this,"activeElements",new Set),t(this,"elementsLeaving",new Set),t(this,"elementsChildren",new WeakMap),t(this,"elementsConfig",new WeakMap),t(this,"elementsSourceTransitions",new WeakMap),t(this,"elementsTargetTransitions",new WeakMap),t(this,"elementsTarget",new WeakMap),t(this,"elementsReady",new WeakMap),t(this,"elementsFreezingInPlace",new WeakMap),t(this,"transitions",{})}defineGlobalEnterTransition(e,t){this.transitions[e]=t}defineGlobalLeaveTransition(e,t){this.transitions[e]=t}defineGlobalElementTransition(e,t){this.transitions[e]=t}freezeInPlace(e){this.elementsFreezingInPlace.set(e)}registerElementConfig(e,t){this.elementsConfig.set(e,t),this.elementsChildren.set(e,[])}updateElementConfig(e,t){this.elementsConfig.set(e,t)}async showElement(e){this.elementsConfig.get(e)&&(this.activeElements.add(e),this.registerElementHierarchy(e),await T(this.addElement(e),(t=>this.elementsReady.set(e,t))))}async hideElement(e){this.activeElements.has(e)&&(this.activeElements.delete(e),this.elementsLeaving.add(e),this.removeElement(e,this.requireElementConfig(e)).then((()=>{this.elementsLeaving.delete(e)})))}async waitElementsGone(e,t){await Ke(),await Promise.all($(this.elementsLeaving).filter((n=>{const r=this.requireElementConfig(n);return r.name===e&&(!t||r.id===t)})).map((e=>this.elementsSourceTransitions.get(e))))}async waitElementsReady(e){await Promise.all($(this.activeElements).filter((t=>{var n;return(null==(n=this.elementsConfig.get(t))?void 0:n.name)===e})).map((e=>this.elementsReady.get(e))))}async boot(){await super.boot(),this.defineGlobalEnterTransition("fadeIn",(e=>tS(e,700))),this.defineGlobalLeaveTransition("fadeOut",(e=>nS(e,700)))}__get(e){return this.transitions[e]}requireElementConfig(e){var t;return null!=(t=this.elementsConfig.get(e))?t:ne("Couldn't get required element config")}registerElementHierarchy(e){var t;let n=e.parentElement;for(;null!==n;)null==(t=this.elementsChildren.get(n))||t.push(e),n=n.parentElement}async addElement(e){fC.animations&&VC.hasNavigated()&&(e.style.opacity="0",await Vr(),await this.elementsTargetTransitions.get(e),e.removeAttribute("style"),await this.runEnterElementTransition(e))}async removeElement(e,t){if(!fC.animations)return;const n=await this.freezeElement(e);if(!n)return;const r=this.findElementTarget(e,t),i=r?this.runElementTransition(n,e,t,r):this.runLeaveElementTransition(n,e);this.elementsSourceTransitions.set(e,i),await i,n.remove()}findElementTarget(e,t){var n;const r=null!=(n=this.elementsTarget.get(e))?n:$(this.activeElements).find((e=>{const n=this.requireElementConfig(e);return this.isTargetConfig(n,t)}));if(!r)return null;const i=this.requireElementConfig(r);return i&&i.name&&i.name in t.transitions?(this.elementsTarget.set(e,r),{element:r,config:i,transition:t.transitions[i.name]}):null}isTargetConfig(e,t){return!!t.id&&!!t.name&&t.id===e.id&&t.name in e.transitions}async freezeElement(e){const t=e.getBoundingClientRect();return await Ke(),this.elementsFreezingInPlace.has(e)?this.freezeElementInPlace(e,t):this.freezeElementInWrapper(e,t)}freezeElementInPlace(e,t){e.style.width=`${t.width}px`,e.style.height=`${t.height}px`}freezeElementInWrapper(e,t){var n;const r=document.createElement("div");return r.classList.add("element-transitions-wrapper"),r.style.position="fixed",r.style.top=`${t.top}px`,r.style.left=`${t.left}px`,r.style.width=`${t.width}px`,r.style.height=`${t.height}px`,r.append(e),(null!=(n=document.getElementById("element-transitions-container"))?n:document.body).append(r),r}async runEnterElementTransition(e){const t=this.requireElementConfig(e),n=$(this.elementsLeaving).map((e=>({element:e,config:this.requireElementConfig(e)}))).find((({config:e})=>this.isTargetConfig(e,t)));if(n&&this.elementsTarget.set(n.element,e),!t.transitions.enter)return;const r=VC.previousRoute?ue(VC.previousRoute.name):null,i=r&&r in t.transitions.enter?t.transitions.enter[r]:t.transitions.enter["*"];i&&await this.runSafeTransition(i,e,n)}async runLeaveElementTransition(e,t){const n=this.requireElementConfig(t);if(!n.transitions.leave)return;const r=ue(VC.currentRoute.value.name),i=r in n.transitions.leave?n.transitions.leave[r]:n.transitions.leave["*"];i&&await this.runSafeTransition(i,e,t)}runElementTransition(e,t,n,r){var i;const a="function"==typeof n.blocking?n.blocking(r.config,r.element):null!=(i=n.blocking)&&i;return T(this.runSafeTransition(r.transition,e,t,r),(e=>{a&&this.elementsTargetTransitions.set(r.element,e)}))}async runSafeTransition(e,...t){try{await e(...t)}catch(n){if(Jj.isProduction)return;mC.report(n)}}});function uM(e){const t=function(e){return"transitions"in e}(e)?e:{transitions:e};return{...t,transitions:{...t.transitions,enter:"function"==typeof t.transitions.enter?{"*":t.transitions.enter}:t.transitions.enter,leave:"function"==typeof t.transitions.leave?{"*":t.transitions.leave}:t.transitions.leave}}}const cM={beforeMount(e,{value:t}){lM.registerElementConfig(e,uM(t))},mounted(e){lM.showElement(e)},beforeUnmount(e){lM.hideElement(e)},updated(e,{value:t}){lM.updateElementConfig(e,uM(t))}},dM=Object.freeze(Object.defineProperty({__proto__:null,default:cM},Symbol.toStringTag,{value:"Module"})),pM=new WeakMap,fM={mounted(e,{value:t}){const n={focus(){e.matches(":focus-visible")&&t(!0)},blur(){t(!1)}};"Storybook"in window&&function(e,t){for(;e;){if(e.matches(t))return!0;e=e.parentElement}return!1}(e,".\\:focus-visible")&&t(!0),pM.set(e,n),e.addEventListener("focus",n.focus),e.addEventListener("blur",n.blur)},unmounted(e){const t=pM.get(e);t&&(e.removeEventListener("focus",t.focus),e.removeEventListener("blur",t.blur))}},hM=Object.freeze(Object.defineProperty({__proto__:null,default:fM},Symbol.toStringTag,{value:"Module"})),mM={mounted(e,{value:t}){t&&e.focus()}},vM=Object.freeze(Object.defineProperty({__proto__:null,default:mM},Symbol.toStringTag,{value:"Module"}));var gM=Object.hasOwnProperty,yM=Object.setPrototypeOf,bM=Object.isFrozen,wM=Object.getPrototypeOf,_M=Object.getOwnPropertyDescriptor,xM=Object.freeze,kM=Object.seal,AM=Object.create,EM="undefined"!=typeof Reflect&&Reflect,IM=EM.apply,SM=EM.construct;IM||(IM=function(e,t,n){return e.apply(t,n)}),xM||(xM=function(e){return e}),kM||(kM=function(e){return e}),SM||(SM=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(
/*! @license DOMPurify 2.3.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.4/LICENSE */
function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var RM,CM=BM(Array.prototype.forEach),OM=BM(Array.prototype.pop),DM=BM(Array.prototype.push),jM=BM(String.prototype.toLowerCase),TM=BM(String.prototype.match),PM=BM(String.prototype.replace),MM=BM(String.prototype.indexOf),LM=BM(String.prototype.trim),$M=BM(RegExp.prototype.test),NM=(RM=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return SM(RM,t)});function BM(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return IM(e,t,r)}}function UM(e,t){yM&&yM(e,null);for(var n=t.length;n--;){var r=t[n];if("string"==typeof r){var i=jM(r);i!==r&&(bM(t)||(t[n]=i),r=i)}e[r]=!0}return e}function FM(e){var t=AM(null),n=void 0;for(n in e)IM(gM,e,[n])&&(t[n]=e[n]);return t}function zM(e,t){for(;null!==e;){var n=_M(e,t);if(n){if(n.get)return BM(n.get);if("function"==typeof n.value)return BM(n.value)}e=wM(e)}return function(e){return console.warn("fallback value for",e),null}}var qM=xM(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),VM=xM(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),QM=xM(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),HM=xM(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),GM=xM(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),WM=xM(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),JM=xM(["#text"]),KM=xM(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),YM=xM(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ZM=xM(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),XM=xM(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),eL=kM(/\{\{[\s\S]*|[\s\S]*\}\}/gm),tL=kM(/<%[\s\S]*|[\s\S]*%>/gm),nL=kM(/^data-[\-\w.\u00B7-\uFFFF]/),rL=kM(/^aria-[\-\w]+$/),iL=kM(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),aL=kM(/^(?:\w+script|data):/i),oL=kM(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),sL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function lL(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var uL=function(){return"undefined"==typeof window?null:window},cL=function(e,t){if("object"!==(void 0===e?"undefined":sL(e))||"function"!=typeof e.createPolicy)return null;var n=null,r="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(r)&&(n=t.currentScript.getAttribute(r));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(e){return e}})}catch(a){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};var dL=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uL(),n=function(t){return e(t)};if(n.version="2.3.4",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var r=t.document,i=t.document,a=t.DocumentFragment,o=t.HTMLTemplateElement,s=t.Node,l=t.Element,u=t.NodeFilter,c=t.NamedNodeMap,d=void 0===c?t.NamedNodeMap||t.MozNamedAttrMap:c,p=t.HTMLFormElement,f=t.DOMParser,h=t.trustedTypes,m=l.prototype,v=zM(m,"cloneNode"),g=zM(m,"nextSibling"),y=zM(m,"childNodes"),b=zM(m,"parentNode");if("function"==typeof o){var w=i.createElement("template");w.content&&w.content.ownerDocument&&(i=w.content.ownerDocument)}var _=cL(h,r),x=_&&ee?_.createHTML(""):"",k=i,A=k.implementation,E=k.createNodeIterator,I=k.createDocumentFragment,S=k.getElementsByTagName,R=r.importNode,C={};try{C=FM(i).documentMode?i.documentMode:{}}catch(Fe){}var O={};n.isSupported="function"==typeof b&&A&&void 0!==A.createHTMLDocument&&9!==C;var D=eL,j=tL,T=nL,P=rL,M=aL,L=oL,$=iL,N=null,B=UM({},[].concat(lL(qM),lL(VM),lL(QM),lL(GM),lL(JM))),U=null,F=UM({},[].concat(lL(KM),lL(YM),lL(ZM),lL(XM))),z=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),q=null,V=null,Q=!0,H=!0,G=!1,W=!1,J=!1,K=!1,Y=!1,Z=!1,X=!1,ee=!1,te=!0,ne=!0,re=!1,ie={},ae=null,oe=UM({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),se=null,le=UM({},["audio","video","img","source","image","track"]),ue=null,ce=UM({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),de="http://www.w3.org/1998/Math/MathML",pe="http://www.w3.org/2000/svg",fe="http://www.w3.org/1999/xhtml",he=fe,me=!1,ve=void 0,ge=["application/xhtml+xml","text/html"],ye="text/html",be=void 0,we=null,_e=i.createElement("form"),xe=function(e){return e instanceof RegExp||e instanceof Function},ke=function(e){we&&we===e||(e&&"object"===(void 0===e?"undefined":sL(e))||(e={}),e=FM(e),N="ALLOWED_TAGS"in e?UM({},e.ALLOWED_TAGS):B,U="ALLOWED_ATTR"in e?UM({},e.ALLOWED_ATTR):F,ue="ADD_URI_SAFE_ATTR"in e?UM(FM(ce),e.ADD_URI_SAFE_ATTR):ce,se="ADD_DATA_URI_TAGS"in e?UM(FM(le),e.ADD_DATA_URI_TAGS):le,ae="FORBID_CONTENTS"in e?UM({},e.FORBID_CONTENTS):oe,q="FORBID_TAGS"in e?UM({},e.FORBID_TAGS):{},V="FORBID_ATTR"in e?UM({},e.FORBID_ATTR):{},ie="USE_PROFILES"in e&&e.USE_PROFILES,Q=!1!==e.ALLOW_ARIA_ATTR,H=!1!==e.ALLOW_DATA_ATTR,G=e.ALLOW_UNKNOWN_PROTOCOLS||!1,W=e.SAFE_FOR_TEMPLATES||!1,J=e.WHOLE_DOCUMENT||!1,Z=e.RETURN_DOM||!1,X=e.RETURN_DOM_FRAGMENT||!1,ee=e.RETURN_TRUSTED_TYPE||!1,Y=e.FORCE_BODY||!1,te=!1!==e.SANITIZE_DOM,ne=!1!==e.KEEP_CONTENT,re=e.IN_PLACE||!1,$=e.ALLOWED_URI_REGEXP||$,he=e.NAMESPACE||fe,e.CUSTOM_ELEMENT_HANDLING&&xe(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(z.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&xe(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(z.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(z.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ve=ve=-1===ge.indexOf(e.PARSER_MEDIA_TYPE)?ye:e.PARSER_MEDIA_TYPE,be="application/xhtml+xml"===ve?function(e){return e}:jM,W&&(H=!1),X&&(Z=!0),ie&&(N=UM({},[].concat(lL(JM))),U=[],!0===ie.html&&(UM(N,qM),UM(U,KM)),!0===ie.svg&&(UM(N,VM),UM(U,YM),UM(U,XM)),!0===ie.svgFilters&&(UM(N,QM),UM(U,YM),UM(U,XM)),!0===ie.mathMl&&(UM(N,GM),UM(U,ZM),UM(U,XM))),e.ADD_TAGS&&(N===B&&(N=FM(N)),UM(N,e.ADD_TAGS)),e.ADD_ATTR&&(U===F&&(U=FM(U)),UM(U,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&UM(ue,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(ae===oe&&(ae=FM(ae)),UM(ae,e.FORBID_CONTENTS)),ne&&(N["#text"]=!0),J&&UM(N,["html","head","body"]),N.table&&(UM(N,["tbody"]),delete q.tbody),xM&&xM(e),we=e)},Ae=UM({},["mi","mo","mn","ms","mtext"]),Ee=UM({},["foreignobject","desc","title","annotation-xml"]),Ie=UM({},VM);UM(Ie,QM),UM(Ie,HM);var Se=UM({},GM);UM(Se,WM);var Re=function(e){var t=b(e);t&&t.tagName||(t={namespaceURI:fe,tagName:"template"});var n=jM(e.tagName),r=jM(t.tagName);if(e.namespaceURI===pe)return t.namespaceURI===fe?"svg"===n:t.namespaceURI===de?"svg"===n&&("annotation-xml"===r||Ae[r]):Boolean(Ie[n]);if(e.namespaceURI===de)return t.namespaceURI===fe?"math"===n:t.namespaceURI===pe?"math"===n&&Ee[r]:Boolean(Se[n]);if(e.namespaceURI===fe){if(t.namespaceURI===pe&&!Ee[r])return!1;if(t.namespaceURI===de&&!Ae[r])return!1;var i=UM({},["title","style","font","a","script"]);return!Se[n]&&(i[n]||!Ie[n])}return!1},Ce=function(e){DM(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(Fe){try{e.outerHTML=x}catch(t){e.remove()}}},Oe=function(e,t){try{DM(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(Fe){DM(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!U[e])if(Z||X)try{Ce(t)}catch(Fe){}else try{t.setAttribute(e,"")}catch(Fe){}},De=function(e){var t=void 0,n=void 0;if(Y)e="<remove></remove>"+e;else{var r=TM(e,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===ve&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var a=_?_.createHTML(e):e;if(he===fe)try{t=(new f).parseFromString(a,ve)}catch(Fe){}if(!t||!t.documentElement){t=A.createDocument(he,"template",null);try{t.documentElement.innerHTML=me?"":a}catch(Fe){}}var o=t.body||t.documentElement;return e&&n&&o.insertBefore(i.createTextNode(n),o.childNodes[0]||null),he===fe?S.call(t,J?"html":"body")[0]:J?t.documentElement:o},je=function(e){return E.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},Te=function(e){return e instanceof p&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof d)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore)},Pe=function(e){return"object"===(void 0===s?"undefined":sL(s))?e instanceof s:e&&"object"===(void 0===e?"undefined":sL(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Me=function(e,t,r){O[e]&&CM(O[e],(function(e){e.call(n,t,r,we)}))},Le=function(e){var t=void 0;if(Me("beforeSanitizeElements",e,null),Te(e))return Ce(e),!0;if(TM(e.nodeName,/[\u0080-\uFFFF]/))return Ce(e),!0;var r=be(e.nodeName);if(Me("uponSanitizeElement",e,{tagName:r,allowedTags:N}),!Pe(e.firstElementChild)&&(!Pe(e.content)||!Pe(e.content.firstElementChild))&&$M(/<[/\w]/g,e.innerHTML)&&$M(/<[/\w]/g,e.textContent))return Ce(e),!0;if("select"===r&&$M(/<template/i,e.innerHTML))return Ce(e),!0;if(!N[r]||q[r]){if(ne&&!ae[r]){var i=b(e)||e.parentNode,a=y(e)||e.childNodes;if(a&&i)for(var o=a.length-1;o>=0;--o)i.insertBefore(v(a[o],!0),g(e))}if(!q[r]&&Ne(r)){if(z.tagNameCheck instanceof RegExp&&$M(z.tagNameCheck,r))return!1;if(z.tagNameCheck instanceof Function&&z.tagNameCheck(r))return!1}return Ce(e),!0}return e instanceof l&&!Re(e)?(Ce(e),!0):"noscript"!==r&&"noembed"!==r||!$M(/<\/no(script|embed)/i,e.innerHTML)?(W&&3===e.nodeType&&(t=e.textContent,t=PM(t,D," "),t=PM(t,j," "),e.textContent!==t&&(DM(n.removed,{element:e.cloneNode()}),e.textContent=t)),Me("afterSanitizeElements",e,null),!1):(Ce(e),!0)},$e=function(e,t,n){if(te&&("id"===t||"name"===t)&&(n in i||n in _e))return!1;if(H&&!V[t]&&$M(T,t));else if(Q&&$M(P,t));else if(!U[t]||V[t]){if(!(Ne(e)&&(z.tagNameCheck instanceof RegExp&&$M(z.tagNameCheck,e)||z.tagNameCheck instanceof Function&&z.tagNameCheck(e))&&(z.attributeNameCheck instanceof RegExp&&$M(z.attributeNameCheck,t)||z.attributeNameCheck instanceof Function&&z.attributeNameCheck(t))||"is"===t&&z.allowCustomizedBuiltInElements&&(z.tagNameCheck instanceof RegExp&&$M(z.tagNameCheck,n)||z.tagNameCheck instanceof Function&&z.tagNameCheck(n))))return!1}else if(ue[t]);else if($M($,PM(n,L,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==MM(n,"data:")||!se[e]){if(G&&!$M(M,PM(n,L,"")));else if(n)return!1}else;return!0},Ne=function(e){return e.indexOf("-")>0},Be=function(e){var t=void 0,r=void 0,i=void 0,a=void 0;Me("beforeSanitizeAttributes",e,null);var o=e.attributes;if(o){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U};for(a=o.length;a--;){var l=t=o[a],u=l.name,c=l.namespaceURI;if(r=LM(t.value),i=be(u),s.attrName=i,s.attrValue=r,s.keepAttr=!0,s.forceKeepAttr=void 0,Me("uponSanitizeAttribute",e,s),r=s.attrValue,!s.forceKeepAttr&&(Oe(u,e),s.keepAttr))if($M(/\/>/i,r))Oe(u,e);else{W&&(r=PM(r,D," "),r=PM(r,j," "));var d=be(e.nodeName);if($e(d,i,r))try{c?e.setAttributeNS(c,u,r):e.setAttribute(u,r),OM(n.removed)}catch(Fe){}}}Me("afterSanitizeAttributes",e,null)}},Ue=function e(t){var n=void 0,r=je(t);for(Me("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)Me("uponSanitizeShadowNode",n,null),Le(n)||(n.content instanceof a&&e(n.content),Be(n));Me("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e,i){var o=void 0,l=void 0,u=void 0,c=void 0,d=void 0;if((me=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Pe(e)){if("function"!=typeof e.toString)throw NM("toString is not a function");if("string"!=typeof(e=e.toString()))throw NM("dirty is not a string, aborting")}if(!n.isSupported){if("object"===sL(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(Pe(e))return t.toStaticHTML(e.outerHTML)}return e}if(K||ke(i),n.removed=[],"string"==typeof e&&(re=!1),re);else if(e instanceof s)1===(l=(o=De("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?o=l:o.appendChild(l);else{if(!Z&&!W&&!J&&-1===e.indexOf("<"))return _&&ee?_.createHTML(e):e;if(!(o=De(e)))return Z?null:x}o&&Y&&Ce(o.firstChild);for(var p=je(re?e:o);u=p.nextNode();)3===u.nodeType&&u===c||Le(u)||(u.content instanceof a&&Ue(u.content),Be(u),c=u);if(c=null,re)return e;if(Z){if(X)for(d=I.call(o.ownerDocument);o.firstChild;)d.appendChild(o.firstChild);else d=o;return U.shadowroot&&(d=R.call(r,d,!0)),d}var f=J?o.outerHTML:o.innerHTML;return W&&(f=PM(f,D," "),f=PM(f,j," ")),_&&ee?_.createHTML(f):f},n.setConfig=function(e){ke(e),K=!0},n.clearConfig=function(){we=null,K=!1},n.isValidAttribute=function(e,t,n){we||ke({});var r=be(e),i=be(t);return $e(r,i,n)},n.addHook=function(e,t){"function"==typeof t&&(O[e]=O[e]||[],DM(O[e],t))},n.removeHook=function(e){O[e]&&OM(O[e])},n.removeHooks=function(e){O[e]&&(O[e]=[])},n.removeAllHooks=function(){O={}},n}();function pL(e,t){e.innerHTML=dL.sanitize(t,{ADD_ATTR:["target"]})}const fL={mounted(e,{value:t}){pL(e,t)},updated(e,{value:t}){pL(e,t)}},hL=Object.freeze(Object.defineProperty({__proto__:null,default:fL},Symbol.toStringTag,{value:"Module"})),mL={...MI(Object.assign({"/src/directives/wobbly-border.ts":ZS}),".ts"),...MI(Object.assign({"/src/framework/directives/element-transitions.ts":dM,"/src/framework/directives/focus-visible.ts":hM,"/src/framework/directives/initial-focus.ts":vM,"/src/framework/directives/safe-html.ts":hL}),".ts")},vL=[{name:"errors.404",path:"/:path(.*)*",component:{created:()=>fC.hideHeader(),beforeRouteLeave:()=>fC.showHeader(),render:()=>Bo(fC.resolveComponent(cC.NotFound))}}],gL={$app:Jj,$auth:gj,$browser:bj,$cache:bw,$cloud:qC,$elementTransitions:lM,$errors:mC,$events:YI,$files:MC,$lang:lj,$network:LC,$ui:fC};function yL(e=(()=>!1)){return T((t=>e(t)||(e=>mC.instance?(mC.report(e),!0):(console.warn("Errors service hasn't been initialized properly!"),console.error(e),!0))(t)),(e=>{window.onerror=(t,n,r,i,a)=>e(null!=a?a:t),window.onunhandledrejection=t=>e(t.reason)}))}async function bL(e,t={}){var n,r,i,a,o,s,l,u,c,d,p,f;const h=yL(t.handleError),m=qs(e),v=[...null!=(n=t.routes)?n:[],...vL],g=await async function(e){return Promise.all([TP(e),sM(),dj()])}(v),y=[...g,...null!=(r=t.plugins)?r:[]],b={...VI,...null!=(i=t.components)?i:{}},w={...mL,...null!=(a=t.directives)?a:{}},_={...gL,...null!=(o=t.services)?o:{}},x={...hj,...null!=(s=t.authenticators)?s:{}};var k;Jj.name=null!=(l=t.name)?l:Jj.name,m.config.errorHandler=h,y.forEach((e=>m.use(e))),Object.assign(m.config.globalProperties,_),Object.entries(b).forEach((([e,t])=>m.component(e,t))),Object.entries(w).forEach((([e,t])=>m.directive(e,t))),Object.entries(x).forEach((([e,t])=>function(e,t){var n;fj[e]=t,t.name=null!=(n=t.name)?n:e}(e,t))),k=mj(null!=(u=t.defaultAuthenticator)?u:"inrupt"),fj.default=k,await(null==(c=t.beforeLaunch)?void 0:c.call(t,m)),await Promise.all(Object.entries(_).map((async([e,t])=>{await t.launch(e.slice(1)).catch(h)}))),await(null==(d=t.beforeMount)?void 0:d.call(t,m)),m.mount(null!=(p=t.selector)?p:"#app"),null==(f=m._container)||f.classList.remove("loading"),YI.emit("application-mounted"),T(document.getElementById("splash"),(async e=>{"0"!==window.getComputedStyle(e).opacity&&(e.style.opacity="0",await Ue({ms:600})),e.remove()}))}const wL={class:"p-4"},_L=["onClick"],xL=Si({props:{actions:KE(),style:ZE(dC)},emits:["hide"],setup(e){const t=Lo((()=>e.style===dC.Error)),n=Lo((()=>e.style===dC.Info));return(r,i)=>(Ha(),Ka("div",{class:ut(["flex flex-row rounded-md shadow pointer-events-auto",{"bg-white text-gray-900":n.value,"bg-red-200 text-red-800":t.value}])},[ro("div",wL,[go(r.$slots,"default")]),(Ha(!0),Ka(Ua,null,mo(e.actions,((e,i)=>(Ha(),Ka("button",{key:i,type:"button",class:ut(["p-4 text-white rounded-r-md focus:outline-none focus:ring-offset-2 focus:ring-2",{"bg-primary-600 hover:bg-primary-700 focus:ring-primary-700":n.value,"bg-red-500 hover:bg-red-600 focus:ring-red-600":t.value}]),onClick:t=>(e.handler(),r.$emit("hide"))},pt(e.text),11,_L)))),128))],2))}}),kL={class:"flex flex-col items-center space-y-4 w-full sm:items-start"},AL=Si({setup:e=>(e,t)=>{const n=rR,r=xL;return Ha(),Ka("div",{"aria-live":"assertive",class:ut(["flex fixed inset-0 z-60 items-end px-4 py-6 pointer-events-none sm:p-6",{"bottom-16":e.$route.meta.pageFooter}])},[ro("div",kL,[io(Is,{duration:{enter:300,leave:200},"enter-active-class":"overflow-hidden","leave-active-class":"overflow-hidden",onLeave:t[0]||(t[0]=e=>Ar(oS)(e,{duration:200,easing:"ease-in",fill:"forwards"})),onEnter:t[1]||(t[1]=e=>Ar(rS)(e,{duration:300,easing:"ease-out"}))},{default:ii((()=>[(Ha(!0),Ka(Ua,null,mo(e.$ui.snackbars,(t=>(Ha(),Ka("div",{key:t.id},[io(r,{actions:t.actions,style:at(t.style),onHide:()=>e.$ui.hideSnackbar(t.id)},{default:ii((()=>[io(n,{raw:"",text:t.message},null,8,["text"])])),_:2},1032,["actions","style","onHide"])])))),128))])),_:1})])],2)}}),EL={key:0},IL=Si({setup(e){let t=_r(!0);const n=_r(null),r=Lo((()=>{var e;return null!=(e=fC.modals[0])?e:null}));return ZI("show-overlays-backdrop",(async()=>{n.value&&t.value&&(t.value=!1,n.value.classList.remove("opacity-0"),await tS(n.value,{duration:300,easing:"ease-out"}))})),ZI("hide-overlays-backdrop",(async()=>{n.value&&!t.value&&(t.value=!0,await nS(n.value,{duration:200,easing:"ease-in"}),n.value.classList.add("opacity-0"))})),(e,t)=>{const i=AL;return Ha(),Ka(Ua,null,[ro("div",{ref_key:"$backdrop",ref:n,class:"fixed inset-0 bg-black/30 pointer-events-none z-50 opacity-0"},null,512),r.value?(Ha(),Ka("aside",EL,[(Ha(),Ya(La(r.value.component),fo({"child-index":1,modal:r.value},r.value.props),null,16,["modal"]))])):lo("",!0),io(i)],64)}}}),SL={},RL=ro("span",null,"|",-1),CL=ro("span",null,"|",-1);const OL=sR(SL,[["render",function(e,t){const n=_R;return Ha(),Ka("footer",{class:ut(["flex items-center justify-center space-x-1 p-4 text-sm font-medium text-primary-700 opacity-75",{"fixed bottom-0 left-0 right-0":e.$router.currentRouteIs(/recipes\.(create|edit)/)}])},[io(n,{class:"font-medium",onClick:t[0]||(t[0]=t=>e.$ui.showMarkdown(e.$t("footer.about_title"),e.$t("footer.about_content",{sourceUrl:e.$app.sourceUrl})))},{default:ii((()=>[oo(pt(e.$t("footer.about")),1)])),_:1}),RL,io(n,{title:e.$t("footer.source_title"),url:e.$app.sourceUrl,class:"mx-1 font-medium"},{default:ii((()=>[oo(pt(e.$t("footer.source")),1)])),_:1},8,["title","url"]),CL,io(n,{title:e.$t("footer.version_title"),url:e.$app.releaseNotesUrl,class:"mx-1 font-medium"},{default:ii((()=>[oo(pt(e.$app.versionName),1)])),_:1},8,["title","url"])],2)}]]),DL={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},jL=[ro("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-width":"2"},[ro("path",{"stroke-linejoin":"round",d:"m15.667 8l2.083 2.5L15.667 8Zm0 5l2.083-2.5l-2.083 2.5Z","clip-rule":"evenodd"}),ro("path",{d:"M16.5 10.5H10m-6-7h9m-9 14h9m0-14v4m0 6v4m-9-14v14"})],-1)];const TL={name:"pepicons-leave",render:function(e,t){return Ha(),Ka("svg",DL,jL)}},PL={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},ML=[ro("path",{fill:"currentColor","fill-rule":"evenodd",d:"m17.562 13.571l-5.303-6.319a3.5 3.5 0 0 0-.224-.243c.22-1.408-.194-2.902-1.174-4.07C9.553 1.382 7.502.726 5.671 1.26a1 1 0 0 0-.487 1.603l1.741 2.075l-.58.488L4.602 3.35a1 1 0 0 0-1.663.2c-.844 1.712-.554 3.845.754 5.404c.966 1.151 2.342 1.817 3.748 1.861c.068.102.142.2.221.294l5.302 6.319a3 3 0 1 0 4.597-3.857ZM5.226 7.67a3.28 3.28 0 0 1-.656-1.247l.242.288a2 2 0 0 0 2.818.247l.581-.488a2 2 0 0 0 .247-2.817l-.243-.29a3.28 3.28 0 0 1 1.114.863c.705.84.932 1.933.639 2.87a1 1 0 0 0 .416 1.142a1.5 1.5 0 0 1 .343.3l5.303 6.32a1 1 0 0 1-1.533 1.285l-5.301-6.32a1.5 1.5 0 0 1-.242-.404a1 1 0 0 0-1.045-.62c-.964.114-1.986-.3-2.682-1.13Z","clip-rule":"evenodd"},null,-1)];const LL={name:"pepicons-tool",render:function(e,t){return Ha(),Ka("svg",PL,ML)}},$L=Si({setup(e){const t=Lo((()=>!VC.currentRoute.value.meta.fullBleedHeader||Jj.onboardingCompleting?"":["text-white hover:bg-black/25 focus:ring-offset-0 focus:ring-0 focus:bg-black/20","focus:hover:bg-black/25 focus:ring-black/30"].join(" ")));return(e,n)=>{const r=GI;return Ha(),Ya(r,{clear:"",class:ut([t.value,e.$ui.animations&&"transition-colors duration-700"])},{default:ii((()=>[go(e.$slots,"default")])),_:3},8,["class"])}}}),NL={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},BL=[ro("g",{fill:"currentColor"},[ro("path",{d:"M10.558 2.25a.75.75 0 0 1 .685.447l.443 1A.75.75 0 0 1 11 4.75H9a.75.75 0 0 1-.703-1.012l.373-1a.75.75 0 0 1 .703-.488h1.185Zm-1.115 15.5a.75.75 0 0 1-.686-.447l-.443-1A.75.75 0 0 1 9 15.25h2a.75.75 0 0 1 .703 1.012l-.373 1a.75.75 0 0 1-.703.488H9.443Zm8.307-7.193a.75.75 0 0 1-.446.686l-1 .443A.75.75 0 0 1 15.25 11V9a.75.75 0 0 1 1.012-.703l1 .373a.75.75 0 0 1 .488.703v1.184ZM2.25 9.442a.75.75 0 0 1 .447-.685l1-.443A.75.75 0 0 1 4.75 9v2a.75.75 0 0 1-1.012.703l-1-.373a.75.75 0 0 1-.488-.703V9.442Zm13.624-4.528a.75.75 0 0 1 .17.8l-.395 1.02a.75.75 0 0 1-1.23.26l-1.414-1.413a.75.75 0 0 1 .219-1.213l.97-.443a.75.75 0 0 1 .843.151l.837.838ZM4.126 15.086a.75.75 0 0 1-.17-.8l.395-1.02a.75.75 0 0 1 1.23-.26l1.414 1.413a.75.75 0 0 1-.219 1.213l-.97.443a.75.75 0 0 1-.842-.151l-.838-.838Zm10.96.788a.75.75 0 0 1-.8.17l-1.02-.395a.75.75 0 0 1-.26-1.23l1.414-1.414a.75.75 0 0 1 1.212.219l.444.97a.75.75 0 0 1-.152.842l-.838.838ZM4.914 4.126a.75.75 0 0 1 .801-.17l1.02.395a.75.75 0 0 1 .26 1.23L5.58 6.995a.75.75 0 0 1-1.213-.219l-.443-.97a.75.75 0 0 1 .152-.843l.837-.837Z"}),ro("path",{"fill-rule":"evenodd",d:"M5.58 14.42A6.236 6.236 0 0 0 10 16.25a6.236 6.236 0 0 0 4.42-1.83A6.236 6.236 0 0 0 16.25 10a6.236 6.236 0 0 0-1.83-4.42A6.236 6.236 0 0 0 10 3.75a6.236 6.236 0 0 0-4.42 1.83A6.236 6.236 0 0 0 3.75 10c0 1.678.668 3.256 1.83 4.42Zm5.657-3.183A1.737 1.737 0 0 1 10 11.75c-.472 0-.91-.185-1.237-.513A1.737 1.737 0 0 1 8.25 10c0-.472.185-.91.513-1.237A1.737 1.737 0 0 1 10 8.25c.472 0 .91.185 1.237.513c.328.327.513.765.513 1.237c0 .472-.185.91-.513 1.237Z","clip-rule":"evenodd"})],-1)];const UL={name:"pepicons-gear-filled",render:function(e,t){return Ha(),Ka("svg",NL,BL)}},FL={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},zL=[so('<g fill="currentColor"><path d="M5.05 14.95a1 1 0 1 1 1.414-1.414A5 5 0 0 0 15 10a1 1 0 1 1 2 0a7 7 0 0 1-11.95 4.95Z"></path><path d="M13.559 12.832a1 1 0 1 1-1.11-1.664l3-2a1 1 0 1 1 1.11 1.664l-3 2Z"></path><path d="M18.832 12.445a1 1 0 0 1-1.664 1.11l-2-3a1 1 0 1 1 1.664-1.11l2 3Zm-3.975-7.594a1 1 0 1 1-1.414 1.414a5 5 0 0 0-8.536 3.536a1 1 0 1 1-2 0a7 7 0 0 1 11.95-4.95Z"></path><path d="M6.349 6.969a1 1 0 0 1 1.11 1.664l-3.001 2a1 1 0 1 1-1.11-1.664l3-2Z"></path><path d="M1.075 7.356a1 1 0 1 1 1.664-1.11l2 3a1 1 0 1 1-1.664 1.11l-2-3Z"></path></g>',1)];const qL={name:"pepicons-refresh",render:function(e,t){return Ha(),Ka("svg",FL,zL)}},VL={class:"cursor-pointer text-gray-700 px-2 py-1 focus:outline-none focus:ring-2 focus:ring-offset-2 hover:bg-gray-200 focus:bg-gray-100 focus:hover:bg-gray-200 focus:ring-gray-200"},QL={class:"mt-2 pl-6"},HL=Si({props:{summary:oI()},emits:["open","close"],setup:e=>(t,n)=>{const r=$a("wobbly-border");return Ha(),Ka("details",{onToggle:n[0]||(n[0]=e=>t.$emit(e.target.open?"open":"close"))},[va((Ha(),Ka("summary",VL,[oo(pt(e.summary),1)])),[[r]]),ro("div",QL,[go(t.$slots,"default")])],32)}}),GL=Si({inheritAttrs:!1}),WL=Si({...GL,props:{name:sI(),label:sI(),placeholder:sI(),modelValue:eI([String,Number]),error:sI(),wrapperClass:sI(""),inline:YE(),color:ZE(QI)},emits:["update:modelValue"],setup(e,{expose:t}){const n={[QI.Primary]:{base:"caret-primary-500 focus:border-primary-600",withErrors:"hover:border-primary-600"},[QI.Solid]:{base:"caret-brand-solid-500 focus:border-brand-solid-600",withErrors:"hover:border-brand-solid-600"},[QI.Danger]:{base:"caret-red-500 focus:border-red-600",withErrors:"hover:border-red-600"}},r=_r(null),i=_r(null),a=$o(),o=Lo((()=>"number"===a.type)),s=Lo((()=>{var t;return E(["invisible whitespace-pre border-b-2",o.value&&"pr-5",e.inline?"inline-block py-1":"block py-2",null!=(t=a.class)?t:""]).join(" ")})),l=Lo((()=>{var t;const i=n[e.color];return E([i.base,o.value&&"show-spinners",(null==(t=r.value)?void 0:t.hasErrors)?`border-red-500 ${i.withErrors}`:"border-gray-300 md:border-transparent md:hover:border-gray-300",e.inline?"py-1":"py-2"]).join(" ")})),u=Lo((()=>{var t;return(null==(t=r.value)?void 0:t.value)||e.placeholder||" "})),c=Lo((()=>e.placeholder?function(e){const t=document.createElement("div");return t.style.position="fixed",t.style.opacity="0",t.innerHTML=e,document.body.append(t),T({width:t.clientWidth,height:t.clientHeight},(()=>t.remove()))}(`<span class="${s.value}">${e.placeholder}</span>`).width:60));return t({...zI(r),get minWidth(){return c.value},getRootElement:()=>i.value}),(t,n)=>{const a=Pa("HeadlessInputLabel"),o=Pa("HeadlessInputInput"),d=Pa("HeadlessInputError"),p=Pa("HeadlessInput");return Ha(),Ya(p,{ref_key:"$root",ref:r,name:e.name,placeholder:e.placeholder,"model-value":e.modelValue,error:e.error,"onUpdate:modelValue":n[0]||(n[0]=e=>t.$emit("update:modelValue",e))},{default:ii((()=>[ro("div",{ref_key:"$wrapper",ref:i,class:ut(["relative overflow-hidden",`${e.wrapperClass} ${e.inline?"inline-block":""}`])},[e.label?(Ha(),Ya(a,{key:0,class:"sr-only"},{default:ii((()=>[oo(pt(e.label),1)])),_:1})):lo("",!0),ro("span",{class:ut(s.value),style:at(e.modelValue?"":`min-width: ${c.value}px;`)},pt(u.value),7),io(o,fo({class:["fluid-input absolute inset-0 w-full text-gray-900 border-b-2 hover:border-gray-300 focus:outline-none",l.value]},t.$attrs),null,16,["class"]),io(d,{class:"mt-4 text-left text-sm text-red-700 opacity-75"})],2)])),_:1},8,["name","placeholder","model-value","error"])}}}),JL={class:"flex items-center h-5"},KL=["id","onUpdate:modelValue","name","onChange"],YL={class:"ml-3 w-full text-sm"},ZL=["for"],XL={key:0},e$=oo("   "),t$=oo("   "),n$=Si({setup(e){const t=_r([{name:"auto-reconnect",text:fR.translate("cloud.reconnect_onStartup"),enabled:gj.autoReconnect,updated(){gj.autoReconnect=this.enabled}},{name:"startup-sync",text:fR.translate("cloud.sync_onStartup"),enabled:qC.startupSync,updated(){qC.startupSync=this.enabled}},{name:"auto-sync",text:fR.translate("cloud.sync_onInterval").split(" X "),enabled:!!qC.autoSync,value:qC.autoSync||10,updated(){qC.autoSync=!!this.enabled&&this.value}}]);function n(e){return"value"in e}return(e,r)=>{const i=WL,a=HL;return Ha(),Ya(a,{summary:e.$t("cloud.advancedOptions")},{default:ii((()=>[(Ha(!0),Ka(Ua,null,mo(t.value,(e=>(Ha(),Ka("div",{key:e.name,class:"flex relative items-start py-1"},[ro("div",JL,[va(ro("input",{id:e.name,"onUpdate:modelValue":t=>e.enabled=t,name:e.name,type:"checkbox",class:"w-4 h-4 rounded border-gray-300 cursor-pointer form-checkbox text-brand-solid-600 focus:ring-brand-solid-500 hover:bg-gray-200",onChange:t=>e.updated()},null,40,KL),[[Ds,e.enabled]])]),ro("div",YL,[ro("label",{for:e.name,class:"inline-flex items-baseline w-full font-medium text-gray-700 cursor-pointer"},[n(e)?(Ha(),Ka(Ua,{key:1},[ro("span",null,pt(e.text[0]),1),e$,io(i,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,color:"brand-solid",inline:"",type:"number",onChange:t=>e.updated()},null,8,["modelValue","onUpdate:modelValue","onChange"]),t$,ro("span",null,pt(e.text[1]),1)],64)):(Ha(),Ka("span",XL,pt(e.text),1))],8,ZL)])])))),128))])),_:1},8,["summary"])}}}),r$={key:0},i$={class:"flex flex-col items-end space-y-2 mt-4 md:space-x-2 md:space-x-reverse md:space-y-0 md:flex-row-reverse"},a$={class:"ml-2"},o$={class:"ml-2"},s$=Si({setup(e){const t=Lo((()=>qe(hR(`cloud.statuses.${qC.status}`)))),n=Lo((()=>qe(hR(`cloud.statuses.${qC.status}_description`))));return(e,r)=>{const i=rR,a=n$,o=qL,s=GI,l=TL,u=cS,c=$a("initial-focus");return Ha(),Ya(u,{title:t.value},{default:ii((({close:t})=>{var r,u,d,p;return[e.$cloud.online?(Ha(),Ka("div",r$,[io(i,{text:e.$t("cloud.statuses.online_description",{url:null==(r=e.$auth.user)?void 0:r.webId,name:null!=(p=null==(u=e.$auth.user)?void 0:u.name)?p:null==(d=e.$auth.user)?void 0:d.webId})},null,8,["text"]),io(a,{class:"mt-4"}),ro("div",i$,[va((Ha(),Ya(s,{secondary:"",color:"brand-solid",onClick:n=>(e.$cloud.sync(),t())},{default:ii((()=>[io(o,{class:"w-6 h-6","aria-hidden":"true"}),ro("span",a$,pt(e.$t("cloud.sync_now")),1)])),_:2},1032,["onClick"])),[[c]]),io(s,{secondary:"",color:"danger",onClick:n=>(e.$auth.logout(),t())},{default:ii((()=>[io(l,{class:"w-6 h-6","aria-hidden":"true"}),ro("span",o$,pt(e.$t("cloud.logout")),1)])),_:2},1032,["onClick"])])])):(Ha(),Ka(Ua,{key:1},[io(i,{text:n.value},null,8,["text"]),io(a,{class:"mt-4"})],64))]})),_:1},8,["title"])}}});const l$=sR({},[["render",function(e,t){const n=Pa("HeadlessForm");return Ha(),Ya(n,null,{default:ii((()=>[go(e.$slots,"default")])),_:3})}]]),u$={key:0,class:"prose w-full"},c$=Si({setup(e){const t=XE("form");return(e,n)=>Ar(t).showErrors.value?(Ha(),Ka("div",u$,[(Ha(!0),Ka(Ua,null,mo(Ar(t).errors.value,((e,t)=>(Ha(),Ka("p",{key:t,class:"text-sm text-red-600"},pt(e),1)))),128))])):lo("",!0)}}),d$=Si({inheritAttrs:!1}),p$=Si({...d$,props:{name:sI(),label:sI(),placeholder:sI(),color:ZE(QI),modelValue:eI([String,Number]),showErrors:YE(),error:sI(),disabled:YE(),bordered:YE(),wobblyBorder:tI(),initialFocus:YE()},emits:["update:modelValue"],setup(e,{expose:t}){const n={[QI.Primary]:"focus:placeholder:text-primary-500 focus:bg-primary-100 focus:ring-primary-500",[QI.Solid]:"focus:placeholder:text-brand-solid-400 focus:bg-brand-solid-100 focus:ring-brand-solid-500",[QI.Danger]:"focus:placeholder:text-red-400 focus:bg-red-100 focus:ring-red-500"},r=_r(null),i=Lo((()=>n[e.color]));return t(zI(r)),(t,n)=>{const a=Pa("HeadlessInputLabel"),o=Pa("HeadlessInputInput"),s=Pa("HeadlessInputError"),l=Pa("HeadlessInput"),u=$a("wobbly-border");return Ha(),Ya(l,{ref_key:"$root",ref:r,name:e.name,placeholder:e.placeholder,"model-value":e.modelValue,error:e.error,"initial-focus":e.initialFocus,disabled:e.disabled,"onUpdate:modelValue":n[0]||(n[0]=e=>t.$emit("update:modelValue",e))},{default:ii((({hasErrors:n})=>[e.label?(Ha(),Ya(a,{key:0,class:"sr-only"},{default:ii((()=>[oo(pt(e.label),1)])),_:1})):lo("",!0),va(io(o,fo({class:["bg-gray-100 px-3 py-2 focus:outline-none",i.value,e.disabled?"text-gray-400 opacity-75":"text-gray-700",n&&"ring-1 ring-inset ring-red-500",e.bordered&&!n&&"ring-1 ring-inset ring-gray-300"]},t.$attrs),null,16,["class"]),[[u,e.wobblyBorder]]),e.showErrors?(Ha(),Ya(s,{key:1,class:"mt-1 text-sm text-red-700 opacity-75"})):lo("",!0)])),_:1},8,["name","placeholder","model-value","error","initial-focus","disabled"])}}}),f$={class:"flex flex-col md:flex-row"},h$=Si({props:{name:oI(),color:ZE(QI),label:sI(),placeholder:sI()},setup:e=>(t,n)=>{const r=p$,i=GI,a=c$;return Ha(),Ka("div",null,[ro("div",f$,[io(r,{"initial-focus":"",class:"z-10 flex-grow",color:e.color,name:e.name,label:e.label,"show-errors":!1,placeholder:e.placeholder,"wobbly-border":t.$ui.isMobile?{}:{topRight:!1,bottomRight:!1}},null,8,["color","name","label","placeholder","wobbly-border"]),io(i,{type:"submit",class:"mt-2 focus:z-20 md:mt-0",alignment:"center",color:e.color,"wobbly-border":t.$ui.isMobile?{}:{topLeft:!1,bottomLeft:!1}},{default:ii((()=>[go(t.$slots,"default")])),_:3},8,["color","wobbly-border"])]),io(a,{class:"mt-2"})])}}),m$={width:"1.2em",height:"1.2em",viewBox:"0 0 352 322"},v$=[so('<g fill="none"><path d="M87.973 282.353l-60.732-105.33a31.6 31.6 0 010-31.538L87.973 40.233c5.646-9.784 16.08-15.795 27.321-15.795H236.68c11.266 0 21.727 6.011 27.321 15.795l60.758 105.304a31.6 31.6 0 010 31.537l-60.732 105.33c-5.646 9.784-16.08 15.795-27.321 15.795H115.372a31.846 31.846 0 01-27.4-15.846z" fill="#FFF"></path><path d="M93.151 275.197l-57.115-99.06c-5.308-9.185-5.308-20.504 0-29.663l57.115-99.086a29.742 29.742 0 0125.734-14.857h114.23c10.59 0 20.426 5.646 25.734 14.857l57.167 99.034c5.308 9.185 5.308 20.504 0 29.663l-57.141 99.138a29.742 29.742 0 01-25.734 14.858H118.937a29.787 29.787 0 01-25.786-14.884z" fill="currentColor"></path><path d="M118.469 142.233h117.534a2.649 2.649 0 002.654-2.654v-22.04c0-14.65-11.891-26.54-26.54-26.54h-70.568c-20.53-.026-37.157 16.6-37.157 37.13-.026 7.833 6.27 14.104 14.077 14.104zm11.527 97.368h70.229c21.207 0 38.432-17.225 38.432-38.432 0-7.078-5.724-12.828-12.828-12.828H106.942a2.537 2.537 0 00-2.55 2.55v23.054c-.026 14.181 11.475 25.656 25.604 25.656z" fill="#F7F7F7"></path><path d="M109.596 139.319l87.663 87.662c5.802 5.803 15.196 5.803 20.998 0l15.196-15.196c5.803-5.802 5.803-15.196 0-20.998l-87.637-87.663c-5.802-5.802-15.196-5.802-20.998 0l-15.196 15.196c-5.855 5.803-5.855 15.222-.026 20.999z" fill="#F7F7F7"></path><path fill="#444" opacity=".3" d="M198.69 228.464l-51.495-40.123h11.397zm-54.33-126.797l40.565 40.566h13.765z"></path></g>',1)];const g$={name:"app-solid-emblem",render:function(e,t){return Ha(),Ka("svg",m$,v$)}},y$={width:"1.2em",height:"1.2em",fill:"none",viewBox:"0 0 24 24"},b$=[ro("circle",{style:{opacity:".25"},cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),ro("path",{style:{opacity:".75"},fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)];const w$={name:"app-spinner",render:function(e,t){return Ha(),Ka("svg",y$,b$)}},_$=e=>e?null:hR("validation.required"),x$=Object.freeze(Object.defineProperty({__proto__:null,default:_$},Symbol.toStringTag,{value:"Module"}));const k$=Object.entries(Object.assign({"/src/framework/forms/rules/required.ts":x$})).reduce(((e,[t,n])=>{var r;const i=null==(r=t.match(/([^/]+)\.ts/))?void 0:r[1];return T(e,(()=>{i&&(e[i]=n.default)}))}),{});class A${constructor(e,n=[]){t(this,"rules"),t(this,"errors",[]),t(this,"value"),t(this,"form"),this.value=e,this.rules=n}get error(){var e;return null!=(e=this.errors[0])?e:null}setForm(e){this.form=e}update(e){var t;this.value=e,(null==(t=this.form)?void 0:t.submitted)&&this.validate()}validate(){return this.errors=$(this.rules).map((e=>{var t;return(null!=(t=k$[e])?t:ne(`Unknown '${e}' validation rule`))(this.value)})).filter().toArray(),0===this.errors.length}}const E$=class extends Ye{constructor(e={}){super(),t(this,"submitted"),t(this,"errors"),t(this,"showErrors"),t(this,"inputs"),this.inputs=sr(Object.entries(e).reduce(((e,[t,n])=>{var r,i;return(e[t]=new A$(null!=(r=n.default)?r:E$.getDefaultValue(n.type),null==(i=n.rules)?void 0:i.split("|"))).setForm(this),e}),{}));const n=this.submitted=_r(!1),r=this.errors=Lo((()=>E(Object.values(this.inputs).map((e=>e.error)))));this.showErrors=Lo((()=>n.value&&r.value.length>0))}static getDefaultValue(e){var t,n;if(e.type===S$.Object)throw new Error("Object input fields must provide the default value.");return this.defaultInputValues=null!=(t=this.defaultInputValues)?t:{[S$.String]:"",[S$.Boolean]:!1,[S$.Number]:0,[S$.Object]:{}},e.multi?[]:null==(n=this.defaultInputValues)?void 0:n[e.type]}input(e){return this.inputs[e]}data(e){var t;return e?null==(t=this.inputs[e])?void 0:t.value:Object.entries(this.inputs).reduce(((e,[t,n])=>(e[t]=n.value,e)),{})}submit(){return this.submitted.value=!0,!Object.values(this.inputs).map((e=>e.validate())).some((e=>!e))}__get(e){var t;return null==(t=this.inputs[e])?void 0:t.value}__set(e,t){var n;null==(n=this.inputs[e])||n.update(t)}};let I$=E$;t(I$,"defaultInputValues");var S$=(e=>(e["String"]="string",e["Boolean"]="boolean",e["Number"]="number",e["Object"]="object",e))(S$||{});function R$(e){return new I$(null!=e?e:{})}const C$={key:0,class:"flex items-center"},O$={key:1,class:"flex flex-col"},D$={class:"flex flex-col items-end space-y-2 mt-4 md:space-x-2 md:space-x-reverse md:space-y-0 md:flex-row-reverse"},j$={class:"ml-2"},T$={class:"ml-2"},P$={class:"ml-1"},M$=Si({setup(e){const t=R$({url:{type:S$.String,default:"https://",rules:"required"}});return(e,n)=>{const r=w$,i=rR,a=n$,o=qL,s=GI,l=TL,u=g$,c=h$,d=_R,p=l$,f=cS,h=$a("initial-focus");return Ha(),Ya(f,{title:e.$t("cloud.login.title"),cancellable:!e.$auth.ongoing},{default:ii((({close:f})=>{var m,v;return[e.$auth.ongoing?(Ha(),Ka("div",C$,[io(r,{class:"h-4 w-4 animate-spin text-brand-solid-700","aria-hidden":"true"}),io(i,{text:e.$auth.stale?e.$t("cloud.login.stale"):e.$t("cloud.login.loading"),actions:{reload:()=>e.$app.reload()},class:"ml-2 text-lg text-gray-700"},null,8,["text","actions"])])):e.$auth.hasLoggedIn?(Ha(),Ka("div",O$,[e.$auth.error?(Ha(),Ya(i,{key:0,text:e.$t("cloud.login.info_authError",{url:null==(m=e.$auth.previousSession)?void 0:m.loginUrl}),actions:{"view-error-details":()=>e.$errors.inspect(e.$auth.error)}},null,8,["text","actions"])):(Ha(),Ya(i,{key:1,text:e.$t("cloud.login.info_reconnect",{url:null==(v=e.$auth.previousSession)?void 0:v.loginUrl},{plural:e.$cloud.pendingUpdates})},null,8,["text"])),io(a,{class:"mt-4"}),ro("div",D$,[va((Ha(),Ya(s,{secondary:"",color:"brand-solid",onClick:n[0]||(n[0]=t=>e.$auth.reconnect(!0))},{default:ii((()=>[io(o,{"aria-hidden":"true",class:"h-6 w-6"}),ro("span",j$,pt(e.$t("cloud.reconnect_now")),1)])),_:1})),[[h]]),io(s,{secondary:"",color:"danger",onClick:t=>(e.$auth.logout(),f())},{default:ii((()=>[io(l,{class:"h-6 w-6"}),ro("span",T$,pt(e.$t("cloud.logout")),1)])),_:2},1032,["onClick"])])])):(Ha(),Ya(p,{key:2,class:"flex flex-col",form:Ar(t),onSubmit:e=>async function(e){/^https?:\/\//.test(t.url)||(t.url="https://"+t.url),await gj.login(t.url)&&e()}(f)},{default:ii((()=>[io(i,{text:e.$t("cloud.login.info")},null,8,["text"]),io(c,{name:"url",class:"mt-2",color:"brand-solid",label:e.$t("cloud.login.url"),placeholder:e.$t("cloud.login.url_placeholder")},{default:ii((()=>[io(u,{class:"h-6 w-6 text-brand-solid-500","aria-hidden":"true"}),ro("span",P$,pt(e.$t("cloud.login.submit")),1)])),_:1},8,["label","placeholder"]),e.$auth.dismissed?lo("",!0):(Ha(),Ya(d,{key:0,color:"brand-solid",class:"mt-2 text-sm",onClick:t=>(e.$auth.dismiss(),f())},{default:ii((()=>[oo(pt(e.$t("cloud.login.dismiss")),1)])),_:2},1032,["onClick"]))])),_:2},1032,["form","onSubmit"]))]})),_:1},8,["title","cancellable"])}}});const L$=sR({},[["render",function(e,t){const n=M$,r=s$;return e.$cloud.disconnected?(Ha(),Ya(n,{key:0})):(Ha(),Ya(r,{key:1}))}]]),$$={class:"flex justify-between items-center"},N$=Si({props:{label:sI(),description:sI(),modelValue:YE()},emits:["update:modelValue"],setup:e=>(t,n)=>{const r=QE,i=VE,a=rR,o=HE,s=qE;return Ha(),Ya(s,{as:"div",class:"flex flex-col justify-between"},{default:ii((()=>[ro("div",$$,[e.label?(Ha(),Ya(r,{key:0,as:"div",class:"font-medium text-gray-900",passive:""},{default:ii((()=>[oo(pt(e.label),1)])),_:1})):lo("",!0),io(i,{class:ut(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out ml-2 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",e.modelValue?"bg-primary-600":"bg-gray-200"]),"model-value":e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=e=>t.$emit("update:modelValue",e))},{default:ii((()=>[ro("span",{"aria-hidden":"true",class:ut(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",e.modelValue?"translate-x-5":"translate-x-0"])},null,2)])),_:1},8,["class","model-value"])]),e.description?(Ha(),Ya(o,{key:0,as:"span",class:"mt-2 max-w-prose"},{default:ii((()=>[io(a,{text:e.description,class:"text-sm text-gray-500"},null,8,["text"])])),_:1})):lo("",!0)])),_:1})}}),B$=Si({props:{label:sI(),options:nI(),modelValue:rI([String,Number])},emits:["update:modelValue"],setup:e=>(t,n)=>{const r=Pa("HeadlessSelect");return Ha(),Ya(r,fo({class:"form-select cursor-pointer border-0 hover:bg-gray-100 focus:ring-primary-600 focus:bg-primary-gray-100",label:e.label,"model-value":e.modelValue,options:e.options},t.$attrs,{"onUpdate:modelValue":n[0]||(n[0]=e=>t.$emit("update:modelValue",e))}),null,16,["label","model-value","options"])}});const U$=ro("hr",{class:"mt-3"},null,-1),F$={class:"flex flex-col items-start p-4"},z$=ro("hr",null,null,-1),q$=ro("hr",null,null,-1),V$=ro("hr",null,null,-1),Q$={class:"p-4"},H$={key:0,class:"flex flex-col mt-2"},G$={for:"proxy-url",class:"font-medium text-sm text-gray-700"},W$=Si({setup(e){const t=Lo((()=>lj.locales.map((e=>{var t;return{text:null!=(t=lj.displayNames[e])?t:e,value:e}}))));return(e,n)=>{const r=B$,i=rR,a=N$,o=p$,s=cS;return Ha(),Ya(s,{title:e.$t("settings.title"),"no-padding":""},{default:ii((()=>[U$,ro("div",F$,[io(r,{"label-class":"flex self-stretch justify-between items-center","label-text-class":"font-medium text-gray-900",label:e.$t("settings.language"),"model-value":e.$i18n.locale,options:t.value,"onUpdate:modelValue":n[0]||(n[0]=t=>e.$lang.change(t))},null,8,["label","model-value","options"]),io(i,{text:e.$t("settings.language_description"),class:"text-sm text-gray-500"},null,8,["text"])]),z$,io(a,{modelValue:e.$ui.animations,"onUpdate:modelValue":n[1]||(n[1]=t=>e.$ui.animations=t),class:"p-4",label:e.$t("settings.animations"),description:e.$t("settings.animations_description")},null,8,["modelValue","label","description"]),q$,e.$errors.sentryConfigured?(Ha(),Ka(Ua,{key:0},[io(a,{modelValue:e.$errors.reporting,"onUpdate:modelValue":n[2]||(n[2]=t=>e.$errors.reporting=t),class:"p-4",label:e.$t("settings.errorReporting"),description:e.$t("settings.errorReporting_description")},null,8,["modelValue","label","description"]),V$],64)):lo("",!0),ro("div",Q$,[io(a,{modelValue:e.$config.useProxy,"onUpdate:modelValue":n[3]||(n[3]=t=>e.$config.useProxy=t),label:e.$t("settings.proxy"),description:e.$t("settings.proxy_description")},null,8,["modelValue","label","description"]),e.$config.useProxy?(Ha(),Ka("div",H$,[ro("label",G$,pt(e.$t("settings.proxyUrl")),1),io(o,{id:"proxy-url",modelValue:e.$config.proxyUrl,"onUpdate:modelValue":n[4]||(n[4]=t=>e.$config.proxyUrl=t),bordered:"",class:"mt-2",placeholder:e.$app.env("DEFAULT_PROXY_URL")},null,8,["modelValue","placeholder"])])):lo("",!0)])])),_:1},8,["title"])}}}),J$=["src"],K$=Si({setup:e=>(e,t)=>{const n=Pa("HeadlessButton"),r=UL,i=$L,a=SE,o=LL,s=CE,l=TL,u=RE,c=IE;return Ha(),Ya(c,{as:"div",class:"flex relative items-center"},{default:ii((()=>[ro("div",null,[io(a,{as:"template"},{default:ii((()=>[e.$auth.userAvatarUrl?(Ha(),Ya(n,{key:0,"aria-label":e.$t("menu.open"),title:e.$t("menu.open"),class:"rounded-full focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},{default:ii((()=>[ro("img",{src:e.$auth.userAvatarUrl,class:"h-8 w-8 rounded-full object-cover",alt:""},null,8,J$)])),_:1},8,["aria-label","title"])):(Ha(),Ya(i,{key:1,"aria-label":e.$t("menu.open"),title:e.$t("menu.open")},{default:ii((()=>[io(r,{class:"w-7 h-7","aria-hidden":"true"})])),_:1},8,["aria-label","title"]))])),_:1})]),io(ss,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:ii((()=>[io(u,{class:"absolute right-0 top-full py-1 mt-2 w-48 bg-white rounded-md ring-1 ring-black ring-opacity-5 shadow-lg origin-top-right focus:outline-none"},{default:ii((()=>[io(s,null,{default:ii((({active:n})=>[ro("button",{type:"button",class:ut(["flex items-center justify-between px-4 py-2 w-full text-sm text-gray-700",n&&"bg-gray-100"]),onClick:t[0]||(t[0]=t=>e.$ui.openModal(W$))},[ro("span",null,pt(e.$t("menu.settings")),1),io(o,{class:"w-4 h-4","aria-hidden":"true"})],2)])),_:1}),io(s,null,{default:ii((({active:n})=>[ro("button",{type:"button",class:ut(["flex items-center justify-between px-4 py-2 w-full text-sm text-gray-700",n&&"bg-gray-100"]),onClick:t[1]||(t[1]=t=>e.$auth.hasLoggedIn?e.$auth.logout():e.$ui.openModal(L$))},[ro("span",null,pt(e.$auth.hasLoggedIn?e.$t("menu.logOut"):e.$t("menu.logIn")),1),io(l,{class:"w-4 h-4","aria-hidden":"true"})],2)])),_:1})])),_:1})])),_:1})])),_:1})}}),Y$={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},Z$=[ro("g",{fill:"currentColor"},[ro("path",{d:"m15.374 5.986l-5 9c-.647 1.165-2.396.194-1.748-.972l5-9c.647-1.165 2.396-.194 1.748.972Z"}),ro("path",{d:"m5.125 9.72l5 4c1.04.832-.209 2.394-1.25 1.56l-5-4c-1.04-.832.209-2.394 1.25-1.56Z"})],-1)];const X$={name:"pepicons-checkmark",render:function(e,t){return Ha(),Ka("svg",Y$,Z$)}},eN={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},tN=[ro("g",{fill:"currentColor"},[ro("path",{"fill-rule":"evenodd",d:"M10 2a2 2 0 0 1 2 2v7a2 2 0 1 1-4 0V4a2 2 0 0 1 2-2Z","clip-rule":"evenodd"}),ro("path",{d:"M12 16a2 2 0 1 1-4 0a2 2 0 0 1 4 0Z"})],-1)];const nN={name:"pepicons-exclamation",render:function(e,t){return Ha(),Ka("svg",eN,tN)}},rN={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},iN=[ro("path",{fill:"currentColor",d:"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1z"},null,-1)];const aN={name:"zondicons-cloud",render:function(e,t){return Ha(),Ka("svg",rN,iN)}},oN={class:"relative w-8 h-8","aria-hidden":"true"},sN={key:1},lN={key:4,class:"text-xs"},uN={class:"sr-only sm:not-sr-only"},cN={key:0,class:"sr-only"},dN={key:1,class:"sr-only"},pN={key:2,class:"sr-only"},fN=Si({setup(e){const{t:t}=nj(),n=Lo((()=>qC.dirty?qC.pendingUpdates>9?{badge:"9+",a11y:t("cloud.manyPendingUpdates_a11y")}:{badge:qC.pendingUpdates,a11y:t("cloud.pendingUpdates_a11y",qC.pendingUpdates)}:{badge:null,a11y:t("cloud.pendingUpdates_a11y",0)}));return(e,t)=>{const r=aN,i=qL,a=nN,o=KI,s=X$,l=$L;return Ha(),Ya(l,{onClick:t[0]||(t[0]=t=>e.$ui.openModal(L$))},{default:ii((()=>[ro("div",{role:"status",class:ut(["flex justify-center items-center space-x-2",{"opacity-75":e.$auth.hasLoggedIn&&e.$cloud.disconnected}])},[ro("div",oN,[io(r,{class:ut(["absolute inset-0 w-full h-full",{"text-red-600":e.$auth.error}]),"aria-hidden":"true"},null,8,["class"]),ro("div",{class:ut(["flex absolute inset-0 justify-center items-center",[e.$route.meta.fullBleedHeader?"text-gray-900":"text-white",e.$ui.animations?"transition-colors duration-700":""]])},[e.$cloud.syncing?(Ha(),Ya(i,{key:0,class:"w-4 h-4 animate-spin","aria-hidden":"true"})):e.$cloud.offline?(Ha(),Ka("span",sN,"!")):e.$auth.error?(Ha(),Ya(a,{key:2,class:"w-3 h-3","aria-hidden":"true"})):!e.$auth.hasLoggedIn&&e.$cloud.disconnected?(Ha(),Ya(o,{key:3,class:"w-4 h-4","aria-hidden":"true"})):e.$cloud.dirty?(Ha(),Ka("span",lN,pt(n.value.badge),1)):(Ha(),Ya(s,{key:5,class:"w-4 h-4","aria-hidden":"true"}))],2)]),ro("span",uN,pt(e.$t(`cloud.statuses.${e.$cloud.status}`)),1),e.$cloud.syncing?(Ha(),Ka("span",cN,pt(e.$t("cloud.statuses.syncing_description")),1)):e.$auth.error?(Ha(),Ka("span",dN,pt(e.$t("cloud.statuses.authError_description")),1)):(Ha(),Ka("span",pN,pt(n.value.a11y),1))],2)])),_:1})}}});const hN=["aria-hidden"],mN={class:"flex relative z-10 justify-between items-center w-full max-w-content px-edge"},vN={class:"relative flex-grow h-full"},gN={key:0,class:"flex absolute left-0 top-1/2 w-full text-gray-900 -translate-y-1/2"},yN={key:1,class:"flex absolute left-0 top-1/2 items-center -translate-y-1/2 w-full"},bN=ro("span",{"aria-hidden":"true",class:"mr-2"},"← ",-1),wN={class:"flex space-x-2"},_N=Si({setup(e){let t=_r({enterFrom:"opacity-0",leaveTo:"opacity-0"});const n=_r(null),r=Lo((()=>Jj.isOnboarding||Jj.onboardingCompleting||VC.currentRouteIs(/recipes\.(edit|create)/)?null:VC.currentRouteIs("home")?"logo":"back-arrow")),i=Lo((()=>fC.headerHidden||Jj.isOnboarding));return fi(r,((e,n)=>{t.value=n?"logo"===e?{enterFrom:"opacity-0 -translate-x-full",leaveTo:"opacity-0 translate-x-full"}:{enterFrom:"opacity-0 translate-x-full",leaveTo:"opacity-0 -translate-x-full"}:{enterFrom:"opacity-0 -translate-x-full",leaveTo:"opacity-0 -translate-x-full"}})),function(e,t){const n=new ResizeObserver((()=>e.value&&t(e.value)));$i((()=>{e.value&&(t(e.value),n.observe(e.value))})),Fi((()=>n.disconnect()))}(n,Ze((e=>fC.updateHeaderHeight(e.clientHeight)),50)),ui("a11y",{hidden:i}),(e,a)=>{const o=pR,s=Pa("router-link"),l=GI,u=fN,c=K$,d=$a("wobbly-border");return Ha(),Ka("header",{ref_key:"$header",ref:n,class:ut(["flex relative z-40 flex-col items-center self-stretch pt-edge h-24 shrink-0",{invisible:e.$ui.headerHidden,"text-white":e.$route.meta.fullBleedHeader&&!e.$app.onboardingCompleting,"opacity-0 pointer-events-none":e.$app.isOnboarding,"transition-colors duration-700":e.$ui.animations,"transition-opacity opacity-100":e.$ui.animations&&e.$app.onboardingCompleting}]),"aria-hidden":i.value?"true":"false"},[ro("div",mN,[ro("div",vN,[io(ss,{"enter-active-class":e.$ui.animations?"transition duration-700":"","enter-from-class":t.value.enterFrom,"enter-to-class":"opacity-100","leave-active-class":e.$ui.animations?"transition duration-700":"","leave-from-class":"opacity-100","leave-to-class":t.value.leaveTo},{default:ii((()=>["logo"===r.value?(Ha(),Ka("div",gN,[va((Ha(),Ya(s,{to:{name:"home"},title:"Umai","aria-label":"Umai",class:"flex ring-primary-100 justify-center items-center space-x-2 focus-visible:outline-none focus-visible:bg-primary-100 focus-visible:ring-8"},{default:ii((()=>[io(o,{class:"mr-2 w-36 h-12 fill-primary-500"})])),_:1})),[[d]])])):"back-arrow"===r.value?(Ha(),Ka("div",yN,[io(l,{clear:"",class:"text-white hover:bg-transparent focus:bg-transparent focus:ring-0 focus:ring-offset-0 focus-visible:bg-black/20 focus:hover:bg-transparent",onClick:a[0]||(a[0]=t=>e.$router.previousRouteWas("home")?e.$router.back():e.$router.push({name:"home"}))},{default:ii((()=>[bN,ro("span",null,pt(e.$t("menu.back")),1)])),_:1})])):lo("",!0)])),_:1},8,["enter-active-class","enter-from-class","leave-active-class","leave-to-class"])]),ro("div",wN,[e.$auth.dismissed?lo("",!0):(Ha(),Ya(u,{key:0})),io(c)])])],10,hN)}}}),xN={class:"flex flex-col flex-grow self-stretch items-center"},kN=ro("div",{id:"element-transitions-container"},null,-1),AN=Si({setup(e){const t=_r(null);return $i((()=>t.value&&fC.setLayoutElement(t.value))),(e,n)=>{var r,i;const a=_N,o=OL,s=IL;return Ha(),Ka("div",{ref_key:"$root",ref:t,class:"flex flex-col min-w-screen min-h-screen overflow-x-hidden"},[e.$errors.hasStartupErrors||null!=(r=e.$route.meta.header)&&!r?lo("",!0):(Ha(),Ya(a,{key:0})),ro("div",xN,[go(e.$slots,"default")]),null==(i=e.$route.meta.footer)||i?(Ha(),Ya(o,{key:1})):lo("",!0),io(s),kN],512)}}}),EN={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},IN=[ro("g",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"},[ro("path",{d:"M11.026 5.232a1 1 0 0 1 1.409.128l3.333 4a1 1 0 0 1-1.536 1.28l-3.334-4a1 1 0 0 1 .128-1.408Z"}),ro("path",{d:"M11.026 14.768a1 1 0 0 1-.128-1.408l3.334-4a1 1 0 0 1 1.536 1.28l-3.333 4a1 1 0 0 1-1.409.128Z"}),ro("path",{d:"M14 10a1 1 0 0 1-1 1H5a1 1 0 1 1 0-2h8a1 1 0 0 1 1 1Z"})],-1)];const SN={name:"pepicons-arrow-right",render:function(e,t){return Ha(),Ka("svg",EN,IN)}},RN={},CN={class:"text-red-600 mt-2 text-2xl font-medium"},ON={class:"mt-4 space-y-4 flex flex-col"},DN={class:"mr-1"},jN=ro("div",{class:"flex-grow"},null,-1),TN={class:"mr-1"},PN=ro("div",{class:"flex-grow"},null,-1),MN={class:"mr-1"},LN=ro("div",{class:"flex-grow"},null,-1),$N={class:"mr-1"},NN=ro("div",{class:"flex-grow"},null,-1);const BN=sR(RN,[["render",function(e,t){const n=pR,r=rR,i=SN,a=GI,o=uR;return Ha(),Ya(o,{class:"px-edge"},{default:ii((()=>[io(n,{class:"h-auto w-[250px] max-w-[60vw] fill-red-600","aria-hidden":"true"}),ro("h1",CN,pt(e.$t("startupCrash.title")),1),io(r,{text:e.$t("startupCrash.message"),class:"text-center mt-4"},null,8,["text"]),ro("div",ON,[io(a,{secondary:"",color:"danger",onClick:t[0]||(t[0]=t=>e.$app.reload())},{default:ii((()=>[ro("span",DN,pt(e.$t("startupCrash.reload")),1),jN,io(i,{class:"w-5 h-5","aria-hidden":"true"})])),_:1}),e.$auth.hasLoggedIn?(Ha(),Ya(a,{key:0,secondary:"",color:"danger",onClick:t[1]||(t[1]=t=>e.$app.reload({autoReconnect:"false"}))},{default:ii((()=>[ro("span",TN,pt(e.$t("startupCrash.reloadWithoutAutoReconnect")),1),PN,io(i,{class:"w-5 h-5","aria-hidden":"true"})])),_:1})):lo("",!0),e.$auth.hasLoggedIn?(Ha(),Ya(a,{key:1,secondary:"",color:"danger",onClick:t[2]||(t[2]=t=>e.$auth.logout(!0).then((()=>e.$app.reload())))},{default:ii((()=>[ro("span",MN,pt(e.$t("startupCrash.logout")),1),LN,io(i,{class:"w-5 h-5","aria-hidden":"true"})])),_:1})):lo("",!0),io(a,{secondary:"",color:"danger",onClick:t[3]||(t[3]=t=>e.$errors.inspect(e.$errors.startupErrors))},{default:ii((()=>[ro("span",$N,pt(e.$t("startupCrash.inspect")),1),NN,io(i,{class:"w-5 h-5","aria-hidden":"true"})])),_:1})])])),_:1})}]]),UN=Si({setup(e){const{t:t,te:n,locale:r,setLocaleMessage:i}=nj();return fR.setInstance({locale:r,translate:t,hasMessage:n,setLocaleMessages:i}),(e,t)=>{const n=BN,r=Pa("router-view"),i=AN;return Ha(),Ya(i,null,{default:ii((()=>[e.$errors.hasStartupErrors?(Ha(),Ya(n,{key:0})):(Ha(),Ya(r,{key:1}))])),_:1})}}});WS.use({renderer:{link:(e,t,n)=>tR({url:null!=e?e:"#",text:n,title:t})}}),Jv(new Qv),hw(),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[".schema"],n=Ig(e,t);Eg(n)}(Object.assign({"/src/models/Recipe.schema.ts":Vj,"/src/models/Recipe.ts":Hj,"/src/models/RecipeInstructionsStep.schema.ts":_j,"/src/models/RecipeInstructionsStep.ts":kj,"/src/models/RecipesList.schema.ts":Ej,"/src/models/RecipesList.ts":Dj,"/src/models/RecipesListItem.schema.ts":Sj,"/src/models/RecipesListItem.ts":Cj}));const FN=[],zN={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},qN=[ro("g",{fill:"currentColor"},[ro("path",{d:"M5 11a1 1 0 1 1 0-2h10a1 1 0 1 1 0 2H5Z"}),ro("path",{d:"M9 5a1 1 0 0 1 2 0v10a1 1 0 1 1-2 0V5Z"})],-1)];const VN={name:"pepicons-plus",render:function(e,t){return Ha(),Ka("svg",zN,qN)}};var QN=(e=>(e["Json"]="json",e["Text"]="text",e))(QN||{});const HN=["for"],GN=["id","name","accept"],WN=Si({props:{accept:{type:String,default:null},parse:{type:String,default:null}},emits:["start","success","error"],setup(e,{emit:t}){const n=N(),r=_r();function i(){var n;const i=null==(n=r.value.files)?void 0:n[0];i&&(t("start"),e.parse?function(e,n){const r=new FileReader,i=e=>n===QN.Json?JSON.parse(e):e;r.onerror=()=>t("error",hR("errors.fileUpload")),r.onload=()=>t("success",i(r.result)),r.readAsText(e)}(i,e.parse):t("success",i))}return(t,a)=>(Ha(),Ka("label",{for:Ar(n)},[go(t.$slots,"default"),ro("input",{id:Ar(n),ref_key:"input",ref:r,name:Ar(n),accept:e.accept,type:"file",class:"sr-only",onChange:a[0]||(a[0]=e=>i())},null,40,GN)],8,HN))}}),JN={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},KN=[ro("path",{fill:"currentColor","fill-rule":"evenodd",d:"M337.927 348.171c-7.563 2.676-29.153 5.641-74.62-18.744c-49.223-26.427-56.535-48.514-57.616-55.14c.71-8.048.245-16.07-1.13-23.896l.32.465s-4.026-21.496 52.314-56.466c50.423-31.308 73.345-25.077 77.61-23.431c2.751 1.84 5.597 3.58 8.568 5.176a92.736 92.736 0 0 0 17.445 7.117c6.947 6.627 19.705 25.372 21.03 74.67c1.37 49.664-13.229 68.804-21.175 75.575c-8.198 3.707-15.88 8.663-22.746 14.674zm105.438-12.293c-3.191-1.696-6.457-3.14-9.718-4.416l2.33-.195s-20.854-9.227-22.67-76.265c-1.821-67.064 19.875-78.496 19.875-78.496l-3.122.119c16.396-8.392 30.48-21.69 39.782-39.21c24.241-45.593 6.891-102.222-38.701-126.47C385.53-13.27 328.919 4.03 304.697 49.667c-9.956 18.726-12.808 39.286-9.667 58.721l-1.056-1.646s5.497 24.342-51.554 59.752c-57.025 35.435-82.76 17.79-82.76 17.79l1.639 2.405c-1.615-1.005-3.185-2.035-4.906-2.92c-45.618-24.242-102.247-6.917-126.47 38.694c-24.215 45.618-6.89 102.229 38.696 126.47c34.009 18.06 74.105 13.028 102.347-9.618l-.609 1.175s20.755-17.074 80.607 15.07c47.231 25.346 54.248 50.178 55.159 59.525c-1.25 34.624 16.81 68.608 49.493 85.958c45.593 24.241 102.222 6.917 126.444-38.695c24.241-45.617 6.916-102.253-38.695-126.469zM331.74 40.715c-27.213 29.762-27.778 73.564-1.57 98.32c-12.954-12.462-12.658-38.45.42-63.306c1.69-2.211 6.57-7.488 13.713-5.082c.71.245 1.18.295 1.451.27c1.614.345 3.26.54 4.981.465c10.817-.49 19.21-9.643 18.72-20.485c-.22-4.862-2.23-9.152-5.352-12.469c25.127-16.464 53.985-18.355 65.813-7.557l.44.025c-26.993-24.636-71.134-20.245-98.616 9.819zM58.19 216.746c-27.212 29.788-27.777 73.565-1.57 98.321c-12.953-12.463-12.683-38.45.42-63.307c1.69-2.23 6.578-7.481 13.714-5.075c.716.245 1.18.295 1.45.27c1.621.339 3.286.54 4.982.465c10.842-.49 19.21-9.643 18.72-20.491c-.22-4.856-2.23-9.153-5.346-12.463c25.127-16.44 53.978-18.355 65.807-7.557l.44.044c-27.012-24.656-71.16-20.265-98.617 9.793zm289.573 149.046c-27.212 29.762-27.777 73.564-1.57 98.346c-12.96-12.488-12.664-38.476.414-63.307c1.696-2.237 6.577-7.488 13.72-5.107c.71.245 1.174.32 1.444.27c1.621.345 3.292.54 4.982.49c10.823-.515 19.215-9.693 18.725-20.51c-.22-4.862-2.236-9.152-5.352-12.469c25.127-16.44 53.96-18.355 65.788-7.557l.44.05c-26.967-24.661-71.134-20.27-98.59 9.794z","clip-rule":"evenodd"},null,-1)];const YN={name:"file-icons-json-ld2",render:function(e,t){return Ha(),Ka("svg",JN,KN)}},ZN={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},XN={fill:"none"},eB=["clip-path"],tB=[ro("path",{"fill-rule":"evenodd",d:"M13.198 1.22L3.12 11.298a1 1 0 0 0-.282.555l-.705 4.594a1 1 0 0 0 1.14 1.14l4.595-.705a1 1 0 0 0 .555-.281L18.501 6.523a1 1 0 0 0 0-1.414l-3.89-3.89a1 1 0 0 0-1.413 0ZM4.317 15.404l.448-2.924l9.14-9.14l2.475 2.476l-9.14 9.14l-2.923.448Z","clip-rule":"evenodd"},null,-1),ro("path",{d:"m11.442 5.247l1.06-1.061l3.242 3.24l-1.061 1.061l-3.241-3.24Z"},null,-1)],nB=["id"],rB=[ro("path",{fill:"#fff",d:"M0 0h20v20H0z"},null,-1)];const iB={name:"pepicons-pen",render:function(e,t){return Ha(),Ka("svg",ZN,[ro("g",XN,[ro("g",{fill:"currentColor","clip-path":"url(#"+e.idMap["svgIDa"]+")"},tB,8,eB),ro("defs",null,[ro("clipPath",{id:e.idMap["svgIDa"]},rB,8,nB)])])])},data:()=>({idMap:{svgIDa:"uicons-"+Math.random().toString(36).substr(2,10)}})},aB={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},oB=[ro("g",{fill:"currentColor"},[ro("path",{"fill-rule":"evenodd",d:"M1.25 10a8.75 8.75 0 1 0 17.5 0a8.75 8.75 0 0 0-17.5 0Zm16 0a7.25 7.25 0 1 1-14.5 0a7.25 7.25 0 0 1 14.5 0Z","clip-rule":"evenodd"}),ro("path",{"fill-rule":"evenodd",d:"M6.25 10c0 4.522 1.491 8.25 3.75 8.25s3.75-3.728 3.75-8.25S12.259 1.75 10 1.75S6.25 5.478 6.25 10Zm6 0c0 3.762-1.195 6.75-2.25 6.75S7.75 13.762 7.75 10S8.945 3.25 10 3.25s2.25 2.988 2.25 6.75Z","clip-rule":"evenodd"}),ro("path",{d:"m3.602 5.467l1.006-1.112c.1.09.209.18.325.267c1.271.952 3.3 1.54 5.515 1.54c1.891 0 3.652-.427 4.931-1.158c.308-.176.582-.367.819-.57l.974 1.141a6.73 6.73 0 0 1-1.048.73c-1.516.868-3.534 1.356-5.676 1.356c-2.522 0-4.865-.678-6.415-1.839a6.063 6.063 0 0 1-.431-.355Zm0 9.082l1.006 1.112c.1-.091.209-.18.325-.267c1.271-.952 3.3-1.54 5.515-1.54c1.891 0 3.652.427 4.931 1.158c.308.176.582.367.819.57l.974-1.141a6.841 6.841 0 0 0-1.048-.73c-1.516-.868-3.534-1.356-5.676-1.356c-2.522 0-4.865.678-6.415 1.839a6.06 6.06 0 0 0-.431.355ZM1.75 10.75v-1.5h16.5v1.5H1.75Z"})],-1)];const sB={name:"pepicons-internet",render:function(e,t){return Ha(),Ka("svg",aB,oB)}},lB=["name","value","checked"],uB=Si({props:{name:{type:String,default:null},class:{type:String,default:""},value:{type:[Number,String],default:null},modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},form:{type:Object,default:null}},emits:["update:modelValue"],setup(e,{emit:t}){var n;const r=null!=(n=e.form)?n:ci("form",null),i=_r(),a=Lo((()=>{var t,n;return null!=(n=null==r?void 0:r.input(null!=(t=e.name)?t:""))?n:null})),o=Lo((()=>{var t,n;return null!=(n=null==(t=a.value)?void 0:t.value)?n:e.modelValue})),s=Lo((()=>{var t,n;return L({disabled:e.disabled||null,checked:Array.isArray(null==(t=a.value)?void 0:t.value)&&(null==(n=a.value)?void 0:n.value.includes(e.value))||null})})),l=Lo((()=>{const t=e.class.split(" ");return E([e.class,!t.some((e=>e.startsWith("w-")))&&"w-4",!t.some((e=>e.startsWith("h-")))&&"h-4"]).join(" ")}));return(n,r)=>(Ha(),Ka("input",fo({ref_key:"input",ref:i,type:"checkbox",class:["rounded border-gray-300 cursor-pointer form-checkbox text-primary-600","focus:ring-primary-500 hover:bg-gray-200 disabled:bg-gray-300 disabled:cursor-default",l.value],name:e.name,value:o.value,checked:!!o.value},s.value,{onChange:r[0]||(r[0]=n=>function(){var n,r,o;const s=!!(null==(n=i.value)?void 0:n.matches(":checked"));a.value&&Array.isArray(null==(r=a.value)?void 0:r.value)?a.value.update(s?[...a.value.value,e.value]:le(a.value.value,e.value)):(null==(o=a.value)||o.update(s),t("update:modelValue",s))}())}),null,16,lB))}}),cB={class:"flex items-center"},dB={class:"flex-shrink-0"},pB=Si({props:{form:aI()},setup:e=>(t,n)=>{const r=uB,i=WL,a=_R,o=HL;return Ha(),Ya(o,{summary:t.$t("webImport.advancedOptions")},{default:ii((()=>[ro("div",cB,[io(r,{id:"use-proxy",name:"useProxy"}),ro("label",{for:"use-proxy",class:ut(["ml-2 cursor-pointer inline-flex items-baseline",{"opacity-50":!e.form.useProxy}])},[ro("span",dB,pt(t.$t("webImport.useProxy")),1),io(i,{name:"proxyUrl",placeholder:"https://","aria-label":t.$t("webImport.useProxy_urlLabel"),disabled:!e.form.useProxy,inline:"",class:ut(["ml-1",{"pointer-events-none":!e.form.useProxy}])},null,8,["aria-label","disabled","class"])],2)]),io(a,{class:"text-sm ml-6",onClick:n[0]||(n[0]=e=>t.$ui.showMarkdown(t.$t("webImport.useProxy_helpTitle"),t.$t("webImport.useProxy_helpContent")))},{default:ii((()=>[oo(pt(t.$t("webImport.useProxy_help")),1)])),_:1})])),_:1},8,["summary"])}});class fB extends yw{updateProxy(e,t){this.setState({useProxy:e,proxyUrl:t})}getInitialState(){return{useProxy:!0,proxyUrl:null}}}t(fB,"persist",["useProxy","proxyUrl"]);const hB=vw(new fB);function mB(e){const t=R$({url:{type:S$.String,rules:"required",default:e.websiteUrl},useProxy:{type:S$.Boolean,default:hB.useProxy},proxyUrl:{type:S$.String,default:hB.proxyUrl||Jj.env("DEFAULT_PROXY_URL")}});return{form:t,submit:()=>e.scan(async function(){try{const n=t.url,r=!!t.useProxy&&t.proxyUrl;hB.updateProxy(t.useProxy,t.proxyUrl);const i=r?await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:n})}):await fetch(n),a=await i.text();if(2!==Math.floor(i.status/100))throw new Error(`Got unexpected response code: ${i.status}\n\n${a}`);await e.parseWebsite(n,a)}catch(n){e.failed(t.url,n)}}())}}const vB=Si({setup(e,{expose:t}){const n=XE("web-import-modal","<WebImportModalStart> must be a child of a <WebImportModal>"),{form:r,submit:i}=mB(n);return t({submit:i}),(e,t)=>{const n=rR,a=pB,o=h$,s=l$;return Ha(),Ya(s,{form:Ar(r),class:"flex flex-col",onSubmit:t[0]||(t[0]=e=>Ar(i)())},{default:ii((()=>[io(n,{text:e.$t("webImport.info")},null,8,["text"]),io(a,{form:Ar(r),class:"mt-4"},null,8,["form"]),io(o,{name:"url",label:e.$t("webImport.url_label"),placeholder:e.$t("webImport.url_placeholder"),class:"mt-2 px-2 py-4"},{default:ii((()=>[oo(pt(e.$t("webImport.submit")),1)])),_:1},8,["label","placeholder"])])),_:1},8,["form"])}}}),gB=Si({inheritAttrs:!1}),yB=Si({...gB,props:{name:sI(),label:sI(),placeholder:sI(),modelValue:sI(),error:sI()},emits:["update:modelValue"],setup(e,{expose:t}){const n=_r(null),r=_r(null);return t({...zI(n),getRootElement:()=>r.value}),(t,i)=>{const a=Pa("HeadlessInputLabel"),o=Pa("HeadlessInputTextArea"),s=Pa("HeadlessInputError"),l=Pa("HeadlessInput");return Ha(),Ya(l,{ref_key:"$root",ref:n,name:e.name,placeholder:e.placeholder,"model-value":e.modelValue,error:e.error,"onUpdate:modelValue":i[0]||(i[0]=e=>t.$emit("update:modelValue",e))},{default:ii((({hasErrors:n})=>[ro("div",{ref_key:"$wrapper",ref:r,class:"relative w-full"},[e.label?(Ha(),Ya(a,{key:0,class:"sr-only"},{default:ii((()=>[oo(pt(e.label),1)])),_:1})):lo("",!0),io(o,fo({class:["w-full px-1.5 py-2.5 rounded border focus:outline-none hover:border-primary-500 focus:border-primary-500 focus:shadow-primary-500",{"border-red-500":n}]},t.$attrs),null,16,["class"]),io(s,{class:"mt-1 text-sm text-red-700 opacity-75"})],512)])),_:1},8,["name","placeholder","model-value","error"])}}}),bB={class:"relative bg-gray-200 rounded"},wB={class:"overflow-auto",style:{"max-height":"250px"}},_B=["textContent"],xB=["aria-label","title"],kB=Si({props:{text:oI(),copyLabel:sI(),successMessage:sI()},setup:e=>(t,n)=>{var r,i;const a=OR;return Ha(),Ka("div",bB,[ro("div",wB,[ro("pre",{class:"flex p-2 items-center text-gray-700 box-content min-h-clickable align-center",textContent:pt(e.text)},null,8,_B)]),ro("button",{type:"button","aria-label":null!=(r=e.copyLabel)?r:t.$t("ui.copyToClipboard"),title:null!=(i=e.copyLabel)?i:t.$t("ui.copyToClipboard"),class:"flex opacity-75 absolute top-2 right-2 justify-center items-center bg-white rounded w-clickable h-clickable hover:bg-gray-100 hover:opacity-100",onClick:n[0]||(n[0]=t=>async function(){var t;await navigator.clipboard.writeText(e.text),fC.showSnackbar(null!=(t=e.successMessage)?t:hR("ui.copiedToClipboard"))}())},[io(a,{class:"w-6 h-6","aria-hidden":"true"})],8,xB)])}}),AB=Si({props:{url:oI()},setup(e){const t=R$({html:{type:S$.String,rules:"required"}});return(n,r)=>{const i=rR,a=kB,o=yB,s=GI,l=l$,u=cS;return Ha(),Ya(u,{title:n.$t("webImportHtml.title")},{default:ii((({close:r})=>[io(l,{class:"flex flex-col mt-2 space-y-2",form:Ar(t),onSubmit:e=>r(Ar(t).data())},{default:ii((()=>[io(i,{text:n.$t("webImportHtml.info")},null,8,["text"]),io(a,{text:`view-source:${e.url}`,class:"max-w-prose"},null,8,["text"]),io(o,{name:"html",label:n.$t("webImportHtml.label"),placeholder:n.$t("webImportHtml.placeholder")},null,8,["label","placeholder"]),io(s,{type:"submit",class:"py-2 font-medium text-md mt-4",alignment:"center"},{default:ii((()=>[oo(pt(n.$t("webImportHtml.submit")),1)])),_:1})])),_:2},1032,["form","onSubmit"])])),_:1},8,["title"])}}}),EB=Si({props:{error:aI()},setup(e){const t=XE("web-import-modal","<WebImportModalError> must be a child of a <WebImportModal>"),{form:n,submit:r}=mB(t);return(i,a)=>{const o=rR,s=pB,l=GI,u=l$;return Ha(),Ya(u,{form:Ar(n),class:"flex flex-col mt-2",onSubmit:a[0]||(a[0]=e=>Ar(t).retry((()=>Ar(r)())))},{default:ii((()=>[io(o,{text:i.$t("webImport.error_info",{url:Ar(n).url}),actions:{"view-error-details":()=>i.$errors.inspect(e.error)}},null,8,["text","actions"]),io(s,{form:Ar(n),class:"mt-4"},null,8,["form"]),io(l,{type:"submit",class:"py-2 font-medium text-md mt-4",alignment:"center"},{default:ii((()=>[oo(pt(i.$t("webImport.error_submit")),1)])),_:1}),io(o,{class:"self-center text-sm mt-1",text:i.$t("webImport.error_html",{url:Ar(n).url}),actions:{"open-html-form":()=>async function(){const e=await fC.openModal(AB,{url:n.url}),r=await e.beforeClose;if(!r)return await e.afterClose,void t.close();await t.retry((()=>t.parseWebsite(n.url,r.html)))}()}},null,8,["text","actions"])])),_:1},8,["form"])}}}),IB={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},SB=[ro("path",{fill:"currentColor",d:"m8.5 13.5l2.5 3l3.5-4.5l4.5 6H5m16 1V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2Z"},null,-1)];const RB={name:"mdi-image",render:function(e,t){return Ha(),Ka("svg",IB,SB)}},CB={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},OB=[ro("path",{fill:"currentColor",d:"M5 3c-1.1 0-2 .9-2 2v14a2 2 0 0 0 2 2h9.09c-.06-.33-.09-.66-.09-1c0-.68.12-1.36.35-2H5l3.5-4.5l2.5 3l3.5-4.5l2.23 2.97c.97-.63 2.11-.97 3.27-.97c.34 0 .67.03 1 .09V5a2 2 0 0 0-2-2H5m11.47 14.88L18.59 20l-2.12 2.12l1.41 1.42L20 21.41l2.12 2.13l1.42-1.42L21.41 20l2.13-2.12l-1.42-1.42L20 18.59l-2.12-2.12l-1.42 1.41Z"},null,-1)];const DB={name:"mdi-image-remove",render:function(e,t){return Ha(),Ka("svg",CB,OB)}},jB=["src","alt"],TB=Si({props:{class:sI(""),recipe:tI(),url:sI()},setup(e){let t=_r(!1),n=_r();const r=Lo((()=>{var t,n;return null!=(n=e.url)?n:null==(t=e.recipe)?void 0:t.imageUrl})),i=Lo((()=>e.class.includes("absolute")?e.class:`${e.class} relative`)),a=Lo((()=>e.recipe?De(e.recipe.name.length).reduce(((t,n)=>t+e.recipe.name.charCodeAt(n)),0)%255:null));return fi(n,(()=>t.value=!1)),di((async()=>n.value=r.value?await async function(e){var t,n,r;const i=D(null!=(t=Wj.remoteCookbookUrl)?t:Wj.localCookbookUrl),a=async()=>{try{const t=await gj.fetch(e);return 200!==t.status?null:(await bw.store(e,t),bw.get(e))}catch(t){return null}};return null!=(r=null!=(n=e.startsWith(i)||e.startsWith("tmp://")?null:e)?n:await(async()=>{const t=await MC.get(e);return t&&URL.createObjectURL(t.blob)})())?r:await(async()=>{var t;const n=null!=(t=await bw.get(e))?t:await a(),r=await(null==n?void 0:n.blob());return r&&URL.createObjectURL(r)})()}(r.value):void 0)),(r,o)=>{const s=DB,l=RB;return Ha(),Ka("div",{class:ut(`flex justify-center items-center bg-gray-200 ${i.value}`),style:at(a.value?`background: hsl(${a.value} 40% 80%)`:"")},[t.value?(Ha(),Ya(s,{key:0,class:"w-full h-2/5 opacity-25","aria-hidden":"true"})):(Ha(),Ya(l,{key:1,class:"w-full h-2/5 opacity-25","aria-hidden":"true"})),n.value&&!t.value?(Ha(),Ka("img",{key:2,src:n.value,class:"absolute inset-0 object-cover w-full h-full",alt:e.recipe?r.$t("recipes.imageA11y",{recipe:e.recipe.name}):"",onError:o[0]||(o[0]=e=>t.value=!0)},null,40,jB)):lo("",!0)],6)}}}),PB={class:"relative"},MB={class:"p-4 h-40 prose relative"},LB={key:0,class:"mt-1"},$B=Si({props:{recipe:aI(),wrapperClasses:sI("bg-gray-100"),coverClasses:sI("from-gray-100")},setup:e=>(t,n)=>{const r=TB;return Ha(),Ka("div",{class:ut(["flex flex-col overflow-hidden rounded-lg border-gray-200 shadow md:flex-row",e.wrapperClasses])},[ro("div",PB,[io(r,{url:e.recipe.imageUrl,class:"w-full h-20 md:w-40 md:h-40"},null,8,["url"]),go(t.$slots,"image")]),ro("div",MB,[go(t.$slots,"name",{},(()=>[ro("h3",null,pt(e.recipe.name),1)])),e.recipe.description?(Ha(),Ka("div",LB,[go(t.$slots,"description",{},(()=>[ro("p",null,pt(e.recipe.description),1)]))])):lo("",!0),ro("div",{class:ut(["absolute w-full bottom-0 bg-gradient-to-t to-transparent h-12 pointer-events-none",e.coverClasses])},null,2)])],2)}}),NB={class:"bg-primary-300 shadow text-primary-700 rounded-full p-2 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-10"},BB=Si({props:{recipe:aI()},setup:e=>(t,n)=>{const r=X$,i=UE,a=FE,o=$B,s=BE;return Ha(),Ya(s,{class:"cursor-pointer focus:outline-none",value:e.recipe},{default:ii((({active:t,checked:n})=>[io(o,{class:ut({"ring-2 ring-offset-2 ring-primary-600":t}),"wrapper-classes":n?"bg-primary-gray-300":"bg-gray-100","cover-classes":n?"from-primary-gray-300":"from-gray-100",recipe:e.recipe},vo({name:ii((()=>[io(i,{as:"h3"},{default:ii((()=>[oo(pt(e.recipe.name),1)])),_:1})])),description:ii((()=>[io(a,{as:"p"},{default:ii((()=>[oo(pt(e.recipe.description),1)])),_:1})])),_:2},[n?{name:"image",fn:ii((()=>[ro("div",NB,[io(r,{class:"w-10 h-10","aria-hidden":"true"})])]))}:void 0]),1032,["class","wrapper-classes","cover-classes","recipe"])])),_:1},8,["value"])}}),UB=Si({props:{recipes:nI(),metadata:aI()},setup(e){const t=XE("web-import-modal","<WebImportModalResults> must be a child of a <WebImportModal>"),n=R$(),r=_r(null),i=Lo((()=>new Qj({name:e.metadata.title,description:e.metadata.description,imageUrls:e.metadata.imageUrls,externalUrls:[e.metadata.url]})));return(a,o)=>{const s=rR,l=UE,u=BB,c=$E,d=$B,p=GI,f=l$;return Ha(),Ya(f,{form:Ar(n),class:"flex flex-col",onSubmit:o[1]||(o[1]=n=>async function(){var n,a;t.close(),await VC.push({name:"recipes.create",state:{tmpRecipe:Wj.saveTmpRecipe(null!=(a=null!=(n=r.value)?n:e.recipes[0])?a:i.value)}})}())},{default:ii((()=>[e.recipes.length>1?(Ha(),Ka(Ua,{key:0},[io(s,{text:a.$t("webImport.success_infoMultiple")},null,8,["text"]),io(c,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=e=>r.value=e)},{default:ii((()=>[io(l,{class:"sr-only"},{default:ii((()=>[oo(pt(a.$t("webImport.success_recipes")),1)])),_:1}),(Ha(!0),Ka(Ua,null,mo(e.recipes,((e,t)=>(Ha(),Ya(u,{key:t,recipe:e,class:"mt-3"},null,8,["recipe"])))),128))])),_:1},8,["modelValue"])],64)):1===e.recipes.length?(Ha(),Ka(Ua,{key:1},[io(s,{text:a.$t("webImport.success_infoSingle")},null,8,["text"]),io(d,{class:"mt-4",recipe:e.recipes[0]},null,8,["recipe"])],64)):(Ha(),Ka(Ua,{key:2},[io(s,{text:a.$t("webImport.success_infoFallback")},null,8,["text"]),io(d,{class:"mt-4",recipe:i.value},null,8,["recipe"])],64)),io(p,{type:"submit",class:"self-end mt-4 py-3 px-6 text-md font-medium",disabled:e.recipes.length>1&&!r.value},{default:ii((()=>[oo(pt(a.$t("webImport.success_import")),1)])),_:1},8,["disabled"])])),_:1},8,["form"])}}}),FB={width:"1.2em",height:"1.2em",viewBox:"0 0 105 105",fill:"currentColor"},zB=[so('<circle cx="12.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="0s" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="12.5" cy="52.5" r="12.5" fill-opacity=".5"><animate attributeName="fill-opacity" begin="100ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="300ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="52.5" r="12.5"><animate attributeName="fill-opacity" begin="600ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="12.5" r="12.5"><animate attributeName="fill-opacity" begin="800ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="52.5" r="12.5"><animate attributeName="fill-opacity" begin="400ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="12.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="700ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="52.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="500ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="92.5" cy="92.5" r="12.5"><animate attributeName="fill-opacity" begin="200ms" dur="1s" values="1;.2;1" calcMode="linear" repeatCount="indefinite"></animate></circle>',9)];const qB={name:"app-scanning",render:function(e,t){return Ha(),Ka("svg",FB,zB)}},VB={class:"flex flex-col flex-grow w-full h-full justify-center items-center p-4 space-y-4"},QB={class:"text-xl text-gray-700"};const HB=sR({},[["render",function(e,t){const n=qB;return Ha(),Ka("div",VB,[io(n,{class:"w-12 h-12 text-primary-500"}),ro("p",QB,pt(e.$t("webImport.scanning")),1)])}]]),GB={"http://schema.org":"https://schema.org/","http://schema.org/":"https://schema.org/","https://schema.org":"https://schema.org/"};function WB(e){JB(e),function(e){if(e.cookTime||e.prepTime||!e.totalTime)return;e.cookTime=e.totalTime}(e),function(e){if("string"==typeof e.recipeInstructions)return void(e.recipeInstructions=function(e){const t=e.matchAll(/<li[^>]*?>([\S\s]*?)<\/li>/gim),n=$(t).map((([,e])=>e));return n.length>0?n.map(((e,t)=>({"@context":{"@vocab":"https://schema.org/"},"@type":"HowToStep",text:e,position:t+1}))).toArray():{"@context":{"@vocab":"https://schema.org/"},"@type":"HowToStep",text:e,position:1}}(e.recipeInstructions));if(Array.isArray(e.recipeInstructions))e.recipeInstructions=e.recipeInstructions.map(((e,t)=>"object"==typeof e?{position:t+1,...e}:{"@context":{"@vocab":"https://schema.org/"},"@type":"HowToStep",text:e,position:t+1}))}(e),function(e){if(!e.recipeIngredient)return;e.recipeIngredient=[e.recipeIngredient].flat().map((e=>e.trim()))}(e),KB(e)}function JB(e){var t;for(const[n,r]of Object.entries(e))"@context"!==n||"string"!=typeof r?B(r)&&JB(r):e["@context"]={"@vocab":null!=(t=GB[r])?t:r}}function KB(e){if("string"!=typeof e.image||!e.image.startsWith("http:http"))return Array.isArray(e.image)?(e.image=e.image[0],void KB(e)):void("object"!=typeof e.image||(e.image=e.image.url));e.image=e.image.slice(5)}async function YB(e,t){const n=Te(t,/<script[^>]+type="application\/ld\+json"[^>]*>([\s\S]*?)<\/script>/gim),r=await Promise.all($(n).map((([,e])=>JSON.parse(e))).flat().map((e=>{if(e)return WB(e),j(Qj.newFromJsonLD(e))})));return E(r).map((t=>T(t,(()=>t.setAttribute("externalUrls",[e])))))}function ZB(e,t){var n,r,i,a,o,s,l,u;const c=null!=(r=null==(n=t.match(/<head[^>]*>([\s\S]*?)<\/head>/im))?void 0:n[1])?r:"",d=null!=(a=null!=(i=c.match(/<meta[^>]+name="title"[^>]+content="([^"]+)"[^>]*\/?>/im))?i:c.match(/<meta[^>]+content="([^"]+)"[^>]+name="title"[^>]*\/?>/im))?a:c.match(/<title[^>]*>([\s\S]*?)<\/title>/im),p=null!=(o=c.match(/<meta[^>]+name="description"[^>]+content="([^"]+)"[^>]*\/?>/im))?o:c.match(/<meta[^>]+content="([^"]+)"[^>]+name="description"[^>]*\/?>/im),f=null!=(s=c.match(/<meta[^>]+name="(?:og:image|twitter:image)"[^>]+content="([^"]+)"[^>]*\/?>/im))?s:c.match(/<meta[^>]+content="([^"]+)"[^>]+name="(?:og:image|twitter:image)"[^>]*\/?>/im);return L({url:e,title:null!=(l=null==d?void 0:d[1])?l:hR("webImport.defaultWebsiteTitle"),description:null!=(u=null==p?void 0:p[1])?u:null,imageUrls:E([null==f?void 0:f[1]])})}const XB=Si({props:{url:sI()},setup(e){var t;let n=_r(!1),r=_r(),i=_r(null!=(t=e.url)?t:void 0),a=_r(),o=_r();const s=_r(null),l=_r(null),u=Lo((()=>{if(!n.value)return a.value?hR("webImport.success_title"):r.value?hR("webImport.error_title"):hR("webImport.title")}));return $i((async()=>{await Vr(),e.url&&l.value&&l.value.submit()})),ui("web-import-modal",{get websiteUrl(){return i.value},async scan(e){await Ue({milliseconds:200}),n.value=!0;try{await e}finally{n.value=!1}},async parseWebsite(e,t){[o.value,a.value]=await Promise.all([ZB(e,t),YB(e,t)])},async retry(e){r.value=void 0,await e()},failed(e,t){i.value=e,r.value=t},close:()=>{var e;return null==(e=s.value)?void 0:e.close()}}),(e,t)=>{const i=HB,c=UB,d=EB,p=vB,f=cS;return Ha(),Ya(f,{ref_key:"$root",ref:s,title:u.value,cancellable:!n.value},{default:ii((()=>[n.value?(Ha(),Ya(i,{key:0})):o.value&&a.value?(Ha(),Ya(c,{key:1,metadata:o.value,recipes:a.value},null,8,["metadata","recipes"])):r.value?(Ha(),Ya(d,{key:2,error:r.value},null,8,["error"])):(Ha(),Ya(p,{key:3,ref_key:"$start",ref:l},null,512))])),_:1},8,["title","cancellable"])}}}),eU={class:"flex flex-col space-y-4 w-full md:space-x-4 md:space-y-0 md:flex-row md:w-auto"},tU={class:"ml-2 text-center text-lg font-medium md:ml-0 md:mt-2"},nU={class:"ml-2 text-center text-lg font-medium md:ml-0 md:mt-2"},rU={class:"ml-2 text-center text-lg font-medium md:ml-0 md:mt-2"},iU=Si({emits:["optionSelected"],setup(e){const t=Lo((()=>fC.isMobile?{}:{min:200,max:350}));return(e,n)=>{const r=sB,i=Pa("HeadlessButton"),a=iB,o=YN,s=WN,l=$a("initial-focus"),u=$a("wobbly-border");return Ha(),Ka("div",eU,[va((Ha(),Ya(i,{class:"flex flex-row items-center justify-center bg-gray-300 text-gray-700 px-2 py-3 w-full hover:bg-primary-500 hover:text-white focus:bg-primary-500 focus:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 active:bg-primary-700 active:text-white md:flex-col md:h-40 md:w-40 md:px-0 md:py-0",onClick:n[0]||(n[0]=t=>(e.$ui.openModal(XB),e.$emit("optionSelected")))},{default:ii((()=>[io(r,{class:"w-8 h-8 md:w-12 md:h-12","aria-hidden":"true"}),ro("span",tU,pt(e.$t("recipes.new.fromTheWeb")),1)])),_:1})),[[l,!e.$ui.isMobile],[u,t.value]]),va((Ha(),Ya(i,{class:"flex flex-row items-center justify-center bg-gray-300 text-gray-700 px-2 py-3 w-full hover:bg-primary-500 hover:text-white focus:bg-primary-500 focus:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 active:bg-primary-700 active:text-white md:flex-col md:h-40 md:w-40 md:px-0 md:py-0",route:"recipes.create",onClick:n[1]||(n[1]=t=>e.$emit("optionSelected"))},{default:ii((()=>[io(a,{class:"w-8 h-8 md:w-12 md:h-12","aria-hidden":"true"}),ro("span",nU,pt(e.$t("recipes.new.fromScratch")),1)])),_:1})),[[u,t.value]]),va((Ha(),Ya(s,{accept:"application/json, application/ld+json",parse:"json",class:"flex flex-row items-center justify-center bg-gray-300 text-gray-700 px-2 py-3 w-full focus-within:bg-primary-500 focus-within:text-white focus-within:ring-2 focus-within:ring-primary-500 focus-within:ring-offset-2 hover:cursor-pointer hover:bg-primary-500 hover:text-white active:bg-primary-700 active:text-white md:flex-col md:h-40 md:w-40 md:px-0 md:py-0",onError:n[2]||(n[2]=t=>e.$errors.report(t)),onSuccess:n[3]||(n[3]=t=>(async function(e){const t=await Qj.createFromJsonLD(e);await VC.push({name:"recipes.show",params:{recipe:t.slug}}),await qC.syncIfOnline(t)}(t),e.$emit("optionSelected")))},{default:ii((()=>[io(o,{class:"w-8 h-8 md:w-12 md:h-12","aria-hidden":"true"}),ro("span",rU,pt(e.$t("recipes.new.fromJsonLD")),1)])),_:1})),[[u,t.value]])])}}});const aU=sR({},[["render",function(e,t){const n=iU,r=cS;return Ha(),Ya(r,{title:e.$t("recipes.new.title")},{default:ii((({close:e})=>[io(n,{class:"mt-2",onOptionSelected:t=>e()},null,8,["onOptionSelected"])])),_:1},8,["title"])}]]),oU=Si({setup:e=>(e,t)=>{const n=VN,r=Pa("HeadlessButton");return Ha(),Ya(r,{class:"fixed bottom-edge right-edge z-10 flex justify-center items-center text-white rounded-full shadow-lg bg-primary-600 w-16 h-16 hover:bg-primary-700 active:bg-primary-700 focus:ring-2 focus:ring-offset-2 focus:ring-primary-600","aria-label":e.$t("home.recipes.create"),title:e.$t("home.recipes.create"),onClick:t[0]||(t[0]=t=>e.$ui.openModal(aU))},{default:ii((()=>[io(n,{class:"w-8 h-8","aria-hidden":"true"})])),_:1},8,["aria-label","title"])}});async function sU(e,t,n,r){const i=document.createElement("div"),a=FI(t,".recipe-card--title-wrapper"),o=FI(t,".recipe-card--title-text"),s=FI(t,".recipe-card--title-background"),l=FI(n,".recipe-page--wrapper"),u=FI(n,".recipe-page--image"),c=t.getBoundingClientRect(),d=u.getBoundingClientRect(),p=r.getBoundingClientRect();await BI({duration:500,fill:"forwards"},[{element:t,before:{addClasses:"w-full h-full",removeClasses:"aspect-[5/2] hover:opacity-75 rounded-lg",prepend:i},classes:{borderRadius:["rounded-lg","rounded-none"]}},{element:e,before:{addClasses:"z-10"},boundingRects:[c,d]},{element:i,before:{addClasses:"absolute z-10 inset-x-0 top-0 bg-gradient-to-b from-dark-overlay to-transparent"},styles:{opacity:[0,1],height:[`${fC.headerHeight*c.height/d.height}px`,`${fC.headerHeight}px`]}},{element:a,before:{removeClasses:"p-2"},classes:{paddingTop:["p-2","p-4"],paddingRight:["p-2","p-4"],paddingBottom:["p-2","p-4"]},styles:{paddingLeft:[JE.css("spacing.2"),`${p.left}px`],paddingRight:[JE.css("spacing.2"),`${window.innerWidth-p.right}px`]}},{element:o,before:{addClasses:"font-semibold"},classes:{textShadow:["text-shadow-transparent","text-shadow"],fontSize:["text-lg",fC.isMobile?"text-2xl":"text-4xl"]}},{element:s,styles:{opacity:[1,0]}},{element:l,before:{addClasses:"!z-20"},after:{removeClasses:"!z-20"}}])}const lU=async(e,t)=>{(null==t?void 0:t.config.name)?await async function(e,t){e.style.opacity="0",await t,e.removeAttribute("style")}(e,lM.waitElementsGone(t.config.name,t.config.id)):VC.previousRouteWas("recipes.show")||await tS(e,700)},uU=async e=>{VC.currentRouteIs("recipes.show")?await lM.waitElementsReady("recipe-details"):VC.currentRouteIs("viewer")?await lM.waitElementsReady("viewer-recipe"):await nS(e,700)},cU=async(e,t,{element:n})=>{const r=t.getBoundingClientRect(),i=n.getBoundingClientRect();await NI(e,{duration:700,boundingRects:[r,i]})},dU=async(e,t,{element:n})=>{const r=FI(n,".viewer-recipe--header-title");await sU(e,t,n,r),await lM.waitElementsReady("viewer-recipe")},pU=async(e,t,{element:n})=>{const r=FI(n,".recipe-details--header-title");await sU(e,t,n,r),await lM.waitElementsReady("recipe-details")},fU=["data-recipe-url"],hU={class:"z-10 text-lg font-bold text-white"},mU=ro("span",{"aria-hidden":"true",class:"absolute inset-0"},null,-1),vU={key:0,class:"absolute inset-x-0 bottom-0 p-2 recipe-card--title-wrapper"},gU=ro("div",{class:"absolute inset-0 bg-gradient-to-t to-transparent from-dark-overlay recipe-card--title-background"},null,-1),yU={class:"relative recipe-card--title-text"},bU=Si({props:{recipe:aI()},setup(e){let t=_r(!1);function n(e){t.value=e}return(r,i)=>{const a=TB,o=Pa("router-link"),s=$a("focus-visible"),l=$a("element-transitions");return va((Ha(),Ka("li",{"data-recipe-url":e.recipe.url,class:ut(["flex overflow-hidden relative flex-col justify-end rounded-lg shadow aspect-[5/2]","hover:opacity-75",t.value&&"ring-2 ring-offset-2 ring-primary-500"])},[io(a,{recipe:e.recipe,class:"absolute inset-0"},null,8,["recipe"]),ro("h2",hU,[va((Ha(),Ya(o,{class:"block w-full h-clickable focus-visible:outline-none",to:r.$router.currentRouteIs("viewer")?{name:"viewer",query:{url:e.recipe.url}}:{name:"recipes.show",params:{recipe:e.recipe.slug}}},{default:ii((()=>[mU,e.recipe.name?(Ha(),Ka("div",vU,[gU,ro("span",yU,pt(e.recipe.name),1)])):lo("",!0)])),_:1},8,["to"])),[[s,n]])])],10,fU)),[[l,{name:"recipe-card",id:e.recipe.url,transitions:{enter:Ar(lU),leave:Ar(uU),"recipe-card":Ar(cU),"recipe-details":Ar(pU),"viewer-recipe":Ar(dU)}}]])}}}),wU=Si({props:{recipes:nI()},setup(e){const t=_r();return Ui((()=>{if(!t.value)return;const e=t.value.getBoundingClientRect();t.value.style.width=`${e.width}px`,t.value.style.height=`${e.height}px`})),(t,n)=>{const r=bU;return Ha(),Ya(Is,{tag:"ul","enter-active-class":t.$ui.animations?"transition-all duration-300":"","enter-from-class":"opacity-0","leave-active-class":t.$ui.animations?"!absolute transition-all duration-300":"","leave-to-class":"opacity-0","move-class":t.$ui.animations?"transition-all duration-300":"",class:"grid grid-cols-1 gap-3 my-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",onBeforeLeave:n[0]||(n[0]=e=>t.$elementTransitions.freezeInPlace(e))},{default:ii((()=>[(Ha(!0),Ka(Ua,null,mo(e.recipes,(e=>(Ha(),Ya(r,{key:e.url,recipe:e},null,8,["recipe"])))),128))])),_:1},8,["enter-active-class","leave-active-class","move-class"])}}}),_U={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},xU={fill:"none"},kU=["clip-path"],AU=[ro("path",{"fill-rule":"evenodd",d:"M4.475 4.475a5.5 5.5 0 1 0 7.778 7.778a5.5 5.5 0 0 0-7.778-7.778Zm6.364 6.364a3.5 3.5 0 1 1-4.95-4.95a3.5 3.5 0 0 1 4.95 4.95Z","clip-rule":"evenodd"},null,-1),ro("path",{d:"M11.192 13.314a1.5 1.5 0 1 1 2.122-2.122l3.535 3.536a1.5 1.5 0 1 1-2.121 2.121l-3.536-3.535Z"},null,-1)],EU=["id"],IU=[ro("path",{fill:"#fff",d:"M0 0h20v20H0z"},null,-1)];const SU={name:"pepicons-loop",render:function(e,t){return Ha(),Ka("svg",_U,[ro("g",xU,[ro("g",{fill:"currentColor","clip-path":"url(#"+e.idMap["svgIDa"]+")"},AU,8,kU),ro("defs",null,[ro("clipPath",{id:e.idMap["svgIDa"]},IU,8,EU)])])])},data:()=>({idMap:{svgIDa:"uicons-"+Math.random().toString(36).substr(2,10)}})},RU={key:0,class:"absolute right-0 overflow-hidden"},CU=Si({props:{modelValue:oI(),label:sI("Search"),placeholder:sI("Search...")},emits:["update:modelValue","focus","blur"],setup(e,{emit:t}){let n=_r(!1);const r=_r(null),i=_r(null),a=_r(null);async function o(){var e;n.value=!0,await Vr(),null==(e=i.value)||e.focus()}async function s(){var e;n.value=!1,t("update:modelValue",""),t("blur"),await Vr(),null==(e=i.value)||e.blur()}function l(){n.value=!!e.modelValue,0===e.modelValue.trim().length?s():t("blur")}return(t,u)=>{const c=WL,d=SU,p=GI;return Ha(),Ka("div",{ref_key:"$root",ref:r,class:"relative",role:"search"},[io(ss,{duration:300,onBeforeEnter:u[2]||(u[2]=e=>async function(e){var t,n,o;const s=null==(n=null==(t=a.value)?void 0:t.getRootElement())?void 0:n.clientHeight;r.value&&(r.value.style.height=`${s}px`),e.classList.add("opacity-0"),await Vr();const l=null==(o=i.value)?void 0:o.minWidth;await Promise.all([NI(e,{duration:150,after:{removeClasses:"opacity-0"},styles:{opacity:["0","1"]}}),NI(e,{duration:300,styles:{width:["0",`${l}px`]}})])}(e)),onBeforeLeave:u[3]||(u[3]=e=>async function(e){await Promise.all([NI(e,{duration:300,styles:{width:[`${e.clientWidth}px`,"0"]}}),$I(150).then((()=>NI(e,{duration:150,styles:{opacity:["1","0"]}})))])}(e))},{default:ii((()=>[n.value?(Ha(),Ka("div",RU,[io(c,{ref_key:"$input",ref:i,type:"search",role:"searchbox",placeholder:e.placeholder,"model-value":e.modelValue,onBlur:l,onFocus:u[0]||(u[0]=e=>t.$emit("focus")),onKeyup:Ns(Ls(s,["prevent"]),["esc"]),"onUpdate:modelValue":u[1]||(u[1]=e=>t.$emit("update:modelValue",e))},null,8,["placeholder","model-value","onKeyup"])])):lo("",!0)])),_:1}),io(ss,{duration:300,onBeforeEnter:u[4]||(u[4]=e=>async function(e){e.classList.add("opacity-0"),await $I(150),await NI(e,{duration:150,after:{removeClasses:"opacity-0"},styles:{opacity:["0","1"]}})}(e)),onBeforeLeave:u[5]||(u[5]=e=>async function(e){await NI(e,{duration:150,after:{addClasses:"opacity-0"},styles:{opacity:["1","0"]}})}(e))},{default:ii((()=>[n.value?lo("",!0):(Ha(),Ya(p,{key:0,ref_key:"$button",ref:a,clear:"","aria-label":e.label,title:e.label,onClick:o},{default:ii((()=>[io(d,{class:"w-7 h-7","aria-hidden":"true"})])),_:1},8,["aria-label","title"]))])),_:1})],512)}}}),OU={id:"home-title",class:"my-2 text-xl font-semibold"};const DU=sR({},[["render",function(e,t){return Ha(),Ka("h1",OU,[go(e.$slots,"default")])}]]),jU={class:"flex flex-col flex-grow w-full"},TU={class:"flex justify-between items-center relative"},PU=ro("div",{class:"flex-grow"},null,-1),MU={class:"ml-1 font-semibold uppercase text-xs tracking-wider"},LU={key:0,class:"absolute top-24 bottom-0 inset-x-0 flex-grow items-center justify-center flex"},$U={class:"prose"},NU=Si({setup(e){let t=_r(""),n=_r(!1);const r=function(){const e=[];for(let t=0;;t++){const n=`home.recipes.title.${t}`;if(!fR.hasMessage(n))break;e.push(hR(n))}return Xe(e)||""}(),i=Lo((()=>Wj.recipes.map((e=>({recipe:e,searchableText:_e(e.name).replaceAll("-","")}))))),a=Lo((()=>t.value.trim())),o=Lo((()=>{const e=_e(a.value).replaceAll("-","");return(e.length?i.value.filter((({searchableText:t})=>t.includes(e))):i.value).map((({recipe:e})=>e)).toArray()}));return(e,i)=>{const s=DU,l=VN,u=GI,c=CU,d=wU,p=rR,f=oU;return Ha(),Ka("div",jU,[ro("div",TU,[io(s,null,{default:ii((()=>[oo(pt(Ar(r)),1)])),_:1}),PU,io(ss,{"enter-active-class":e.$ui.animations?"transition duration-300":"","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":e.$ui.animations?"transition duration-300":"","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:ii((()=>[!e.$ui.isDesktop||n.value||t.value?lo("",!0):(Ha(),Ya(u,{key:0,class:"mr-14 h-9",onClick:i[0]||(i[0]=t=>e.$ui.openModal(aU))},{default:ii((()=>[io(l,{class:"w-5 h-5","aria-hidden":"true"}),ro("span",MU,pt(e.$t("home.recipes.create")),1)])),_:1}))])),_:1},8,["enter-active-class","leave-active-class"]),io(c,{modelValue:t.value,"onUpdate:modelValue":i[1]||(i[1]=e=>t.value=e),class:"!absolute right-0 top-1/2 -translate-y-1/2",label:e.$t("home.recipes.search_label"),placeholder:e.$t("home.recipes.search_placeholder"),onFocus:i[2]||(i[2]=e=>n.value=!0),onBlur:i[3]||(i[3]=e=>n.value=!1)},null,8,["modelValue","label","placeholder"])]),io(d,{recipes:o.value,class:"w-full"},null,8,["recipes"]),io(ss,{"enter-to-class":"opacity-100","enter-active-class":e.$ui.animations?"transition-opacity duration-500":"","enter-from-class":"opacity-0","leave-to-class":"opacity-0","leave-active-class":e.$ui.animations?"transition-opacity duration-500":"","leave-from-class":"opacity-100"},{default:ii((()=>[0===o.value.length?(Ha(),Ka("div",LU,[ro("div",$U,[io(p,{class:"text-2xl font-medium tracking-wide leading-snug text-center",text:e.$t("home.recipes.empty",{search:a.value})},null,8,["text"])])])):lo("",!0)])),_:1},8,["enter-active-class","leave-active-class"]),e.$ui.isMobile?(Ha(),Ya(f,{key:0})):lo("",!0)])}}}),BU={class:"flex flex-col w-full justify-center items-center mt-16"};const UU=sR({},[["render",function(e,t){const n=DU,r=rR,i=iU;return Ha(),Ka("div",BU,[io(n,null,{default:ii((()=>[oo(pt(e.$t("home.createRecipe.title")),1)])),_:1}),io(r,{text:e.$t("home.createRecipe.message")},null,8,["text"]),io(i,{class:"mt-8"})])}]]),FU={class:"space-y-3"},zU={class:"flex flex-row items-center w-full"},qU={class:"flex flex-row items-center w-full"},VU={class:"flex flex-row items-center self-end mt-4 space-x-3"},QU=Si({setup(e){var t;let n=_r(!1);const r=R$({name:{type:S$.String,rules:"required",default:"Cookbook"},storageUrl:{type:S$.String,rules:"required",default:null==(t=gj.user)?void 0:t.storageUrls[0]}}),i=_r(null),a=_r(null),o=_r(null),s=Lo((()=>xe(r.storageUrl,_e(r.name))));async function l(e){try{n.value=!0,e?await Wj.initializeRemoteUsing(e):await Wj.initializeRemote(r.name,r.storageUrl),await qC.sync()}catch(t){if(t instanceof CookbookExistsError)return void async function(e){if(!(await fC.confirm({title:hR("home.createCookbook.exists"),message:hR("home.createCookbook.exists_info",{url:e.url}),acceptText:hR("home.createCookbook.exists_accept")})))return;l(e)}(t.cookbook);throw t}finally{n.value=!1}}return(e,t)=>{const u=DU,c=rR,d=p$,p=HL,f=_R,h=GI,m=w$,v=l$;return Ha(),Ya(v,{class:"flex flex-col w-full max-w-prose mx-auto justify-center items-center mt-16",form:Ar(r),onSubmit:t[2]||(t[2]=e=>l())},{default:ii((()=>[io(u,null,{default:ii((()=>[oo(pt(e.$t("home.createCookbook.title")),1)])),_:1}),n.value?(Ha(),Ka(Ua,{key:1},[io(m,{class:"h-8 w-8 animate-spin text-primary-700 mt-2","aria-hidden":"true"}),io(c,{text:e.$t("home.createCookbook.processing",{url:s.value}),class:"text-center text-lg text-gray-700 mt-4"},null,8,["text"])],64)):(Ha(),Ka(Ua,{key:0},[io(c,{text:e.$t("home.createCookbook.message"),class:"w-full"},null,8,["text"]),io(p,{class:"w-full -ml-4 mt-2",summary:e.$t("home.createCookbook.advancedOptions"),onOpen:t[0]||(t[0]=e=>{var t;return async function(){const e=[a.value,o.value].filter((e=>!!e)),t=e.reduce(((e,t)=>Math.max(e,t.clientWidth)),0);for(const n of e)n.style.width=`${t}px`}(),null==(t=i.value)?void 0:t.focus()})},{default:ii((()=>[ro("div",FU,[ro("label",zU,[ro("span",{ref_key:"$nameLabel",ref:a,class:"font-medium"},pt(e.$t("home.createCookbook.nameLabel")),513),io(d,{ref_key:"$name",ref:i,name:"name",class:"ml-2 flex-grow"},null,512)]),ro("label",qU,[ro("span",{ref_key:"$storageUrlLabel",ref:o,class:"font-medium"},pt(e.$t("home.createCookbook.storageUrlLabel")),513),io(d,{name:"storageUrl",class:"ml-2 flex-grow"})]),io(c,{text:e.$t("home.createCookbook.urlPreview",{url:s.value}),class:"text-sm"},null,8,["text"])])])),_:1},8,["summary"]),ro("div",VU,[io(f,{class:"text-sm",onClick:t[1]||(t[1]=t=>e.$ui.showMarkdown(e.$t("home.createCookbook.help_detailsTitle"),e.$t("home.createCookbook.help_detailsContent")))},{default:ii((()=>[oo(pt(e.$t("home.createCookbook.help")),1)])),_:1}),io(h,{class:"text-lg",type:"submit"},{default:ii((()=>[oo(pt(e.$t("home.createCookbook.submit")),1)])),_:1})])],64))])),_:1},8,["form"])}}}),HU={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},GU=[so('<g fill="currentColor"><path fill-rule="evenodd" d="M11.27 5.506c0 1.942 1.063 3.308 3 3.994V11a1 1 0 1 0 2 0V1.5a1 1 0 0 0-1.442-.897c-2.316 1.141-3.558 2.8-3.558 4.903Zm2 0c0-.82.319-1.535 1-2.161v3.971c-.695-.411-1-.999-1-1.81Z" clip-rule="evenodd"></path><path d="M13.27 17.5v-5a2 2 0 1 1 4 0v5a2 2 0 0 1-4 0ZM3.283 2.45a1 1 0 1 1 1.998.1c-.08 1.603.002 2.682.2 3.158c.095.23.253.315.712.288a1 1 0 1 1 .114 1.997c-1.258.073-2.229-.446-2.674-1.519c-.343-.828-.444-2.142-.35-4.024Z"></path><path d="M10.717 2.45a1 1 0 1 0-1.998.1c.08 1.603-.002 2.682-.2 3.158c-.096.23-.253.315-.712.288a1 1 0 1 0-.115 1.997c1.258.073 2.23-.446 2.675-1.519c.343-.828.444-2.142.35-4.024Z"></path><path d="M6 2.5a1 1 0 0 1 2 0v9a1 1 0 1 1-2 0v-9Z"></path><path d="M5 17.5v-5a2 2 0 1 1 4 0v5a2 2 0 1 1-4 0Z"></path></g>',1)];const WU={name:"pepicons-knive-fork",render:function(e,t){return Ha(),Ka("svg",HU,GU)}},JU=["id"],KU=Si({props:{text:oI()},setup(e){const t=N(),n=_r(null);let r=_r(!1),i=_r("");const a=e=>{"Escape"!==e.key&&"Esc"!==e.key||s()};async function o(){r.value=!0,document.addEventListener("keydown",a),await Vr(),function(){if(!n.value||i.value)return;const e=JE.pixels("spacing.edge"),t=n.value.getBoundingClientRect(),r=-Math.min(0,t.x-e,window.innerWidth-(t.width-t.x)-e),a=n.value.clientWidth-2*r;i.value=`width:${a+JE.pixels("spacing.1")}px`}()}function s(){r.value=!1,document.removeEventListener("keydown",a)}return Fi((()=>document.removeEventListener("keydown",a))),(a,l)=>(Ha(),Ka("span",{class:"relative",onMouseenter:l[0]||(l[0]=e=>o()),onTouchstart:l[1]||(l[1]=e=>o()),onMouseleave:l[2]||(l[2]=e=>s())},[go(a.$slots,"default",{tooltipId:Ar(t),openTooltip:o,closeTooltip:s}),ro("span",{id:Ar(t),ref_key:"$wrapper",ref:n,role:"tooltip",class:ut(["absolute -top-3 left-1/2 bg-gray-700 text-white -translate-x-1/2 -translate-y-full px-2 py-1 rounded-md",{hidden:!r.value,"whitespace-nowrap":!i.value}]),style:at(i.value)},pt(e.text),15,JU),ro("span",{class:ut(["absolute pointer-events-none top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 border-t-gray-700 border-transparent border-x-[.75rem] border-y-[.75rem]",{hidden:!r.value}])},null,2)],32))}}),YU={key:0,class:"flex items-center"},ZU={class:"ml-1"},XU=Si({emits:["cancel"],setup(e){const t=R$({url:{type:S$.String,default:"https://",rules:"required"}});return(e,n)=>{const r=w$,i=rR,a=g$,o=h$,s=_R,l=l$;return e.$auth.ongoing?(Ha(),Ka("div",YU,[io(r,{class:"h-4 w-4 animate-spin text-brand-solid-700","aria-hidden":"true"}),io(i,{text:e.$auth.stale?e.$t("home.onboarding.loginWithSolid_stale"):e.$t("home.onboarding.loginWithSolid_loading"),actions:{reload:()=>e.$app.reload()},class:"ml-2 text-lg text-gray-700"},null,8,["text","actions"])])):(Ha(),Ya(l,{key:1,form:Ar(t),class:"flex flex-col items-center",onSubmit:n[1]||(n[1]=e=>async function(){/^https?:\/\//.test(t.url)||(t.url="https://"+t.url),await gj.login(t.url)}())},{default:ii((()=>[io(i,{text:e.$t("home.onboarding.loginWithSolid_info"),class:"max-w-md text-center"},null,8,["text"]),io(o,{class:"mt-4",name:"url",color:"brand-solid",label:e.$t("home.onboarding.loginWithSolid_label"),placeholder:e.$t("home.onboarding.loginWithSolid_placeholder")},{default:ii((()=>[io(a,{class:"h-6 w-6 text-brand-solid-500","aria-hidden":"true"}),ro("span",ZU,pt(e.$t("home.onboarding.loginWithSolid_submit")),1)])),_:1},8,["label","placeholder"]),io(s,{class:"mt-4 text-sm",onClick:n[0]||(n[0]=t=>e.$emit("cancel"))},{default:ii((()=>[oo(pt(e.$t("home.onboarding.back")),1)])),_:1})])),_:1},8,["form"]))}}}),eF=Si({emits:["cancel"],setup:e=>(e,t)=>{const n=rR,r=iU,i=_R;return Ha(),Ka(Ua,null,[io(n,{class:"text-center",text:e.$t("home.onboarding.createRecipe_info")},null,8,["text"]),io(r,{class:"mt-4"}),io(i,{class:"mt-4 text-sm",onClick:t[0]||(t[0]=t=>e.$emit("cancel"))},{default:ii((()=>[oo(pt(e.$t("home.onboarding.back")),1)])),_:1})],64)}}),tF={class:"flex flex-col flex-grow items-center justify-center"},nF=ro("h1",{id:"home-title",class:"sr-only"}," Umai ",-1),rF={class:"mt-4 flex flex-col items-center justify-center"},iF={class:"prose max-w-md text-center"},aF=oo(" Umai "),oF={class:"mt-2 flex flex-col items-center"},sF={class:"ml-2"},lF={class:"ml-2"},uF=Si({setup(e){const t=lI("loggingIn",!1),n=lI("creatingNewRecipe",!1),r=Lo((()=>{const e=hR("home.onboarding.welcome",{umai:"%SEPARATOR%"}),[t,n]=e.split("%SEPARATOR%");return{beforeTooltip:null==t?void 0:t.replace(/\s+$/,"&nbsp;"),afterTooltip:null==n?void 0:n.replace(/^\s+/,"&nbsp;")}}));return(e,i)=>{const a=pR,o=eF,s=XU,l=_R,u=KU,c=WU,d=GI,p=g$,f=$a("safe-html");return Ha(),Ka("div",tF,[nF,e.$auth.ongoing?lo("",!0):(Ha(),Ya(a,{key:0,class:"h-auto w-[250px] max-w-[60vw] fill-primary-500","aria-hidden":"true"})),ro("div",rF,[n.value?(Ha(),Ya(o,{key:0,onCancel:i[0]||(i[0]=e=>n.value=!1)})):t.value?(Ha(),Ya(s,{key:1,onCancel:i[1]||(i[1]=e=>t.value=!1)})):(Ha(),Ka(Ua,{key:2},[ro("div",iF,[ro("p",null,[va(ro("span",null,null,512),[[f,r.value.beforeTooltip]]),io(u,{text:e.$t("home.onboarding.umai_title")},{default:ii((({tooltipId:e,openTooltip:t,closeTooltip:n})=>[io(l,{"aria-describedby":e,url:"/",internal:"",secondary:"",class:"no-underline font-semibold hover:!text-gray-700",onClick:i[2]||(i[2]=Ls((()=>{}),["prevent"])),onFocus:e=>t(),onBlur:e=>n()},{default:ii((()=>[aF])),_:2},1032,["aria-describedby","onFocus","onBlur"])])),_:1},8,["text"]),va(ro("span",null,null,512),[[f,r.value.afterTooltip]])]),ro("p",null,pt(e.$t("home.onboarding.getStarted")),1)]),ro("div",oF,[io(d,{secondary:"",tinted:"",class:"w-full",onClick:i[3]||(i[3]=e=>n.value=!0)},{default:ii((()=>[io(c,{class:"h-6 w-6","aria-hidden":"true"}),ro("span",sF,pt(e.$t("home.onboarding.createRecipe")),1)])),_:1}),io(d,{secondary:"",tinted:"",color:"brand-solid",class:"group mt-2 w-full",onClick:i[4]||(i[4]=e=>t.value=!0)},{default:ii((()=>[io(p,{class:"h-6 w-6 group-hover:text-brand-solid-500 group-focus:text-brand-solid-500","aria-hidden":"true"}),ro("span",lF,pt(e.$t("home.onboarding.loginWithSolid")),1)])),_:1}),io(l,{secondary:"",color:"brand-solid",class:"mt-1.5 text-xs",onClick:i[5]||(i[5]=t=>e.$ui.showMarkdown(e.$t("home.onboarding.whatIsSolid_title"),e.$t("home.onboarding.whatIsSolid_content")))},{default:ii((()=>[oo(pt(e.$t("home.onboarding.whatIsSolid")),1)])),_:1})])],64))])])}}});const cF=sR({},[["render",function(e,t){const n=uF,r=QU,i=UU,a=NU,o=uR,s=$a("element-transitions");return va((Ha(),Ya(o,{class:"px-edge","aria-labelledby":"home-title"},{default:ii((()=>[e.$app.isOnboarding?(Ha(),Ya(n,{key:0})):e.$auth.loggedIn&&!e.$cookbook.created?(Ha(),Ya(r,{key:1})):e.$cookbook.recipes.isEmpty()?(Ha(),Ya(i,{key:2})):(Ha(),Ya(a,{key:3}))])),_:1})),[[s,{enter:{"recipes.show":()=>e.$elementTransitions.waitElementsGone("recipe-details"),"recipes.create":()=>e.$elementTransitions.waitElementsGone("recipe-form"),"*":e.$elementTransitions.fadeIn},leave:{"recipes.show":()=>e.$elementTransitions.waitElementsReady("recipe-details"),"recipes.create":()=>e.$elementTransitions.waitElementsReady("recipe-form"),"*":e.$elementTransitions.fadeOut}}]])}]]),dF={"aria-hidden":"true",class:"block h-0 opacity-0 overflow-hidden pointer-events-none"};const pF=sR({},[["render",function(e,t){return Ha(),Ka("p",dF,` This text is here just to make this div grow... If you're reading this without using some developer tool, this is a bug. Please report it :). It actually needs to be quite long, so just for kicks allow me to add one of my favourite quotes from Sherlock Holmes: "I consider that a man's brain originally is like a little empty attic, and you have to stock it with such furniture as you choose. A fool takes in all the lumber of every sort that he comes across, so that the knowledge which might be useful to him gets crowded out, or at best is jumbled up with a lot of other things so that he has a difficulty in laying his hands upon it. Now the skillful workman is very careful indeed as to what he takes into his brain-attic. He will have nothing but the tools which may help him in doing his work, but of these he has a large assortment, and all in the most perfect order. It is a mistake to think that that little room has elastic walls and can distend to any extent. Depend upon it there comes a time when for every addition of knowledge you forget something that you knew before. It is of the highest importance, therefore, not to have useless facts elbowing out the useful ones." `)}]]),fF={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},hF=[ro("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-width":"2"},[ro("rect",{width:"6",height:"10",x:"12.784",y:"2.384",rx:"3",transform:"rotate(33.038 12.784 2.384)"}),ro("rect",{width:"6",height:"10",x:"7.836",y:"6.323",rx:"3",transform:"rotate(33.038 7.836 6.323)"})],-1)];const mF={name:"pepicons-chain",render:function(e,t){return Ha(),Ka("svg",fF,hF)}},vF={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},gF=[ro("g",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"},[ro("path",{d:"M10 5.5a5.5 5.5 0 1 0 0 11a5.5 5.5 0 0 0 0-11ZM2.5 11a7.5 7.5 0 1 1 15 0a7.5 7.5 0 0 1-15 0Z"}),ro("path",{d:"M2.793 3.793a1 1 0 0 1 1.414 0l1.5 1.5a1 1 0 0 1-1.414 1.414l-1.5-1.5a1 1 0 0 1 0-1.414Zm11.5 2.914a1 1 0 0 0 1.414 0l1.5-1.5a1 1 0 0 0-1.414-1.414l-1.5 1.5a1 1 0 0 0 0 1.414ZM13.28 8.375a1 1 0 0 1-.155 1.406l-2.5 2a1 1 0 0 1-1.25-1.562l2.5-2a1 1 0 0 1 1.406.156ZM9 4V2h2v2H9Z"}),ro("path",{d:"M7.5 2a1 1 0 0 1 1-1h3a1 1 0 1 1 0 2h-3a1 1 0 0 1-1-1Z"})],-1)];const yF={name:"pepicons-stopwatch",render:function(e,t){return Ha(),Ka("svg",vF,gF)}},bF={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},wF=[so('<g fill="currentColor"><path fill-rule="evenodd" d="M7.203 4c.13.819.323 1.595.575 2.084c.198.385.586.874 1.118 1.407c.365.365.752.706 1.104.996c.352-.29.74-.631 1.104-.996c.532-.533.92-1.022 1.118-1.407c.252-.489.444-1.265.575-2.084H7.203Zm-.662-2c-.844 0-1.518.697-1.42 1.536C5.246 4.612 5.499 6.026 6 7c.672 1.305 2.218 2.643 3.18 3.393c.485.38 1.155.38 1.64 0C11.783 9.643 13.329 8.305 14 7c.501-.973.754-2.388.88-3.464c.097-.84-.577-1.536-1.421-1.536H6.54Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M12.797 16c-.13-.819-.323-1.595-.575-2.084c-.198-.385-.586-.875-1.118-1.407A15.7 15.7 0 0 0 10 11.513c-.352.29-.74.631-1.104.996c-.532.532-.92 1.022-1.118 1.407c-.252.489-.444 1.265-.575 2.084h5.594Zm.662 2c.844 0 1.518-.697 1.42-1.535c-.125-1.077-.378-2.492-.879-3.465c-.672-1.305-2.218-2.643-3.18-3.393a1.326 1.326 0 0 0-1.64 0C8.217 10.357 6.672 11.695 6 13c-.501.973-.754 2.388-.88 3.465c-.097.838.577 1.535 1.421 1.535h6.918Z" clip-rule="evenodd"></path><path d="M7 15.75s2-1.5 3-1.5s3 1.5 3 1.5v.5H7v-.5Z"></path><path fill-rule="evenodd" d="M4 2.5a1 1 0 0 1 1-1h10a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1Zm0 15a1 1 0 0 1 1-1h10a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1Z" clip-rule="evenodd"></path></g>',1)];const _F={name:"pepicons-hourglass",render:function(e,t){return Ha(),Ka("svg",bF,wF)}},xF={class:"sr-only"},kF={class:"w-full"},AF={key:0,class:"h-10 flex items-center justify-between"},EF={class:"flex items-center space-x-2"},IF={key:1,class:"h-10 flex items-center justify-between"},SF={class:"flex items-center space-x-2"},RF={key:2,class:"h-10 flex items-center justify-between"},CF={class:"flex items-center space-x-2"};const OF=sR({},[["render",function(e,t){const n=WU,r=_F,i=yF;return Ha(),Ka("div",null,[ro("h2",xF,pt(e.$t("recipes.metadata")),1),ro("ul",kF,[e.$slots.servings?(Ha(),Ka("li",AF,[ro("div",EF,[io(n,{class:"w-4 h-4","aria-hidden":"true"}),ro("span",null,pt(e.$t("recipes.servings")),1)]),go(e.$slots,"servings")])):lo("",!0),e.$slots.prepTime?(Ha(),Ka("li",IF,[ro("div",SF,[io(r,{class:"w-4 h-4","aria-hidden":"true"}),ro("span",null,pt(e.$t("recipes.prepTime")),1)]),go(e.$slots,"prepTime")])):lo("",!0),e.$slots.cookTime?(Ha(),Ka("li",RF,[ro("div",CF,[io(i,{class:"w-4 h-4","aria-hidden":"true"}),ro("span",null,pt(e.$t("recipes.cookTime")),1)]),go(e.$slots,"cookTime")])):lo("",!0)])])}]]),DF={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},jF=[ro("path",{fill:"currentColor",d:"m15.795 11.272l-8 5A1.5 1.5 0 0 1 5.5 15V5a1.5 1.5 0 0 1 2.295-1.272l8 5a1.5 1.5 0 0 1 0 2.544Z"},null,-1)];const TF={name:"pepicons-triangle-right-filled",render:function(e,t){return Ha(),Ka("svg",DF,jF)}},PF={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},MF=[ro("path",{fill:"currentColor",d:"m4.205 8.728l8-5A1.5 1.5 0 0 1 14.5 5v10a1.5 1.5 0 0 1-2.295 1.272l-8-5a1.5 1.5 0 0 1 0-2.544Z"},null,-1)];const LF={name:"pepicons-triangle-left-filled",render:function(e,t){return Ha(),Ka("svg",PF,MF)}},$F={class:"flex flex-col flex-grow overflow-hidden w-screen min-h-full"},NF={class:"recipe-page--image fixed inset-x-0 top-0 h-52 md:h-80"},BF={class:"recipe-page--header flex relative justify-start items-end h-52 md:h-80 md:justify-center"},UF={class:"recipe-page--header-wrapper flex relative pb-4 w-screen justify-center px-edge overflow-hidden md:w-full"},FF={class:"recipe-page--header-title-wrapper flex-grow mr-8 max-w-prose pointer-events-auto md:pr-36"},zF=ro("div",{class:"recipe-page--header-title-filler w-72 flex-shrink-0 hidden md:block"},null,-1),qF={class:"recipe-page--body relative flex flex-grow flex-row justify-center pt-4 bg-white pointer-events-auto md:px-edge"},VF={key:0,class:"recipe-page--body-switch absolute -translate-x-1/2 -translate-y-full left-1/2 top-0 z-10 flex pt-2 px-3"},QF=ro("svg",{preserveAspectRatio:"none",class:"absolute -translate-x-1/2 left-1/2 bottom-0 w-[150%] h-full fill-white",viewBox:"0 0 200 80"},[ro("path",{d:"M40 45C35.003 79.997 0 80 0 80h200s-34.998.004-40-35C154.998 9.996 135.004-.003 100 0 64.996.003 44.997 10.003 40 45Z"})],-1),HF=["aria-label","title"],GF=["aria-label","title"],WF={class:"prose prose-h2:mt-6 px-edge w-screen md:mr-8 md:px-0 md:w-auto"},JF={key:0,class:"not-prose"},KF={class:"text-gray-700"},YF=ro("span",{class:"flex justify-center items-center w-8"},[ro("span",{class:"w-2 h-2 bg-gray-300 rounded-full"})],-1),ZF={class:"border-b-2 border-transparent"},XF={key:0,class:"pl-0 list-none"},ez={class:"flex"},tz={class:"flex justify-center text-lg font-semibold min-w-clickable text-primary-600","aria-hidden":"true"},nz={class:"relative"},rz=[ro("path",{d:"M0 30.206s71.996 1.005 83-17c11.852-19.392 84.385-15.73 94 0 11.003 18 83 17 83 17z"},null,-1)],iz={class:"relative"},az={class:"flex items-center space-x-1"},oz={key:1},sz={class:"flex flex-col bg-white flex-grow"},lz={class:"sr-only"},uz={key:0,class:"mb-4"},cz={class:"mt-4"},dz=ro("div",{class:"flex-grow"},null,-1),pz=Si({props:{recipe:tI()},setup(e,{expose:t}){var n,r;const i=-1;let a=_r(!1),o=_r(null==(r=null==(n=e.recipe)?void 0:n.servingsBreakdown)?void 0:r.quantity);const s=_r([]),l=Lo((()=>{var t,n,r,a;const l=null==(t=e.recipe)?void 0:t.servingsBreakdown;if(!l)return null;const u=null!=(a=null==(r=null==(n=e.recipe)?void 0:n.servingsBreakdown)?void 0:r.quantity)?a:1,c=ye(se([...De(10).map((e=>e+1)).map((e=>e*10**Math.floor(Math.log10(u)))),...s.value,u,o.value]),((e,t)=>e>t?1:-1)).map((e=>({text:l.renderQuantity(e),value:e})));return c.push({text:hR("recipes.servings_custom"),value:i}),c})),u=Lo((()=>e.recipe?E([e.recipe.servings,e.recipe.prepTime,e.recipe.cookTime]).length:3)),c=Lo((()=>u.value?u.value*JE.pixels("spacing.10")+2*JE.pixels("spacing.4"):0)),d=Lo((()=>{var t,n,r,a,s,l;const u=null==(t=e.recipe)?void 0:t.sortedIngredientsBreakdown,c=null==(r=null==(n=e.recipe)?void 0:n.servingsBreakdown)?void 0:r.quantity,d=o.value/(null!=c?c:o.value);return(null==(a=e.recipe)?void 0:a.servings)&&o.value!==i?null!=(l=null==u?void 0:u.map((({quantity:e,original:t,unitMultiplier:n,renderQuantity:r})=>e?Array.isArray(e)?r(e.map((e=>h(e*d)))):r(h(e*d/(null!=n?n:1))):t)))?l:[]:null!=(s=null==u?void 0:u.map((({original:e})=>e)))?s:[]})),p=Lo((()=>{var t,n;return ye(null!=(n=null==(t=e.recipe)?void 0:t.instructions)?n:[],"position")})),f=Lo((()=>{var t,n;return(null!=(n=null==(t=e.recipe)?void 0:t.sortedExternalUrls)?n:[]).map((e=>{var t,n;return{url:e,domain:null==(n=null==(t=M(e))?void 0:t.domain)?void 0:n.replace(/^www\./,"")}}))}));function h(e){return e<10?Math.round(100*e)/100:Math.round(e)}return di((async()=>{var t,n,r;if(o.value!==i)return;const a=parseInt(prompt(hR("recipes.servings_customPrompt"))||"NaN");if(!a)return await Vr(),void(o.value=null!=(r=null==(n=null==(t=e.recipe)?void 0:t.servingsBreakdown)?void 0:n.quantity)?r:1);s.value.push(a),await Vr(),o.value=a})),t({showPrimaryPanel:async()=>{a.value=!1,fC.isMobile&&await $I(300)},showSecondaryPanel:async()=>{a.value=!0,fC.isMobile&&await $I(300)}}),(t,n)=>{const r=TB,i=LF,s=TF,h=rR,m=pF,v=B$,g=OF,y=mF,b=_R;return Ha(),Ka("div",$F,[ro("div",NF,[go(t.$slots,"image",{},(()=>[io(r,{recipe:e.recipe,class:"absolute inset-0"},null,8,["recipe"])]))]),ro("div",{class:ut(["recipe-page--wrapper flex flex-col flex-grow w-[200vw] z-10 md:w-full pointer-events-none",{"transition-transform duration-300":t.$ui.animations&&t.$ui.isMobile,"-translate-x-screen":t.$ui.isMobile&&a.value,"translate-x-0":t.$ui.isMobile&&!a.value}])},[ro("div",BF,[ro("div",{class:ut(["recipe-page--header-overlay absolute inset-x-0 top-0 bg-gradient-to-b to-transparent from-dark-overlay",{"opacity-0":t.$app.isOnboarding}]),style:at(`height: ${t.$ui.headerHeight}px`)},null,6),ro("div",UF,[ro("div",FF,[go(t.$slots,"title")]),zF])]),ro("div",qF,[t.$ui.isMobile?(Ha(),Ka("div",VF,[QF,ro("button",{type:"button",class:"p-2 z-10 active:text-primary-900 focus:text-primary-900","aria-label":t.$t("recipes.showMainPanel"),title:t.$t("recipes.showMainPanel"),onClick:n[0]||(n[0]=e=>a.value=!0)},[io(i,{class:"w-8 h-8","aria-hidden":"true"})],8,HF),ro("button",{type:"button",class:"p-2 z-10 active:text-primary-900 focus:text-primary-900","aria-label":t.$t("recipes.showSecondaryPanel"),title:t.$t("recipes.showSecondaryPanel"),onClick:n[1]||(n[1]=e=>a.value=!1)},[io(s,{class:"w-8 h-8","aria-hidden":"true"})],8,GF)])):lo("",!0),ro("div",WF,[go(t.$slots,"description",{},(()=>{var t;return[(null==(t=e.recipe)?void 0:t.description)?(Ha(),Ya(h,{key:0,text:e.recipe.description},null,8,["text"])):lo("",!0)]})),t.$slots.ingredients||d.value.length>0?(Ha(),Ka(Ua,{key:0},[ro("h2",null,pt(t.$t("recipes.ingredients")),1),go(t.$slots,"ingredients",{},(()=>[d.value.length>0?(Ha(),Ka("div",JF,[ro("ul",KF,[(Ha(!0),Ka(Ua,null,mo(d.value,((e,t)=>(Ha(),Ka("li",{key:t,class:"flex items-center my-2"},[YF,ro("span",ZF,pt(e),1)])))),128))])])):lo("",!0)]))],64)):lo("",!0),t.$slots.instructions||p.value.length>0?(Ha(),Ka(Ua,{key:1},[ro("h2",null,pt(t.$t("recipes.instructions")),1),go(t.$slots,"instructions",{},(()=>[e.recipe&&e.recipe.instructionStepUrls.length>0?(Ha(),Ka("ol",XF,[(Ha(!0),Ka(Ua,null,mo(p.value,((e,t)=>(Ha(),Ka("li",{key:e.position,class:"pl-0"},[ro("div",ez,[ro("span",tz,pt(t+1)+". ",1),io(h,{text:e.text},null,8,["text"])])])))),128))])):lo("",!0)]))],64)):lo("",!0),io(m)]),ro("div",{class:"w-screen px-edge flex-shrink-0 md:w-72 md:px-0",style:at(t.$ui.isMobile?"":`transform:translateY(-${c.value}px)`)},[ro("div",nz,[t.$ui.isMobile?lo("",!0):(Ha(),Ka("svg",{key:0,preserveAspectRatio:"none",class:"recipe-page--metadata-decoration absolute -top-4 right-1/2 text-white translate-x-1/2 pointer-events-none fill-current",viewBox:"0 0 260 30",style:at(`height:${c.value}px;width:400%`)},rz,4)),ro("div",iz,[go(t.$slots,"metadata",{},(()=>{var r,i,a;return[(null==(r=e.recipe)?void 0:r.servings)||(null==(i=e.recipe)?void 0:i.prepTime)||(null==(a=e.recipe)?void 0:a.cookTime)?(Ha(),Ya(g,{key:0,class:"w-full"},vo({_:2},[e.recipe.servingsBreakdown?{name:"servings",fn:ii((()=>[ro("div",az,[l.value?(Ha(),Ya(v,{key:0,modelValue:o.value,"onUpdate:modelValue":n[2]||(n[2]=e=>o.value=e),class:"pt-0 p-1 -mr-1.5 bg-left text-right",label:t.$t("recipes.servings_change"),options:l.value},null,8,["modelValue","label","options"])):(Ha(),Ka("span",oz,pt(e.recipe.servings),1))])]))}:void 0,e.recipe.prepTime?{name:"prepTime",fn:ii((()=>[oo(pt(t.$ui.renderDuration(e.recipe.prepTime)),1)]))}:void 0,e.recipe.cookTime?{name:"cookTime",fn:ii((()=>[oo(pt(t.$ui.renderDuration(e.recipe.cookTime)),1)]))}:void 0]),1024)):lo("",!0)]}))])]),ro("div",sz,[ro("div",{class:ut(u.value>0&&"mt-6")},null,2),go(t.$slots,"urls",{},(()=>[ro("h2",lz,pt(t.$t("recipes.externalUrls")),1),f.value.length>0?(Ha(),Ka("ul",uz,[(Ha(!0),Ka(Ua,null,mo(f.value,((e,n)=>(Ha(),Ka("li",{key:n},[io(b,{url:e.url,class:"flex items-center space-x-1"},{default:ii((()=>[io(y,{class:"w-4 h-4","aria-hidden":"true"}),ro("span",null,pt(t.$t("recipes.externalUrl",{domain:e.domain})),1)])),_:2},1032,["url"])])))),128))])):lo("",!0)])),ro("div",cz,[go(t.$slots,"actions")]),dz])],4)])],2)])}}});function fz(e,t,n){var r,i;const a="pageY"in e?e.pageY:null==(r=e.touches[0])?void 0:r.pageY;if(!a||a<t)return 0;let o=t;for(let s=0;s<n.length;s++)if(o+=null!=(i=n[s])?i:0,o>a)return s;return n.length}const hz=Si({emits:["swapItems"],setup(e,{emit:t}){const n=_r();return ui("list-dragging",function(e,t){const n=e;let r=_r(!1),i=_r(),a=_r(),o=_r();return{start(e){n.value&&n.value.firstElementChild&&(r.value=!0,i.value=window.scrollY+n.value.getBoundingClientRect().y,a.value=Array.from(n.value.children).map((e=>e.clientHeight)),o.value=fz(e,i.value,a.value))},update(e){if(!r.value)return;const s=fz(e,i.value,a.value);if(s!==o.value){const e=[...a.value];t(o.value,s),et(e,o.value,s),Vr().then((()=>{var e,t;a.value=Array.from(null!=(t=null==(e=n.value)?void 0:e.children)?t:[]).map((e=>e.clientHeight)),o.value=s}))}},stop(){r.value=!1}}}(n,((e,n)=>t("swapItems",e,n,!1)))),(e,t)=>(Ha(),Ka("ol",{ref_key:"list",ref:n,class:"list-none"},[go(e.$slots,"default")],512))}}),mz={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},vz=[ro("path",{fill:"currentColor",d:"M4 20h11v6.17l-2.59-2.58L11 25l5 5l5-5l-1.41-1.41L17 26.17V20h11v-2H4v2zm7-13l1.41 1.41L15 5.83V12H4v2h24v-2H17V5.83l2.59 2.58L21 7l-5-5l-5 5z"},null,-1)];const gz={name:"carbon-drag-vertical",render:function(e,t){return Ha(),Ka("svg",mz,vz)}},yz={class:"my-0"},bz={class:"flex group"},wz={class:"relative mr-2"},_z={class:"flex justify-center min-w-clickable group-hover:opacity-0"},xz=["title"],kz=Si({emits:["dragStart","dragStop","dragUpdate","swapDown","swapUp"],setup(e,{emit:t}){const n=ci("list-dragging");function r(e){const r=e=>{e.preventDefault(),null==n||n.update(e),t("dragUpdate",e)},i=e=>{document.removeEventListener("mousemove",r),document.removeEventListener("touchmove",r),document.removeEventListener("mouseup",i),document.removeEventListener("touchend",i),e.preventDefault(),null==n||n.stop(),t("dragStop",e)};document.addEventListener("mousemove",r),document.addEventListener("touchmove",r),document.addEventListener("mouseup",i),document.addEventListener("touchend",i),e.preventDefault(),null==n||n.start(e),t("dragStart",e)}return(e,t)=>{const n=gz;return Ha(),Ka("li",yz,[ro("div",bz,[ro("div",wz,[ro("div",_z,[go(e.$slots,"marker")]),ro("button",{type:"button",tabindex:"-1","aria-hidden":"true",class:ut(["absolute top-0 inset-x-1/2 -translate-x-1/2 w-clickable h-clickable","hidden justify-center items-center text-gray-900 rounded-full opacity-50","hover:!opacity-100 group-hover:flex"]),title:e.$t("ui.drag"),onMousedown:r,onTouchstart:r},[io(n,{class:"w-4 h-4"})],40,xz)]),go(e.$slots,"default")])])}}}),Az=Si({setup(e,{expose:t}){const n=_r(null);return t(zI(n)),(e,t)=>{const r=Pa("HeadlessButton"),i=$a("wobbly-border");return va((Ha(),Ya(r,{ref_key:"$root",ref:n,class:ut(["flex items-center justify-center w-clickable h-clickable text-primary-gray-700 opacity-0","group-hover:opacity-80 group-focus-within:opacity-80","hover:bg-primary-gray-300 hover:!opacity-100","focus:outline-none focus:border-2 focus:border-primary-600 focus:!opacity-100"])},{default:ii((()=>[go(e.$slots,"default")])),_:3})),[[i,{min:30,max:42}]])}}}),Ez={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},Iz=[ro("g",{fill:"currentColor"},[ro("path",{d:"M11.937 4.5H8.062A2.003 2.003 0 0 1 10 2a2.003 2.003 0 0 1 1.937 2.5Z"}),ro("path",{d:"M4.5 5.5a1 1 0 0 1 0-2h11a1 1 0 1 1 0 2h-11Z"}),ro("path",{"fill-rule":"evenodd",d:"M14.5 18.5a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v10.5a1 1 0 0 0 1 1h9Zm-2-10a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7ZM10 8a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 1 0v-7A.5.5 0 0 0 10 8Zm-3.5.5a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7Z","clip-rule":"evenodd"})],-1)];const Sz={name:"pepicons-trash",render:function(e,t){return Ha(),Ka("svg",Ez,Iz)}},Rz=Si({inheritAttrs:!1}),Cz=Si({...Rz,props:{name:sI(),label:sI(),placeholder:sI(),modelValue:sI(),error:sI(),initialFocus:YE()},emits:["update:modelValue"],setup(e,{expose:t}){const n=_r(null),r=_r(null),i=_r(null);let a=_r(1);const o=$o(),s=Lo((()=>{var e,t,r,i;return(null==(t=null==(e=n.value)?void 0:e.value)?void 0:t.endsWith("\n"))?(null==(r=n.value)?void 0:r.value)+"\n":null==(i=n.value)?void 0:i.value})),l=Lo((()=>{var e;return"invisible absolute w-full whitespace-pre-wrap "+(null!=(e=o.class)?e:"")})),u=Lo((()=>{var e;if(!i.value)return 0;const t=null==(e=document.defaultView)?void 0:e.getComputedStyle(i.value,null).lineHeight;return t?parseInt(t):0}));return fi((()=>{var e;return[null==(e=n.value)?void 0:e.value,u.value]}),(async()=>{await Vr(),a.value=i.value?Math.max(1,Math.round(i.value.offsetHeight/u.value)):1})),t({...zI(n),getRootElement:()=>r.value}),(t,o)=>{const u=Pa("HeadlessInputLabel"),c=Pa("HeadlessInputTextArea"),d=Pa("HeadlessInputError"),p=Pa("HeadlessInput");return Ha(),Ya(p,{ref_key:"$root",ref:n,name:e.name,placeholder:e.placeholder,"model-value":e.modelValue,error:e.error,"initial-focus":e.initialFocus,"onUpdate:modelValue":o[0]||(o[0]=e=>t.$emit("update:modelValue",e))},{default:ii((({hasErrors:n})=>[ro("div",{ref_key:"$wrapper",ref:r,class:"relative w-full"},[e.label?(Ha(),Ya(u,{key:0,class:"sr-only"},{default:ii((()=>[oo(pt(e.label),1)])),_:1})):lo("",!0),ro("span",{ref_key:"$filler",ref:i,class:ut(l.value)},pt(s.value),3),io(c,fo(t.$attrs,{rows:a.value,class:["block w-full resize-none border-b-2 caret-primary-500 focus:outline-none",n?"border-red-500 hover:border-primary-600 focus:border-primary-600":"border-gray-300 md:border-transparent md:hover:border-gray-300 focus:border-primary-600"]}),null,16,["rows","class"]),io(d,{class:"mt-1 text-sm text-left text-red-700 opacity-75"})],512)])),_:1},8,["name","placeholder","model-value","error","initial-focus"])}}});class Oz extends fI{constructor(e="",n){super(e),t(this,"id"),this.id=null!=n?n:N()}update(e){return new(0,this.constructor)(e,this.id)}}async function Dz(e){const t=e.firstElementChild,n=e.getBoundingClientRect();await BI({duration:300},[{element:e,before:{addClasses:"overflow-hidden relative"},after:{removeClasses:"overflow-hidden relative"},styles:{height:["0",`${n.height}px`]}},{element:t,before:{addClasses:"absolute top-0",styles:{width:`${n.width}px`,height:`${n.height}px`}},after:{removeClasses:"absolute top-0",resetStyles:!0}}])}const jz={name:sI(),modelValue:KE(),addLabel:oI(),itemLabel:sI(),itemPlaceholder:sI(),itemRemoveLabel:sI(),itemRemoveA11yLabel:sI()},Tz={index:iI(),name:sI(),label:sI(),removeLabel:sI(),removeA11yLabel:sI(),placeholder:sI(),modelValue:tI((()=>new Oz))};function Pz(){return jz}function Mz(e,t,n,r,i){const a=ci("form",null),o=Lo((()=>{var e,t;return null!=(t=null==a?void 0:a.input(null!=(e=r.name)?e:""))?t:null})),s=Lo((()=>{var e,t;return null!=(t=null==(e=o.value)?void 0:e.value)?t:r.modelValue})),l=Lo((()=>s.value.map(((e,t)=>({index:t,name:r.name&&`${r.name}[${t}]`,label:r.itemLabel,placeholder:r.itemPlaceholder,removeLabel:r.itemRemoveLabel,removeA11yLabel:r.itemRemoveA11yLabel,modelValue:e}))))),u=Lo((()=>s.value.map(((e,t)=>({add:()=>c(t),remove:()=>d(t),"update:modelValue":e=>p(t,e),submit:()=>i("submit")})))));async function c(e){var n;f(tt(s.value,new Oz,e)),await Vr(),null==(n=t.value[e+1])||n.focus()}async function d(e){var n,r,i;null==(n=t.value[0===e?1:e-1])||n.focus();const a=null==(i=null==(r=t.value[e])?void 0:r.getRootElement())?void 0:i.parentElement;a&&await async function(e){const t=e.firstElementChild,n=e.getBoundingClientRect();await BI({duration:300},[{element:e,before:{addClasses:"overflow-hidden relative",styles:{width:`${n.width}px`}},after:{removeClasses:"overflow-hidden relative",addClasses:"hidden"},styles:{height:[`${n.height}px`,"0"]}},{element:t,before:{addClasses:"absolute top-0",styles:{height:`${n.height}px`}}}])}(a),f(Me(s.value,e))}async function p(e,t){f([...s.value.slice(0,e),t,...s.value.slice(e+1)])}async function f(e){i("update:modelValue",T(e,(e=>{var t;return null==(t=o.value)?void 0:t.update(e)})))}return{items:s,itemsProps:l,itemsEvents:u,focusableApi:{getRootElement(){var t;return null!=(t=e.value)?t:null},focus(e={}){var r,i,a;const o=null==(r=t.value)?void 0:r[t.value.length-1],s=null==(i=n.value)?void 0:i.getRootElement(),l=null==(a=e.scrollIntoView)||a;o&&s&&(l&&!UI(s)&&this.scrollIntoView(),o.focus({scrollIntoView:!1}))},isFocused(){var t;return!!(null==(t=e.value)?void 0:t.querySelector(":focus"))},blur(){var t,n;null==(n=null==(t=e.value)?void 0:t.querySelector(":focus"))||n.blur()},scrollIntoView(){var e;null==(e=n.value)||e.scrollIntoView()}},addItem:c,removeItem:d,updateItem:p,updateItems:f}}function Lz(){return Tz}function $z(e,t,n,r){const i=n.modelValue,a=Lo((()=>({input:n.label&&o(n.label),remove:n.removeLabel&&o(n.removeLabel),removeA11y:n.removeA11yLabel&&o(n.removeA11yLabel)})));function o(e){return e.replace(":position",(n.index+1).toString()).replace(":index",n.index.toString()).replace(":value",i.value)}return{inputProps:Lo((()=>({name:n.name,label:a.value.input,placeholder:n.placeholder,modelValue:i.value}))),inputEvents:Lo((()=>({"update:modelValue":e=>r("update:modelValue",i.update(e)),keydown:e=>{"enter"!==e.key.toLowerCase()||e.shiftKey||(e.preventDefault(),e.ctrlKey?r("submit"):r("add"))}}))),removeButtonProps:Lo((()=>({"aria-label":a.value.removeA11y,title:a.value.remove}))),removeButtonEvents:Lo((()=>({click:()=>r("remove")}))),focusableApi:{...zI(t),getRootElement:()=>e.value}}}const Nz=Si({props:Lz(),emits:["swapUp","swapDown","add","remove","update:modelValue","submit"],setup(e,{expose:t,emit:n}){const r=e,i=_r(null),a=_r(null),{inputProps:o,inputEvents:s,removeButtonProps:l,removeButtonEvents:u,focusableApi:c}=$z(i,a,r,n);return t(c),(e,t)=>{const n=Cz,r=Sz,c=Az;return Ha(),Ka("div",{ref_key:"$root",ref:i,class:"relative group"},[io(n,fo({ref_key:"$textarea",ref:a},Ar(o),bo(Ar(s)),{onKeydown:[t[0]||(t[0]=Ns(Ls((t=>e.$emit("swapUp")),["ctrl","prevent"]),["up"])),t[1]||(t[1]=Ns(Ls((t=>e.$emit("swapDown")),["ctrl","prevent"]),["down"]))]}),null,16),io(c,fo({class:"absolute right-1 bottom-1"},Ar(l),bo(Ar(u))),{default:ii((()=>[io(r,{"aria-hidden":"true",class:"w-5 h-5"})])),_:1},16)],512)}}}),Bz={class:"sr-only"},Uz={class:"text-lg font-semibold text-primary-700","aria-hidden":"true"},Fz=Si({props:{instructionsA11y:oI(),...Pz()},emits:["update:modelValue","submit"],setup(e,{expose:t,emit:n}){const r=e;let i=_r([]);const a=_r(null),o=_r(null),{addItem:s,updateItems:l,items:u,focusableApi:c,itemsProps:d,itemsEvents:p}=Mz(a,i,o,r,n);async function f(e,t,n){var r;Math.max(e,t)>u.value.length-1||Math.min(e,t)<0||(l(T(u.value.slice(),(n=>et(n,e,t)))),n&&(await Vr(),null==(r=i.value[t])||r.focus()))}return Ni((()=>i.value=[])),t(c),(t,n)=>{const r=Nz,l=kz,c=hz,h=GI;return Ha(),Ka("div",{ref_key:"$root",ref:a},[ro("span",Bz,pt(e.instructionsA11y),1),io(c,{class:"pl-0",onSwapItems:f},{default:ii((()=>[io(Is,{"move-class":"transition-all duration-300",onEnter:n[0]||(n[0]=e=>Ar(Dz)(e))},{default:ii((()=>[(Ha(!0),Ka(Ua,null,mo(Ar(u),((e,t)=>(Ha(),Ya(l,{key:e.id,class:"mt-4"},{marker:ii((()=>[ro("span",Uz,pt(t+1)+". ",1)])),default:ii((()=>[io(r,fo({ref_for:!0,ref:e=>e&&(i.value[t]=e),class:"w-full"},Ar(d)[t],bo(Ar(p)[t]),{onSwapUp:e=>f(t,t-1,!0),onSwapDown:e=>f(t,t+1,!0)}),null,16,["onSwapUp","onSwapDown"])])),_:2},1024)))),128))])),_:1})])),_:1}),io(h,{ref_key:"$addButton",ref:o,class:"mt-4",secondary:"",tinted:"",onClick:n[1]||(n[1]=e=>Ar(s)(Ar(u).length-1))},{default:ii((()=>[oo(pt(t.addLabel),1)])),_:1},512)],512)}}}),zz={class:"flex flex-shrink-0 justify-center items-center w-8 text-gray-400"},qz=ro("span",{class:"w-2 h-2 bg-gray-300 rounded-full"},null,-1),Vz=Si({props:{...Lz(),inputClass:sI()},emits:["remove","add","remove","update:modelValue","submit"],setup(e,{expose:t,emit:n}){const r=e,i=_r(null),a=_r(null),{inputProps:o,inputEvents:s,removeButtonProps:l,removeButtonEvents:u,focusableApi:c}=$z(i,a,r,n);return t(c),(t,n)=>{const r=WL,c=Sz,d=Az;return Ha(),Ka("div",{ref_key:"$root",ref:i,class:"flex text-gray-700 group"},[ro("span",zz,[go(t.$slots,"marker",{},(()=>[qz]))]),io(r,fo({ref_key:"$input",ref:a},Ar(o),{"wrapper-class":e.inputClass},bo(Ar(s))),null,16,["wrapper-class"]),io(d,fo({class:"ml-2 flex-shrink-0"},Ar(l),bo(Ar(u))),{default:ii((()=>[io(c,{"aria-hidden":"true",class:"w-5 h-5"})])),_:1},16)],512)}}}),Qz={class:"mb-4"},Hz=Si({props:{...Pz(),inputsClass:sI()},emits:["update:modelValue","submit"],setup(e,{expose:t,emit:n}){const r=e;let i=_r([]);const a=_r(null),o=_r(null),{addItem:s,items:l,focusableApi:u,itemsProps:c,itemsEvents:d}=Mz(a,i,o,r,n);return Ni((()=>i.value=[])),t(u),(t,n)=>{const r=Vz,u=GI;return Ha(),Ka("div",{ref_key:"$root",ref:a},[ro("ul",Qz,[io(Is,{"move-class":"transition-all duration-300",onEnter:n[0]||(n[0]=e=>Ar(Dz)(e))},{default:ii((()=>[(Ha(!0),Ka(Ua,null,mo(Ar(l),((n,a)=>(Ha(),Ka("li",{key:n.id},[io(r,fo({ref_for:!0,ref:e=>e&&(i.value[a]=e),class:"w-full","input-class":e.inputsClass},Ar(c)[a],bo(Ar(d)[a])),vo({_:2},[t.$slots.marker?{name:"marker",fn:ii((()=>[go(t.$slots,"marker")]))}:void 0]),1040,["input-class"])])))),128))])),_:3})]),io(u,{ref_key:"$addButton",ref:o,secondary:"",tinted:"",onClick:n[1]||(n[1]=e=>Ar(s)(Ar(l).length-1))},{default:ii((()=>[oo(pt(t.addLabel),1)])),_:1},512)],512)}}}),Gz={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},Wz=[ro("g",{fill:"currentColor"},[ro("path",{d:"M6.5 11.25a.75.75 0 0 1 0-1.5h7a.75.75 0 0 1 0 1.5h-7Zm0 3a.75.75 0 0 1 0-1.5h7a.75.75 0 0 1 0 1.5h-7Z"}),ro("path",{"fill-rule":"evenodd",d:"M11.185.5H4.5a2 2 0 0 0-2 2v15a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7.202a2 2 0 0 0-.526-1.352l-4.315-4.702A2 2 0 0 0 11.185.5ZM4.5 17.5v-15h6.685L15.5 7.202V17.5h-11Z","clip-rule":"evenodd"}),ro("path",{d:"M11.5 6.5h5a1 1 0 1 1 0 2h-6a1 1 0 0 1-1-1v-6a1 1 0 0 1 2 0v5Z"})],-1)];const Jz={name:"pepicons-file",render:function(e,t){return Ha(),Ka("svg",Gz,Wz)}},Kz={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},Yz={fill:"none"},Zz=["clip-path"],Xz=[ro("path",{"fill-rule":"evenodd",d:"M16.513 6H7.487A2.5 2.5 0 0 0 5.05 9.057l.913 4A2.5 2.5 0 0 0 8.401 15H15.6a2.5 2.5 0 0 0 2.437-1.943l.913-4A2.5 2.5 0 0 0 16.513 6ZM7.376 8.013A.5.5 0 0 1 7.487 8h9.026a.5.5 0 0 1 .487.611l-.913 4A.5.5 0 0 1 15.6 13H8.4a.5.5 0 0 1-.487-.389l-.913-4a.5.5 0 0 1 .376-.598Z","clip-rule":"evenodd"},null,-1),ro("path",{d:"M3.49 2H2a1 1 0 0 1 0-2h2.29a1 1 0 0 1 .975.78l2.71 12a1 1 0 1 1-1.95.44L3.49 2ZM10 17.25a1.75 1.75 0 1 1-3.5 0a1.75 1.75 0 0 1 3.5 0Zm7 0a1.75 1.75 0 1 1-3.5 0a1.75 1.75 0 0 1 3.5 0Z"},null,-1)],eq=["id"],tq=[ro("path",{fill:"#fff",d:"M0 0h20v20H0z"},null,-1)];const nq={name:"pepicons-cart",render:function(e,t){return Ha(),Ka("svg",Kz,[ro("g",Yz,[ro("g",{fill:"currentColor","clip-path":"url(#"+e.idMap["svgIDa"]+")"},Xz,8,Zz),ro("defs",null,[ro("clipPath",{id:e.idMap["svgIDa"]},tq,8,eq)])])])},data:()=>({idMap:{svgIDa:"uicons-"+Math.random().toString(36).substr(2,10)}})},rq={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},iq=[ro("g",{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"},[ro("path",{d:"M10 4a6 6 0 1 0 0 12a6 6 0 0 0 0-12Zm-8 6a8 8 0 1 1 16 0a8 8 0 0 1-16 0Z"}),ro("path",{d:"M10 6a1 1 0 0 1 1 1v3a1 1 0 1 1-2 0V7a1 1 0 0 1 1-1Z"}),ro("path",{d:"M14 10a1 1 0 0 1-1 1h-3a1 1 0 1 1 0-2h3a1 1 0 0 1 1 1Z"})],-1)];const aq={name:"pepicons-clock",render:function(e,t){return Ha(),Ka("svg",rq,iq)}};
/*! image-blob-reduce 4.1.0 https://github.com/nodeca/image-blob-reduce @license MIT */function oq(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var sq={};function lq(e,t){var n={};return t.forEach((function(t){Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])})),n}sq.assign=function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=Object(arguments[n]))Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},sq.pick=lq,sq.pick_pica_resize_options=function(e){return lq(e,["alpha","unsharpAmount","unsharpRadius","unsharpThreshold","cancelToken"])};var uq={exports:{}};
/*!

pica
https://github.com/nodeca/pica

*/uq.exports=function(){function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var l="function"==typeof oq&&oq;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};t[o][0].call(c.exports,(function(e){return i(t[o][1][e]||e)}),c,c.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof oq&&oq,o=0;o<r.length;o++)i(r[o]);return i}return e}()({1:[function(e,t,n){var r=e("multimath"),i=e("./mm_unsharp_mask"),a=e("./mm_resize");function o(e){var t=e||[],n={js:t.indexOf("js")>=0,wasm:t.indexOf("wasm")>=0};r.call(this,n),this.features={js:n.js,wasm:n.wasm&&this.has_wasm()},this.use(i),this.use(a)}o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.prototype.resizeAndUnsharp=function(e,t){var n=this.resize(e,t);return e.unsharpAmount&&this.unsharp_mask(n,e.toWidth,e.toHeight,e.unsharpAmount,e.unsharpRadius,e.unsharpThreshold),n},t.exports=o},{"./mm_resize":4,"./mm_unsharp_mask":9,multimath:19}],2:[function(e,t,n){function r(e){return e<0?0:e>255?255:e}function i(e){return e>=0?e:0}function a(e,t,n,r,a,o){var s,l,u,c,d,p,f,h,m,v,g,y=0,b=0;for(m=0;m<r;m++){for(d=0,v=0;v<a;v++){for(p=o[d++],f=o[d++],h=y+4*p|0,s=l=u=c=0;f>0;f--)c=c+(g=o[d++])*e[h+3]|0,u=u+g*e[h+2]|0,l=l+g*e[h+1]|0,s=s+g*e[h]|0,h=h+4|0;t[b+3]=i(c>>7),t[b+2]=i(u>>7),t[b+1]=i(l>>7),t[b]=i(s>>7),b=b+4*r|0}b=4*(m+1)|0,y=(m+1)*n*4|0}}function o(e,t,n,i,a,o){var s,l,u,c,d,p,f,h,m,v,g,y=0,b=0;for(m=0;m<i;m++){for(d=0,v=0;v<a;v++){for(p=o[d++],f=o[d++],h=y+4*p|0,s=l=u=c=0;f>0;f--)c=c+(g=o[d++])*e[h+3]|0,u=u+g*e[h+2]|0,l=l+g*e[h+1]|0,s=s+g*e[h]|0,h=h+4|0;s>>=7,l>>=7,u>>=7,c>>=7,t[b+3]=r(c+(1<<13)>>14),t[b+2]=r(u+(1<<13)>>14),t[b+1]=r(l+(1<<13)>>14),t[b]=r(s+(1<<13)>>14),b=b+4*i|0}b=4*(m+1)|0,y=(m+1)*n*4|0}}function s(e,t,n,r,a,o){var s,l,u,c,d,p,f,h,m,v,g,y,b=0,w=0;for(v=0;v<r;v++){for(p=0,g=0;g<a;g++){for(f=o[p++],h=o[p++],m=b+4*f|0,s=l=u=c=0;h>0;h--)c=c+(y=o[p++])*(d=e[m+3])|0,u=u+y*e[m+2]*d|0,l=l+y*e[m+1]*d|0,s=s+y*e[m]*d|0,m=m+4|0;u=u/255|0,l=l/255|0,s=s/255|0,t[w+3]=i(c>>7),t[w+2]=i(u>>7),t[w+1]=i(l>>7),t[w]=i(s>>7),w=w+4*r|0}w=4*(v+1)|0,b=(v+1)*n*4|0}}function l(e,t,n,i,a,o){var s,l,u,c,d,p,f,h,m,v,g,y=0,b=0;for(m=0;m<i;m++){for(d=0,v=0;v<a;v++){for(p=o[d++],f=o[d++],h=y+4*p|0,s=l=u=c=0;f>0;f--)c=c+(g=o[d++])*e[h+3]|0,u=u+g*e[h+2]|0,l=l+g*e[h+1]|0,s=s+g*e[h]|0,h=h+4|0;s>>=7,l>>=7,u>>=7,(c=r((c>>=7)+(1<<13)>>14))>0&&(s=255*s/c|0,l=255*l/c|0,u=255*u/c|0),t[b+3]=c,t[b+2]=r(u+(1<<13)>>14),t[b+1]=r(l+(1<<13)>>14),t[b]=r(s+(1<<13)>>14),b=b+4*i|0}b=4*(m+1)|0,y=(m+1)*n*4|0}}t.exports={convolveHor:a,convolveVert:o,convolveHorWithPre:s,convolveVertWithPre:l}},{}],3:[function(e,t,n){t.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAEYA2AGf39/f39/AGAAAGAIf39/f39/f38AAg8BA2VudgZtZW1vcnkCAAADBwYBAAAAAAIGBgF/AEEACweUAQgRX193YXNtX2NhbGxfY3RvcnMAAAtjb252b2x2ZUhvcgABDGNvbnZvbHZlVmVydAACEmNvbnZvbHZlSG9yV2l0aFByZQADE2NvbnZvbHZlVmVydFdpdGhQcmUABApjb252b2x2ZUhWAAUMX19kc29faGFuZGxlAwAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAAKyA4GAwABC4wDARB/AkAgA0UNACAERQ0AIANBAnQhFQNAQQAhE0EAIQsDQCALQQJqIQcCfyALQQF0IAVqIgYuAQIiC0UEQEEAIQhBACEGQQAhCUEAIQogBwwBCyASIAYuAQBqIQhBACEJQQAhCiALIRRBACEOIAchBkEAIQ8DQCAFIAZBAXRqLgEAIhAgACAIQQJ0aigCACIRQRh2bCAPaiEPIBFB/wFxIBBsIAlqIQkgEUEQdkH/AXEgEGwgDmohDiARQQh2Qf8BcSAQbCAKaiEKIAhBAWohCCAGQQFqIQYgFEEBayIUDQALIAlBB3UhCCAKQQd1IQYgDkEHdSEJIA9BB3UhCiAHIAtqCyELIAEgDEEBdCIHaiAIQQAgCEEAShs7AQAgASAHQQJyaiAGQQAgBkEAShs7AQAgASAHQQRyaiAJQQAgCUEAShs7AQAgASAHQQZyaiAKQQAgCkEAShs7AQAgDCAVaiEMIBNBAWoiEyAERw0ACyANQQFqIg0gAmwhEiANQQJ0IQwgAyANRw0ACwsL2gMBD38CQCADRQ0AIARFDQAgAkECdCEUA0AgCyEMQQAhE0EAIQIDQCACQQJqIQYCfyACQQF0IAVqIgcuAQIiAkUEQEEAIQhBACEHQQAhCkEAIQkgBgwBCyAHLgEAQQJ0IBJqIQhBACEJIAIhCkEAIQ0gBiEHQQAhDkEAIQ8DQCAFIAdBAXRqLgEAIhAgACAIQQF0IhFqLwEAbCAJaiEJIAAgEUEGcmovAQAgEGwgDmohDiAAIBFBBHJqLwEAIBBsIA9qIQ8gACARQQJyai8BACAQbCANaiENIAhBBGohCCAHQQFqIQcgCkEBayIKDQALIAlBB3UhCCANQQd1IQcgDkEHdSEKIA9BB3UhCSACIAZqCyECIAEgDEECdGogB0GAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQQh0QYD+A3EgCUGAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQRB0QYCA/AdxIApBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EYdHJyIAhBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG3I2AgAgAyAMaiEMIBNBAWoiEyAERw0ACyAUIAtBAWoiC2whEiADIAtHDQALCwuSAwEQfwJAIANFDQAgBEUNACADQQJ0IRUDQEEAIRNBACEGA0AgBkECaiEIAn8gBkEBdCAFaiIGLgECIgdFBEBBACEJQQAhDEEAIQ1BACEOIAgMAQsgEiAGLgEAaiEJQQAhDkEAIQ1BACEMIAchFEEAIQ8gCCEGA0AgBSAGQQF0ai4BACAAIAlBAnRqKAIAIhBBGHZsIhEgD2ohDyARIBBBEHZB/wFxbCAMaiEMIBEgEEEIdkH/AXFsIA1qIQ0gESAQQf8BcWwgDmohDiAJQQFqIQkgBkEBaiEGIBRBAWsiFA0ACyAPQQd1IQkgByAIagshBiABIApBAXQiCGogDkH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEECcmogDUH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEEcmogDEH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEGcmogCUEAIAlBAEobOwEAIAogFWohCiATQQFqIhMgBEcNAAsgC0EBaiILIAJsIRIgC0ECdCEKIAMgC0cNAAsLC4IEAQ9/AkAgA0UNACAERQ0AIAJBAnQhFANAIAshDEEAIRJBACEHA0AgB0ECaiEKAn8gB0EBdCAFaiICLgECIhNFBEBBACEIQQAhCUEAIQYgCiEHQQAMAQsgAi4BAEECdCARaiEJQQAhByATIQJBACENIAohBkEAIQ5BACEPA0AgBSAGQQF0ai4BACIIIAAgCUEBdCIQai8BAGwgB2ohByAAIBBBBnJqLwEAIAhsIA5qIQ4gACAQQQRyai8BACAIbCAPaiEPIAAgEEECcmovAQAgCGwgDWohDSAJQQRqIQkgBkEBaiEGIAJBAWsiAg0ACyAHQQd1IQggDUEHdSEJIA9BB3UhBiAKIBNqIQcgDkEHdQtBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKGyIKQf8BcQRAIAlB/wFsIAJtIQkgCEH/AWwgAm0hCCAGQf8BbCACbSEGCyABIAxBAnRqIAlBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EIdEGA/gNxIAZBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EQdEGAgPwHcSAKQRh0ciAIQYBAa0EOdSICQf8BIAJB/wFIGyICQQAgAkEAShtycjYCACADIAxqIQwgEkEBaiISIARHDQALIBQgC0EBaiILbCERIAMgC0cNAAsLC0AAIAcEQEEAIAIgAyAEIAUgABADIAJBACAEIAUgBiABEAQPC0EAIAIgAyAEIAUgABABIAJBACAEIAUgBiABEAIL"},{}],4:[function(e,t,n){t.exports={name:"resize",fn:e("./resize"),wasm_fn:e("./resize_wasm"),wasm_src:e("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(e,t,n){var r=e("./resize_filter_gen"),i=e("./convolve"),a=i.convolveHor,o=i.convolveVert,s=i.convolveHorWithPre,l=i.convolveVertWithPre;function u(e,t,n){for(var r=3,i=t*n*4|0;r<i;){if(255!==e[r])return!0;r=r+4|0}return!1}function c(e,t,n){for(var r=3,i=t*n*4|0;r<i;)e[r]=255,r=r+4|0}t.exports=function(e){var t=e.src,n=e.width,i=e.height,d=e.toWidth,p=e.toHeight,f=e.scaleX||e.toWidth/e.width,h=e.scaleY||e.toHeight/e.height,m=e.offsetX||0,v=e.offsetY||0,g=e.dest||new Uint8Array(d*p*4),y=void 0===e.filter?"mks2013":e.filter,b=r(y,n,d,f,m),w=r(y,i,p,h,v),_=new Uint16Array(d*i*4);return u(t,n,i)?(s(t,_,n,i,d,b),l(_,g,i,d,p,w)):(a(t,_,n,i,d,b),o(_,g,i,d,p,w),c(g,d,p)),g}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(e,t,n){var r=e("./resize_filter_info"),i=14;function a(e){return Math.round(e*((1<<i)-1))}t.exports=function(e,t,n,i,o){var s,l,u,c,d,p,f,h,m,v,g,y,b,w,_,x,k,A=r.filter[e].fn,E=1/i,I=Math.min(1,i),S=r.filter[e].win/I,R=Math.floor(2*(S+1)),C=new Int16Array((R+2)*n),O=0,D=!C.subarray||!C.set;for(s=0;s<n;s++){for(l=(s+.5)*E+o,u=Math.max(0,Math.floor(l-S)),d=(c=Math.min(t-1,Math.ceil(l+S)))-u+1,p=new Float32Array(d),f=new Int16Array(d),h=0,m=u,v=0;m<=c;m++,v++)h+=g=A((m+.5-l)*I),p[v]=g;for(y=0,v=0;v<p.length;v++)y+=b=p[v]/h,f[v]=a(b);for(f[n>>1]+=a(1-y),w=0;w<f.length&&0===f[w];)w++;if(w<f.length){for(_=f.length-1;_>0&&0===f[_];)_--;if(x=u+w,k=_-w+1,C[O++]=x,C[O++]=k,D)for(v=w;v<=_;v++)C[O++]=f[v];else C.set(f.subarray(w,_+1),O),O+=k}else C[O++]=0,C[O++]=0}return C}},{"./resize_filter_info":7}],7:[function(e,t,n){var r={box:{win:.5,fn:function(e){return e<0&&(e=-e),e<.5?1:0}},hamming:{win:1,fn:function(e){if(e<0&&(e=-e),e>=1)return 0;if(e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*(.54+.46*Math.cos(t/1))}},lanczos2:{win:2,fn:function(e){if(e<0&&(e=-e),e>=2)return 0;if(e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/2)/(t/2)}},lanczos3:{win:3,fn:function(e){if(e<0&&(e=-e),e>=3)return 0;if(e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/3)/(t/3)}},mks2013:{win:2.5,fn:function(e){return e<0&&(e=-e),e>=2.5?0:e>=1.5?-.125*(e-2.5)*(e-2.5):e>=.5?.25*(4*e*e-11*e+7):1.0625-1.75*e*e}}};t.exports={filter:r,f2q:{box:0,hamming:1,lanczos2:2,lanczos3:3},q2f:["box","hamming","lanczos2","lanczos3"]}},{}],8:[function(e,t,n){var r=e("./resize_filter_gen");function i(e,t,n){for(var r=3,i=t*n*4|0;r<i;){if(255!==e[r])return!0;r=r+4|0}return!1}function a(e,t,n){for(var r=3,i=t*n*4|0;r<i;)e[r]=255,r=r+4|0}function o(e){return new Uint8Array(e.buffer,0,e.byteLength)}var s=!0;try{s=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]}catch(u){}function l(e,t,n){if(s)t.set(o(e),n);else for(var r=n,i=0;i<e.length;i++){var a=e[i];t[r++]=255&a,t[r++]=a>>8&255}}t.exports=function(e){var t=e.src,n=e.width,o=e.height,s=e.toWidth,u=e.toHeight,c=e.scaleX||e.toWidth/e.width,d=e.scaleY||e.toHeight/e.height,p=e.offsetX||0,f=e.offsetY||0,h=e.dest||new Uint8Array(s*u*4),m=void 0===e.filter?"mks2013":e.filter,v=r(m,n,s,c,p),g=r(m,o,u,d,f),y=0,b=Math.max(t.byteLength,h.byteLength),w=this.__align(y+b),_=o*s*4*2,x=this.__align(w+_),k=this.__align(x+v.byteLength),A=k+g.byteLength,E=this.__instance("resize",A),I=new Uint8Array(this.__memory.buffer),S=new Uint32Array(this.__memory.buffer),R=new Uint32Array(t.buffer);S.set(R),l(v,I,x),l(g,I,k);var C=E.exports.convolveHV||E.exports._convolveHV;return i(t,n,o)?C(x,k,w,n,o,s,u,1):(C(x,k,w,n,o,s,u,0),a(h,s,u)),new Uint32Array(h.buffer).set(new Uint32Array(this.__memory.buffer,0,u*s)),h}},{"./resize_filter_gen":6}],9:[function(e,t,n){t.exports={name:"unsharp_mask",fn:e("./unsharp_mask"),wasm_fn:e("./unsharp_mask_wasm"),wasm_src:e("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(e,t,n){var r=e("glur/mono16");function i(e,t,n){for(var r,i,a,o,s=t*n,l=new Uint16Array(s),u=0;u<s;u++)r=e[4*u],i=e[4*u+1],a=e[4*u+2],o=r>=i&&r>=a?r:i>=a&&i>=r?i:a,l[u]=o<<8;return l}t.exports=function(e,t,n,a,o,s){var l,u,c,d,p;if(!(0===a||o<.5)){o>2&&(o=2);var f=i(e,t,n),h=new Uint16Array(f);r(h,t,n,o);for(var m=a/100*4096+.5|0,v=s<<8,g=t*n,y=0;y<g;y++)d=(l=f[y])-h[y],Math.abs(d)>=v&&(c=((u=(u=(u=l+(m*d+2048>>12))>65280?65280:u)<0?0:u)<<12)/(l=0!==l?l:1)|0,e[p=4*y]=e[p]*c+2048>>12,e[p+1]=e[p+1]*c+2048>>12,e[p+2]=e[p+2]*c+2048>>12)}}},{"glur/mono16":18}],11:[function(e,t,n){t.exports=function(e,t,n,r,i,a){if(!(0===r||i<.5)){i>2&&(i=2);var o=t*n,s=4*o,l=2*o,u=2*o,c=4*Math.max(t,n),d=8*4,p=0,f=s,h=f+l,m=h+u,v=m+u,g=v+c,y=this.__instance("unsharp_mask",s+l+2*u+c+d,{exp:Math.exp}),b=new Uint32Array(e.buffer);new Uint32Array(this.__memory.buffer).set(b);var w=y.exports.hsv_v16||y.exports._hsv_v16;w(p,f,t,n),(w=y.exports.blurMono16||y.exports._blurMono16)(f,h,m,v,g,t,n,i),(w=y.exports.unsharp||y.exports._unsharp)(p,p,f,h,t,n,r,a),b.set(new Uint32Array(this.__memory.buffer,0,o))}}},{}],12:[function(e,t,n){t.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAE0B2AAAGAEf39/fwBgBn9/f39/fwBgCH9/f39/f39/AGAIf39/f39/f30AYAJ9fwBgAXwBfAIZAgNlbnYDZXhwAAYDZW52Bm1lbW9yeQIAAAMHBgAFAgQBAwYGAX8AQQALB4oBCBFfX3dhc21fY2FsbF9jdG9ycwABFl9fYnVpbGRfZ2F1c3NpYW5fY29lZnMAAg5fX2dhdXNzMTZfbGluZQADCmJsdXJNb25vMTYABAdoc3ZfdjE2AAUHdW5zaGFycAAGDF9fZHNvX2hhbmRsZQMAGF9fd2FzbV9hcHBseV9kYXRhX3JlbG9jcwABCsUMBgMAAQvWAQEHfCABRNuGukOCGvs/IAC7oyICRAAAAAAAAADAohAAIgW2jDgCFCABIAKaEAAiAyADoCIGtjgCECABRAAAAAAAAPA/IAOhIgQgBKIgAyACIAKgokQAAAAAAADwP6AgBaGjIgS2OAIAIAEgBSAEmqIiB7Y4AgwgASADIAJEAAAAAAAA8D+gIASioiIItjgCCCABIAMgAkQAAAAAAADwv6AgBKKiIgK2OAIEIAEgByAIoCAFRAAAAAAAAPA/IAahoCIDo7Y4AhwgASAEIAKgIAOjtjgCGAuGBQMGfwl8An0gAyoCDCEVIAMqAgghFiADKgIUuyERIAMqAhC7IRACQCAEQQFrIghBAEgiCQRAIAIhByAAIQYMAQsgAiAALwEAuCIPIAMqAhi7oiIMIBGiIg0gDCAQoiAPIAMqAgS7IhOiIhQgAyoCALsiEiAPoqCgoCIOtjgCACACQQRqIQcgAEECaiEGIAhFDQAgCEEBIAhBAUgbIgpBf3MhCwJ/IAQgCmtBAXFFBEAgDiENIAgMAQsgAiANIA4gEKIgFCASIAAvAQK4Ig+ioKCgIg22OAIEIAJBCGohByAAQQRqIQYgDiEMIARBAmsLIQIgC0EAIARrRg0AA0AgByAMIBGiIA0gEKIgDyAToiASIAYvAQC4Ig6ioKCgIgy2OAIAIAcgDSARoiAMIBCiIA4gE6IgEiAGLwECuCIPoqCgoCINtjgCBCAHQQhqIQcgBkEEaiEGIAJBAkohACACQQJrIQIgAA0ACwsCQCAJDQAgASAFIAhsQQF0aiIAAn8gBkECay8BACICuCINIBW7IhKiIA0gFrsiE6KgIA0gAyoCHLuiIgwgEKKgIAwgEaKgIg8gB0EEayIHKgIAu6AiDkQAAAAAAADwQWMgDkQAAAAAAAAAAGZxBEAgDqsMAQtBAAs7AQAgCEUNACAGQQRrIQZBACAFa0EBdCEBA0ACfyANIBKiIAJB//8DcbgiDSAToqAgDyIOIBCioCAMIBGioCIPIAdBBGsiByoCALugIgxEAAAAAAAA8EFjIAxEAAAAAAAAAABmcQRAIAyrDAELQQALIQMgBi8BACECIAAgAWoiACADOwEAIAZBAmshBiAIQQFKIQMgDiEMIAhBAWshCCADDQALCwvRAgIBfwd8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIglEAAAAAAAAAMCiEAAiDLaMOAIUIAQgCZoQACIKIAqgIg22OAIQIAREAAAAAAAA8D8gCqEiCyALoiAKIAkgCaCiRAAAAAAAAPA/oCAMoaMiC7Y4AgAgBCAMIAuaoiIOtjgCDCAEIAogCUQAAAAAAADwP6AgC6KiIg+2OAIIIAQgCiAJRAAAAAAAAPC/oCALoqIiCbY4AgQgBCAOIA+gIAxEAAAAAAAA8D8gDaGgIgqjtjgCHCAEIAsgCaAgCqO2OAIYIAYEQANAIAAgBSAIbEEBdGogAiAIQQF0aiADIAQgBSAGEAMgCEEBaiIIIAZHDQALCyAFRQ0AQQAhCANAIAIgBiAIbEEBdGogASAIQQF0aiADIAQgBiAFEAMgCEEBaiIIIAVHDQALCwtxAQN/IAIgA2wiBQRAA0AgASAAKAIAIgRBEHZB/wFxIgIgAiAEQQh2Qf8BcSIDIAMgBEH/AXEiBEkbIAIgA0sbIgYgBiAEIAIgBEsbIAMgBEsbQQh0OwEAIAFBAmohASAAQQRqIQAgBUEBayIFDQALCwuZAgIDfwF8IAQgBWwhBAJ/IAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6AiC5lEAAAAAAAA4EFjBEAgC6oMAQtBgICAgHgLIQUgBARAIAdBCHQhCUEAIQYDQCAJIAIgBkEBdCIHai8BACIBIAMgB2ovAQBrIgcgB0EfdSIIaiAIc00EQCAAIAZBAnQiCGoiCiAFIAdsQYAQakEMdSABaiIHQYD+AyAHQYD+A0gbIgdBACAHQQBKG0EMdCABQQEgARtuIgEgCi0AAGxBgBBqQQx2OgAAIAAgCEEBcmoiByABIActAABsQYAQakEMdjoAACAAIAhBAnJqIgcgASAHLQAAbEGAEGpBDHY6AAALIAZBAWoiBiAERw0ACwsL"},{}],13:[function(e,t,n){var r=100;function i(e,t){this.create=e,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=t||2e3}i.prototype.acquire=function(){var e,t=this;return 0!==this.available.length?e=this.available.pop():((e=this.create()).id=this.lastId++,e.release=function(){return t.release(e)}),this.acquired[e.id]=e,e},i.prototype.release=function(e){var t=this;delete this.acquired[e.id],e.lastUsed=Date.now(),this.available.push(e),0===this.timeoutId&&(this.timeoutId=setTimeout((function(){return t.gc()}),r))},i.prototype.gc=function(){var e=this,t=Date.now();this.available=this.available.filter((function(n){return!(t-n.lastUsed>e.idle&&(n.destroy(),1))})),0!==this.available.length?this.timeoutId=setTimeout((function(){return e.gc()}),r):this.timeoutId=0},t.exports=i},{}],14:[function(e,t,n){var r=2;t.exports=function(e,t,n,i,a,o){var s=n/e,l=i/t,u=(2*o+r+1)/a;if(u>.5)return[[n,i]];var c=Math.ceil(Math.log(Math.min(s,l))/Math.log(u));if(c<=1)return[[n,i]];for(var d=[],p=0;p<c;p++){var f=Math.round(Math.pow(Math.pow(e,c-p-1)*Math.pow(n,p+1),1/c)),h=Math.round(Math.pow(Math.pow(t,c-p-1)*Math.pow(i,p+1),1/c));d.push([f,h])}return d}},{}],15:[function(e,t,n){var r=1e-5;function i(e){var t=Math.round(e);return Math.abs(e-t)<r?t:Math.floor(e)}function a(e){var t=Math.round(e);return Math.abs(e-t)<r?t:Math.ceil(e)}t.exports=function(e){var t,n,r,o,s,l,u=e.toWidth/e.width,c=e.toHeight/e.height,d=i(e.srcTileSize*u)-2*e.destTileBorder,p=i(e.srcTileSize*c)-2*e.destTileBorder;if(d<1||p<1)throw new Error("Internal error in pica: target tile width/height is too small.");var f,h=[];for(o=0;o<e.toHeight;o+=p)for(r=0;r<e.toWidth;r+=d)(t=r-e.destTileBorder)<0&&(t=0),t+(s=r+d+e.destTileBorder-t)>=e.toWidth&&(s=e.toWidth-t),(n=o-e.destTileBorder)<0&&(n=0),n+(l=o+p+e.destTileBorder-n)>=e.toHeight&&(l=e.toHeight-n),f={toX:t,toY:n,toWidth:s,toHeight:l,toInnerX:r,toInnerY:o,toInnerWidth:d,toInnerHeight:p,offsetX:t/u-i(t/u),offsetY:n/c-i(n/c),scaleX:u,scaleY:c,x:i(t/u),y:i(n/c),width:a(s/u),height:a(l/c)},h.push(f);return h}},{}],16:[function(e,t,n){function r(e){return Object.prototype.toString.call(e)}t.exports.isCanvas=function(e){var t=r(e);return"[object HTMLCanvasElement]"===t||"[object OffscreenCanvas]"===t||"[object Canvas]"===t},t.exports.isImage=function(e){return"[object HTMLImageElement]"===r(e)},t.exports.isImageBitmap=function(e){return"[object ImageBitmap]"===r(e)},t.exports.limiter=function(e){var t=0,n=[];function r(){t<e&&n.length&&(t++,n.shift()())}return function(e){return new Promise((function(i,a){n.push((function(){e().then((function(e){i(e),t--,r()}),(function(e){a(e),t--,r()}))})),r()}))}},t.exports.cib_quality_name=function(e){switch(e){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},t.exports.cib_support=function(e){return Promise.resolve().then((function(){if("undefined"==typeof createImageBitmap)return!1;var t=e(100,100);return createImageBitmap(t,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then((function(e){var n=10===e.width;return e.close(),t=null,n}))}))["catch"]((function(){return!1}))},t.exports.worker_offscreen_canvas_support=function(){return new Promise((function(e,t){if("undefined"!=typeof OffscreenCanvas){var n=btoa("(".concat(i.toString(),")(self);")),r=new Worker("data:text/javascript;base64,".concat(n));r.onmessage=function(t){return e(t.data)},r.onerror=t}else e(!1);function i(e){"undefined"!=typeof createImageBitmap?Promise.resolve().then((function(){var e=new OffscreenCanvas(10,10);return e.getContext("2d").rect(0,0,1,1),createImageBitmap(e,0,0,1,1)})).then((function(){return e.postMessage(!0)}),(function(){return e.postMessage(!1)})):e.postMessage(!1)}})).then((function(e){return e}),(function(){return!1}))},t.exports.can_use_canvas=function(e){var t=!1;try{var n=e(2,1).getContext("2d"),r=n.createImageData(2,1);r.data[0]=12,r.data[1]=23,r.data[2]=34,r.data[3]=255,r.data[4]=45,r.data[5]=56,r.data[6]=67,r.data[7]=255,n.putImageData(r,0,0),r=null,12===(r=n.getImageData(0,0,2,1)).data[0]&&23===r.data[1]&&34===r.data[2]&&255===r.data[3]&&45===r.data[4]&&56===r.data[5]&&67===r.data[6]&&255===r.data[7]&&(t=!0)}catch(i){}return t},t.exports.cib_can_use_region=function(){return new Promise((function(e){if("undefined"!=typeof createImageBitmap){var t=new Image;t.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",t.onload=function(){createImageBitmap(t,0,0,t.width,t.height).then((function(n){n.width===t.width&&n.height===t.height?e(!0):e(!1)}),(function(){return e(!1)}))},t.onerror=function(){return e(!1)}}else e(!1)}))}},{}],17:[function(e,t,n){t.exports=function(){var t,n=e("./mathlib");onmessage=function(e){var r=e.data.opts;if(!r.src&&r.srcBitmap){var i=new OffscreenCanvas(r.width,r.height),a=i.getContext("2d");a.drawImage(r.srcBitmap,0,0),r.src=a.getImageData(0,0,r.width,r.height).data,i.width=i.height=0,i=null,r.srcBitmap.close(),r.srcBitmap=null}t||(t=new n(e.data.features));var o=t.resizeAndUnsharp(r);postMessage({data:o},[o.buffer])}}},{"./mathlib":1}],18:[function(e,t,n){var r,i,a,o,s,l;function u(e){e<.5&&(e=.5);var t=Math.exp(.726*.726)/e,n=Math.exp(-t),u=Math.exp(-2*t),c=(1-n)*(1-n)/(1+2*t*n-u);return r=c,i=c*(t-1)*n,a=c*(t+1)*n,o=-c*u,s=2*n,l=-u,new Float32Array([r,i,a,o,s,l,(r+i)/(1-s-l),(a+o)/(1-s-l)])}function c(e,t,n,r,i,a){var o,s,l,u,c,d,p,f,h,m,v,g,y,b;for(h=0;h<a;h++){for(p=h,f=0,u=c=(o=e[d=h*i])*r[6],v=r[0],g=r[1],y=r[4],b=r[5],m=0;m<i;m++)l=(s=e[d])*v+o*g+u*y+c*b,c=u,u=l,o=s,n[f]=u,f++,d++;for(f--,p+=a*(i-1),u=c=(o=e[--d])*r[7],s=o,v=r[2],g=r[3],m=i-1;m>=0;m--)l=s*v+o*g+u*y+c*b,c=u,u=l,o=s,s=e[d],t[p]=n[f]+u,d--,f--,p-=a}}function d(e,t,n,r){if(r){var i=new Uint16Array(e.length),a=new Float32Array(Math.max(t,n)),o=u(r);c(e,i,a,o,t,n),c(i,e,a,o,n,t)}}t.exports=d},{}],19:[function(e,t,n){var r=e("object-assign"),i=e("./lib/base64decode"),a=e("./lib/wa_detect"),o={js:!0,wasm:!0};function s(e){if(!(this instanceof s))return new s(e);var t=r({},o,e||{});if(this.options=t,this.__cache={},this.__init_promise=null,this.__modules=t.modules||{},this.__memory=null,this.__wasm={},this.__isLE=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0],!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}s.prototype.has_wasm=a,s.prototype.use=function(e){return this.__modules[e.name]=e,this.options.wasm&&this.has_wasm()&&e.wasm_fn?this[e.name]=e.wasm_fn:this[e.name]=e.fn,this},s.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error(`mathlib: only "wasm" was enabled, but it's not supported`));var e=this;return this.__init_promise=Promise.all(Object.keys(e.__modules).map((function(t){var n=e.__modules[t];return e.options.wasm&&e.has_wasm()&&n.wasm_fn?e.__wasm[t]?null:WebAssembly.compile(e.__base64decode(n.wasm_src)).then((function(n){e.__wasm[t]=n})):null}))).then((function(){return e})),this.__init_promise},s.prototype.__base64decode=i,s.prototype.__reallocate=function(e){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(e/(64*1024))}),this.__memory;var t=this.__memory.buffer.byteLength;return t<e&&this.__memory.grow(Math.ceil((e-t)/(64*1024))),this.__memory},s.prototype.__instance=function(e,t,n){if(t&&this.__reallocate(t),!this.__wasm[e]){var i=this.__modules[e];this.__wasm[e]=new WebAssembly.Module(this.__base64decode(i.wasm_src))}if(!this.__cache[e]){var a={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[e]=new WebAssembly.Instance(this.__wasm[e],{env:r(a,n||{})})}return this.__cache[e]},s.prototype.__align=function(e,t){var n=e%(t=t||8);return e+(n?t-n:0)},t.exports=s},{"./lib/base64decode":20,"./lib/wa_detect":21,"object-assign":22}],20:[function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports=function(e){for(var t=e.replace(/[\r\n=]/g,""),n=t.length,i=new Uint8Array(3*n>>2),a=0,o=0,s=0;s<n;s++)s%4==0&&s&&(i[o++]=a>>16&255,i[o++]=a>>8&255,i[o++]=255&a),a=a<<6|r.indexOf(t.charAt(s));var l=n%4*6;return 0===l?(i[o++]=a>>16&255,i[o++]=a>>8&255,i[o++]=255&a):18===l?(i[o++]=a>>10&255,i[o++]=a>>2&255):12===l&&(i[o++]=a>>4&255),i}},{}],21:[function(e,t,n){var r;t.exports=function(){if(void 0!==r)return r;if(r=!1,"undefined"==typeof WebAssembly)return r;try{var e=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),t=new WebAssembly.Module(e);return 0!==new WebAssembly.Instance(t,{}).exports.test(4)&&(r=!0),r}catch(n){}return r}},{}],22:[function(e,t,n){var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function s(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(a){return!1}}t.exports=s()?Object.assign:function(e,t){for(var n,s,l=o(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))i.call(n,c)&&(l[c]=n[c]);if(r){s=r(n);for(var d=0;d<s.length;d++)a.call(n,s[d])&&(l[s[d]]=n[s[d]])}}return l}},{}],23:[function(e,t,n){var r=arguments[3],i=arguments[4],a=arguments[5],o=JSON.stringify;t.exports=function(e,t){for(var n,s=Object.keys(a),l=0,u=s.length;l<u;l++){var c=s[l],d=a[c].exports;if(d===e||d&&d.default===e){n=c;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var p={};for(l=0,u=s.length;l<u;l++)p[c=s[l]]=c;i[n]=["function(require,module,exports){"+e+"(self); }",p]}var f=Math.floor(Math.pow(16,8)*Math.random()).toString(16),h={};h[n]=n,i[f]=["function(require,module,exports){var f = require("+o(n)+");(f.default ? f.default : f)(self);}",h];var m={};function v(e){for(var t in m[e]=!0,i[e][1]){var n=i[e][1][t];m[n]||v(n)}}v(f);var g="("+r+")({"+Object.keys(m).map((function(e){return o(e)+":["+i[e][0]+","+o(i[e][1])+"]"})).join(",")+"},{},["+o(f)+"])",y=window.URL||window.webkitURL||window.mozURL||window.msURL,b=new Blob([g],{type:"text/javascript"});if(t&&t.bare)return b;var w=y.createObjectURL(b),_=new Worker(w);return _.objectURL=w,_}},{}],"/index.js":[function(e,t,n){function r(e,t){return l(e)||s(e,t)||a(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==n["return"]||n["return"]()}finally{if(s)throw i}}return a}}function l(e){if(Array.isArray(e))return e}var u=e("object-assign"),c=e("webworkify"),d=e("./lib/mathlib"),p=e("./lib/pool"),f=e("./lib/utils"),h=e("./lib/worker"),m=e("./lib/stepper"),v=e("./lib/tiler"),g=e("./lib/mm_resize/resize_filter_info"),y={},b=!1;try{"undefined"!=typeof navigator&&navigator.userAgent&&(b=navigator.userAgent.indexOf("Safari")>=0)}catch(Mh){}var w=1;"undefined"!=typeof navigator&&(w=Math.min(navigator.hardwareConcurrency||1,4));var _={tile:1024,concurrency:w,features:["js","wasm","ww"],idle:2e3,createCanvas:function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n}},x={filter:"mks2013",unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},k=!1,A=!1,E=!1,I=!1,S=!1;function R(){return{value:c(h),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var e=window.URL||window.webkitURL||window.mozURL||window.msURL;e&&e.revokeObjectURL&&this.value.objectURL&&e.revokeObjectURL(this.value.objectURL)}}}}function C(e){if(!(this instanceof C))return new C(e);this.options=u({},_,e||{});var t="lk_".concat(this.options.concurrency);this.__limit=y[t]||f.limiter(this.options.concurrency),y[t]||(y[t]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}C.prototype.init=function(){var t=this;if(this.__initPromise)return this.__initPromise;if("undefined"!=typeof ImageData&&"undefined"!=typeof Uint8ClampedArray)try{new ImageData(new Uint8ClampedArray(400),10,10),k=!0}catch(l){}"undefined"!=typeof ImageBitmap&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?A=!0:this.debug("ImageBitmap does not support .close(), disabled"));var n=this.options.features.slice();if(n.indexOf("all")>=0&&(n=["cib","wasm","js","ww"]),this.__requested_features=n,this.__mathlib=new d(n),n.indexOf("ww")>=0&&"undefined"!=typeof window&&"Worker"in window)try{e("webworkify")((function(){})).terminate(),this.features.ww=!0;var r="wp_".concat(JSON.stringify(this.options));y[r]?this.__workersPool=y[r]:(this.__workersPool=new p(R,this.options.idle),y[r]=this.__workersPool)}catch(l){}var i,a,o=this.__mathlib.init().then((function(e){u(t.features,e.features)}));i=A?f.cib_support(this.options.createCanvas).then((function(e){t.features.cib&&n.indexOf("cib")<0?t.debug("createImageBitmap() resize supported, but disabled by config"):n.indexOf("cib")>=0&&(t.features.cib=e)})):Promise.resolve(!1),E=f.can_use_canvas(this.options.createCanvas),a=(a=A&&k&&-1!==n.indexOf("ww")?f.worker_offscreen_canvas_support():Promise.resolve(!1)).then((function(e){I=e}));var s=f.cib_can_use_region().then((function(e){S=e}));return this.__initPromise=Promise.all([o,i,a,s]).then((function(){return t})),this.__initPromise},C.prototype.__invokeResize=function(e,t){var n=this;return t.__mathCache=t.__mathCache||{},Promise.resolve().then((function(){return n.features.ww?new Promise((function(r,i){var a=n.__workersPool.acquire();t.cancelToken&&t.cancelToken["catch"]((function(e){return i(e)})),a.value.onmessage=function(e){a.release(),e.data.err?i(e.data.err):r(e.data)};var o=[];e.src&&o.push(e.src.buffer),e.srcBitmap&&o.push(e.srcBitmap),a.value.postMessage({opts:e,features:n.__requested_features,preload:{wasm_nodule:n.__mathlib.__}},o)})):{data:n.__mathlib.resizeAndUnsharp(e,t.__mathCache)}}))},C.prototype.__extractTileData=function(e,t,n,r,i){if(this.features.ww&&I&&(f.isCanvas(t)||S))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(r.srcImageBitmap||t,e.x,e.y,e.width,e.height).then((function(e){return i.srcBitmap=e,i}));if(f.isCanvas(t))return r.srcCtx||(r.srcCtx=t.getContext("2d")),this.debug("Get tile pixel data"),i.src=r.srcCtx.getImageData(e.x,e.y,e.width,e.height).data,i;this.debug("Draw tile imageBitmap/image to temporary canvas");var a=this.options.createCanvas(e.width,e.height),o=a.getContext("2d");return o.globalCompositeOperation="copy",o.drawImage(r.srcImageBitmap||t,e.x,e.y,e.width,e.height,0,0,e.width,e.height),this.debug("Get tile pixel data"),i.src=o.getImageData(0,0,e.width,e.height).data,a.width=a.height=0,i},C.prototype.__landTileData=function(e,t,n){var r;if(this.debug("Convert raw rgba tile result to ImageData"),t.bitmap)return n.toCtx.drawImage(t.bitmap,e.toX,e.toY),null;if(k)r=new ImageData(new Uint8ClampedArray(t.data),e.toWidth,e.toHeight);else if((r=n.toCtx.createImageData(e.toWidth,e.toHeight)).data.set)r.data.set(t.data);else for(var i=r.data.length-1;i>=0;i--)r.data[i]=t.data[i];return this.debug("Draw tile"),b?n.toCtx.putImageData(r,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth+1e-5,e.toInnerHeight+1e-5):n.toCtx.putImageData(r,e.toX,e.toY,e.toInnerX-e.toX,e.toInnerY-e.toY,e.toInnerWidth,e.toInnerHeight),null},C.prototype.__tileAndResize=function(e,t,n){var r=this,i={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null},a=function(t){return r.__limit((function(){if(n.canceled)return n.cancelToken;var a={width:t.width,height:t.height,toWidth:t.toWidth,toHeight:t.toHeight,scaleX:t.scaleX,scaleY:t.scaleY,offsetX:t.offsetX,offsetY:t.offsetY,filter:n.filter,unsharpAmount:n.unsharpAmount,unsharpRadius:n.unsharpRadius,unsharpThreshold:n.unsharpThreshold};return r.debug("Invoke resize math"),Promise.resolve(a).then((function(a){return r.__extractTileData(t,e,n,i,a)})).then((function(e){return r.debug("Invoke resize math"),r.__invokeResize(e,n)})).then((function(e){return n.canceled?n.cancelToken:(i.srcImageData=null,r.__landTileData(t,e,i))}))}))};return Promise.resolve().then((function(){if(i.toCtx=t.getContext("2d"),f.isCanvas(e))return null;if(f.isImageBitmap(e))return i.srcImageBitmap=e,i.isImageBitmapReused=!0,null;if(f.isImage(e))return A?(r.debug("Decode image via createImageBitmap"),createImageBitmap(e).then((function(e){i.srcImageBitmap=e}))["catch"]((function(e){return null}))):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')})).then((function(){if(n.canceled)return n.cancelToken;r.debug("Calculate tiles");var e=v({width:n.width,height:n.height,srcTileSize:r.options.tile,toWidth:n.toWidth,toHeight:n.toHeight,destTileBorder:n.__destTileBorder}).map((function(e){return a(e)}));function o(e){e.srcImageBitmap&&(e.isImageBitmapReused||e.srcImageBitmap.close(),e.srcImageBitmap=null)}return r.debug("Process tiles"),Promise.all(e).then((function(){return r.debug("Finished!"),o(i),t}),(function(e){throw o(i),e}))}))},C.prototype.__processStages=function(e,t,n,i){var a=this;if(i.canceled)return i.cancelToken;var o,s,l=r(e.shift(),2),c=l[0],d=l[1],p=0===e.length;return o=p||g.q2f.indexOf(i.filter)<0?i.filter:"box"===i.filter?"box":"hamming",i=u({},i,{toWidth:c,toHeight:d,filter:o}),p||(s=this.options.createCanvas(c,d)),this.__tileAndResize(t,p?n:s,i).then((function(){return p?n:(i.width=c,i.height=d,a.__processStages(e,s,n,i))})).then((function(e){return s&&(s.width=s.height=0),e}))},C.prototype.__resizeViaCreateImageBitmap=function(e,t,n){var r=this,i=t.getContext("2d");return this.debug("Resize via createImageBitmap()"),createImageBitmap(e,{resizeWidth:n.toWidth,resizeHeight:n.toHeight,resizeQuality:f.cib_quality_name(g.f2q[n.filter])}).then((function(e){if(n.canceled)return n.cancelToken;if(!n.unsharpAmount)return i.drawImage(e,0,0),e.close(),i=null,r.debug("Finished!"),t;r.debug("Unsharp result");var a=r.options.createCanvas(n.toWidth,n.toHeight),o=a.getContext("2d");o.drawImage(e,0,0),e.close();var s=o.getImageData(0,0,n.toWidth,n.toHeight);return r.__mathlib.unsharp_mask(s.data,n.toWidth,n.toHeight,n.unsharpAmount,n.unsharpRadius,n.unsharpThreshold),i.putImageData(s,0,0),a.width=a.height=0,s=o=a=i=null,r.debug("Finished!"),t}))},C.prototype.resize=function(e,t,n){var r=this;this.debug("Start resize...");var i=u({},x);if(isNaN(n)?n&&(i=u(i,n)):i=u(i,{quality:n}),i.toWidth=t.width,i.toHeight=t.height,i.width=e.naturalWidth||e.width,i.height=e.naturalHeight||e.height,Object.prototype.hasOwnProperty.call(i,"quality")){if(i.quality<0||i.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(i.quality));i.filter=g.q2f[i.quality]}if(0===t.width||0===t.height)return Promise.reject(new Error("Invalid output size: ".concat(t.width,"x").concat(t.height)));i.unsharpRadius>2&&(i.unsharpRadius=2),i.canceled=!1,i.cancelToken&&(i.cancelToken=i.cancelToken.then((function(e){throw i.canceled=!0,e}),(function(e){throw i.canceled=!0,e})));var a=3;return i.__destTileBorder=Math.ceil(Math.max(a,2.5*i.unsharpRadius|0)),this.init().then((function(){if(i.canceled)return i.cancelToken;if(r.features.cib){if(g.q2f.indexOf(i.filter)>=0)return r.__resizeViaCreateImageBitmap(e,t,i);r.debug("cib is enabled, but not supports provided filter, fallback to manual math")}if(!E){var n=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw n.code="ERR_GET_IMAGE_DATA",n}var a=m(i.width,i.height,i.toWidth,i.toHeight,r.options.tile,i.__destTileBorder);return r.__processStages(a,e,t,i)}))},C.prototype.resizeBuffer=function(e){var t=this,n=u({},x,e);if(Object.prototype.hasOwnProperty.call(n,"quality")){if(n.quality<0||n.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(n.quality));n.filter=g.q2f[n.quality]}return this.init().then((function(){return t.__mathlib.resizeAndUnsharp(n)}))},C.prototype.toBlob=function(e,t,n){return t=t||"image/png",new Promise((function(r){if(e.toBlob)e.toBlob((function(e){return r(e)}),t,n);else if(e.convertToBlob)r(e.convertToBlob({type:t,quality:n}));else{for(var i=atob(e.toDataURL(t,n).split(",")[1]),a=i.length,o=new Uint8Array(a),s=0;s<a;s++)o[s]=i.charCodeAt(s);r(new Blob([o],{type:t}))}}))},C.prototype.debug=function(){},t.exports=C},{"./lib/mathlib":1,"./lib/mm_resize/resize_filter_info":7,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":22,webworkify:23}]},{},[])("/index.js");var cq={},dq={exports:{}};!function(e){function t(e,t){var n=new Error(e);return n.code=t,n}function n(e){for(var t=e.toString(16).toUpperCase(),n=2-t.length;n>0;n--)t="0"+t;return"0x"+t}function r(e){try{return decodeURIComponent(escape(e))}catch(t){return e}}function i(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}function a(e,n,r){this.input=e.subarray(n,r),this.start=n;var i=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==i&&"MM\0*"!==i)throw t("invalid TIFF signature","EBADDATA");this.big_endian="M"===i[0]}a.prototype.each=function(e){this.aborted=!1;var t=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:t}];this.ifds_to_read.length>0&&!this.aborted;){var n=this.ifds_to_read.shift();n.offset&&this.scan_ifd(n.id,n.offset,e)}},a.prototype.filter=function(e){var n={ifd0:{id:0,entries:[]}};this.each((function(t){(!1!==e(t)||t.is_subifd_link)&&(t.is_subifd_link&&1!==t.count&&4!==t.format||(n["ifd"+t.ifd]||(n["ifd"+t.ifd]={id:t.ifd,entries:[]}),n["ifd"+t.ifd].entries.push(t)))})),delete n.ifd1;var r=8;Object.keys(n).forEach((function(e){r+=2,n[e].entries.forEach((function(e){r+=12+(e.data_length>4?2*Math.ceil(e.data_length/2):0)})),r+=4})),this.output=new Uint8Array(r),this.output[0]=this.output[1]=(this.big_endian?"M":"I").charCodeAt(0),this.write_uint16(2,42);var i=8,a=this;if(this.write_uint32(4,i),Object.keys(n).forEach((function(e){n[e].written_offset=i;var t=i,r=t+2+12*n[e].entries.length+4;i=r,a.write_uint16(t,n[e].entries.length),n[e].entries.sort((function(e,t){return e.tag-t.tag})).forEach((function(e,r){var o=t+2+12*r;a.write_uint16(o,e.tag),a.write_uint16(o+2,e.format),a.write_uint32(o+4,e.count),e.is_subifd_link?n["ifd"+e.tag]&&(n["ifd"+e.tag].link_offset=o+8):e.data_length<=4?a.output.set(a.input.subarray(e.data_offset-a.start,e.data_offset-a.start+4),o+8):(a.write_uint32(o+8,i),a.output.set(a.input.subarray(e.data_offset-a.start,e.data_offset-a.start+e.data_length),i),i+=2*Math.ceil(e.data_length/2))}));var o=n["ifd"+(n[e].id+1)];o&&(o.link_offset=r-4)})),Object.keys(n).forEach((function(e){n[e].written_offset&&n[e].link_offset&&a.write_uint32(n[e].link_offset,n[e].written_offset)})),this.output.length!==i)throw t("internal error: incorrect buffer size allocated");return this.output},a.prototype.read_uint16=function(e){var n=this.input;if(e+2>n.length)throw t("unexpected EOF","EBADDATA");return this.big_endian?256*n[e]+n[e+1]:n[e]+256*n[e+1]},a.prototype.read_uint32=function(e){var n=this.input;if(e+4>n.length)throw t("unexpected EOF","EBADDATA");return this.big_endian?16777216*n[e]+65536*n[e+1]+256*n[e+2]+n[e+3]:n[e]+256*n[e+1]+65536*n[e+2]+16777216*n[e+3]},a.prototype.write_uint16=function(e,t){var n=this.output;this.big_endian?(n[e]=t>>>8&255,n[e+1]=255&t):(n[e]=255&t,n[e+1]=t>>>8&255)},a.prototype.write_uint32=function(e,t){var n=this.output;this.big_endian?(n[e]=t>>>24&255,n[e+1]=t>>>16&255,n[e+2]=t>>>8&255,n[e+3]=255&t):(n[e]=255&t,n[e+1]=t>>>8&255,n[e+2]=t>>>16&255,n[e+3]=t>>>24&255)},a.prototype.is_subifd_link=function(e,t){return 0===e&&34665===t||0===e&&34853===t||34665===e&&40965===t},a.prototype.exif_format_length=function(e){switch(e){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},a.prototype.exif_format_read=function(e,t){var n;switch(e){case 1:case 2:return n=this.input[t];case 6:return(n=this.input[t])|33554430*(128&n);case 3:return n=this.read_uint16(t);case 8:return(n=this.read_uint16(t))|131070*(32768&n);case 4:return n=this.read_uint32(t);case 9:return 0|(n=this.read_uint32(t));default:return null}},a.prototype.scan_ifd=function(e,n,i){var a=this.read_uint16(n);n+=2;for(var o=0;o<a;o++){var s=this.read_uint16(n),l=this.read_uint16(n+2),u=this.read_uint32(n+4),c=this.exif_format_length(l),d=u*c,p=d<=4?n+8:this.read_uint32(n+8),f=!1;if(p+d>this.input.length)throw t("unexpected EOF","EBADDATA");for(var h=[],m=p,v=0;v<u;v++,m+=c){var g=this.exif_format_read(l,m);if(null===g){h=null;break}h.push(g)}if(Array.isArray(h)&&2===l){try{h=r(String.fromCharCode.apply(null,h))}catch(y){h=null}h&&"\0"===h[h.length-1]&&(h=h.slice(0,-1))}if(this.is_subifd_link(e,s)&&Array.isArray(h)&&Number.isInteger(h[0])&&h[0]>0&&(this.ifds_to_read.push({id:s,offset:h[0]}),f=!0),!1===i({is_big_endian:this.big_endian,ifd:e,tag:s,format:l,count:u,entry_offset:n+this.start,data_length:d,data_offset:p+this.start,value:h,is_subifd_link:f}))return void(this.aborted=!0);n+=12}0===e&&this.ifds_to_read.push({id:1,offset:this.read_uint32(n)})},e.exports.is_jpeg=function(e){return e.length>=4&&255===e[0]&&216===e[1]&&255===e[2]},e.exports.jpeg_segments_each=function(r,a){if(!i(r))throw t("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if("function"!=typeof a)throw t("Invalid argument (on_segment), Function expected","EINVAL");if(!e.exports.is_jpeg(r))throw t("Unknown file format","ENOTJPEG");for(var o=0,s=r.length,l=!1;;){var u,c;if(o+1>=s)throw t("Unexpected EOF","EBADDATA");var d=r[o],p=r[o+1];if(255===d&&255===p)u=255,c=1;else if(255===d&&0!==p){if(c=2,208<=(u=p)&&u<=217||1===u);else{if(o+3>=s)throw t("Unexpected EOF","EBADDATA");if((c+=256*r[o+2]+r[o+3])<2)throw t("Invalid segment length","EBADDATA");if(o+c-1>=s)throw t("Unexpected EOF","EBADDATA")}l&&(u>=208&&u<=215||(l=!1)),218===u&&(l=!0)}else{if(!l)throw t("Unexpected byte at segment start: "+n(d)+" (offset "+n(o)+")","EBADDATA");for(var f=o+1;;f++){if(f>=s)throw t("Unexpected EOF","EBADDATA");if(255===r[f]){if(f+1>=s)throw t("Unexpected EOF","EBADDATA");if(0!==r[f+1]){u=0,c=f-o;break}}}}if(!1===a({code:u,offset:o,length:c}))break;if(217===u)break;o+=c}},e.exports.jpeg_segments_filter=function(n,r){if(!i(n))throw t("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if("function"!=typeof r)throw t("Invalid argument (on_segment), Function expected","EINVAL");var a=[],o=0;e.exports.jpeg_segments_each(n,(function(e){var t=r(e);if(i(t))a.push({data:t}),o+=t.length;else if(Array.isArray(t))t.filter(i).forEach((function(e){a.push({data:e}),o+=e.length}));else if(!1!==t){var n={start:e.offset,end:e.offset+e.length};a.length>0&&a[a.length-1].end===n.start?a[a.length-1].end=n.end:a.push(n),o+=e.length}}));var s=new Uint8Array(o),l=0;return a.forEach((function(e){var t=e.data||n.subarray(e.start,e.end);s.set(t,l),l+=t.length})),s},e.exports.jpeg_exif_tags_each=function(n,r){if(!i(n))throw t("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if("function"!=typeof r)throw t("Invalid argument (on_exif_entry), Function expected","EINVAL");e.exports.jpeg_segments_each(n,(function(e){return 218!==e.code&&(225===e.code&&e.length>=10&&69===n[e.offset+4]&&120===n[e.offset+5]&&105===n[e.offset+6]&&102===n[e.offset+7]&&0===n[e.offset+8]&&0===n[e.offset+9]?(new a(n,e.offset+10,e.offset+e.length).each(r),!1):void 0)}))},e.exports.jpeg_exif_tags_filter=function(n,r){if(!i(n))throw t("Invalid argument (jpeg_bin), Uint8Array expected","EINVAL");if("function"!=typeof r)throw t("Invalid argument (on_exif_entry), Function expected","EINVAL");var o=!1;return e.exports.jpeg_segments_filter(n,(function(e){if(!o&&(218===e.code&&(o=!0),225===e.code&&e.length>=10&&69===n[e.offset+4]&&120===n[e.offset+5]&&105===n[e.offset+6]&&102===n[e.offset+7]&&0===n[e.offset+8]&&0===n[e.offset+9])){var t=new a(n,e.offset+10,e.offset+e.length).filter(r);if(!t)return!1;var i=new Uint8Array(10);return i.set(n.slice(e.offset,e.offset+10)),i[2]=t.length+8>>>8&255,i[3]=t.length+8&255,o=!0,[i,t]}}))},e.exports.jpeg_add_comment=function(t,n){var r=!1,i=0;return e.exports.jpeg_segments_filter(t,(function(e){if(!(1===++i&&216===e.code||2===i&&224===e.code||r)){n=function(e){try{return unescape(encodeURIComponent(e))}catch(t){return e}}(n);var a=new Uint8Array(5+n.length),o=0;return a[o++]=255,a[o++]=254,a[o++]=n.length+3>>>8&255,a[o++]=n.length+3&255,n.split("").forEach((function(e){a[o++]=255&e.charCodeAt(0)})),a[o++]=0,r=!0,[a,t.subarray(e.offset,e.offset+e.length)]}}))}}(dq);var pq=dq.exports;function fq(e){return this._getUint8Array(e.blob).then((function(t){if(e.is_jpeg=pq.is_jpeg(t),!e.is_jpeg)return Promise.resolve(e);e.orig_blob=e.blob;try{var n,r;if(pq.jpeg_exif_tags_each(t,(function(t){if(0===t.ifd&&274===t.tag&&Array.isArray(t.value))return e.orientation=t.value[0]||1,n=t.is_big_endian,r=t.data_offset,!1})),r){var i=n?new Uint8Array([0,1]):new Uint8Array([1,0]);e.blob=new Blob([t.slice(0,r),i,t.slice(r+2)],{type:"image/jpeg"})}}catch(a){}return e}))}function hq(e){if(!e.is_jpeg)return Promise.resolve(e);var t,n=e.orientation-1;if(!n)return Promise.resolve(e);var r=(t=4&n?this.pica.options.createCanvas(e.out_canvas.height,e.out_canvas.width):this.pica.options.createCanvas(e.out_canvas.width,e.out_canvas.height)).getContext("2d");return r.save(),1&n&&r.transform(-1,0,0,1,t.width,0),2&n&&r.transform(-1,0,0,-1,t.width,t.height),4&n&&r.transform(0,1,1,0,0,0),r.drawImage(e.out_canvas,0,0),r.restore(),e.out_canvas.width=e.out_canvas.height=0,e.out_canvas=t,Promise.resolve(e)}function mq(e){return e.is_jpeg?Promise.all([this._getUint8Array(e.blob),this._getUint8Array(e.out_blob)]).then((function(t){var n=t[0],r=t[1];if(!pq.is_jpeg(n))return Promise.resolve(e);var i=[];return pq.jpeg_segments_each(n,(function(e){if(218===e.code)return!1;i.push(e)})),i=i.filter((function(e){return 226!==e.code&&(e.code>=224&&e.code<240||254===e.code)})).map((function(e){return n.slice(e.offset,e.offset+e.length)})),e.out_blob=new Blob([r.slice(0,2)].concat(i).concat([r.slice(20)]),{type:"image/jpeg"}),e})):Promise.resolve(e)}cq.jpeg_patch_exif=fq,cq.jpeg_rotate_canvas=hq,cq.jpeg_attach_orig_segments=mq,cq.assign=function(e){e.before("_blob_to_image",fq),e.after("_transform",hq),e.after("_create_blob",mq)};var vq=sq,gq=uq.exports;function yq(e){if(!(this instanceof yq))return new yq(e);e=e||{},this.pica=e.pica||gq({}),this.initialized=!1,this.utils=vq}yq.prototype.use=function(e){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},yq.prototype.init=function(){this.use(cq.assign)},yq.prototype.toBlob=function(e,t){var n={blob:e,opts:vq.assign({max:1/0},t)};return this.initialized||(this.init(),this.initialized=!0),Promise.resolve(n).then(this._blob_to_image).then(this._calculate_size).then(this._transform).then(this._cleanup).then(this._create_blob).then((function(e){return e.out_canvas.width=e.out_canvas.height=0,e.out_blob}))},yq.prototype.toCanvas=function(e,t){var n={blob:e,opts:vq.assign({max:1/0},t)};return this.initialized||(this.init(),this.initialized=!0),Promise.resolve(n).then(this._blob_to_image).then(this._calculate_size).then(this._transform).then(this._cleanup).then((function(e){return e.out_canvas}))},yq.prototype.before=function(e,t){if(!this[e])throw new Error('Method "'+e+'" does not exist');if("function"!=typeof t)throw new Error('Invalid argument "fn", function expected');var n=this[e],r=this;return this[e]=function(e){return t.call(r,e).then((function(e){return n.call(r,e)}))},this},yq.prototype.after=function(e,t){if(!this[e])throw new Error('Method "'+e+'" does not exist');if("function"!=typeof t)throw new Error('Invalid argument "fn", function expected');var n=this[e],r=this;return this[e]=function(e){return n.call(r,e).then((function(e){return t.call(r,e)}))},this},yq.prototype._blob_to_image=function(e){var t=window.URL||window.webkitURL||window.mozURL||window.msURL;return e.image=document.createElement("img"),e.image_url=t.createObjectURL(e.blob),e.image.src=e.image_url,new Promise((function(t,n){e.image.onerror=function(){n(new Error("ImageBlobReduce: failed to create Image() from blob"))},e.image.onload=function(){t(e)}}))},yq.prototype._calculate_size=function(e){var t=e.opts.max/Math.max(e.image.width,e.image.height);return t>1&&(t=1),e.transform_width=Math.max(Math.round(e.image.width*t),1),e.transform_height=Math.max(Math.round(e.image.height*t),1),e.scale_factor=t,Promise.resolve(e)},yq.prototype._transform=function(e){e.out_canvas=this.pica.options.createCanvas(e.transform_width,e.transform_height),e.transform_width=null,e.transform_height=null;var t={alpha:"image/png"===e.blob.type};return this.utils.assign(t,this.utils.pick_pica_resize_options(e.opts)),this.pica.resize(e.image,e.out_canvas,t).then((function(){return e}))},yq.prototype._cleanup=function(e){e.image.src="",e.image=null;var t=window.URL||window.webkitURL||window.mozURL||window.msURL;return t.revokeObjectURL&&t.revokeObjectURL(e.image_url),e.image_url=null,Promise.resolve(e)},yq.prototype._create_blob=function(e){return this.pica.toBlob(e.out_canvas,e.blob.type).then((function(t){return e.out_blob=t,e}))},yq.prototype._getUint8Array=function(e){return e.arrayBuffer?e.arrayBuffer().then((function(e){return new Uint8Array(e)})):new Promise((function(t,n){var r=new FileReader;r.readAsArrayBuffer(e),r.onload=function(){t(new Uint8Array(r.result))},r.onerror=function(){n(new Error("ImageBlobReduce: failed to load data from input blob")),r.abort()},r.onabort=function(){n(new Error("ImageBlobReduce: failed to load data from input blob (aborted)"))}}))},yq.pica=gq;var bq=yq;const wq={key:0},_q=["title"],xq={class:"flex items-center text-gray-700 overflow-auto whitespace-pre-wrap min-h-clickable align-center"},kq={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md md:w-96"},Aq={class:"space-y-1 text-center"},Eq={class:"flex text-sm text-gray-600"},Iq={class:"pl-1 hidden md:block"},Sq={class:"text-xs text-gray-500"},Rq={class:"text-gray-800 mt-4"},Cq={class:"flex flex-col mt-4 space-y-2 w-full self-end md:flex-row md:space-x-2 md:space-y-0"},Oq=ro("div",{class:"flex-grow"},null,-1),Dq=Si({props:{recipe:tI(),imageUrl:sI()},setup(e){var t,n;const r=R$({customUrl:{type:S$.String,default:null!=(t=e.imageUrl)?t:""}});let i=_r(null!=(n=e.imageUrl)?n:""),a=_r(!1);const o=_r(null),s=Lo((()=>/^(tmp|solid):\/\//.test(i.value)));return di((async()=>a.value=await MC.has(i.value))),(t,n)=>{const l=TB,u=aq,c=RB,d=WN,p=p$,f=Sz,h=GI,m=l$,v=cS,g=$a("initial-focus");return Ha(),Ya(v,{ref_key:"$root",ref:o,title:t.$t("recipes.image_edit_title")},{default:ii((()=>[io(m,{form:Ar(r),class:"flex flex-col",onSubmit:n[5]||(n[5]=e=>function(){var e;const t=r.customUrl.trim();null==(e=o.value)||e.close(t.length>0?t:null)}())},{default:ii((()=>[i.value?(Ha(),Ka("div",wq,[io(l,{recipe:e.recipe,url:i.value,class:"w-full aspect-[5/2] max-h-[60vh] min-w-modal-content md:min-w-modal-content-md"},null,8,["recipe","url"]),s.value?lo("",!0):(Ha(),Ka("div",{key:0,class:"flex items-center mt-2",title:a.value?t.$t("recipes.image_edit_uploadPending"):""},[a.value?(Ha(),Ya(u,{key:0,class:"w-4 h-4 mr-2","aria-label":t.$t("recipes.image_edit_uploadPending")},null,8,["aria-label"])):lo("",!0),ro("pre",xq,pt(i.value),1)],8,_q))])):(Ha(),Ka(Ua,{key:1},[ro("div",null,[ro("div",kq,[ro("div",Aq,[io(c,{class:"mx-auto h-12 w-12 text-gray-400","aria-hidden":"true"}),ro("div",Eq,[io(d,{class:"relative cursor-pointer bg-white rounded-md font-medium text-primary-600 hover:text-primary-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary-500",accept:"image/png, image/jpeg, image/gif",onStart:n[0]||(n[0]=e=>t.$ui.showLoading(t.$t("recipes.image_edit_uploading"))),onError:n[1]||(n[1]=e=>(t.$errors.report(e),t.$ui.hideLoading())),onSuccess:n[2]||(n[2]=e=>async function(e){try{const t=`tmp://${N()}.png`,n=await(new bq).toBlob(e,{max:1024});await MC.store(t,"image/png",n),i.value=t,r.customUrl=t}catch(t){mC.report(t)}finally{fC.hideLoading()}}(e))},{default:ii((()=>[ro("span",null,pt(t.$t("recipes.image_edit_upload")),1)])),_:1}),ro("p",Iq,pt(t.$t("recipes.image_edit_drop")),1)]),ro("p",Sq,pt(t.$t("recipes.image_edit_mimeTypes")),1)])])]),ro("span",Rq,pt(t.$t("recipes.image_edit_customUrl"))+":",1),io(p,{ref:"input",label:t.$t("recipes.image_edit_url"),name:"customUrl",class:"mt-2",placeholder:"https://..."},null,8,["label"])],64)),ro("div",Cq,[i.value?(Ha(),Ya(h,{key:0,clear:"",class:"self-start",onClick:n[3]||(n[3]=e=>(i.value="",Ar(r).customUrl=""))},{default:ii((()=>[io(f,{class:"w-5 h-5 mr-2","aria-hidden":"true"}),oo(" "+pt(t.$t("recipes.image_edit_remove")),1)])),_:1})):lo("",!0),Oq,io(h,{class:"self-end",secondary:"",onClick:n[4]||(n[4]=e=>{var t;return null==(t=o.value)?void 0:t.close(null)})},{default:ii((()=>[oo(pt(t.$t("recipes.image_edit_discard")),1)])),_:1}),va((Ha(),Ya(h,{class:"self-end",type:"submit"},{default:ii((()=>[oo(pt(t.$t("recipes.image_edit_submit")),1)])),_:1})),[[g]])])])),_:1},8,["form"])])),_:1},8,["title"])}}});async function jq(e,t){const n=FI(e,".recipe-page--header"),r=FI(e,".recipe-page--body"),i=fC.isMobile?FI(e,".recipe-page--body-switch"):FI(e,".recipe-page--metadata-decoration"),a=r.getBoundingClientRect(),o=n.getBoundingClientRect();await BI({duration:t},[{element:r,before:{addClasses:"z-20 fixed w-full",removeClasses:"relative",styles:{height:Math.max(a.height,window.innerHeight-o.height)+"px"}},styles:{top:[`${a.top}px`,`${window.innerHeight+i.clientHeight}px`]}}])}async function Tq(e,t){const n=FI(e,".recipe-page--body"),r=fC.isMobile?FI(e,".recipe-page--body-switch"):FI(e,".recipe-page--metadata-decoration"),i=n.getBoundingClientRect();await BI({duration:t},[{element:n,before:{addClasses:"z-30"},after:{removeClasses:"z-30"},styles:{transform:[`translateY(${window.innerHeight-i.top+r.clientHeight}px)`,"translateY(0)"]}}])}async function Pq(e,t){const n=FI(e,".recipe-page--header"),r=FI(e,".recipe-page--image");await Promise.all([eS(n,t),eS(r,t)])}async function Mq(e,t){const n=FI(e,".recipe-page--image"),r=FI(e,".recipe-page--header");await BI({duration:t},[{element:n,styles:{transform:["translateY(-100%)","translateY(0)"]}},{element:r,styles:{transform:["translateY(-100%)","translateY(0)"]}}])}async function Lq(e,t){const n=FI(e,".recipe-page--image"),r=FI(e,".recipe-page--header");await BI({duration:t},[{element:n,styles:{transform:["translateY(0)","translateY(-100%)"]}},{element:r,styles:{transform:["translateY(0)","translateY(-100%)"]}}])}async function $q(e,{duration:t,withoutHeaderOverlay:n,$headerTitle:r,$headerTitleText:i,$card:a}){const o=FI(e,".recipe-page--image"),s=FI(e,".recipe-page--header"),l=FI(e,".recipe-page--header-wrapper"),u=FI(e,".recipe-page--header-overlay"),c=FI(e,".recipe-page--header-title-wrapper"),d=FI(e,".recipe-page--header-title-filler"),p=document.createElement("div"),f=o.getBoundingClientRect(),h=r.getBoundingClientRect(),m=a.getBoundingClientRect();n&&u.remove(),e.classList.remove("overflow-hidden"),d.remove(),await BI({duration:t,fill:"forwards"},[{element:o,before:{removeClasses:"fixed h-52 md:h-80",addClasses:"absolute h-full"},styles:{width:[`${window.innerWidth}px`,`${m.width}px`]}},{element:s,before:{prepend:o,addClasses:"overflow-hidden z-10 relative",removeClasses:"justify-center"},classes:{borderRadius:["rounded-none","rounded-lg"]},boundingRects:[f,m]},n?null:{element:u,styles:{opacity:[1,0]}},{element:l,before:{removeClasses:"justify-center pb-4 px-edge",prepend:p}},{element:p,before:{addClasses:"opacity-0 absolute inset-0 bg-gradient-to-t to-transparent from-dark-overlay"},styles:{opacity:[0,1]}},{element:c,before:{addClasses:"w-full flex-shrink-0",removeClasses:"mr-8 md:pr-36 max-w-prose"}},{element:r,before:{addClasses:"relative w-full"},classes:{paddingTop:["p-4","p-2"],paddingRight:["p-4","p-2"],paddingBottom:["p-4","p-2"],textShadow:["text-shadow","text-shadow-transparent"],fontSize:[fC.isMobile?"text-2xl":"text-4xl","text-lg"]},styles:{paddingLeft:[`${h.left}px`,JE.css("spacing.2")],paddingRight:[`${window.innerWidth-h.right}px`,JE.css("spacing.2")]}},{element:i,before:{addClasses:"relative"}}])}const Nq=async e=>{const t=500,n=FI(e,".recipe-form--recipe-page"),r=FI(e,".recipe-form--footer");await Promise.all([tS(n,t),sS(r,t)])},Bq=async e=>{const t=500,n=FI(e,".recipe-form--recipe-page"),r=FI(e,".recipe-form--footer");e.classList.add("z-20"),e.classList.add("relative"),await Promise.all([Tq(n,t),Mq(n,t),sS(r,t)]),e.classList.remove("z-20"),e.classList.remove("relative")},Uq=async(e,t)=>{const n=500,r=FI(t,".recipe-form--recipe-page"),i=FI(t,".recipe-form--footer");e.classList.add("z-10"),await Promise.all([nS(r,n),lS(i,n)])},Fq=async(e,t)=>{const n=500,r=FI(t,".recipe-form--recipe-page"),i=FI(t,".recipe-form--footer");e.classList.add("z-10"),t.classList.add("z-20"),t.classList.add("relative"),i.classList.add("z-20"),await Promise.all([jq(r,n),Lq(r,n),lS(i,n)])},zq=async(e,t,{element:n})=>{const r=500,i=FI(t,".recipe-form--recipe-page"),a=document.createElement("div"),o=document.createElement("span"),s=FI(t,".recipe-form--title-label"),l=FI(s,"textarea"),u=FI(t,".recipe-form--footer");e.classList.add("z-20"),a.setAttribute("class","text-4xl font-semibold text-white text-shadow"),a.append(o),o.innerText=l.value,s.replaceWith(a),u.classList.add("z-20"),await Promise.all([$q(i,{duration:r,withoutHeaderOverlay:$e(t.dataset.wasOnboarding),$headerTitle:a,$headerTitleText:o,$card:n}),jq(i,r),lS(u,r)])},qq={id:"recipe-form-title",class:"sr-only"},Vq={class:"absolute inset-0 group"},Qq={class:"flex items-center self-center px-4 py-2 bg-black bg-opacity-50 rounded-md hover:bg-opacity-100 group-focus:ring-2 group-focus:ring-offset-[rgba(255,255,255,.5)] group-focus:ring-offset-2 group-focus:ring-[rgba(0,0,0,.5)] hover:group-focus:ring-black"},Hq={class:"flex recipe-form--title-label"},Gq={class:"sr-only"},Wq={class:"flex flex-col items-start space-y-3"},Jq={key:0,class:"group relative w-full"},Kq={class:"not-prose mt-4"},Yq={class:"sr-only"},Zq={class:"ml-1"},Xq={class:"fixed flex justify-center inset-x-0 bottom-0 z-30 bg-primary-gray-300 recipe-form--footer"},eV={class:"mx-edge overflow-hidden"},tV={class:"flex"},nV={class:"prose mr-8"},rV=ro("div",{class:"w-72"},null,-1),iV={class:"flex flex-row-reverse items-center py-4 space-x-reverse space-x-4"},aV={class:"flex flex-row-reverse space-x-4 space-x-reverse"},oV=ro("div",{class:"flex-grow"},null,-1),sV={class:"!ml-1 sr-only md:not-sr-only"},lV=Si({props:{recipe:tI()},emits:["done","cancel"],setup(e,{emit:t}){var n,r,i,a,o,s,l,u,c,d,p,f,h,m,v,g,y,b;let w=_r(!1),_=_r(Jj.isOnboarding);const x={},k=R$({name:{type:S$.String,rules:"required",default:null!=(r=null==(n=e.recipe)?void 0:n.name)?r:""},description:{type:S$.String,default:null!=(a=null==(i=e.recipe)?void 0:i.description)?a:""},imageUrl:{type:S$.String,default:null!=(s=null==(o=e.recipe)?void 0:o.imageUrl)?s:""},servings:{type:S$.String,default:null!=(u=null==(l=e.recipe)?void 0:l.servings)?u:""},prepTime:{type:S$.String,default:null!=(d=fC.renderDuration(null==(c=e.recipe)?void 0:c.prepTime))?d:""},cookTime:{type:S$.String,default:null!=(f=fC.renderDuration(null==(p=e.recipe)?void 0:p.cookTime))?f:""},ingredients:{type:S$.Object,multi:!0,default:(null!=(m=null==(h=e.recipe)?void 0:h.sortedIngredients)?m:[]).map((e=>new Oz(e)))},instructions:{type:S$.Object,multi:!0,default:(null!=(g=null==(v=e.recipe)?void 0:v.sortedInstructions)?g:[]).map((e=>T(new Oz(e.text),(t=>x[t.id]=e.url))))},externalUrls:{type:S$.Object,multi:!0,default:(null!=(b=null==(y=e.recipe)?void 0:y.sortedExternalUrls)?b:[]).map((e=>new Oz(e)))}});let A=_r(null);const I=_r(null),S=_r(null),R=_r(null),C=_r(null),O=Lo((()=>{var t;return(null==(t=e.recipe)?void 0:t.exists())?hR("recipes.edit_a11y_title",{recipe:e.recipe.name}):hR("recipes.create_a11y_title")}));async function D(){var t,n;const r=await fC.openModal(Dq,{recipe:e.recipe,imageUrl:k.imageUrl}),i=await r.beforeClose;null==(t=document.querySelector(":focus"))||t.blur(),void 0!==i&&(null==(n=k.input("imageUrl"))||n.update(null!=i?i:""))}function j(e){const t=lC(e,sC);return t?function(e){const t=E([e.years&&`${e.years}Y`,e.months&&`${e.months}M`,e.weeks&&`${e.weeks}W`,e.days&&`${e.days}D`]).join(""),n=E([e.hours&&`${e.hours}H`,e.minutes&&`${e.minutes}M`,e.seconds&&`${e.seconds}S`]).join("");return`P${t}${n&&`T${n}`}`}(t):e}function P(e){var t,n;const r=k.instructions.map((({id:e})=>{var t;return null!=(t=x[e])?t:null})),i=k.instructions.filter((({value:e})=>!!e)).map((({id:e,value:t})=>L({url:x[e],text:t})));if(!e.exists())return e.setRelationModels("instructions",[]),e.relatedInstructions.reset(),void De(i.length).forEach((t=>e.relatedInstructions.attach({...i[t],position:t+1})));for(let a=0;a<i.length;a++){const n=i[a],r=n.url&&(null==(t=e.instructions)?void 0:t.find((e=>e.url===n.url)));n.position=a+1,r?r.setAttributes(n):e.relatedInstructions.attach(n)}for(const a of null!=(n=e.instructions)?n:[])a.exists()&&!r.includes(a.url)&&e.relatedInstructions.detach(a)}async function M(e){var t,n,r;if(k.imageUrl){if(k.imageUrl.startsWith("tmp://")){e.exists()||e.mintUrl();const r=(null==(t=e.imageUrl)?void 0:t.startsWith(e.requireContainerUrl()))?e.imageUrl:`${e.getDocumentUrl()}.png`;return await MC.rename(k.imageUrl,r),Wj.remoteCookbookUrl&&r.startsWith(Wj.remoteCookbookUrl)&&qC.enqueueFileUpload(r),void(e.imageUrls=[r,...null==(n=e.imageUrls)?void 0:n.slice(1)])}e.imageUrls=se([k.imageUrl,...null!=(r=e.imageUrls)?r:[]])}else e.imageUrls=[]}async function $(){const n=function(){const t={name:k.name,description:k.description||null,servings:k.servings||null,prepTime:j(k.prepTime)||null,cookTime:j(k.cookTime)||null,ingredients:E(k.ingredients.map((({value:e})=>e))),externalUrls:E(k.externalUrls.map((({value:e})=>e)))};return e.recipe?T(e.recipe,(e=>e.setAttributes(t))):new Qj(t)}();await Promise.all([P(n),M(n)]),await n.save(),A.value=n.url,t("done",n)}return $i((()=>_.value=Jj.isOnboarding)),(t,n)=>{var r,i;const a=TB,o=iB,s=VN,l=Cz,u=Sz,c=Az,d=GI,p=nq,f=Jz,h=Hz,m=Fz,v=WL,g=OF,y=mF,b=pz,x=pF,E=l$,j=$a("wobbly-border"),T=$a("element-transitions");return va((Ha(),Ya(E,{"data-was-onboarding":_.value,form:Ar(k),class:"flex flex-grow",onSubmit:n[13]||(n[13]=e=>$())},{default:ii((()=>{var r;return[ro("h1",qq,pt(O.value),1),io(b,{class:"recipe-form--recipe-page"},vo({image:ii((()=>[ro("div",Vq,[io(a,{recipe:e.recipe,url:Ar(k).imageUrl,class:"w-full h-full"},null,8,["recipe","url"]),ro("button",{type:"button",class:"group flex absolute inset-0 justify-center items-center w-full text-xl text-white opacity-100 md:opacity-0 group-hover:opacity-100 focus:opacity-100 focus:outline-none focus:bg-opacity-20",onClick:D},[va((Ha(),Ka("div",Qq,[Ar(k).imageUrl?(Ha(),Ya(o,{key:0,class:"mr-3 w-4 h-4","aria-hidden":"true"})):(Ha(),Ya(s,{key:1,class:"mr-3 w-4 h-4","aria-hidden":"true"})),oo(" "+pt(Ar(k).imageUrl?t.$t("recipes.image_edit"):t.$t("recipes.image_set")),1)])),[[j]])])])])),title:ii((()=>{var n;return[ro("label",Hq,[ro("span",Gq,pt(t.$t("recipes.name_label")),1),io(l,{"initial-focus":"",name:"name",placeholder:(null==(n=e.recipe)?void 0:n.exists())?"-":t.$t("recipes.name_placeholder"),class:"pb-2 -mb-2.5 text-2xl text-white placeholder:text-white placeholder:opacity-50 bg-transparent caret-primary-500 text-shadow font-semibold md:text-4xl",onKeydown:Ns(Ls($,["prevent"]),["enter"])},null,8,["placeholder","onKeydown"])])]})),description:ii((()=>[ro("div",Wq,[Ar(k).description||w.value?(Ha(),Ka("div",Jq,[io(l,{ref_key:"$description",ref:I,name:"description",label:t.$t("recipes.description_label"),placeholder:t.$t("recipes.description_placeholder"),onFocus:n[0]||(n[0]=e=>w.value=!0),onBlur:n[1]||(n[1]=e=>w.value=!1),onKeydown:n[2]||(n[2]=Ns(Ls((e=>$()),["ctrl","exact","prevent"]),["enter"]))},null,8,["label","placeholder"]),Ar(k).description?(Ha(),Ya(c,{key:0,"aria-label":t.$t("recipes.description_remove"),title:t.$t("recipes.description_remove"),class:"absolute right-1 bottom-1",onClick:n[3]||(n[3]=e=>function({target:e}){var t;null==(t=k.input("description"))||t.update(""),null==e||e.blur()}(e))},{default:ii((()=>[io(u,{"aria-hidden":"true",class:"w-5 h-5"})])),_:1},8,["aria-label","title"])):lo("",!0)])):lo("",!0),Ar(k).description||w.value?lo("",!0):(Ha(),Ya(d,{key:1,secondary:"",tinted:"",class:"px-4 space-x-2",onClick:n[4]||(n[4]=e=>async function(){var e;w.value=!0,await Vr(),null==(e=I.value)||e.focus()}())},{default:ii((()=>[io(o,{class:"w-4 h-4","aria-hidden":"true"}),ro("span",null,pt(t.$t("recipes.description_set")),1)])),_:1})),0===Ar(k).ingredients.length?(Ha(),Ya(d,{key:2,secondary:"",tinted:"",class:"px-4 space-x-2",onClick:n[5]||(n[5]=e=>async function(){var e,t;null==(e=k.input("ingredients"))||e.update([new Oz]),await Vr(),null==(t=S.value)||t.focus()}())},{default:ii((()=>[io(p,{class:"w-4 h-4","aria-hidden":"true"}),ro("span",null,pt(t.$t("recipes.ingredients_set")),1)])),_:1})):lo("",!0),0===Ar(k).instructions.length?(Ha(),Ya(d,{key:3,secondary:"",tinted:"",class:"px-4 space-x-2",onClick:n[6]||(n[6]=e=>async function(){var e,t;null==(e=k.input("instructions"))||e.update([new Oz]),await Vr(),null==(t=R.value)||t.focus()}())},{default:ii((()=>[io(f,{class:"w-4 h-4","aria-hidden":"true"}),ro("span",null,pt(t.$t("recipes.instructions_set")),1)])),_:1})):lo("",!0)])])),metadata:ii((()=>[io(g,{class:"w-full"},{servings:ii((()=>[io(v,{name:"servings",class:"text-right bg-transparent","aria-label":t.$t("recipes.servings"),placeholder:t.$t("recipes.servings_placeholder")},null,8,["aria-label","placeholder"])])),prepTime:ii((()=>[io(v,{name:"prepTime",class:"text-right bg-transparent","aria-label":t.$t("recipes.prepTime"),placeholder:t.$t("recipes.prepTime_placeholder")},null,8,["aria-label","placeholder"])])),cookTime:ii((()=>[io(v,{name:"cookTime",class:"text-right bg-transparent","aria-label":t.$t("recipes.cookTime"),placeholder:t.$t("recipes.cookTime_placeholder")},null,8,["aria-label","placeholder"])])),_:1})])),urls:ii((()=>[ro("h2",Yq,pt(t.$t("recipes.externalUrls")),1),0===Ar(k).externalUrls.length?(Ha(),Ya(d,{key:0,secondary:"",tinted:"",class:"self-start",onClick:n[9]||(n[9]=e=>async function(){var e,t;null==(e=k.input("externalUrls"))||e.update([new Oz]),await Vr(),null==(t=C.value)||t.focus()}())},{default:ii((()=>[io(y,{class:"w-4 h-4","aria-hidden":"true"}),ro("span",Zq,pt(t.$t("recipes.externalUrls_set")),1)])),_:1})):(Ha(),Ya(h,{key:1,ref_key:"$externalUrls",ref:C,name:"externalUrls","inputs-class":"w-full","add-label":t.$t("recipes.externalUrl_add"),"item-label":t.$t("recipes.externalUrl_label"),"item-placeholder":t.$t("recipes.externalUrl_placeholder"),"item-remove-label":t.$t("recipes.externalUrl_remove"),"item-remove-a11y-label":t.$t("recipes.externalUrl_remove_a11y",{url:":value"}),onSubmit:n[10]||(n[10]=e=>$())},{marker:ii((()=>[io(y,{class:"w-4 h-4","aria-hidden":"true"})])),_:1},8,["add-label","item-label","item-placeholder","item-remove-label","item-remove-a11y-label"]))])),_:2},[Ar(k).ingredients.length>0?{name:"ingredients",fn:ii((()=>[ro("div",Kq,[io(h,{ref_key:"$ingredients",ref:S,name:"ingredients","add-label":t.$t("recipes.ingredient_add"),"item-label":t.$t("recipes.ingredient_label"),"item-placeholder":t.$t("recipes.ingredient_placeholder"),"item-remove-label":t.$t("recipes.ingredient_remove"),"item-remove-a11y-label":t.$t("recipes.ingredient_remove_a11y",{ingredient:":value"}),onSubmit:n[7]||(n[7]=e=>$())},null,8,["add-label","item-label","item-placeholder","item-remove-label","item-remove-a11y-label"])])]))}:void 0,Ar(k).instructions.length>0?{name:"instructions",fn:ii((()=>[io(m,{ref_key:"$instructions",ref:R,name:"instructions","instructions-a11y":t.$t("recipes.drag_instructions_a11y"),"add-label":t.$t("recipes.instructionStep_add"),"item-label":t.$t("recipes.instructionStep_label"),"item-placeholder":t.$t("recipes.instructionStep_placeholder"),"item-remove-label":t.$t("recipes.instructionStep_remove"),"item-remove-a11y-label":t.$t("recipes.instructionStep_remove_a11y",{position:":position"}),onSubmit:n[8]||(n[8]=e=>$())},null,8,["instructions-a11y","add-label","item-label","item-placeholder","item-remove-label","item-remove-a11y-label"])]))}:void 0]),1024),ro("div",Xq,[ro("div",eV,[ro("div",tV,[ro("div",nV,[io(x)]),rV]),ro("div",iV,[ro("div",aV,[io(d,{type:"submit",class:"text-lg focus:ring-offset-primary-gray-300"},{default:ii((()=>{var n;return[oo(pt((null==(n=e.recipe)?void 0:n.exists())?t.$t("recipes.form.update"):t.$t("recipes.form.create")),1)]})),_:1}),io(d,{clear:"",class:"text-lg focus:ring-offset-primary-gray-300",onClick:n[11]||(n[11]=e=>t.$emit("cancel"))},{default:ii((()=>[oo(pt(t.$t("recipes.form.cancel")),1)])),_:1})]),oV,(null==(r=e.recipe)?void 0:r.exists())?(Ha(),Ya(d,{key:0,clear:"",class:"focus:ring-offset-primary-gray-300",onClick:n[12]||(n[12]=t=>async function(){var t;if(!(null==(t=e.recipe)?void 0:t.exists()))return;await fC.confirm({message:hR("recipes.delete_confirm"),acceptText:hR("recipes.delete_confirm_accept"),acceptColor:QI.Danger})&&(VC.push({name:"home"}),await fC.runOperation((()=>Wj.deleteRecipe(e.recipe)),{blocking:!0,loadingMessage:hR("recipes.delete_ongoing",{name:e.recipe.name}),successMessage:hR("recipes.delete_success",{name:e.recipe.name})}))}())},{default:ii((()=>[io(u,{class:"w-4 h-4","aria-hidden":"true"}),ro("span",sV,pt(t.$t("recipes.delete")),1)])),_:1})):lo("",!0)])])])]})),_:1},8,["data-was-onboarding","form"])),[[T,{name:"recipe-form",id:null!=(i=null==(r=e.recipe)?void 0:r.url)?i:A.value,transitions:{enter:{"recipes.show":Ar(Nq),"*":Ar(Bq)},leave:{"recipes.show":Ar(Uq),"*":Ar(Fq)},"recipe-card":Ar(zq)}}]])}}}),uV=Si({setup(e){var t;let n=_r(Wj.getTmpRecipe(null==(t=history.state)?void 0:t.tmpRecipe)),r=_r(Le("from"));async function i(e){fC.scrollLayout({top:0}),await VC.push({name:"home"}),await qC.syncIfOnline(e)}return $i((async()=>{var e,t,i,a;const o=Ne("from");if(o){fC.hideHeader();try{const i=null!=(e=hB.proxyUrl)?e:Jj.env("DEFAULT_PROXY_URL"),a=i?await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:o})}):await fetch(o),s=await a.text();if(2!==Math.floor(a.status/100))throw new Error(`Got unexpected response code: ${a.status}\n\n${s}`);const[l,u]=await Promise.all([ZB(o,s),YB(o,s)]);n.value=null!=(t=u[0])?t:new Qj({name:l.title,description:l.description,imageUrls:l.imageUrls,externalUrls:[l.url]})}catch(s){fC.showSnackbar(hR("recipes.createFromUrl_notFound",{domain:null==(a=null==(i=M(o))?void 0:i.domain)?void 0:a.replace(/^www\./,"")}),{actions:[{text:hR("recipes.createFromUrl_retry"),handler(){fC.openModal(XB,{url:o})}}]})}finally{fC.showHeader(),r.value=!1}}else r.value=!1})),(e,t)=>{const a=HB,o=lV,s=uR;return Ha(),Ya(s,{style:at(`margin-top: -${e.$ui.headerHeight}px`),"aria-labelledby":"recipe-form-title"},{default:ii((()=>[r.value?(Ha(),Ya(a,{key:0})):(Ha(),Ya(o,{key:1,recipe:n.value,onDone:i,onCancel:t[0]||(t[0]=t=>e.$router.back())},null,8,["recipe"]))])),_:1},8,["style"])}}}),cV=Si({props:{recipe:aI()},setup(e){async function t(e){await VC.push({name:"recipes.show",params:{recipe:e.slug}}),await qC.syncIfOnline(e)}return(n,r)=>{const i=lV,a=uR;return Ha(),Ya(a,{style:at(`margin-top: -${n.$ui.headerHeight}px`),"aria-labelledby":"recipe-form-title"},{default:ii((()=>[io(i,{recipe:e.recipe,onDone:t,onCancel:r[0]||(r[0]=t=>n.$router.push({name:"recipes.show",params:{recipe:e.recipe.slug}}))},null,8,["recipe"])])),_:1},8,["style"])}}}),dV={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},pV=[ro("g",{fill:"currentColor"},[ro("path",{"fill-rule":"evenodd",d:"M5 13a3 3 0 1 0 0-6a3 3 0 0 0 0 6Zm0-4a1 1 0 1 1 0 2a1 1 0 0 1 0-2Zm9-1a3 3 0 1 0 0-6a3 3 0 0 0 0 6Zm0-4a1 1 0 1 1 0 2a1 1 0 0 1 0-2Zm0 14a3 3 0 1 0 0-6a3 3 0 0 0 0 6Zm0-4a1 1 0 1 1 0 2a1 1 0 0 1 0-2Z","clip-rule":"evenodd"}),ro("path",{d:"m6.236 9.777l-.763-1.291l6.791-4.013l.763 1.291l-6.791 4.013Zm6.021 5.752l.772-1.286l-6.286-3.772l-.772 1.286l6.286 3.772Z"})],-1)];const fV={name:"pepicons-share-android",render:function(e,t){return Ha(),Ka("svg",dV,pV)}},hV={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},mV=[so('<g fill="currentColor"><path fill-rule="evenodd" d="M11 3h-1a4.002 4.002 0 0 0-3.874 3H6a4 4 0 1 0 0 8h8a4 4 0 0 0 .899-7.899A4.002 4.002 0 0 0 11 3ZM7.676 8l.387-1.501A2.002 2.002 0 0 1 10 5h1c.937 0 1.743.65 1.95 1.549l.28 1.221l1.221.28A2.002 2.002 0 0 1 14 12H6a2 2 0 1 1 0-4h1.676Z" clip-rule="evenodd"></path><path d="M9.5 10a1 1 0 0 1 2 0v7.5a1 1 0 1 1-2 0V10Z"></path><path d="M12.375 14.72a1 1 0 1 1 1.25 1.56l-2.5 2a1 1 0 0 1-1.25-1.56l2.5-2Z"></path><path d="M7.375 16.28a1 1 0 1 1 1.25-1.56l2.5 2a1 1 0 0 1-1.25 1.56l-2.5-2Z"></path></g>',1)];const vV={name:"pepicons-cloud-down",render:function(e,t){return Ha(),Ka("svg",hV,mV)}},gV={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},yV=[ro("path",{fill:"currentColor",d:"M2.93 17.07A10 10 0 1 1 17.07 2.93A10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 5h2v6H9V5zm0 8h2v2H9v-2z"},null,-1)];const bV={name:"zondicons-exclamation-outline",render:function(e,t){return Ha(),Ka("svg",gV,yV)}},wV={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},_V=[ro("path",{fill:"currentColor",d:"M.2 10a11 11 0 0 1 19.6 0A11 11 0 0 1 .2 10zm9.8 4a4 4 0 1 0 0-8a4 4 0 0 0 0 8zm0-2a2 2 0 1 1 0-4a2 2 0 0 1 0 4z"},null,-1)];const xV={name:"zondicons-view-show",render:function(e,t){return Ha(),Ka("svg",wV,_V)}};var kV=(e=>(e["Umai"]="umai",e["Solid"]="solid",e["JsonLD"]="jsonld",e))(kV||{});const AV=Si({props:{modelValue:function(e){const t=Object.values(e);return{type:String,required:!0,validator:e=>t.includes(e)}}(kV)},emits:["update:modelValue"],setup(e,{emit:t}){const n=Lo((()=>({[kV.Umai]:{name:hR("recipes.share_umai"),iconComponent:xV},[kV.Solid]:{name:hR("recipes.share_solid"),iconComponent:g$},[kV.JsonLD]:{name:hR("recipes.share_jsonld"),iconComponent:YN}}))),r=Lo((()=>Object.entries(n.value).reduce(((e,[t,n])=>[...e,{id:t,...n}]),[]))),i=Lo({get:()=>e.modelValue,set:e=>t("update:modelValue",e)});return(e,t)=>{const n=UE,a=BE,o=$E,s=$a("wobbly-border");return e.$cookbook.isRemote?(Ha(),Ya(o,{key:0,modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),class:"flex flex-col space-y-2 md:flex-row md:space-x-2 md:space-y-0 md:items-center"},{default:ii((()=>[io(n,{class:"mr-2"},{default:ii((()=>[oo(pt(e.$t("recipes.shareWith")),1)])),_:1}),(Ha(!0),Ka(Ua,null,mo(r.value,(e=>(Ha(),Ya(a,{key:e.id,value:e.id,"aria-label":e.name},{default:ii((({checked:t})=>[va((Ha(),Ka("div",{class:ut([t?"bg-primary-200 px-4":"bg-gray-200 md:w-clickable","h-clickable flex justify-center items-center cursor-pointer"])},[(Ha(),Ya(La(e.iconComponent),{class:"w-4 h-4"})),ro("span",{class:ut(["ml-2",{"md:hidden":!t}])},pt(e.name),3)],2)),[[s]])])),_:2},1032,["value","aria-label"])))),128))])),_:1},8,["modelValue"])):lo("",!0)}}}),EV={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},IV=[ro("path",{fill:"currentColor",d:"m0 11l2-2l5 5L18 3l2 2L7 18z"},null,-1)];const SV={name:"zondicons-checkmark",render:function(e,t){return Ha(),Ka("svg",EV,IV)}},RV={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},CV=[ro("path",{fill:"currentColor",d:"m12.81 4.36l-1.77 1.78a4 4 0 0 0-4.9 4.9l-2.76 2.75C2.06 12.79.96 11.49.2 10a11 11 0 0 1 12.6-5.64zm3.8 1.85c1.33 1 2.43 2.3 3.2 3.79a11 11 0 0 1-12.62 5.64l1.77-1.78a4 4 0 0 0 4.9-4.9l2.76-2.75zm-.25-3.99l1.42 1.42L3.64 17.78l-1.42-1.42L16.36 2.22z"},null,-1)];const OV={name:"zondicons-view-hide",render:function(e,t){return Ha(),Ka("svg",RV,CV)}},DV={class:"text-sm"},jV={key:2,class:"flex items-center space-x-2 text-gray-600"},TV={class:"text-sm"},PV={key:3,class:"flex items-center space-x-2 text-gray-600"},MV={class:"text-sm"},LV={class:"relative"},$V={class:"ml-2 text-sm font-medium"},NV={class:"flex flex-col"},BV={class:"flex justify-between"},UV={class:"ml-2"},FV=ro("div",{class:"flex-grow"},null,-1),zV=Si({props:{recipe:aI()},setup(e){const t=mr({name:hR("recipes.accessControl.profile_public"),description:hR("recipes.accessControl.profile_publicDescription"),iconComponent:xV,publicPermissions:[Ph.Read],publicListing:!0}),n=mr({name:hR("recipes.accessControl.profile_unlisted"),description:hR("recipes.accessControl.profile_unlistedDescription"),iconComponent:xV,publicPermissions:[Ph.Read],publicListing:!1}),r=mr({name:hR("recipes.accessControl.profile_private"),description:hR("recipes.accessControl.profile_privateDescription"),iconComponent:OV,publicPermissions:[],publicListing:!1}),i=[t,n,r];let a=_r(null),o=_r(!1),s=_r({top:0,right:0}),l=_r(null);const u=_r();function c(e,t){return`h-4 w-4 ${e?"text-white":t?"text-gray-600":"text-gray-400"}`}return di((()=>u.value&&function(e){const t=e.getBoundingClientRect();s.value={top:t.bottom,right:window.innerWidth-t.right}}(u.value.el))),$i((async()=>{gj.loggedIn&&await async function(){try{await e.recipe.fetchPublicPermissionsIfMissing(),l.value=e.recipe.isPublic?e.recipe.listUrls.length>0?t:n:r}catch(Mh){a.value=Mh}}()})),(t,n)=>{const r=GI,d=bV,p=w$,f=gE,h=yE,m=SV,v=wE,g=bE,y=vE,b=$a("wobbly-border");return t.$auth.loggedIn?a.value?(Ha(),Ya(r,{key:1,clear:"",class:"flex items-center space-x-2 text-red-500",onClick:n[1]||(n[1]=e=>t.$errors.inspect(a.value))},{default:ii((()=>[io(d,{class:"w-4 h-4","aria-hidden":"true"}),ro("span",DV,pt(t.$t("recipes.accessControl.error")),1)])),_:1})):l.value?o.value?(Ha(),Ka("span",PV,[io(p,{class:"animate-spin w-4 h-4","aria-hidden":"true"}),ro("span",MV,pt(t.$t("recipes.accessControl.updating")),1)])):(Ha(),Ya(y,{key:4,"model-value":l.value,as:"div",disabled:!!a.value||!l.value||o.value,"onUpdate:modelValue":n[2]||(n[2]=t=>async function(t){if(t!==l.value){o.value=!0;try{await e.recipe.updatePublicPermissions(t.publicPermissions),await Wj.updatePublicRecipeListing(e.recipe,t.publicListing),l.value=t}catch(Mh){a.value=Mh}finally{o.value=!1}}}(t))},{default:ii((()=>[io(f,{class:"sr-only"},{default:ii((()=>[oo(pt(t.$t("recipes.accessControl.change_label_a11y")),1)])),_:1}),ro("div",LV,[va((Ha(),Ya(h,{ref_key:"button",ref:u,class:"relative inline-flex items-center p-2 rounded-md text-sm font-medium focus:outline-none focus:z-10 focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-50 focus:ring-brand-solid-500 hover:bg-gray-200","aria-label":t.$t("recipes.accessControl.change_label_a11y",{current:l.value.name})},{default:ii((()=>[(Ha(),Ya(La(l.value.iconComponent),{class:"h-4 w-4","aria-hidden":"true"})),ro("p",$V,pt(l.value.name),1)])),_:1},8,["aria-label"])),[[b]]),io(ss,{"leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:ii((()=>[io(g,{class:"fixed z-10 mt-2 max-w-prose rounded-md shadow-lg overflow-hidden bg-white divide-y divide-gray-200 ring-1 ring-black ring-opacity-5 focus:outline-none",style:at(`top:${s.value.top}px;right:${s.value.right}px`)},{default:ii((()=>[(Ha(),Ka(Ua,null,mo(i,(e=>io(v,{key:e.name,as:"template",value:e},{default:ii((({active:t,selected:n})=>[ro("li",{class:ut([t?"text-white bg-brand-solid-500":"text-gray-900","select-none relative p-4 text-sm flex items-center cursor-pointer max-w-sm"])},[ro("div",NV,[ro("div",BV,[ro("p",{class:ut([n?"font-semibold":"font-normal","flex items-center"])},[(Ha(),Ya(La(e.iconComponent),{class:ut(c(t,n)),"aria-hidden":"true"},null,8,["class"])),ro("span",UV,pt(e.name),1)],2)]),ro("p",{class:ut([t?"text-brand-solid-200":"text-gray-500","mt-2"])},pt(e.description),3)]),FV,n?(Ha(),Ka("span",{key:0,class:ut([t?"text-white":"text-brand-solid-500","ml-4"])},[io(m,{class:"h-5 w-5","aria-hidden":"true"})],2)):lo("",!0)],2)])),_:2},1032,["value"]))),64))])),_:1},8,["style"])])),_:1})])])),_:1},8,["model-value","disabled"])):(Ha(),Ka("span",jV,[io(p,{class:"animate-spin w-4 h-4","aria-hidden":"true"}),ro("span",TV,pt(t.$t("recipes.accessControl.loading")),1)])):(Ha(),Ya(r,{key:0,clear:"",class:"text-sm",onClick:n[0]||(n[0]=e=>t.$ui.openModal(L$))},{default:ii((()=>[oo(pt(t.$t("recipes.accessControl.disconnected")),1)])),_:1}))}}}),qV={class:"flex justify-between"},VV={key:0,class:"text-red-500 flex self-end mt-2"},QV={class:"flex justify-between mt-4"},HV={key:0,class:"cursor-pointer flex items-center"},GV={class:"ml-2"},WV={key:1},JV={class:"ml-2"},KV={class:"ml-2"},YV=Si({props:{recipe:aI()},setup(e){const t=_r(!1),n=_r(Wj.isRemote?kV.Umai:kV.JsonLD),r=Lo((()=>({[kV.Umai]:D(location.href)+VC.resolve({name:"viewer",query:{url:e.recipe.getDocumentUrl()}}).href,[kV.Solid]:e.recipe.url,[kV.JsonLD]:JSON.stringify(e.recipe.toExternalJsonLD({includeHistory:t.value}),null,2)}))),i=Lo((()=>r.value[n.value]));return(r,a)=>{const o=zV,s=AV,l=kB,u=bV,c=uB,d=vV,p=GI,f=fV,h=cS,m=$a("initial-focus");return Ha(),Ya(h,null,{title:ii((()=>[ro("div",qV,[oo(pt(r.$t("recipes.share"))+" ",1),r.$cookbook.isRemote?(Ha(),Ya(o,{key:0,recipe:e.recipe},null,8,["recipe"])):lo("",!0)])])),default:ii((({close:o})=>[io(s,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e)},null,8,["modelValue"]),io(l,{class:"mt-4 max-w-prose",text:i.value},null,8,["text"]),"umai"===n.value&&e.recipe.isPrivate?(Ha(),Ka("p",VV,[io(u,{class:"w-4 h-4 mt-1 mr-2 flex-shrink-0"}),oo(" "+pt(r.$t("recipes.accessControl.warning")),1)])):lo("",!0),ro("div",QV,["jsonld"===n.value?(Ha(),Ka("label",HV,[io(c,{modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value=e)},null,8,["modelValue"]),ro("p",GV,pt(r.$t("recipes.download_includeHistory")),1)])):(Ha(),Ka("span",WV)),"jsonld"===n.value?va((Ha(),Ya(p,{key:2,onClick:()=>(e.recipe.download({includeHistory:t.value}),o())},{default:ii((()=>[io(d,{class:"w-6 h-6","aria-hidden":"true"}),ro("span",JV,pt(r.$t("recipes.download")),1)])),_:2},1032,["onClick"])),[[m]]):r.$browser.supportsSharing?va((Ha(),Ya(p,{key:3,onClick:t=>(navigator.share(L({title:e.recipe.name,text:e.recipe.description?Pe(e.recipe.description):null,url:i.value})),o())},{default:ii((()=>[io(f,{class:"w-6 h-6","aria-hidden":"true"}),ro("span",KV,pt(r.$t("recipes.share")),1)])),_:2},1032,["onClick"])),[[m]]):lo("",!0)])])),_:1})}}}),ZV={"recipe-card":(e,t)=>Promise.all([Pq(e,t),Tq(e,t)])},XV=async(e,t)=>{var n;const r=null!=(n=null==t?void 0:t.config.name)?n:"",i=ZV[r];i&&await i(e,500)},eQ=async(e,t,{element:n})=>{const r=500,i=FI(t,".recipe-details--header-title"),a=FI(t,".recipe-details--header-title-text");e.classList.add("z-20"),await Promise.all([$q(t,{duration:r,$headerTitle:i,$headerTitleText:a,$card:n}),jq(t,r)])},tQ={id:"recipe-details-title",class:"recipe-details--header-title text-2xl font-semibold text-white text-shadow md:text-4xl"},nQ={class:"recipe-details--header-title-text"},rQ={class:"space-x-2 space-x-reverse flex flex-row-reverse justify-start w-full"},iQ={class:"mx-2 uppercase tracking-wider font-semibold text-sm"},aQ={class:"mx-2 uppercase tracking-wider font-semibold text-sm"},oQ=Si({props:{recipe:aI()},setup(e){const t=_r(null);async function n(){var n;await(null==(n=t.value)?void 0:n.showPrimaryPanel()),await VC.push({name:"recipes.edit",params:{recipe:e.recipe.slug}})}return $i((()=>window.scrollTo({top:0}))),(r,i)=>{const a=iB,o=GI,s=fV,l=pz,u=$a("element-transitions");return va((Ha(),Ya(l,{ref_key:"$page",ref:t,recipe:e.recipe},{title:ii((()=>[ro("h1",tQ,[ro("span",nQ,pt(e.recipe.name),1)])])),actions:ii((()=>[ro("div",rQ,[io(o,{secondary:"",class:"h-12",onClick:n},{default:ii((()=>[io(a,{class:"ml-2 w-4 h-4","aria-hidden":"true"}),ro("span",iQ,pt(r.$t("recipes.edit")),1)])),_:1}),io(o,{secondary:"",class:"h-12",onClick:i[0]||(i[0]=t=>r.$ui.openModal(YV,{recipe:e.recipe}))},{default:ii((()=>[io(s,{class:"w-5 h-5 ml-2","aria-hidden":"true"}),ro("span",aQ,pt(r.$t("recipes.share")),1)])),_:1})])])),_:1},8,["recipe"])),[[u,{name:"recipe-details",id:e.recipe.url,transitions:{enter:Ar(XV),leave:{"recipes.edit":r.$elementTransitions.fadeOut,"recipes.show":r.$elementTransitions.fadeOut},"recipe-card":Ar(eQ)}}]])}}}),sQ=Si({props:{recipe:aI()},setup:e=>(t,n)=>{const r=oQ,i=uR;return Ha(),Ya(i,{"aria-labelledby":"recipe-details-title",style:at(`margin-top: -${t.$ui.headerHeight}px`)},{default:ii((()=>[io(r,{recipe:e.recipe},null,8,["recipe"])])),_:1},8,["style"])}});const lQ=vw(new class extends yw{constructor(){super(...arguments),t(this,"engine",new zy(((...e)=>gj.fetch(...e))))}async view(e){var t,n,r,i;const a=null==(n=null==(t=this.recipe)?void 0:t.lists)?void 0:n.find((t=>t.url===e)),o=null==(i=null==(r=this.list)?void 0:r.items)?void 0:i.map((e=>e.recipe)).find((t=>(null==t?void 0:t.url)===e));return a?(await Oj.withEngine(this.engine,(()=>a.loadRelationIfUnloaded("items"))),await Rj.withEngine(this.engine,(()=>{var e,t;return Promise.all(null!=(t=null==(e=a.items)?void 0:e.map((e=>e.loadRelationIfUnloaded("recipe"))))?t:[])})),void this.setState({list:a,recipe:null})):o?(o.setRelationModels("lists",E([this.list])),void this.setState({recipe:o,list:null})):void this.setState({recipe:null,list:null})}async search(e){return await this.findRecipe(e)||await this.findRecipesList(e)}async boot(){await super.boot(),await Wj.booted}getInitialState(){return{recipe:null,list:null}}getComputedStateDefinitions(){return{recipeInCookbook({recipe:e}){var t;return(null==e?void 0:e.url)&&null!=(t=Wj.recipes.find((t=>t.url===e.url||t.externalUrls.includes(e.url))))?t:null}}}async findRecipe(e){try{const t=await Qj.withEngine(this.engine,(async()=>{var t,n;const r=await Qj.all({$in:[V(e)]});return await(null==(t=r[0])?void 0:t.loadRelationIfUnloaded("lists")),null!=(n=r[0])?n:null}));return!!t&&(this.setState({recipe:t}),!0)}catch(t){return t instanceof Rh||mC.report(t),!1}}async findRecipesList(e){try{const t=await Oj.withEngine(this.engine,(async()=>{var t,n;const r=await Oj.all({$in:[V(e)]});return await(null==(t=r[0])?void 0:t.loadRelationIfUnloaded("items")),null!=(n=r[0])?n:null}));return!!t&&(await Rj.withEngine(this.engine,(()=>{var e,n;return Promise.all(null!=(n=null==(e=t.items)?void 0:e.map((e=>e.loadRelation("recipe"))))?n:[])})),this.setState({list:t}),!0)}catch(t){return t instanceof Rh||mC.report(t),!1}}}),uQ={class:"flex flex-col items-center justify-center max-w-prose px-edge mx-auto"},cQ={key:0,class:"flex flex-col justify-center items-center p-4 space-y-4"},dQ={class:"text-xl text-gray-700"},pQ={id:"viewer-form-title",class:"text-2xl font-medium mt-6"},fQ=Si({setup(e){let t=_r(!1),n=_r(null);const r=R$({url:{type:S$.String,rules:"required",default:Ne("url")}});async function i(){t.value=!0,n.value=null;const e=await lQ.search(r.url);n.value=e?null:r.url,t.value=!1}return $i((()=>r.url&&i())),(e,a)=>{const o=qB,s=pR,l=rR,u=h$,c=l$;return Ha(),Ya(c,{form:Ar(r),class:"flex",onSubmit:a[0]||(a[0]=e=>async function(){await VC.push({name:"viewer",query:{url:r.url}}),await i()}())},{default:ii((()=>[ro("div",uQ,[t.value?(Ha(),Ka("div",cQ,[io(o,{class:"w-12 h-12 text-primary-500"}),ro("p",dQ,pt(e.$t("viewer.form.searching")),1)])):(Ha(),Ka(Ua,{key:1},[io(s,{class:"h-auto w-[250px] max-w-[60vw] fill-primary-500","aria-hidden":"true"}),ro("h1",pQ,pt(e.$t("viewer.form.title")),1),io(l,{text:e.$t("viewer.form.description"),class:"mt-4 text-center"},null,8,["text"]),io(u,{class:"mt-4 w-full",name:"url",label:e.$t("viewer.form.urlLabel"),placeholder:e.$t("viewer.form.urlPlaceholder")},{default:ii((()=>[oo(pt(e.$t("viewer.form.submit")),1)])),_:1},8,["label","placeholder"]),n.value?(Ha(),Ya(l,{key:0,class:"mt-2 text-center text-red-700 opacity-75",text:e.$t("viewer.form.notFound",{url:n.value})},null,8,["text"])):lo("",!0)],64))])])),_:1},8,["form"])}}}),hQ={key:0,class:"prose text-sm mt-2 flex items-center space-x-1.5 group"},mQ={class:"flex items-center space-x-1"},vQ=["src"],gQ=Si({props:{list:aI(),prefix:oI()},setup(e){const t=function(e){const t=_r(),n=Lo(e);return fi(n,(async()=>t.value=await n.value),{immediate:!0}),t}((async()=>{var t,n,r,i;if(!(null==(t=e.list)?void 0:t.creatorWebId))return null;const a=await j(gj.getUserProfile(e.list.creatorWebId));return{name:null!=(r=null==a?void 0:a.name)?r:ie(null!=(n=null==a?void 0:a.webId)?n:e.list.creatorWebId,{protocol:!1}),url:null!=(i=null==a?void 0:a.webId)?i:e.list.creatorWebId,avatarUrl:null==a?void 0:a.avatarUrl}}));return(n,r)=>{const i=_R;return t.value?(Ha(),Ka("p",hQ,[ro("span",null,pt(e.prefix),1),io(i,{url:t.value.url,class:"no-underline group-hover:underline"},{default:ii((()=>[ro("div",mQ,[t.value.avatarUrl?(Ha(),Ka("img",{key:0,src:t.value.avatarUrl,class:"h-6 w-6 rounded-full object-cover m-0",alt:""},null,8,vQ)):lo("",!0),ro("span",null,pt(t.value.name),1)])])),_:1},8,["url"])])):lo("",!0)}}});async function yQ(){await Ke(),await lM.waitElementsReady("viewer-recipe")}const bQ={key:0,class:"flex flex-col flex-grow w-full px-edge"},wQ={id:"viewer-recipes-list-title",class:"mt-4 text-xl font-semibold"},_Q=Si({setup(e){const t=Lo((()=>{var e,t,n;return E(null!=(n=null==(t=null==(e=lQ.list)?void 0:e.items)?void 0:t.map((e=>e.recipe)))?n:[])}));return(e,n)=>{var r;const i=pR,a=Pa("router-link"),o=rR,s=gQ,l=wU,u=$a("wobbly-border"),c=$a("element-transitions");return e.$viewer.list?(Ha(),Ka("div",bQ,[va((Ha(),Ka("div",null,[va((Ha(),Ya(a,{to:{name:"home"},title:"Umai","aria-label":"Umai",target:"_blank",class:"flex self-center ring-primary-100 justify-center items-center space-x-2 mt-4 focus-visible:outline-none focus-visible:bg-primary-100 focus-visible:ring-8"},{default:ii((()=>[io(i,{class:"mr-2 w-36 h-12 fill-primary-500"})])),_:1})),[[u]]),ro("h1",wQ,pt(null!=(r=e.$viewer.list.name)?r:e.$t("viewer.list.titleFallback")),1),e.$viewer.list.description?(Ha(),Ya(o,{key:0,class:"mt-2",text:e.$viewer.list.description},null,8,["text"])):lo("",!0),io(s,{list:e.$viewer.list,prefix:e.$t("viewer.list.creatorPrefix")},null,8,["list","prefix"])])),[[c,{transitions:{leave:Ar(yQ)}}]]),io(l,{recipes:t.value,class:"w-full"},null,8,["recipes"])])):lo("",!0)}}}),xQ={"recipe-card":(e,t)=>Promise.all([Pq(e,t),Tq(e,t)])},kQ=async(e,t)=>{var n;const r=null!=(n=null==t?void 0:t.config.name)?n:"",i=xQ[r];i&&await i(e,500)},AQ=async(e,t,{element:n})=>{const r=500,i=FI(t,".viewer-recipe--header-title"),a=FI(t,".viewer-recipe--header-title-text");e.classList.add("z-20"),await Promise.all([$q(t,{duration:r,$headerTitle:i,$headerTitleText:a,$card:n}),jq(t,r)])},EQ={id:"viewer-recipe-title",class:"viewer-recipe--header-title text-4xl font-semibold text-white text-shadow"},IQ={class:"viewer-recipe--header-title-text"},SQ={class:"ml-1"},RQ=Si({setup(e){const t=Lo((()=>{var e,t;return null==(t=null==(e=lQ.recipe)?void 0:e.lists)?void 0:t[0]}));async function n(){if(!lQ.recipe)return;if(!bj.supportsIndexedDB)return void function(){const e=hR("errors.unsupportedBrowser_indexedDBFeature"),t=hR("errors.unsupportedBrowser_indexedDBFeatureFirefox");var n;fC.alert(hR("errors.unsupportedBrowser"),bj.isFirefox?`${e}\n\n${n=t,`<span class="text-sm">${n}</span>`}`:e)}();const e=T(lQ.recipe.clone(),(e=>e.unloadRelation("lists"))),t=await Qj.newFromJsonLD(e.toExternalJsonLD({includeIds:!1}));t.externalUrls=[...t.externalUrls,e.url],await t.save(),await VC.push({name:"home"}),await qC.syncIfOnline(t)}return(e,r)=>{const i=GI,a=VN,o=gQ,s=_R,l=pz,u=$a("element-transitions");return e.$viewer.recipe?va((Ha(),Ya(l,{key:0,recipe:e.$viewer.recipe},{title:ii((()=>[ro("h1",EQ,[ro("span",IQ,pt(e.$viewer.recipe.name),1)])])),actions:ii((()=>{var l;return[e.$viewer.recipeInCookbook?(Ha(),Ya(i,{key:0,secondary:"",route:"recipes.show","route-params":{recipe:null==(l=e.$viewer.recipeInCookbook)?void 0:l.slug}},{default:ii((()=>[oo(pt(e.$t("viewer.recipe.inCookbook")),1)])),_:1},8,["route-params"])):(Ha(),Ya(i,{key:1,secondary:"",onClick:r[0]||(r[0]=e=>n())},{default:ii((()=>[io(a,{class:"w-5 h-5","aria-hidden":"true"}),ro("span",SQ,pt(e.$t("viewer.recipe.import")),1)])),_:1})),t.value?(Ha(),Ya(o,{key:2,prefix:e.$t("viewer.recipe.creatorPrefix"),list:t.value},null,8,["prefix","list"])):lo("",!0),t.value?(Ha(),Ya(s,{key:3,class:"text-sm",route:"viewer","route-query":{url:t.value.url}},{default:ii((()=>[oo(pt(e.$t("viewer.recipe.viewAll")),1)])),_:1},8,["route-query"])):lo("",!0)]})),_:1},8,["recipe"])),[[u,{name:"viewer-recipe",id:e.$viewer.recipe.url,transitions:{enter:Ar(kQ),leave:{"recipes.edit":e.$elementTransitions.fadeOut,"recipes.show":e.$elementTransitions.fadeOut},"recipe-card":Ar(AQ)}}]]):lo("",!0)}}}),CQ=[{name:"home",path:"/",component:cF},{name:"recipes.index",path:"/recipes",redirect:{name:"home"}},{name:"recipes.create",path:"/recipes/create",component:uV,meta:{fullBleedHeader:!0,pageFooter:!0}},{name:"recipes.show",path:"/recipes/:recipe",component:sQ,meta:{fullBleedHeader:!0}},{name:"recipes.edit",path:"/recipes/:recipe/edit",component:cV,meta:{fullBleedHeader:!0,pageFooter:!0}},{name:"recipes.history",path:"/recipes/:recipe/history",component:()=>Og((()=>import("./RecipesHistory.665a4adf.js")),1?["assets/RecipesHistory.665a4adf.js","assets/noeldemartin-utils.esm.913e4d55.js","assets/RecipesHistory.79c2976c.css"]:void 0),meta:{header:!1,footer:!1}},{name:"viewer",path:"/viewer",component:Si({setup(e){let t=_r(Le("url"));const n=Lo((()=>lQ.recipe?"viewer-recipe-title":lQ.list?"viewer-recipes-list-title":"viewer-form-title"));return fi(VC.currentRoute,(()=>lQ.view(VC.getQueryParam("url")))),$i((()=>t.value&&setTimeout((()=>t.value=!1),1e3))),(e,r)=>{const i=RQ,a=_Q,o=fQ,s=uR;return Ha(),Ya(s,{"aria-labelledby":n.value},{default:ii((()=>[e.$viewer.recipe?(Ha(),Ya(i,{key:0})):e.$viewer.list?(Ha(),Ya(a,{key:1})):lo("",!0),io(ss,{"enter-active-class":e.$ui.animations&&t.value?"":"transition duration-1000","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":e.$ui.animations&&t.value?"":"transition duration-1000","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:ii((()=>[e.$viewer.recipe||e.$viewer.list?lo("",!0):va((Ha(),Ya(o,{key:0,class:"fixed inset-0 bg-white z-10"},null,512)),[[Bs,!t.value]])])),_:1},8,["enter-active-class","leave-active-class"])])),_:1},8,["aria-labelledby"])}}}),meta:{header:!1,reconnect:!1,requiresIndexedDB:!1}}];const OQ=ro("div",{class:"h-4 rounded-full overflow-hidden w-full bg-primary-200 mt-2 min-w-modal-content md:min-w-modal-content-md"},[ro("div",{class:"progress-bar-content bg-primary-500 rounded-full h-full"})],-1),DQ=Si({props:{text:sI()},setup(e){const t=Lo((()=>{var t;return null!=(t=e.text)?t:hR("ui.loading")}));return(e,n)=>{const r=rR,i=cS;return Ha(),Ya(i,{cancellable:!1},{default:ii((()=>[io(r,{text:t.value},null,8,["text"]),OQ])),_:1})}}});class jQ{constructor(){t(this,"booted"),t(this,"active"),this.booted=Wj.booted,this.active=Wj.cookbook.isResolved()}async initialize(){Wj.cookbook.onResolve((()=>this.active=!0)),Wj.cookbook.onReject((()=>this.active=!1))}getLocalModels(){return Wj.allRecipes.toArray()}mendRemoteModel(e){Wj.mendRecipe(e)}getLocalModelsWithRemoteFileUrls(){return Wj.allRecipes.toArray().map((e=>{var t;return{model:e,remoteFileUrls:Wj.remoteCookbookUrl&&(null==(t=e.imageUrl)?void 0:t.startsWith(Wj.remoteCookbookUrl))?[e.imageUrl]:[]}}))}foundModelUsingRdfAliases(){Wj.foundRecipeUsingRdfAliases()}}const TQ={$config:hB,$cookbook:Wj,$viewer:lQ};!async function({beforeMount:e}={}){await bL(UN,{name:"Umai",plugins:FN,services:TQ,routes:CQ,beforeLaunch:()=>async function(){await qC.registerHandler(Qj,new jQ),fC.registerComponent(cC.LoadingModal,DQ)}(),async beforeMount(t){VC.registerModelBinding("recipe",{find:e=>{var t;return(null==(t=Wj.recipes)?void 0:t.find((t=>t.slug===e)))||null},subscribe:(e,t)=>Qj.on("updated",(n=>n.slug===e&&t(n)))}),await(null==e?void 0:e(t))}})}();export{zl as A,Ul as B,Ll as D,Ua as F,Xb as H,Bl as L,Kl as N,Ql as Q,Qj as R,Fb as S,Vb as T,Rl as U,Fl as V,tw as Z,rR as _,_r as a,Ha as b,Ka as c,Si as d,Lo as e,Ya as f,ro as g,io as h,mo as i,Qb as j,xj as k,uR as l,uu as m,Lp as n,$i as o,ql as p,Kb as q,aI as r,Vl as s,pt as t,vl as u,ou as v,ii as w,El as x,$l as y,Nl as z};
